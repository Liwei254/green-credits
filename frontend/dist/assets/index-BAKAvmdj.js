var __defProp=Object.defineProperty,__typeError=e=>{throw TypeError(e)},__defNormalProp=(e,t,r)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__publicField=(e,t,r)=>__defNormalProp(e,"symbol"!=typeof t?t+"":t,r),__accessCheck=(e,t,r)=>t.has(e)||__typeError("Cannot "+r),__privateGet=(e,t,r)=>(__accessCheck(e,t,"read from private field"),r?r.call(e):t.get(e)),__privateAdd=(e,t,r)=>t.has(e)?__typeError("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),__privateSet=(e,t,r,n)=>(__accessCheck(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),_a,_data,_b,_headerPromise;import{r as reactExports,a as reactDomExports,g as getDefaultExportFromCjs,R as React$3,c as commonjsGlobal,b as React$4}from"./vendor-CFOUl9e9.js";import{J as JsonRpcProvider,B as BrowserProvider,C as Contract,f as formatUnits,s as sha256$1,p as parseUnits,i as id$2,a as formatEther,e as encodeBytes32String}from"./ethers-CpFdi8ww.js";import{L as Leaf,T as TrendingUp,n as nodeCrypto,Z as Zap}from"./ui-BbVoY6Pp.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},f$2=reactExports,k$2=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n$2=f$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,r){var n,i={},o=null,a=null;for(n in void 0!==r&&(o=""+r),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(a=t.ref),t)m$2.call(t,n)&&!p$1.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:k$2,type:e,key:o,ref:a,props:i,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$1,reactJsxRuntime_production_min.jsx=q,reactJsxRuntime_production_min.jsxs=q,jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,createRoot,m$1=reactDomExports;createRoot=m$1.createRoot,m$1.hydrateRoot;
/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
var PopStateEventType="popstate";function createBrowserHistory(e={}){return getUrlBasedHistory(function(e,t){let{pathname:r,search:n,hash:i}=e.location;return createLocation("",{pathname:r,search:n,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:createPath(t)},null,e)}function invariant$1(e,t){if(!1===e||null==e)throw new Error(t)}function warning(e,t){if(!e)try{throw new Error(t)}catch(r){}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(e,t){return{usr:e.state,key:e.key,idx:t}}function createLocation(e,t,r=null,n){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?parsePath(t):t,state:r,key:t&&t.key||n||createKey()}}function createPath({pathname:e="/",search:t="",hash:r=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),r&&"#"!==r&&(e+="#"===r.charAt(0)?r:"#"+r),e}function parsePath(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function getUrlBasedHistory(e,t,r,n={}){let{window:i=document.defaultView,v5Compat:o=!1}=n,a=i.history,s="POP",c=null,l=u();function u(){return(a.state||{idx:null}).idx}function d(){s="POP";let e=u(),t=null==e?null:e-l;l=e,c&&c({action:s,location:h.location,delta:t})}function p(e){return createBrowserURLImpl(e)}null==l&&(l=0,a.replaceState({...a.state,idx:l},""));let h={get action(){return s},get location(){return e(i,a)},listen(e){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(PopStateEventType,d),c=e,()=>{i.removeEventListener(PopStateEventType,d),c=null}},createHref:e=>t(i,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){s="PUSH";let r=createLocation(h.location,e,t);l=u()+1;let n=getHistoryState(r,l),d=h.createHref(r);try{a.pushState(n,"",d)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;i.location.assign(d)}o&&c&&c({action:s,location:h.location,delta:1})},replace:function(e,t){s="REPLACE";let r=createLocation(h.location,e,t);l=u();let n=getHistoryState(r,l),i=h.createHref(r);a.replaceState(n,"",i),o&&c&&c({action:s,location:h.location,delta:0})},go:e=>a.go(e)};return h}function createBrowserURLImpl(e,t=!1){let r="http://localhost";"undefined"!=typeof window&&(r="null"!==window.location.origin?window.location.origin:window.location.href),invariant$1(r,"No window.location.(origin|href) available to create URL");let n="string"==typeof e?e:createPath(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function matchRoutes(e,t,r="/"){return matchRoutesImpl(e,t,r,!1)}function matchRoutesImpl(e,t,r,n){let i=stripBasename(("string"==typeof t?parsePath(t):t).pathname||"/",r);if(null==i)return null;let o=flattenRoutes(e);rankRouteBranches(o);let a=null;for(let s=0;null==a&&s<o.length;++s){let e=decodePath(i);a=matchRouteBranch(o[s],e,n)}return a}function flattenRoutes(e,t=[],r=[],n="",i=!1){let o=(e,o,a=i,s)=>{let c={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};if(c.relativePath.startsWith("/")){if(!c.relativePath.startsWith(n)&&a)return;invariant$1(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length)}let l=joinPaths([n,c.relativePath]),u=r.concat(c);e.children&&e.children.length>0&&(invariant$1(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),flattenRoutes(e.children,t,u,l,a)),(null!=e.path||e.index)&&t.push({path:l,score:computeScore(l,e.index),routesMeta:u})};return e.forEach((e,t)=>{var r;if(""!==e.path&&(null==(r=e.path)?void 0:r.includes("?")))for(let n of explodeOptionalSegments(e.path))o(e,t,!0,n);else o(e,t)}),t}function explodeOptionalSegments(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,i=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===n.length)return i?[o,""]:[o];let a=explodeOptionalSegments(n.join("/")),s=[];return s.push(...a.map(e=>""===e?o:[o,e].join("/"))),i&&s.push(...a),s.map(t=>e.startsWith("/")&&""===t?"/":t)}function rankRouteBranches(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:compareIndexes(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=e=>"*"===e;function computeScore(e,t){let r=e.split("/"),n=r.length;return r.some(isSplat)&&(n+=splatPenalty),t&&(n+=indexRouteValue),r.filter(e=>!isSplat(e)).reduce((e,t)=>e+(paramRe.test(t)?dynamicSegmentValue:""===t?emptySegmentValue:staticSegmentValue),n)}function compareIndexes(e,t){return e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r])?e[e.length-1]-t[t.length-1]:0}function matchRouteBranch(e,t,r=!1){let{routesMeta:n}=e,i={},o="/",a=[];for(let s=0;s<n.length;++s){let e=n[s],c=s===n.length-1,l="/"===o?t:t.slice(o.length)||"/",u=matchPath({path:e.relativePath,caseSensitive:e.caseSensitive,end:c},l),d=e.route;if(!u&&c&&r&&!n[n.length-1].route.index&&(u=matchPath({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},l)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:joinPaths([o,u.pathname]),pathnameBase:normalizePathname(joinPaths([o,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(o=joinPaths([o,u.pathnameBase]))}return a}function matchPath(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=compilePath(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:n.reduce((e,{paramName:t,isOptional:r},n)=>{if("*"===t){let e=s[n]||"";a=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const i=s[n];return e[t]=r&&!i?void 0:(i||"").replace(/%2F/g,"/"),e},{}),pathname:o,pathnameBase:a,pattern:e}}function compilePath(e,t=!1,r=!0){warning("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function decodePath(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return warning(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function stripBasename(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function resolvePath(e,t="/"){let{pathname:r,search:n="",hash:i=""}="string"==typeof e?parsePath(e):e;return{pathname:r?r.startsWith("/")?r:resolvePathname(r,t):t,search:normalizeSearch(n),hash:normalizeHash(i)}}function resolvePathname(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}function getInvalidPathError(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function getResolveToMatches(e){let t=getPathContributingMatches(e);return t.map((e,r)=>r===t.length-1?e.pathname:e.pathnameBase)}function resolveTo(e,t,r,n=!1){let i;"string"==typeof e?i=parsePath(e):(i={...e},invariant$1(!i.pathname||!i.pathname.includes("?"),getInvalidPathError("?","pathname","search",i)),invariant$1(!i.pathname||!i.pathname.includes("#"),getInvalidPathError("#","pathname","hash",i)),invariant$1(!i.search||!i.search.includes("#"),getInvalidPathError("#","search","hash",i)));let o,a=""===e||""===i.pathname,s=a?"/":i.pathname;if(null==s)o=r;else{let e=t.length-1;if(!n&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let c=resolvePath(i,o),l=s&&"/"!==s&&s.endsWith("/"),u=(a||"."===s)&&r.endsWith("/");return c.pathname.endsWith("/")||!l&&!u||(c.pathname+="/"),c}var joinPaths=e=>e.join("/").replace(/\/\/+/g,"/"),normalizePathname=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",normalizeHash=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function isRouteErrorResponse(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState",reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);function useHref(e,{relative:t}={}){invariant$1(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=reactExports.useContext(NavigationContext),{hash:i,pathname:o,search:a}=useResolvedPath(e,{relative:t}),s=o;return"/"!==r&&(s="/"===o?r:joinPaths([r,o])),n.createHref({pathname:s,search:a,hash:i})}function useInRouterContext(){return null!=reactExports.useContext(LocationContext)}function useLocation(){return invariant$1(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}RouteErrorContext.displayName="RouteError";var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$2(e){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(e)}function useNavigate(){let{isDataRoute:e}=reactExports.useContext(RouteContext);return e?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant$1(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let e=reactExports.useContext(DataRouterContext),{basename:t,navigator:r}=reactExports.useContext(NavigationContext),{matches:n}=reactExports.useContext(RouteContext),{pathname:i}=useLocation(),o=JSON.stringify(getResolveToMatches(n)),a=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{a.current=!0}),reactExports.useCallback((n,s={})=>{if(warning(a.current,navigateEffectWarning),!a.current)return;if("number"==typeof n)return void r.go(n);let c=resolveTo(n,JSON.parse(o),i,"path"===s.relative);null==e&&"/"!==t&&(c.pathname="/"===c.pathname?t:joinPaths([t,c.pathname])),(s.replace?r.replace:r.push)(c,s.state,s)},[t,r,o,i,e])}function useResolvedPath(e,{relative:t}={}){let{matches:r}=reactExports.useContext(RouteContext),{pathname:n}=useLocation(),i=JSON.stringify(getResolveToMatches(r));return reactExports.useMemo(()=>resolveTo(e,JSON.parse(i),n,"path"===t),[e,i,n,t])}function useRoutes(e,t){return useRoutesImpl(e,t)}function useRoutesImpl(e,t,r,n,i){var o;invariant$1(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=reactExports.useContext(NavigationContext),{matches:s}=reactExports.useContext(RouteContext),c=s[s.length-1],l=c?c.params:{},u=c?c.pathname:"/",d=c?c.pathnameBase:"/",p=c&&c.route;{let e=p&&p.path||"";warningOnce(u,!p||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let h,m=useLocation();if(t){let e="string"==typeof t?parsePath(t):t;invariant$1("/"===d||(null==(o=e.pathname)?void 0:o.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${e.pathname}" was given in the \`location\` prop.`),h=e}else h=m;let f=h.pathname||"/",x=f;if("/"!==d){let e=d.replace(/^\//,"").split("/");x="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let g=matchRoutes(e,{pathname:x});warning(p||null!=g,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),warning(null==g||void 0!==g[g.length-1].route.element||void 0!==g[g.length-1].route.Component||void 0!==g[g.length-1].route.lazy,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=_renderMatches(g&&g.map(e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:joinPaths([d,a.encodeLocation?a.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:joinPaths([d,a.encodeLocation?a.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),s,r,n,i);return t&&y?reactExports.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},y):y}function DefaultErrorComponent(){let e=useRouteError(),t=isRouteErrorResponse(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},a=null;return a=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:o},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:o},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},t),r?reactExports.createElement("pre",{style:i},r):null,a)}reactExports.createContext(null);var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError&&this.props.unstable_onError(e,t)}render(){return void 0!==this.state.error?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:e,match:t,children:r}){let n=reactExports.useContext(DataRouterContext);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),reactExports.createElement(RouteContext.Provider,{value:e},r)}function _renderMatches(e,t=[],r=null,n=null,i=null){if(null==e){if(!r)return null;if(r.errors)e=r.matches;else{if(0!==t.length||r.initialized||!(r.matches.length>0))return null;e=r.matches}}let o=e,a=null==r?void 0:r.errors;if(null!=a){let e=o.findIndex(e=>e.route.id&&void 0!==(null==a?void 0:a[e.route.id]));invariant$1(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,e+1))}let s=!1,c=-1;if(r)for(let l=0;l<o.length;l++){let e=o[l];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=l),e.route.id){let{loaderData:t,errors:n}=r,i=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!n||void 0===n[e.route.id]);if(e.route.lazy||i){s=!0,o=c>=0?o.slice(0,c+1):[o[0]];break}}}return o.reduceRight((e,i,l)=>{let u,d=!1,p=null,h=null;r&&(u=a&&i.route.id?a[i.route.id]:void 0,p=i.route.errorElement||defaultErrorElement,s&&(c<0&&0===l?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,h=null):c===l&&(d=!0,h=i.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,l+1)),f=()=>{let t;return t=u?p:d?h:i.route.Component?reactExports.createElement(i.route.Component,null):i.route.element?i.route.element:e,reactExports.createElement(RenderedRoute,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:t})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===l)?reactExports.createElement(RenderErrorBoundary,{location:r.location,revalidation:r.revalidation,component:p,error:u,children:f(),routeContext:{outlet:null,matches:m,isDataRoute:!0},unstable_onError:n}):f()},null)}function getDataRouterConsoleError(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(e){let t=reactExports.useContext(DataRouterContext);return invariant$1(t,getDataRouterConsoleError(e)),t}function useDataRouterState(e){let t=reactExports.useContext(DataRouterStateContext);return invariant$1(t,getDataRouterConsoleError(e)),t}function useRouteContext(e){let t=reactExports.useContext(RouteContext);return invariant$1(t,getDataRouterConsoleError(e)),t}function useCurrentRouteId(e){let t=useRouteContext(e),r=t.matches[t.matches.length-1];return invariant$1(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){var e;let t=reactExports.useContext(RouteErrorContext),r=useDataRouterState("useRouteError"),n=useCurrentRouteId("useRouteError");return void 0!==t?t:null==(e=r.errors)?void 0:e[n]}function useNavigateStable(){let{router:e}=useDataRouterContext("useNavigate"),t=useCurrentRouteId("useNavigate"),r=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{r.current=!0}),reactExports.useCallback(async(n,i={})=>{warning(r.current,navigateEffectWarning),r.current&&("number"==typeof n?e.navigate(n):await e.navigate(n,{fromRouteId:t,...i}))},[e,t])}var alreadyWarned={};function warningOnce(e,t,r){t||alreadyWarned[e]||(alreadyWarned[e]=!0,warning(!1,r))}function DataRoutes({routes:e,future:t,state:r,unstable_onError:n}){return useRoutesImpl(e,void 0,r,n,t)}function Navigate({to:e,replace:t,state:r,relative:n}){invariant$1(useInRouterContext(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=reactExports.useContext(NavigationContext);warning(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=reactExports.useContext(RouteContext),{pathname:a}=useLocation(),s=useNavigate(),c=resolveTo(e,getResolveToMatches(o),a,"path"===n),l=JSON.stringify(c);return reactExports.useEffect(()=>{s(JSON.parse(l),{replace:t,state:r,relative:n})},[s,l,n,t,r]),null}function Route(e){invariant$1(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:i,static:o=!1}){invariant$1(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=e.replace(/^\/*/,"/"),s=reactExports.useMemo(()=>({basename:a,navigator:i,static:o,future:{}}),[a,i,o]);"string"==typeof r&&(r=parsePath(r));let{pathname:c="/",search:l="",hash:u="",state:d=null,key:p="default"}=r,h=reactExports.useMemo(()=>{let e=stripBasename(c,a);return null==e?null:{location:{pathname:e,search:l,hash:u,state:d,key:p},navigationType:n}},[a,c,l,u,d,p,n]);return warning(null!=h,`<Router basename="${a}"> is not able to match the URL "${c}${l}${u}" because it does not start with the basename, so the <Router> won't render anything.`),null==h?null:reactExports.createElement(NavigationContext.Provider,{value:s},reactExports.createElement(LocationContext.Provider,{children:t,value:h}))}function Routes({children:e,location:t}){return useRoutes(createRoutesFromChildren(e),t)}function createRoutesFromChildren(e,t=[]){let r=[];return reactExports.Children.forEach(e,(e,n)=>{if(!reactExports.isValidElement(e))return;let i=[...t,n];if(e.type===reactExports.Fragment)return void r.push.apply(r,createRoutesFromChildren(e.props.children,i));invariant$1(e.type===Route,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant$1(!e.props.index||!e.props.children,"An index route cannot have child routes.");let o={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=createRoutesFromChildren(e.props.children,i)),r.push(o)}),r}reactExports.memo(DataRoutes);var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(e){return null!=e&&"string"==typeof e.tagName}function isButtonElement(e){return isHtmlElement(e)&&"button"===e.tagName.toLowerCase()}function isFormElement(e){return isHtmlElement(e)&&"form"===e.tagName.toLowerCase()}function isInputElement(e){return isHtmlElement(e)&&"input"===e.tagName.toLowerCase()}function isModifiedEvent(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function shouldProcessLinkClick(e,t){return!(0!==e.button||t&&"_self"!==t||isModifiedEvent(e))}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(null===_formDataSupportsSubmitter)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch(e){_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(e){return null==e||supportedFormEncTypes.has(e)?e:(warning(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null)}function getFormSubmissionInfo(e,t){let r,n,i,o,a;if(isFormElement(e)){let a=e.getAttribute("action");n=a?stripBasename(a,t):null,r=e.getAttribute("method")||defaultMethod,i=getFormEncType(e.getAttribute("enctype"))||defaultEncType,o=new FormData(e)}else if(isButtonElement(e)||isInputElement(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let s=e.getAttribute("formaction")||a.getAttribute("action");if(n=s?stripBasename(s,t):null,r=e.getAttribute("formmethod")||a.getAttribute("method")||defaultMethod,i=getFormEncType(e.getAttribute("formenctype"))||getFormEncType(a.getAttribute("enctype"))||defaultEncType,o=new FormData(a,e),!isFormDataSubmitterSupported()){let{name:t,type:r,value:n}=e;if("image"===r){let e=t?`${t}.`:"";o.append(`${e}x`,"0"),o.append(`${e}y`,"0")}else t&&o.append(t,n)}}else{if(isHtmlElement(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=defaultMethod,n=null,i=defaultEncType,a=e}return o&&"text/plain"===i&&(a=o,o=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:o,body:a}}function invariant2(e,t){if(!1===e||null==e)throw new Error(t)}function singleFetchUrl(e,t,r){let n="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname=`_root.${r}`:t&&"/"===stripBasename(n.pathname,t)?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function loadRouteModule(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}async function getKeyedPrefetchLinks(e,t,r){return dedupeLinkDescriptors((await Promise.all(e.map(async e=>{let n=t.routes[e.route.id];if(n){let e=await loadRouteModule(n,r);return e.links?e.links():[]}return[]}))).flat(1).filter(isHtmlLinkDescriptor).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}function getNewMatchesForLinks(e,t,r,n,i,o){let a=(e,t)=>!r[t]||e.route.id!==r[t].route.id,s=(e,t)=>{var n;return r[t].pathname!==e.pathname||(null==(n=r[t].route.path)?void 0:n.endsWith("*"))&&r[t].params["*"]!==e.params["*"]};return"assets"===o?t.filter((e,t)=>a(e,t)||s(e,t)):"data"===o?t.filter((t,o)=>{var c;let l=n.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(a(t,o)||s(t,o))return!0;if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null==(c=r[0])?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof n)return n}return!0}):[]}function getModuleLinkHrefs(e,t,{includeHydrateFallback:r}={}){return dedupeHrefs(e.map(e=>{let n=t.routes[e.route.id];if(!n)return[];let i=[n.module];return n.clientActionModule&&(i=i.concat(n.clientActionModule)),n.clientLoaderModule&&(i=i.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(i=i.concat(n.hydrateFallbackModule)),n.imports&&(i=i.concat(n.imports)),i}).flat(1))}function dedupeHrefs(e){return[...new Set(e)]}function sortKeys(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function dedupeLinkDescriptors(e,t){let r=new Set;return new Set(t),e.reduce((e,t)=>{let n=JSON.stringify(sortKeys(t));return r.has(n)||(r.add(n),e.push({key:n,link:t})),e},[])}function useDataRouterContext2(){let e=reactExports.useContext(DataRouterContext);return invariant2(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function useDataRouterStateContext(){let e=reactExports.useContext(DataRouterStateContext);return invariant2(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var FrameworkContext=reactExports.createContext(void 0);function useFrameworkContext(){let e=reactExports.useContext(FrameworkContext);return invariant2(e,"You must render this element inside a <HydratedRouter> element"),e}function usePrefetchBehavior(e,t){let r=reactExports.useContext(FrameworkContext),[n,i]=reactExports.useState(!1),[o,a]=reactExports.useState(!1),{onFocus:s,onBlur:c,onMouseEnter:l,onMouseLeave:u,onTouchStart:d}=t,p=reactExports.useRef(null);reactExports.useEffect(()=>{if("render"===e&&a(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{a(e.isIntersecting)})},{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}},[e]),reactExports.useEffect(()=>{if(n){let e=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(e)}}},[n]);let h=()=>{i(!0)},m=()=>{i(!1),a(!1)};return r?"intent"!==e?[o,p,{}]:[o,p,{onFocus:composeEventHandlers(s,h),onBlur:composeEventHandlers(c,m),onMouseEnter:composeEventHandlers(l,h),onMouseLeave:composeEventHandlers(u,m),onTouchStart:composeEventHandlers(d,h)}]:[!1,p,{}]}function composeEventHandlers(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function PrefetchPageLinks({page:e,...t}){let{router:r}=useDataRouterContext2(),n=reactExports.useMemo(()=>matchRoutes(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?reactExports.createElement(PrefetchPageLinksImpl,{page:e,matches:n,...t}):null}function useKeyedPrefetchLinks(e){let{manifest:t,routeModules:r}=useFrameworkContext(),[n,i]=reactExports.useState([]);return reactExports.useEffect(()=>{let n=!1;return getKeyedPrefetchLinks(e,t,r).then(e=>{n||i(e)}),()=>{n=!0}},[e,t,r]),n}function PrefetchPageLinksImpl({page:e,matches:t,...r}){let n=useLocation(),{manifest:i,routeModules:o}=useFrameworkContext(),{basename:a}=useDataRouterContext2(),{loaderData:s,matches:c}=useDataRouterStateContext(),l=reactExports.useMemo(()=>getNewMatchesForLinks(e,t,c,i,n,"data"),[e,t,c,i,n]),u=reactExports.useMemo(()=>getNewMatchesForLinks(e,t,c,i,n,"assets"),[e,t,c,i,n]),d=reactExports.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let r=new Set,c=!1;if(t.forEach(e=>{var t;let n=i.routes[e.route.id];n&&n.hasLoader&&(!l.some(t=>t.route.id===e.route.id)&&e.route.id in s&&(null==(t=o[e.route.id])?void 0:t.shouldRevalidate)||n.hasClientLoader?c=!0:r.add(e.route.id))}),0===r.size)return[];let u=singleFetchUrl(e,a,"data");return c&&r.size>0&&u.searchParams.set("_routes",t.filter(e=>r.has(e.route.id)).map(e=>e.route.id).join(",")),[u.pathname+u.search]},[a,s,n,i,l,t,e,o]),p=reactExports.useMemo(()=>getModuleLinkHrefs(u,i),[u,i]),h=useKeyedPrefetchLinks(u);return reactExports.createElement(reactExports.Fragment,null,d.map(e=>reactExports.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...r})),p.map(e=>reactExports.createElement("link",{key:e,rel:"modulepreload",href:e,...r})),h.map(({key:e,link:t})=>reactExports.createElement("link",{key:e,nonce:r.nonce,...t})))}function mergeRefs(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}FrameworkContext.displayName="FrameworkContext";var isBrowser$1="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{isBrowser$1&&(window.__reactRouterVersion="7.9.5")}catch(e3){}function BrowserRouter({basename:e,children:t,window:r}){let n=reactExports.useRef();null==n.current&&(n.current=createBrowserHistory({window:r,v5Compat:!0}));let i=n.current,[o,a]=reactExports.useState({action:i.action,location:i.location}),s=reactExports.useCallback(e=>{reactExports.startTransition(()=>a(e))},[a]);return reactExports.useLayoutEffect(()=>i.listen(s),[i,s]),reactExports.createElement(Router,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link$1=reactExports.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:n,reloadDocument:i,replace:o,state:a,target:s,to:c,preventScrollReset:l,viewTransition:u,...d},p){let h,{basename:m}=reactExports.useContext(NavigationContext),f="string"==typeof c&&ABSOLUTE_URL_REGEX2.test(c),x=!1;if("string"==typeof c&&f&&(h=c,isBrowser$1))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),r=stripBasename(t.pathname,m);t.origin===e.origin&&null!=r?c=r+t.search+t.hash:x=!0}catch(e3){warning(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let g=useHref(c,{relative:n}),[y,b,v]=usePrefetchBehavior(r,d),E=useLinkClickHandler(c,{replace:o,state:a,target:s,preventScrollReset:l,relative:n,viewTransition:u});let w=reactExports.createElement("a",{...d,...v,href:h||g,onClick:x||i?e:function(t){e&&e(t),t.defaultPrevented||E(t)},ref:mergeRefs(p,b),target:s,"data-discover":f||"render"!==t?void 0:"true"});return y&&!f?reactExports.createElement(reactExports.Fragment,null,w,reactExports.createElement(PrefetchPageLinks,{page:g})):w});Link$1.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:n=!1,style:i,to:o,viewTransition:a,children:s,...c},l){let u=useResolvedPath(o,{relative:c.relative}),d=useLocation(),p=reactExports.useContext(DataRouterStateContext),{navigator:h,basename:m}=reactExports.useContext(NavigationContext),f=null!=p&&useViewTransitionState(u)&&!0===a,x=h.encodeLocation?h.encodeLocation(u).pathname:u.pathname,g=d.pathname,y=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;t||(g=g.toLowerCase(),y=y?y.toLowerCase():null,x=x.toLowerCase()),y&&m&&(y=stripBasename(y,m)||y);const b="/"!==x&&x.endsWith("/")?x.length-1:x.length;let v,E=g===x||!n&&g.startsWith(x)&&"/"===g.charAt(b),w=null!=y&&(y===x||!n&&y.startsWith(x)&&"/"===y.charAt(x.length)),S={isActive:E,isPending:w,isTransitioning:f},j=E?e:void 0;v="function"==typeof r?r(S):[r,E?"active":null,w?"pending":null,f?"transitioning":null].filter(Boolean).join(" ");let A="function"==typeof i?i(S):i;return reactExports.createElement(Link$1,{...c,"aria-current":j,className:v,ref:l,style:A,to:o,viewTransition:a},"function"==typeof s?s(S):s)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:i,state:o,method:a=defaultMethod,action:s,onSubmit:c,relative:l,preventScrollReset:u,viewTransition:d,...p},h)=>{let m=useSubmit(),f=useFormAction(s,{relative:l}),x="get"===a.toLowerCase()?"get":"post",g="string"==typeof s&&ABSOLUTE_URL_REGEX2.test(s);return reactExports.createElement("form",{ref:h,method:x,action:f,onSubmit:n?c:e=>{if(c&&c(e),e.defaultPrevented)return;e.preventDefault();let n=e.nativeEvent.submitter,s=(null==n?void 0:n.getAttribute("formmethod"))||a;m(n||e.currentTarget,{fetcherKey:t,method:s,navigate:r,replace:i,state:o,relative:l,preventScrollReset:u,viewTransition:d})},...p,"data-discover":g||"render"!==e?void 0:"true"})});function getDataRouterConsoleError2(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(e){let t=reactExports.useContext(DataRouterContext);return invariant$1(t,getDataRouterConsoleError2(e)),t}function useLinkClickHandler(e,{target:t,replace:r,state:n,preventScrollReset:i,relative:o,viewTransition:a}={}){let s=useNavigate(),c=useLocation(),l=useResolvedPath(e,{relative:o});return reactExports.useCallback(u=>{if(shouldProcessLinkClick(u,t)){u.preventDefault();let t=void 0!==r?r:createPath(c)===createPath(l);s(e,{replace:t,state:n,preventScrollReset:i,relative:o,viewTransition:a})}},[c,s,l,r,n,t,e,i,o,a])}Form.displayName="Form";var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:e}=useDataRouterContext3("useSubmit"),{basename:t}=reactExports.useContext(NavigationContext),r=useRouteId();return reactExports.useCallback(async(n,i={})=>{let{action:o,method:a,encType:s,formData:c,body:l}=getFormSubmissionInfo(n,t);if(!1===i.navigate){let t=i.fetcherKey||getUniqueFetcherId();await e.fetch(t,r,i.action||o,{preventScrollReset:i.preventScrollReset,formData:c,body:l,formMethod:i.method||a,formEncType:i.encType||s,flushSync:i.flushSync})}else await e.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:c,body:l,formMethod:i.method||a,formEncType:i.encType||s,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,r])}function useFormAction(e,{relative:t}={}){let{basename:r}=reactExports.useContext(NavigationContext),n=reactExports.useContext(RouteContext);invariant$1(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),o={...useResolvedPath(e||".",{relative:t})},a=useLocation();if(null==e){o.search=a.search;let e=new URLSearchParams(o.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let r=e.toString();o.search=r?`?${r}`:""}}return e&&"."!==e||!i.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),"/"!==r&&(o.pathname="/"===o.pathname?r:joinPaths([r,o.pathname])),createPath(o)}function useViewTransitionState(e,{relative:t}={}){let r=reactExports.useContext(ViewTransitionContext);invariant$1(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=useDataRouterContext3("useViewTransitionState"),i=useResolvedPath(e,{relative:t});if(!r.isTransitioning)return!1;let o=stripBasename(r.currentLocation.pathname,n)||r.currentLocation.pathname,a=stripBasename(r.nextLocation.pathname,n)||r.nextLocation.pathname;return null!=matchPath(i.pathname,a)||null!=matchPath(i.pathname,o)}const navCategories=[{label:"Core Actions",items:[{to:"/dashboard",label:"Dashboard"},{to:"/submit",label:"Submit Action"},{to:"/actions",label:"Actions"}]},{label:"Community & Impact",items:[{to:"/leaderboard",label:"Leaderboard"},{to:"/donate",label:"Donate"},{to:"/matching",label:"Matching"},{to:"/governance",label:"Governance"}]},{label:"Admin",items:[{to:"/admin",label:"Admin"},{to:"/admin/registry",label:"Registry"},{to:"/admin/reputation",label:"Reputation"}]}],Navbar=({provider:e,address:t,setAddress:r,connected:n})=>{const[i,o]=reactExports.useState(null),[a,s]=reactExports.useState(!1),c=reactExports.useRef({}),l=({isActive:e})=>"nav-link "+(e?"text-green-400 font-semibold":"text-slate-300 hover:text-green-300");reactExports.useEffect(()=>{const e=e=>{var t;i&&!(null==(t=c.current[i])?void 0:t.contains(e.target))&&o(null)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[i]);return jsxRuntimeExports.jsx("header",{className:"sticky top-0 z-50 border-b border-white/10 bg-[#0D1117]/60 backdrop-blur-md",children:jsxRuntimeExports.jsxs("div",{className:"mx-auto max-w-7xl px-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex h-16 items-center justify-between",children:[jsxRuntimeExports.jsx("button",{className:"lg:hidden p-2 text-slate-300 hover:text-green-300 transition-colors",onClick:()=>s(!a),"aria-label":"Toggle mobile menu",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:a?jsxRuntimeExports.jsx("path",{d:"M6 18L18 6M6 6l12 12"}):jsxRuntimeExports.jsx("path",{d:"M4 6h16M4 12h16M4 18h16"})})}),jsxRuntimeExports.jsxs("nav",{className:"hidden lg:flex items-center gap-8 text-sm",children:[jsxRuntimeExports.jsx(NavLink,{to:"/",className:l,end:!0,children:"Home"}),jsxRuntimeExports.jsx(NavLink,{to:"/dashboard",className:l,children:"Dashboard"}),navCategories.map(e=>jsxRuntimeExports.jsxs("div",{className:"relative",ref:t=>c.current[e.label]=t,children:[jsxRuntimeExports.jsxs("button",{className:"flex items-center gap-1 text-slate-300 hover:text-green-300 transition-colors "+(i===e.label?"text-green-400":""),"aria-haspopup":"true","aria-expanded":i===e.label,onClick:()=>o(i===e.label?null:e.label),onKeyDown:t=>{return r=t,n=e.label,void(["Enter"," "].includes(r.key)?(r.preventDefault(),o(i===n?null:n)):"Escape"===r.key&&o(null));var r,n},children:[e.label,jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 transition-transform duration-200 "+(i===e.label?"rotate-180":""),fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{d:"M19 9l-7 7-7-7"})})]}),i===e.label&&jsxRuntimeExports.jsx("div",{className:"absolute left-0 mt-2 w-48 bg-[#0D1117]/95 border border-white/10 rounded-lg shadow-lg backdrop-blur-md transition-all duration-200 ease-out opacity-100 scale-100 transform animate-slideDown z-50",children:jsxRuntimeExports.jsx("div",{className:"py-2",children:e.items.map(e=>jsxRuntimeExports.jsx(NavLink,{to:e.to,className:({isActive:e})=>"block px-4 py-2 text-sm rounded-md transition-colors "+(e?"bg-green-500/20 text-green-400":"text-slate-300 hover:bg-white/10 hover:text-green-300"),onClick:()=>o(null),children:e.label},e.to))})})]},e.label)),jsxRuntimeExports.jsx(NavLink,{to:"/retirement",className:l,children:"Retirement"})]})]}),a&&jsxRuntimeExports.jsx("div",{className:"lg:hidden border-t border-white/10 bg-[#0D1117]/95 backdrop-blur-md animate-fadeIn",children:jsxRuntimeExports.jsxs("nav",{className:"px-4 py-4 space-y-2",children:[jsxRuntimeExports.jsx(NavLink,{to:"/",className:l,onClick:()=>s(!1),children:"Home"}),navCategories.map(e=>jsxRuntimeExports.jsxs("details",{className:"group",children:[jsxRuntimeExports.jsxs("summary",{className:"cursor-pointer py-2 flex justify-between items-center text-slate-300 hover:text-green-300",children:[e.label,jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 group-open:rotate-180 transition-transform",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{d:"M19 9l-7 7-7-7"})})]}),jsxRuntimeExports.jsx("ul",{className:"ml-4 mt-2 space-y-1",children:e.items.map(e=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(NavLink,{to:e.to,className:({isActive:e})=>"block py-1 text-sm "+(e?"text-green-400":"text-slate-300 hover:text-green-300"),onClick:()=>s(!1),children:e.label})},e.to))})]},e.label)),jsxRuntimeExports.jsx(NavLink,{to:"/retirement",className:l,onClick:()=>s(!1),children:"Retirement"})]})})]})})};let e={data:""},t=t=>{if("object"==typeof window){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||e},l=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,a$1=/\/\*[^]*?\*\/|  +/g,n$1=/\n+/g,o=(e,t)=>{let r="",n="",i="";for(let a in e){let s=e[a];"@"==a[0]?"i"==a[1]?r=a+" "+s+";":n+="f"==a[1]?o(s,a):a+"{"+o(s,"k"==a[1]?"":t)+"}":"object"==typeof s?n+=o(s,t?t.replace(/([^,])+/g,e=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):a):null!=s&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=o.p?o.p(a,s):a+":"+s+";")}return r+(t&&i?t+"{"+i+"}":i)+n},c$1={},s$1=e=>{if("object"==typeof e){let t="";for(let r in e)t+=r+s$1(e[r]);return t}return e},i=(e,t,r,n,i)=>{let a=s$1(e),s=c$1[a]||(c$1[a]=(e=>{let t=0,r=11;for(;t<e.length;)r=101*r+e.charCodeAt(t++)>>>0;return"go"+r})(a));if(!c$1[s]){let t=a!==e?e:(e=>{let t,r,n=[{}];for(;t=l.exec(e.replace(a$1,""));)t[4]?n.shift():t[3]?(r=t[3].replace(n$1," ").trim(),n.unshift(n[0][r]=n[0][r]||{})):n[0][t[1]]=t[2].replace(n$1," ").trim();return n[0]})(e);c$1[s]=o(i?{["@keyframes "+s]:t}:t,r?"":"."+s)}let c=r&&c$1.g?c$1.g:null;return r&&(c$1.g=c$1[s]),u=c$1[s],d=t,p=n,(h=c)?d.data=d.data.replace(h,u):-1===d.data.indexOf(u)&&(d.data=p?u+d.data:d.data+u),s;var u,d,p,h},p=(e,t,r)=>e.reduce((e,n,i)=>{let a=t[i];if(a&&a.call){let e=a(r),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;a=t?"."+t:e&&"object"==typeof e?e.props?"":o(e,""):!1===e?"":e}return e+n+(null==a?"":a)},""),d,f$1,g;function u(e){let r=this||{},n=e.call?e(r.p):e;return i(n.unshift?n.raw?p(n,[].slice.call(arguments,1),r.p):n.reduce((e,t)=>Object.assign(e,t&&t.call?t(r.p):t),{}):n,t(r.target),r.g,r.o,r.k)}u.bind({g:1});let h$1=u.bind({k:1});function m(e,t,r,n){o.p=t,d=e,f$1=r,g=n}function w$1(e,t){let r=this||{};return function(){let t=arguments;return function n(i,o){let a=Object.assign({},i),s=a.className||n.className;r.p=Object.assign({theme:f$1&&f$1()},a),r.o=/ *go\d+/.test(s),a.className=u.apply(r,t)+(s?" "+s:"");let c=e;return e[0]&&(c=a.as||e,delete a.as),g&&c[0]&&g(a),d(c,a)}}}var Z=e=>"function"==typeof e,h=(e,t)=>Z(e)?e(t):e,W=(()=>{let e=0;return()=>(++e).toString()})(),E=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),re$1=20,k$1="default",H=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case 2:let{toast:n}=t;return H(e,{type:e.toasts.find(e=>e.id===n.id)?1:0,toast:n});case 3:let{toastId:i}=t;return{...e,toasts:e.toasts.map(e=>e.id===i||void 0===i?{...e,dismissed:!0,visible:!1}:e)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let o=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+o}))}}},v=[],j={toasts:[],pausedAt:void 0,settings:{toastLimit:re$1}},f={},Y=(e,t=k$1)=>{f[t]=H(f[t]||j,e),v.forEach(([e,r])=>{e===t&&r(f[t])})},_=e=>Object.keys(f).forEach(t=>Y(e,t)),Q=e=>Object.keys(f).find(t=>f[t].toasts.some(t=>t.id===e)),S=(e=k$1)=>t=>{Y(t,e)},se={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},V=(e={},t=k$1)=>{let[r,n]=reactExports.useState(f[t]||j),i=reactExports.useRef(f[t]);reactExports.useEffect(()=>(i.current!==f[t]&&n(f[t]),v.push([t,n]),()=>{let e=v.findIndex(([e])=>e===t);e>-1&&v.splice(e,1)}),[t]);let o=r.toasts.map(t=>{var r,n,i;return{...e,...e[t.type],...t,removeDelay:t.removeDelay||(null==(r=e[t.type])?void 0:r.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(n=e[t.type])?void 0:n.duration)||(null==e?void 0:e.duration)||se[t.type],style:{...e.style,...null==(i=e[t.type])?void 0:i.style,...t.style}}});return{...r,toasts:o}},ie=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(null==r?void 0:r.id)||W()}),P$1=e=>(t,r)=>{let n=ie(t,e,r);return S(n.toasterId||Q(n.id))({type:2,toast:n}),n.id},n=(e,t)=>P$1("blank")(e,t);n.error=P$1("error"),n.success=P$1("success"),n.loading=P$1("loading"),n.custom=P$1("custom"),n.dismiss=(e,t)=>{let r={type:3,toastId:e};t?S(t)(r):_(r)},n.dismissAll=e=>n.dismiss(void 0,e),n.remove=(e,t)=>{let r={type:4,toastId:e};t?S(t)(r):_(r)},n.removeAll=e=>n.remove(void 0,e),n.promise=(e,t,r)=>{let i=n.loading(t.loading,{...r,...null==r?void 0:r.loading});return"function"==typeof e&&(e=e()),e.then(e=>{let o=t.success?h(t.success,e):void 0;return o?n.success(o,{id:i,...r,...null==r?void 0:r.success}):n.dismiss(i),e}).catch(e=>{let o=t.error?h(t.error,e):void 0;o?n.error(o,{id:i,...r,...null==r?void 0:r.error}):n.dismiss(i)}),e};var ce=1e3,w=(e,t="default")=>{let{toasts:r,pausedAt:i}=V(e,t),o=reactExports.useRef(new Map).current,a=reactExports.useCallback((e,t=ce)=>{if(o.has(e))return;let r=setTimeout(()=>{o.delete(e),s({type:4,toastId:e})},t);o.set(e,r)},[]);reactExports.useEffect(()=>{if(i)return;let e=Date.now(),o=r.map(r=>{if(r.duration===1/0)return;let i=(r.duration||0)+r.pauseDuration-(e-r.createdAt);if(!(i<0))return setTimeout(()=>n.dismiss(r.id,t),i);r.visible&&n.dismiss(r.id)});return()=>{o.forEach(e=>e&&clearTimeout(e))}},[r,i,t]);let s=reactExports.useCallback(S(t),[t]),c=reactExports.useCallback(()=>{s({type:5,time:Date.now()})},[s]),l=reactExports.useCallback((e,t)=>{s({type:1,toast:{id:e,height:t}})},[s]),u=reactExports.useCallback(()=>{i&&s({type:6,time:Date.now()})},[i,s]),d=reactExports.useCallback((e,t)=>{let{reverseOrder:n=!1,gutter:i=8,defaultPosition:o}=t||{},a=r.filter(t=>(t.position||o)===(e.position||o)&&t.height),s=a.findIndex(t=>t.id===e.id),c=a.filter((e,t)=>t<s&&e.visible).length;return a.filter(e=>e.visible).slice(...n?[c+1]:[0,c]).reduce((e,t)=>e+(t.height||0)+i,0)},[r]);return reactExports.useEffect(()=>{r.forEach(e=>{if(e.dismissed)a(e.id,e.removeDelay);else{let t=o.get(e.id);t&&(clearTimeout(t),o.delete(e.id))}})},[r,a]),{toasts:r,handlers:{updateHeight:l,startPause:c,endPause:u,calculateOffset:d}}},de=h$1`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,me=h$1`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,le=h$1`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,C=w$1("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${de} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${me} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${le} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Te=h$1`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,F=w$1("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Te} 1s linear infinite;
`,ge=h$1`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,he=h$1`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,L=w$1("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ge} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${he} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,be=w$1("div")`
  position: absolute;
`,Se=w$1("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Ae=h$1`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Pe=w$1("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Ae} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,$=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return void 0!==t?"string"==typeof t?reactExports.createElement(Pe,null,t):t:"blank"===r?null:reactExports.createElement(Se,null,reactExports.createElement(F,{...n}),"loading"!==r&&reactExports.createElement(be,null,"error"===r?reactExports.createElement(C,{...n}):reactExports.createElement(L,{...n})))},Re=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,Ee=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,ve="0%{opacity:0;} 100%{opacity:1;}",De="0%{opacity:1;} 100%{opacity:0;}",Oe=w$1("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Ie=w$1("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,ke=(e,t)=>{let r=e.includes("top")?1:-1,[n,i]=E()?[ve,De]:[Re(r),Ee(r)];return{animation:t?`${h$1(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${h$1(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},N=reactExports.memo(({toast:e,position:t,style:r,children:n})=>{let i=e.height?ke(e.position||t||"top-center",e.visible):{opacity:0},o=reactExports.createElement($,{toast:e}),a=reactExports.createElement(Ie,{...e.ariaProps},h(e.message,e));return reactExports.createElement(Oe,{className:e.className,style:{...i,...r,...e.style}},"function"==typeof n?n({icon:o,message:a}):reactExports.createElement(reactExports.Fragment,null,o,a))});m(reactExports.createElement);var we=({id:e,className:t,style:r,onHeightUpdate:n,children:i})=>{let o=reactExports.useCallback(t=>{if(t){let r=()=>{let r=t.getBoundingClientRect().height;n(e,r)};r(),new MutationObserver(r).observe(t,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return reactExports.createElement("div",{ref:o,className:t,style:r},i)},Me=(e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:E()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...i}},Ce=u`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,D=16,Fe=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:i,toasterId:o,containerStyle:a,containerClassName:s})=>{let{toasts:c,handlers:l}=w(r,o);return reactExports.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:D,left:D,right:D,bottom:D,pointerEvents:"none",...a},className:s,onMouseEnter:l.startPause,onMouseLeave:l.endPause},c.map(r=>{let o=r.position||t,a=l.calculateOffset(r,{reverseOrder:e,gutter:n,defaultPosition:t}),s=Me(o,a);return reactExports.createElement(we,{id:r.id,key:r.id,onHeightUpdate:l.updateHeight,className:r.visible?Ce:"",style:s},"custom"===r.type?h(r.message,r):i?i(r):reactExports.createElement(N,{toast:r,position:o}))}))},zt=n;const MOONBASE_PARAMS$1={chainId:"0x507",chainName:"Moonbase Alpha",nativeCurrency:{name:"Dev",symbol:"DEV",decimals:18},rpcUrls:["https://rpc.api.moonbase.moonbeam.network"],blockExplorerUrls:["https://moonbase.moonscan.io"]};function getInjectedProvider$1(){const e=window.ethereum;if(!e)return null;if(Array.isArray(e.providers)){return e.providers.find(e=>e&&e.isMetaMask)??e.providers[0]}return e}const WalletConnect=reactExports.forwardRef(({address:e,setAddress:t,setProvider:r,isDemoMode:n=!1,setIsDemoMode:i},o)=>{const a=async()=>{const e=getInjectedProvider$1();if(e)try{if(await e.request({method:"eth_chainId"})!==MOONBASE_PARAMS$1.chainId)try{await e.request({method:"wallet_switchEthereumChain",params:[{chainId:MOONBASE_PARAMS$1.chainId}]})}catch(e3){if(4902!==(null==e3?void 0:e3.code))throw e3;await e.request({method:"wallet_addEthereumChain",params:[MOONBASE_PARAMS$1]})}await e.request({method:"eth_requestAccounts"});const n=new BrowserProvider(e),o=await n.getSigner(),a=await o.getAddress();t(a),r(n),i&&i(!1),zt.success("Wallet connected")}catch(n){zt.error((null==n?void 0:n.message)??"Failed to connect wallet")}else zt.error("No injected wallet found. Please install MetaMask.")},s=()=>{const e=new JsonRpcProvider(MOONBASE_PARAMS$1.rpcUrls[0]);r(e),t(""),i&&i(!0),zt.success("Demo mode enabled - explore read-only features!")};reactExports.useImperativeHandle(o,()=>({connect:a,enableDemoMode:s}),[]);const c=()=>{t(""),r(null),i&&i(!1),zt("Disconnected",{icon:"ðŸ‘‹"})};return jsxRuntimeExports.jsx("div",{children:e?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg border border-emerald-200 dark:border-emerald-700",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-emerald-800 dark:text-emerald-200",children:[e.slice(0,6),"...",e.slice(-4)]}),jsxRuntimeExports.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full","aria-label":"Connected"})]}),jsxRuntimeExports.jsx("button",{onClick:c,className:"btn btn-secondary text-xs","aria-label":"Disconnect Wallet",children:"Disconnect"})]}):n?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Demo Mode"}),jsxRuntimeExports.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full","aria-label":"Demo Mode"})]}),jsxRuntimeExports.jsx("button",{onClick:c,className:"btn btn-secondary text-xs","aria-label":"Exit Demo Mode",children:"Exit Demo"})]}):jsxRuntimeExports.jsx("button",{onClick:a,className:"btn btn-primary hover:scale-105 transition-transform duration-200 shadow-lg hover:shadow-green-500/30","aria-label":"Connect Wallet",children:"ðŸ”— Connect Wallet"})})}),Walkthrough=({onClose:e,onConnect:t,onDemo:r})=>{const[n,i]=reactExports.useState(0),o=[{title:"Welcome to Green Credits",content:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"mb-4",children:"Green Credits is a platform that rewards you with Green Credit Tokens (GCT) for real-world eco-actions verified on the Moonbeam blockchain."}),jsxRuntimeExports.jsx("p",{className:"mb-4",children:"Earn tokens by submitting proof of your positive environmental impact, such as planting trees, reducing waste, or supporting sustainable practices."}),jsxRuntimeExports.jsx("p",{children:"Join a transparent, community-driven ecosystem that incentivizes planetary healing."})]}),showButtons:!0},{title:"Connect Your Wallet or Try Demo",content:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"mb-4",children:"To start earning and managing your GCT tokens, connect a Web3 wallet like MetaMask."}),jsxRuntimeExports.jsx("p",{className:"mb-4",children:"Alternatively, explore the platform in demo mode to see how it works without connecting a wallet."}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[jsxRuntimeExports.jsx("button",{onClick:t,className:"btn btn-primary",children:"ðŸ”— Connect Wallet"}),jsxRuntimeExports.jsx("button",{onClick:r,className:"btn btn-secondary",children:"ðŸŽ® Try Demo Mode"})]})]}),showButtons:!1},{title:"Mobile Wallet Recommendations",content:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"mb-4",children:"For the best mobile experience, we recommend using mobile-friendly wallets that support Web3 connections."}),jsxRuntimeExports.jsxs("div",{className:"mb-4 space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-200",children:"MetaMask Mobile"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Popular browser extension wallet with a mobile app. Supports dApps and easy network switching."}),jsxRuntimeExports.jsx("a",{href:"https://metamask.io/download/",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 underline",children:"Download MetaMask Mobile"})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-200",children:"WalletConnect"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Connects your mobile wallet to dApps via QR code scanning. Works with wallets like Trust Wallet, Rainbow, and more."}),jsxRuntimeExports.jsx("a",{href:"https://walletconnect.com/",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-green-600 underline",children:"Learn about WalletConnect"})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-purple-800 dark:text-purple-200",children:"Trust Wallet"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:"User-friendly mobile wallet with built-in dApp browser and multi-chain support."}),jsxRuntimeExports.jsx("a",{href:"https://trustwallet.com/",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-purple-600 underline",children:"Download Trust Wallet"})]})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsx("strong",{children:"FAQ:"})," If connection fails, ensure your wallet app is updated and try refreshing the page. For mobile, use the in-app browser or scan QR codes for WalletConnect."]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-green-600 mt-2",children:"ðŸ’¡ Pro tip: Use MetaMask Mobile for the best experience on your phone!"})]}),showButtons:!0},{title:"How to Submit an Action",content:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"mb-4",children:'Go to the "Submit Action" page to share your eco-friendly activities.'}),jsxRuntimeExports.jsx("p",{className:"mb-4",children:"Fill out the form with a description, optional proof image, and details. Your submission will be verified by the community."}),jsxRuntimeExports.jsx("p",{children:"Once verified, you'll earn GCT tokens based on the impact of your action."})]}),showButtons:!0},{title:"How to Donate",content:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"mb-4",children:"Use your earned GCT tokens to support environmental causes and NGOs."}),jsxRuntimeExports.jsx("p",{className:"mb-4",children:'On the "Donate" page, select an allowlisted NGO and specify the amount to contribute.'}),jsxRuntimeExports.jsx("p",{children:"Your donations help fund real-world conservation efforts."})]}),showButtons:!0},{title:"Moonbase Network Requirement",content:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"mb-4",children:"All transactions on Green Credits occur on the Moonbase Alpha testnet, part of the Moonbeam ecosystem on Polkadot."}),jsxRuntimeExports.jsx("p",{className:"mb-4",children:"This allows for fast, low-cost testing and development while maintaining security and interoperability."}),jsxRuntimeExports.jsx("p",{children:"Your wallet will automatically switch to Moonbase Alpha when connecting."})]}),showButtons:!0}];return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-6",children:o.map((e,t)=>jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full mx-1 "+(t<=n?"bg-green-500":"bg-gray-300")},t))}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-center mb-4 text-gray-800 dark:text-white",children:o[n].title}),jsxRuntimeExports.jsx("div",{className:"mb-6 text-gray-600 dark:text-gray-300",children:o[n].content}),o[n].showButtons&&jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{n>0&&i(n-1)},disabled:0===n,className:"btn btn-secondary disabled:opacity-50",children:"Previous"}),jsxRuntimeExports.jsx("button",{onClick:n===o.length-1?()=>{localStorage.setItem("onboardingCompleted","true"),e()}:()=>{n<o.length-1?i(n+1):e()},className:"btn btn-primary",children:n===o.length-1?"Finish":"Next"})]})]})})})},TOKEN_ADDRESS="0xYourGreenCreditTokenAddress",VERIFIER_ADDRESS="0xYourEcoActionVerifierAddress",POOL_ADDRESS="0xYourDonationPoolAddress",METHODOLOGY_REGISTRY_ADDRESS="0xYourMethodologyRegistryAddress",BASELINE_REGISTRY_ADDRESS="0xYourBaselineRegistryAddress",RETIREMENT_REGISTRY_ADDRESS="0xYourRetirementRegistryAddress",VERIFIER_BADGE_SBT_ADDRESS="0xYourVerifierBadgeSBTAddress",MATCHING_POOL_ADDRESS="0xYourMatchingPoolAddress",tokenAbi=["function balanceOf(address) view returns (uint256)","function approve(address spender, uint256 value) returns (bool)"],verifierAbi=["function submitActionV2(string description, string proofCid, uint8 creditType, bytes32 methodologyId, bytes32 projectId, bytes32 baselineId, uint256 quantity, uint256 uncertaintyBps, uint256 durabilityYears, string metadataCid)","function setAttestation(uint256 actionId, bytes32 uid)","function verifyAction(uint256 actionId, uint256 reward)","function finalizeAction(uint256 actionId)","function challengeAction(uint256 actionId, string evidenceCid)","function resolveChallenge(uint256 actionId, uint256 challengeIdx, bool upheld, address loserSlashTo)","function attachOracleReport(uint256 actionId, string cid)","function depositStake(uint256 amount) payable","function withdrawStake(uint256 amount)","function getActionCount() view returns (uint256)","function actionCount() view returns (uint256)","function actions(uint256) view returns (address user, string description, string proofCid, uint256 reward, uint256 timestamp, uint8 creditType, bytes32 methodologyId, bytes32 projectId, bytes32 baselineId, uint256 quantity, uint256 uncertaintyBps, uint256 durabilityYears, string metadataCid, bytes32 attestationUID, uint8 status, uint256 verifiedAt, uint256 rewardPending)","function getChallenges(uint256 actionId) view returns (tuple(address challenger, string evidenceCid, uint256 timestamp, bool resolved, bool upheld)[])","function getOracleReports(uint256 actionId) view returns (string[])","function verifierOfAction(uint256) view returns (address)","function stakeBalance(address) view returns (uint256)","function challengeWindowSecs() view returns (uint256)","function submitStakeWei() view returns (uint256)","function verifyStakeWei() view returns (uint256)","function challengeStakeWei() view returns (uint256)","function owner() view returns (address)"],poolAbi=["function donateTo(address ngo, uint256 amount)","function isNGO(address ngo) view returns (bool)"],methodologyRegistryAbi=["function upsert(bytes32 id, string name, string version, string cid, bool active)","function get(bytes32 id) view returns (string name, string version, string cid, bool active)"],baselineRegistryAbi=["function upsert(bytes32 id, bytes32 projectId, string version, string cid, bool active)","function get(bytes32 id) view returns (bytes32 projectId, string version, string cid, bool active)"],retirementRegistryAbi=["function retire(uint256[] actionIds, uint256[] grams, string reason, string beneficiary) returns (uint256)","function getRetirement(uint256 serial) view returns (tuple(uint256 serial, address account, uint256[] actionIds, uint256[] grams, string reason, string beneficiary, uint256 timestamp))","function getRetirementsByAccount(address account) view returns (uint256[])","function getRetirementCount() view returns (uint256)"],verifierBadgeSBTAbi=["function mint(address to, uint256 tokenId, uint8 level)","function revoke(uint256 tokenId)","function levelOf(uint256 tokenId) view returns (uint8)","function tokenOfOwner(address owner) view returns (uint256)","function reputationOf(address verifier) view returns (int256)","function increaseReputation(address verifier, int256 amount)","function decreaseReputation(address verifier, int256 amount)","function ownerOf(uint256 tokenId) view returns (address)","function owner() view returns (address)"],matchingPoolAbi=["function createRound(address token, uint256 start, uint256 end, uint256 matchingBudget) returns (uint256)","function activateRound(uint256 roundId)","function deactivateRound(uint256 roundId)","function addProject(uint256 roundId, bytes32 projectId, address projectAddr)","function donate(uint256 roundId, bytes32 projectId, uint256 amount)","function setMatchAllocations(uint256 roundId, bytes32[] projectIds, uint256[] amounts)","function getRound(uint256 roundId) view returns (tuple(uint256 id, address token, uint256 start, uint256 end, uint256 matchingBudget, bool active))","function projectAddress(uint256 roundId, bytes32 projectId) view returns (address)","function getContribution(uint256 roundId, address donor, bytes32 projectId) view returns (uint256)","function totalContributions(uint256 roundId, bytes32 projectId) view returns (uint256)","function roundFinalized(uint256 roundId) view returns (bool)","function owner() view returns (address)"],USE_V2=!0;async function getContracts(e,t=!1){const r=t?await e.getSigner():null,n=new Proxy(e,{get:(e,t,r)=>"getEnsAddress"===t?async e=>null:Reflect.get(e,t,r)}),i=new Contract(TOKEN_ADDRESS,tokenAbi,n),o=new Contract(VERIFIER_ADDRESS,verifierAbi,n),a=new Contract(POOL_ADDRESS,poolAbi,n),s=new Contract(METHODOLOGY_REGISTRY_ADDRESS,methodologyRegistryAbi,n),c=new Contract(BASELINE_REGISTRY_ADDRESS,baselineRegistryAbi,n),l=new Contract(RETIREMENT_REGISTRY_ADDRESS,retirementRegistryAbi,n),u=new Contract(VERIFIER_BADGE_SBT_ADDRESS,verifierBadgeSBTAbi,n),d=new Contract(MATCHING_POOL_ADDRESS,matchingPoolAbi,n),p=r?i.connect(r):i,h=r?o.connect(r):o,m=r&&a?a.connect(r):a,f=r&&s?s.connect(r):s,x=r&&c?c.connect(r):c,g=r&&l?l.connect(r):l,y=r&&u?u.connect(r):u,b=r&&d?d.connect(r):d;return{token:i,verifier:o,pool:a,methodologyRegistry:s,baselineRegistry:c,retirementRegistry:l,verifierBadgeSBT:u,matchingPool:d,tokenWithSigner:p,verifierWithSigner:h,poolWithSigner:m,methodologyRegistryWithSigner:f,baselineRegistryWithSigner:x,retirementRegistryWithSigner:g,verifierBadgeSBTWithSigner:y,matchingPoolWithSigner:b}}function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function clsx(){for(var e,t,n=0,i="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}var EventKeys=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function isEventKey(e){return"string"==typeof e&&EventKeys.includes(e)}var SVGElementPropKeys=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function isSvgElementPropKey(e){return"string"==typeof e&&SVGElementPropKeys.includes(e)}function isDataAttribute(e){return"string"==typeof e&&e.startsWith("data-")}function svgPropertiesNoEvents(e){var t=Object.entries(e).filter(e=>{var[t]=e;return isSvgElementPropKey(t)||isDataAttribute(t)});return Object.fromEntries(t)}function svgPropertiesNoEventsFromUnknown(e){return null==e?null:reactExports.isValidElement(e)&&"object"==typeof e.props&&null!==e.props?svgPropertiesNoEvents(e.props):"object"!=typeof e||Array.isArray(e)?null:svgPropertiesNoEvents(e)}function svgPropertiesAndEvents(e){var t=Object.entries(e).filter(e=>{var[t]=e;return isSvgElementPropKey(t)||isDataAttribute(t)||isEventKey(t)});return Object.fromEntries(t)}function svgPropertiesAndEventsFromUnknown(e){return null==e?null:reactExports.isValidElement(e)?svgPropertiesAndEvents(e.props):"object"!=typeof e||Array.isArray(e)?null:svgPropertiesAndEvents(e)}var _excluded$i=["children","width","height","viewBox","className","style","title","desc"];function _extends$n(){return _extends$n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$n.apply(null,arguments)}function _objectWithoutProperties$i(e,t){if(null==e)return{};var r,n,i=_objectWithoutPropertiesLoose$i(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _objectWithoutPropertiesLoose$i(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}var Surface=reactExports.forwardRef((e,t)=>{var{children:r,width:n,height:i,viewBox:o,className:a,style:s,title:c,desc:l}=e,u=_objectWithoutProperties$i(e,_excluded$i),d=o||{width:n,height:i,x:0,y:0},p=clsx("recharts-surface",a);return reactExports.createElement("svg",_extends$n({},svgPropertiesAndEvents(u),{className:p,width:n,height:i,style:s,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height),ref:t}),reactExports.createElement("title",null,c),reactExports.createElement("desc",null,l),r)}),_excluded$h=["children","className"];function _extends$m(){return _extends$m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$m.apply(null,arguments)}function _objectWithoutProperties$h(e,t){if(null==e)return{};var r,n,i=_objectWithoutPropertiesLoose$h(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _objectWithoutPropertiesLoose$h(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}var Layer=reactExports.forwardRef((e,t)=>{var{children:r,className:n}=e,i=_objectWithoutProperties$h(e,_excluded$h),o=clsx("recharts-layer",n);return reactExports.createElement("g",_extends$m({className:o},svgPropertiesAndEvents(i),{ref:t}),r)}),LegendPortalContext=reactExports.createContext(null);function constant$1(e){return function(){return e}}const cos=Math.cos,sin=Math.sin,sqrt$1=Math.sqrt,pi$1=Math.PI,tau$1=2*pi$1,pi=Math.PI,tau=2*pi,epsilon=1e-6,tauEpsilon=tau-epsilon;function append(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function appendRound(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return append;const r=10**t;return function(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}class Path{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?append:appendRound(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,n){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+n}`}bezierCurveTo(e,t,r,n,i,o){this._append`C${+e},${+t},${+r},${+n},${this._x1=+i},${this._y1=+o}`}arcTo(e,t,r,n,i){if(e=+e,t=+t,r=+r,n=+n,(i=+i)<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,s=r-e,c=n-t,l=o-e,u=a-t,d=l*l+u*u;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(d>epsilon)if(Math.abs(u*s-c*l)>epsilon&&i){let p=r-o,h=n-a,m=s*s+c*c,f=p*p+h*h,x=Math.sqrt(m),g=Math.sqrt(d),y=i*Math.tan((pi-Math.acos((m+d-f)/(2*x*g)))/2),b=y/g,v=y/x;Math.abs(b-1)>epsilon&&this._append`L${e+b*l},${t+b*u}`,this._append`A${i},${i},0,0,${+(u*p>l*h)},${this._x1=e+v*s},${this._y1=t+v*c}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,r,n,i,o){if(e=+e,t=+t,o=!!o,(r=+r)<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(n),s=r*Math.sin(n),c=e+a,l=t+s,u=1^o,d=o?n-i:i-n;null===this._x1?this._append`M${c},${l}`:(Math.abs(this._x1-c)>epsilon||Math.abs(this._y1-l)>epsilon)&&this._append`L${c},${l}`,r&&(d<0&&(d=d%tau+tau),d>tauEpsilon?this._append`A${r},${r},0,1,${u},${e-a},${t-s}A${r},${r},0,1,${u},${this._x1=c},${this._y1=l}`:d>epsilon&&this._append`A${r},${r},0,${+(d>=pi)},${u},${this._x1=e+r*Math.cos(i)},${this._y1=t+r*Math.sin(i)}`)}rect(e,t,r,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+n}h${-r}Z`}toString(){return this._}}function withPath(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(null==r)t=null;else{const e=Math.floor(r);if(!(e>=0))throw new RangeError(`invalid digits: ${r}`);t=e}return e},()=>new Path(t)}function array$1(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Linear(e){this._context=e}function curveLinear(e){return new Linear(e)}function x(e){return e[0]}function y(e){return e[1]}function shapeLine(e,t){var r=constant$1(!0),n=null,i=curveLinear,o=null,a=withPath(s);function s(s){var c,l,u,d=(s=array$1(s)).length,p=!1;for(null==n&&(o=i(u=a())),c=0;c<=d;++c)!(c<d&&r(l=s[c],c,s))===p&&((p=!p)?o.lineStart():o.lineEnd()),p&&o.point(+e(l,c,s),+t(l,c,s));if(u)return o=null,u+""||null}return e="function"==typeof e?e:void 0===e?x:constant$1(e),t="function"==typeof t?t:void 0===t?y:constant$1(t),s.x=function(t){return arguments.length?(e="function"==typeof t?t:constant$1(+t),s):e},s.y=function(e){return arguments.length?(t="function"==typeof e?e:constant$1(+e),s):t},s.defined=function(e){return arguments.length?(r="function"==typeof e?e:constant$1(!!e),s):r},s.curve=function(e){return arguments.length?(i=e,null!=n&&(o=i(n)),s):i},s.context=function(e){return arguments.length?(null==e?n=o=null:o=i(n=e),s):n},s}function shapeArea(e,t,r){var n=null,i=constant$1(!0),o=null,a=curveLinear,s=null,c=withPath(l);function l(l){var u,d,p,h,m,f=(l=array$1(l)).length,x=!1,g=new Array(f),y=new Array(f);for(null==o&&(s=a(m=c())),u=0;u<=f;++u){if(!(u<f&&i(h=l[u],u,l))===x)if(x=!x)d=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),p=u-1;p>=d;--p)s.point(g[p],y[p]);s.lineEnd(),s.areaEnd()}x&&(g[u]=+e(h,u,l),y[u]=+t(h,u,l),s.point(n?+n(h,u,l):g[u],r?+r(h,u,l):y[u]))}if(m)return s=null,m+""||null}function u(){return shapeLine().defined(i).curve(a).context(o)}return e="function"==typeof e?e:void 0===e?x:constant$1(+e),t="function"==typeof t?t:constant$1(void 0===t?0:+t),r="function"==typeof r?r:void 0===r?y:constant$1(+r),l.x=function(t){return arguments.length?(e="function"==typeof t?t:constant$1(+t),n=null,l):e},l.x0=function(t){return arguments.length?(e="function"==typeof t?t:constant$1(+t),l):e},l.x1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:constant$1(+e),l):n},l.y=function(e){return arguments.length?(t="function"==typeof e?e:constant$1(+e),r=null,l):t},l.y0=function(e){return arguments.length?(t="function"==typeof e?e:constant$1(+e),l):t},l.y1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:constant$1(+e),l):r},l.lineX0=l.lineY0=function(){return u().x(e).y(t)},l.lineY1=function(){return u().x(e).y(r)},l.lineX1=function(){return u().x(n).y(t)},l.defined=function(e){return arguments.length?(i="function"==typeof e?e:constant$1(!!e),l):i},l.curve=function(e){return arguments.length?(a=e,null!=o&&(s=a(o)),l):a},l.context=function(e){return arguments.length?(null==e?o=s=null:s=a(o=e),l):o},l}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};class Bump{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function bumpX(e){return new Bump(e,!0)}function bumpY(e){return new Bump(e,!1)}const symbolCircle={draw(e,t){const r=sqrt$1(t/pi$1);e.moveTo(r,0),e.arc(0,0,r,0,tau$1)}},symbolCross={draw(e,t){const r=sqrt$1(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},tan30=sqrt$1(1/3),tan30_2=2*tan30,symbolDiamond={draw(e,t){const r=sqrt$1(t/tan30_2),n=r*tan30;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},symbolSquare={draw(e,t){const r=sqrt$1(t),n=-r/2;e.rect(n,n,r,r)}},ka=.8908130915292852,kr=sin(pi$1/10)/sin(7*pi$1/10),kx=sin(tau$1/10)*kr,ky=-cos(tau$1/10)*kr,symbolStar={draw(e,t){const r=sqrt$1(t*ka),n=kx*r,i=ky*r;e.moveTo(0,-r),e.lineTo(n,i);for(let o=1;o<5;++o){const t=tau$1*o/5,a=cos(t),s=sin(t);e.lineTo(s*r,-a*r),e.lineTo(a*n-s*i,s*n+a*i)}e.closePath()}},sqrt3=sqrt$1(3),symbolTriangle={draw(e,t){const r=-sqrt$1(t/(3*sqrt3));e.moveTo(0,2*r),e.lineTo(-sqrt3*r,-r),e.lineTo(sqrt3*r,-r),e.closePath()}},c=-.5,s=sqrt$1(3)/2,k=1/sqrt$1(12),a=3*(k/2+1),symbolWye={draw(e,t){const r=sqrt$1(t/a),n=r/2,i=r*k,o=n,l=r*k+r,u=-o,d=l;e.moveTo(n,i),e.lineTo(o,l),e.lineTo(u,d),e.lineTo(c*n-s*i,s*n+c*i),e.lineTo(c*o-s*l,s*o+c*l),e.lineTo(c*u-s*d,s*u+c*d),e.lineTo(c*n+s*i,c*i-s*n),e.lineTo(c*o+s*l,c*l-s*o),e.lineTo(c*u+s*d,c*d-s*u),e.closePath()}};function Symbol$1(e,t){let r=null,n=withPath(i);function i(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return e="function"==typeof e?e:constant$1(e||symbolCircle),t="function"==typeof t?t:constant$1(void 0===t?64:+t),i.type=function(t){return arguments.length?(e="function"==typeof t?t:constant$1(t),i):e},i.size=function(e){return arguments.length?(t="function"==typeof e?e:constant$1(+e),i):t},i.context=function(e){return arguments.length?(r=null==e?null:e,i):r},i}function noop$6(){}function point$2(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Basis(e){this._context=e}function curveBasis(e){return new Basis(e)}function BasisClosed(e){this._context=e}function curveBasisClosed(e){return new BasisClosed(e)}function BasisOpen(e){this._context=e}function curveBasisOpen(e){return new BasisOpen(e)}function LinearClosed(e){this._context=e}function curveLinearClosed(e){return new LinearClosed(e)}function sign(e){return e<0?-1:1}function slope3(e,t,r){var n=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(n||i<0&&-0),a=(r-e._y1)/(i||n<0&&-0),s=(o*i+a*n)/(n+i);return(sign(o)+sign(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function slope2(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function point$1(e,t,r){var n=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-n)/3;e._context.bezierCurveTo(n+s,i+s*t,o-s,a-s*r,o,a)}function MonotoneX(e){this._context=e}function MonotoneY(e){this._context=new ReflectContext(e)}function ReflectContext(e){this._context=e}function monotoneX(e){return new MonotoneX(e)}function monotoneY(e){return new MonotoneY(e)}function Natural(e){this._context=e}function controlPoints(e){var t,r,n=e.length-1,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function curveNatural(e){return new Natural(e)}function Step(e,t){this._context=e,this._t=t}function curveStep(e){return new Step(e,.5)}function stepBefore(e){return new Step(e,0)}function stepAfter(e){return new Step(e,1)}function stackOffsetNone(e,t){if((i=e.length)>1)for(var r,n,i,o=1,a=e[t[0]],s=a.length;o<i;++o)for(n=a,a=e[t[o]],r=0;r<s;++r)a[r][1]+=a[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}function stackOrderNone(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function stackValue(e,t){return e[t]}function stackSeries(e){const t=[];return t.key=e,t}function shapeStack(){var e=constant$1([]),t=stackOrderNone,r=stackOffsetNone,n=stackValue;function i(i){var o,a,s=Array.from(e.apply(this,arguments),stackSeries),c=s.length,l=-1;for(const e of i)for(o=0,++l;o<c;++o)(s[o][l]=[0,+n(e,s[o].key,l,i)]).data=e;for(o=0,a=array$1(t(s));o<c;++o)s[a[o]].index=o;return r(s,a),s}return i.keys=function(t){return arguments.length?(e="function"==typeof t?t:constant$1(Array.from(t)),i):e},i.value=function(e){return arguments.length?(n="function"==typeof e?e:constant$1(+e),i):n},i.order=function(e){return arguments.length?(t=null==e?stackOrderNone:"function"==typeof e?e:constant$1(Array.from(e)),i):t},i.offset=function(e){return arguments.length?(r=null==e?stackOffsetNone:e,i):r},i}function stackOffsetExpand(e,t){if((n=e.length)>0){for(var r,n,i,o=0,a=e[0].length;o<a;++o){for(i=r=0;r<n;++r)i+=e[r][o][1]||0;if(i)for(r=0;r<n;++r)e[r][o][1]/=i}stackOffsetNone(e,t)}}function stackOffsetSilhouette(e,t){if((r=e.length)>0){for(var r,n=0,i=e[t[0]],o=i.length;n<o;++n){for(var a=0,s=0;a<r;++a)s+=e[a][n][1]||0;i[n][1]+=i[n][0]=-s/2}stackOffsetNone(e,t)}}function stackOffsetWiggle(e,t){if((i=e.length)>0&&(n=(r=e[t[0]]).length)>0){for(var r,n,i,o=0,a=1;a<n;++a){for(var s=0,c=0,l=0;s<i;++s){for(var u=e[t[s]],d=u[a][1]||0,p=(d-(u[a-1][1]||0))/2,h=0;h<s;++h){var m=e[t[h]];p+=(m[a][1]||0)-(m[a-1][1]||0)}c+=d,l+=p*d}r[a-1][1]+=r[a-1][0]=o,c&&(o-=l/c)}r[a-1][1]+=r[a-1][0]=o,stackOffsetNone(e,t)}}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$2(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},BasisClosed.prototype={areaStart:noop$6,areaEnd:noop$6,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:point$2(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:point$2(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},LinearClosed.prototype={areaStart:noop$6,areaEnd:noop$6,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$1(this,this._t0,slope2(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,point$1(this,slope2(this,r=slope3(this,e,t)),r);break;default:point$1(this,this._t0,r=slope3(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}},(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(e,t){MonotoneX.prototype.point.call(this,t,e)},ReflectContext.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,o){this._context.bezierCurveTo(t,e,n,r,o,i)}},Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var n=controlPoints(e),i=controlPoints(t),o=0,a=1;a<r;++o,++a)this._context.bezierCurveTo(n[0][o],i[0][o],n[1][o],i[1][o],e[a],t[a]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}}this._x=e,this._y=t}};var get$b={},isUnsafeProperty={},exports$1;exports$1=isUnsafeProperty,Object.defineProperty(exports$1,Symbol.toStringTag,{value:"Module"}),exports$1.isUnsafeProperty=function(e){return"__proto__"===e};var isDeepKey={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isDeepKey=function(e){switch(typeof e){case"number":case"symbol":return!1;case"string":return e.includes(".")||e.includes("[")||e.includes("]")}}}(isDeepKey);var toKey={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.toKey=function(e){var t;return"string"==typeof e||"symbol"==typeof e?e:Object.is(null==(t=null==e?void 0:e.valueOf)?void 0:t.call(e),-0)?"-0":String(e)}}(toKey);var toPath={},toString$4={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.toString=function e(t){if(null==t)return"";if("string"==typeof t)return t;if(Array.isArray(t))return t.map(e).join(",");const r=String(t);return"0"===r&&Object.is(Number(t),-0)?"-0":r}}(toString$4),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=toString$4,r=toKey;e.toPath=function(e){if(Array.isArray(e))return e.map(r.toKey);if("symbol"==typeof e)return[e];const n=[],i=(e=t.toString(e)).length;if(0===i)return n;let o=0,a="",s="",c=!1;for(46===e.charCodeAt(0)&&(n.push(""),o++);o<i;){const t=e[o];s?"\\"===t&&o+1<i?(o++,a+=e[o]):t===s?s="":a+=t:c?'"'===t||"'"===t?s=t:"]"===t?(c=!1,n.push(a),a=""):a+=t:"["===t?(c=!0,a&&(n.push(a),a="")):"."===t?a&&(n.push(a),a=""):a+=t,o++}return a&&n.push(a),n}}(toPath),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=isUnsafeProperty,r=isDeepKey,n=toKey,i=toPath;e.get=function e(o,a,s){if(null==o)return s;switch(typeof a){case"string":{if(t.isUnsafeProperty(a))return s;const n=o[a];return void 0===n?r.isDeepKey(a)?e(o,i.toPath(a),s):s:n}case"number":case"symbol":{"number"==typeof a&&(a=n.toKey(a));const e=o[a];return void 0===e?s:e}default:{if(Array.isArray(a))return function(e,r,n){if(0===r.length)return n;let i=e;for(let o=0;o<r.length;o++){if(null==i)return n;if(t.isUnsafeProperty(r[o]))return n;i=i[r[o]]}if(void 0===i)return n;return i}(o,a,s);if(a=Object.is(null==a?void 0:a.valueOf(),-0)?"-0":String(a),t.isUnsafeProperty(a))return s;const e=o[a];return void 0===e?s:e}}}}(get$b);var get$9=get$b.get;const get$a=getDefaultExportFromCjs(get$9);var mathSign=e=>0===e?0:e>0?1:-1,isNan=e=>"number"==typeof e&&e!=+e,isPercent=e=>"string"==typeof e&&e.indexOf("%")===e.length-1,isNumber=e=>("number"==typeof e||e instanceof Number)&&!isNan(e),isNumOrStr=e=>isNumber(e)||"string"==typeof e,idCounter=0,uniqueId=e=>{var t=++idCounter;return"".concat(e||"").concat(t)},getPercentValue=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!isNumber(e)&&"string"!=typeof e)return n;if(isPercent(e)){if(null==t)return n;var o=e.indexOf("%");r=t*parseFloat(e.slice(0,o))/100}else r=+e;return isNan(r)&&(r=n),i&&null!=t&&r>t&&(r=t),r},hasDuplicate=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++){if(r[e[n]])return!0;r[e[n]]=!0}return!1};function interpolate$2(e,t,r){return isNumber(e)&&isNumber(t)?e+r*(t-e):t}function findEntryInArray(e,t,r){if(e&&e.length)return e.find(e=>e&&("function"==typeof t?t(e):get$a(e,t))===r)}var isNullish$1=e=>null==e,upperFirst=e=>isNullish$1(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function isNotNil(e){return null!=e}function noop$5(){}var _excluded$g=["type","size","sizeType"];function _extends$l(){return _extends$l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$l.apply(null,arguments)}function ownKeys$x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$x(Object(r),!0).forEach(function(t){_defineProperty$z(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$x(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$z(e,t,r){return(t=_toPropertyKey$z(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$z(e){var t=_toPrimitive$z(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$z(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _objectWithoutProperties$g(e,t){if(null==e)return{};var r,n,i=_objectWithoutPropertiesLoose$g(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _objectWithoutPropertiesLoose$g(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}var symbolFactories={symbolCircle:symbolCircle,symbolCross:symbolCross,symbolDiamond:symbolDiamond,symbolSquare:symbolSquare,symbolStar:symbolStar,symbolTriangle:symbolTriangle,symbolWye:symbolWye},RADIAN$1=Math.PI/180,getSymbolFactory=e=>{var t="symbol".concat(upperFirst(e));return symbolFactories[t]||symbolCircle},calculateAreaSize=(e,t,r)=>{if("area"===t)return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var n=18*RADIAN$1;return 1.25*e*e*(Math.tan(n)-Math.tan(2*n)*Math.tan(n)**2);case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},registerSymbol=(e,t)=>{symbolFactories["symbol".concat(upperFirst(e))]=t},Symbols=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,i=_objectSpread$x(_objectSpread$x({},_objectWithoutProperties$g(e,_excluded$g)),{},{type:t,size:r,sizeType:n}),o="circle";"string"==typeof t&&(o=t);var{className:a,cx:s,cy:c}=i,l=svgPropertiesAndEvents(i);return isNumber(s)&&isNumber(c)&&isNumber(r)?reactExports.createElement("path",_extends$l({},l,{className:clsx("recharts-symbols",a),transform:"translate(".concat(s,", ").concat(c,")"),d:(()=>{var e=getSymbolFactory(o),t=Symbol$1().type(e).size(calculateAreaSize(r,n,o))();if(null!==t)return t})()})):null};Symbols.registerSymbol=registerSymbol;var isPolarCoordinate=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,adaptEventHandlers=(e,t)=>{if(!e||"function"==typeof e||"boolean"==typeof e)return null;var r=e;if(reactExports.isValidElement(e)&&(r=e.props),"object"!=typeof r&&"function"!=typeof r)return null;var n={};return Object.keys(r).forEach(e=>{isEventKey(e)&&(n[e]=t=>r[e](r,t))}),n},getEventHandlerOfChild=(e,t,r)=>n=>(e(t,r,n),null),adaptEventsOfChild=(e,t,r)=>{if(null===e||"object"!=typeof e&&"function"!=typeof e)return null;var n=null;return Object.keys(e).forEach(i=>{var o=e[i];isEventKey(i)&&"function"==typeof o&&(n||(n={}),n[i]=getEventHandlerOfChild(o,t,r))}),n};function ownKeys$w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$w(Object(r),!0).forEach(function(t){_defineProperty$y(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$w(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$y(e,t,r){return(t=_toPropertyKey$y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$y(e){var t=_toPrimitive$y(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$y(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function resolveDefaultProps(e,t){var r=_objectSpread$w({},e),n=t;return Object.keys(t).reduce((e,t)=>(void 0===e[t]&&void 0!==n[t]&&(e[t]=n[t]),e),r)}var uniqBy$3={},uniqBy$2={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.uniqBy=function(e,t){const r=new Map;for(let n=0;n<e.length;n++){const i=e[n],o=t(i);r.has(o)||r.set(o,i)}return Array.from(r.values())}}(uniqBy$2);var identity$5={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.identity=function(e){return e}}(identity$5);var isArrayLikeObject={},isArrayLike={},isLength={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isLength=function(e){return Number.isSafeInteger(e)&&e>=0}}(isLength),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=isLength;e.isArrayLike=function(e){return null!=e&&"function"!=typeof e&&t.isLength(e.length)}}(isArrayLike);var isObjectLike={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isObjectLike=function(e){return"object"==typeof e&&null!==e}}(isObjectLike),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=isArrayLike,r=isObjectLike;e.isArrayLikeObject=function(e){return r.isObjectLike(e)&&t.isArrayLike(e)}}(isArrayLikeObject);var iteratee={},property={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=get$b;e.property=function(e){return function(r){return t.get(r,e)}}}(property);var matches={},isMatch={},isMatchWith={},isObject$1={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isObject=function(e){return null!==e&&("object"==typeof e||"function"==typeof e)}}(isObject$1);var isPrimitive={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isPrimitive=function(e){return null==e||"object"!=typeof e&&"function"!=typeof e}}(isPrimitive);var eq={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.eq=function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}}(eq),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=isObject$1,r=isPrimitive,n=eq;function i(e,s,c,l){if(s===e)return!0;switch(typeof s){case"object":return function(e,t,n,i){if(null==t)return!0;if(Array.isArray(t))return o(e,t,n,i);if(t instanceof Map)return function(e,t,r,n){if(0===t.size)return!0;if(!(e instanceof Map))return!1;for(const[i,o]of t.entries()){if(!1===r(e.get(i),o,i,e,t,n))return!1}return!0}(e,t,n,i);if(t instanceof Set)return a(e,t,n,i);const s=Object.keys(t);if(null==e)return 0===s.length;if(0===s.length)return!0;if(null==i?void 0:i.has(t))return i.get(t)===e;null==i||i.set(t,e);try{for(let o=0;o<s.length;o++){const a=s[o];if(!r.isPrimitive(e)&&!(a in e))return!1;if(void 0===t[a]&&void 0!==e[a])return!1;if(null===t[a]&&null!==e[a])return!1;if(!n(e[a],t[a],a,e,t,i))return!1}return!0}finally{null==i||i.delete(t)}}(e,s,c,l);case"function":return Object.keys(s).length>0?i(e,{...s},c,l):n.eq(e,s);default:return t.isObject(e)?"string"!=typeof s||""===s:n.eq(e,s)}}function o(e,t,r,n){if(0===t.length)return!0;if(!Array.isArray(e))return!1;const i=new Set;for(let o=0;o<t.length;o++){const a=t[o];let s=!1;for(let c=0;c<e.length;c++){if(i.has(c))continue;let l=!1;if(r(e[c],a,o,e,t,n)&&(l=!0),l){i.add(c),s=!0;break}}if(!s)return!1}return!0}function a(e,t,r,n){return 0===t.size||e instanceof Set&&o([...e],[...t],r,n)}e.isMatchWith=function e(t,r,n){return"function"!=typeof n?e(t,r,()=>{}):i(t,r,function e(t,r,o,a,s,c){const l=n(t,r,o,a,s,c);return void 0!==l?Boolean(l):i(t,r,e,c)},new Map)},e.isSetMatch=a}(isMatchWith),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=isMatchWith;e.isMatch=function(e,r){return t.isMatchWith(e,r,()=>{})}}(isMatch);var cloneDeep$1={},cloneDeepWith$1={},getSymbols={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.getSymbols=function(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}}(getSymbols);var getTag={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.getTag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}}(getTag);var tags={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});e.argumentsTag="[object Arguments]",e.arrayBufferTag="[object ArrayBuffer]",e.arrayTag="[object Array]",e.bigInt64ArrayTag="[object BigInt64Array]",e.bigUint64ArrayTag="[object BigUint64Array]",e.booleanTag="[object Boolean]",e.dataViewTag="[object DataView]",e.dateTag="[object Date]",e.errorTag="[object Error]",e.float32ArrayTag="[object Float32Array]",e.float64ArrayTag="[object Float64Array]",e.functionTag="[object Function]",e.int16ArrayTag="[object Int16Array]",e.int32ArrayTag="[object Int32Array]",e.int8ArrayTag="[object Int8Array]",e.mapTag="[object Map]",e.numberTag="[object Number]",e.objectTag="[object Object]",e.regexpTag="[object RegExp]",e.setTag="[object Set]",e.stringTag="[object String]",e.symbolTag="[object Symbol]",e.uint16ArrayTag="[object Uint16Array]",e.uint32ArrayTag="[object Uint32Array]",e.uint8ArrayTag="[object Uint8Array]",e.uint8ClampedArrayTag="[object Uint8ClampedArray]"}(tags);var isTypedArray={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isTypedArray=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}}(isTypedArray),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=getSymbols,r=getTag,n=tags,i=isPrimitive,o=isTypedArray;function a(e,t,c,l=new Map,u=void 0){const d=null==u?void 0:u(e,t,c,l);if(void 0!==d)return d;if(i.isPrimitive(e))return e;if(l.has(e))return l.get(e);if(Array.isArray(e)){const t=new Array(e.length);l.set(e,t);for(let r=0;r<e.length;r++)t[r]=a(e[r],r,c,l,u);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;l.set(e,t);for(const[r,n]of e)t.set(r,a(n,r,c,l,u));return t}if(e instanceof Set){const t=new Set;l.set(e,t);for(const r of e)t.add(a(r,void 0,c,l,u));return t}if("undefined"!=typeof Buffer&&Buffer.isBuffer(e))return e.subarray();if(o.isTypedArray(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);l.set(e,t);for(let r=0;r<e.length;r++)t[r]=a(e[r],r,c,l,u);return t}if(e instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return l.set(e,t),s(t,e,c,l,u),t}if("undefined"!=typeof File&&e instanceof File){const t=new File([e],e.name,{type:e.type});return l.set(e,t),s(t,e,c,l,u),t}if("undefined"!=typeof Blob&&e instanceof Blob){const t=new Blob([e],{type:e.type});return l.set(e,t),s(t,e,c,l,u),t}if(e instanceof Error){const t=new e.constructor;return l.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,s(t,e,c,l,u),t}if(e instanceof Boolean){const t=new Boolean(e.valueOf());return l.set(e,t),s(t,e,c,l,u),t}if(e instanceof Number){const t=new Number(e.valueOf());return l.set(e,t),s(t,e,c,l,u),t}if(e instanceof String){const t=new String(e.valueOf());return l.set(e,t),s(t,e,c,l,u),t}if("object"==typeof e&&function(e){switch(r.getTag(e)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}(e)){const t=Object.create(Object.getPrototypeOf(e));return l.set(e,t),s(t,e,c,l,u),t}return e}function s(e,r,n=e,i,o){const s=[...Object.keys(r),...t.getSymbols(r)];for(let t=0;t<s.length;t++){const c=s[t],l=Object.getOwnPropertyDescriptor(e,c);(null==l||l.writable)&&(e[c]=a(r[c],c,n,i,o))}}e.cloneDeepWith=function(e,t){return a(e,void 0,e,new Map,t)},e.cloneDeepWithImpl=a,e.copyProperties=s}(cloneDeepWith$1),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cloneDeepWith$1;e.cloneDeep=function(e){return t.cloneDeepWithImpl(e,void 0,e,new Map,void 0)}}(cloneDeep$1),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=isMatch,r=cloneDeep$1;e.matches=function(e){return e=r.cloneDeep(e),r=>t.isMatch(r,e)}}(matches);var matchesProperty={},cloneDeep={},cloneDeepWith={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cloneDeepWith$1,r=tags;e.cloneDeepWith=function(e,n){return t.cloneDeepWith(e,(i,o,a,s)=>{const c=null==n?void 0:n(i,o,a,s);if(void 0!==c)return c;if("object"==typeof e)switch(Object.prototype.toString.call(e)){case r.numberTag:case r.stringTag:case r.booleanTag:{const r=new e.constructor(null==e?void 0:e.valueOf());return t.copyProperties(r,e),r}case r.argumentsTag:{const r={};return t.copyProperties(r,e),r.length=e.length,r[Symbol.iterator]=e[Symbol.iterator],r}default:return}})}}(cloneDeepWith),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cloneDeepWith;e.cloneDeep=function(e){return t.cloneDeepWith(e)}}(cloneDeep);var has$2={},isIndex={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;e.isIndex=function(e,r=Number.MAX_SAFE_INTEGER){switch(typeof e){case"number":return Number.isInteger(e)&&e>=0&&e<r;case"symbol":return!1;case"string":return t.test(e)}}}(isIndex);var isArguments={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=getTag;e.isArguments=function(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===t.getTag(e)}}(isArguments),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=isDeepKey,r=isIndex,n=isArguments,i=toPath;e.has=function(e,o){let a;if(a=Array.isArray(o)?o:"string"==typeof o&&t.isDeepKey(o)&&null==(null==e?void 0:e[o])?i.toPath(o):[o],0===a.length)return!1;let s=e;for(let t=0;t<a.length;t++){const e=a[t];if(null==s||!Object.hasOwn(s,e)){if(!((Array.isArray(s)||n.isArguments(s))&&r.isIndex(e)&&e<s.length))return!1}s=s[e]}return!0}}(has$2),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=isMatch,r=toKey,n=cloneDeep,i=get$b,o=has$2;e.matchesProperty=function(e,a){switch(typeof e){case"object":Object.is(null==e?void 0:e.valueOf(),-0)&&(e="-0");break;case"number":e=r.toKey(e)}return a=n.cloneDeep(a),function(r){const n=i.get(r,e);return void 0===n?o.has(r,e):void 0===a?void 0===n:t.isMatch(n,a)}}}(matchesProperty),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=identity$5,r=property,n=matches,i=matchesProperty;e.iteratee=function(e){if(null==e)return t.identity;switch(typeof e){case"function":return e;case"object":return Array.isArray(e)&&2===e.length?i.matchesProperty(e[0],e[1]):n.matches(e);case"string":case"symbol":case"number":return r.property(e)}}}(iteratee),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uniqBy$2,r=identity$5,n=isArrayLikeObject,i=iteratee;e.uniqBy=function(e,o=r.identity){return n.isArrayLikeObject(e)?t.uniqBy(Array.from(e),i.iteratee(o)):[]}}(uniqBy$3);var uniqBy=uniqBy$3.uniqBy;const uniqBy$1=getDefaultExportFromCjs(uniqBy);function getUniqPayload(e,t,r){return!0===t?uniqBy$1(e,r):"function"==typeof t?uniqBy$1(e,t):e}var withSelector={exports:{}},withSelector_production={},shim$2={exports:{}},useSyncExternalStoreShim_production={},React$2=reactExports;function is$4(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var objectIs$2="function"==typeof Object.is?Object.is:is$4,useState=React$2.useState,useEffect$2=React$2.useEffect,useLayoutEffect=React$2.useLayoutEffect,useDebugValue$2=React$2.useDebugValue;function useSyncExternalStore$2(e,t){var r=t(),n=useState({inst:{value:r,getSnapshot:t}}),i=n[0].inst,o=n[1];return useLayoutEffect(function(){i.value=r,i.getSnapshot=t,checkIfSnapshotChanged(i)&&o({inst:i})},[e,r,t]),useEffect$2(function(){return checkIfSnapshotChanged(i)&&o({inst:i}),e(function(){checkIfSnapshotChanged(i)&&o({inst:i})})},[e]),useDebugValue$2(r),r}function checkIfSnapshotChanged(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!objectIs$2(e,r)}catch(n){return!0}}function useSyncExternalStore$1$1(e,t){return t()}var shim$1="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?useSyncExternalStore$1$1:useSyncExternalStore$2;useSyncExternalStoreShim_production.useSyncExternalStore=void 0!==React$2.useSyncExternalStore?React$2.useSyncExternalStore:shim$1,shim$2.exports=useSyncExternalStoreShim_production;var shimExports=shim$2.exports,React$1=reactExports,shim=shimExports;
/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function is$3(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var objectIs$1="function"==typeof Object.is?Object.is:is$3,useSyncExternalStore$1=shim.useSyncExternalStore,useRef$1=React$1.useRef,useEffect$1=React$1.useEffect,useMemo$1=React$1.useMemo,useDebugValue$1=React$1.useDebugValue;withSelector_production.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var o=useRef$1(null);if(null===o.current){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=useMemo$1(function(){function e(e){if(!c){if(c=!0,o=e,e=n(e),void 0!==i&&a.hasValue){var t=a.value;if(i(t,e))return s=t}return s=e}if(t=s,objectIs$1(o,e))return t;var r=n(e);return void 0!==i&&i(t,r)?(o=e,t):(o=e,s=r)}var o,s,c=!1,l=void 0===r?null:r;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]},[t,r,n,i]);var s=useSyncExternalStore$1(e,o[0],o[1]);return useEffect$1(function(){a.hasValue=!0,a.value=s},[s]),useDebugValue$1(s),s},withSelector.exports=withSelector_production;var withSelectorExports=withSelector.exports,RechartsReduxContext=reactExports.createContext(null),noopDispatch=e=>e,useAppDispatch=()=>{var e=reactExports.useContext(RechartsReduxContext);return e?e.store.dispatch:noopDispatch},noop$4=()=>{},addNestedSubNoop=()=>noop$4,refEquality=(e,t)=>e===t;function useAppSelector(e){var t=reactExports.useContext(RechartsReduxContext);return withSelectorExports.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:addNestedSubNoop,t?t.store.getState:noop$4,t?t.store.getState:noop$4,t?e:noop$4,refEquality)}function assertIsFunction(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}function assertIsObject(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}function assertIsArrayOfFunctions(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(e=>"function"==typeof e)){const r=e.map(e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e).join(", ");throw new TypeError(`${t}[${r}]`)}}var ensureIsArray=e=>Array.isArray(e)?e:[e];function getDependencies(e){const t=Array.isArray(e[0])?e[0]:e;return assertIsArrayOfFunctions(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function collectInputSelectorResults(e,t){const r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var StrongRef=class{constructor(e){this.value=e}deref(){return this.value}},Ref$1="undefined"!=typeof WeakRef?WeakRef:StrongRef,UNTERMINATED=0,TERMINATED=1;function createCacheNode(){return{s:UNTERMINATED,v:void 0,o:null,p:null}}function weakMapMemoize(e,t={}){let r=createCacheNode();const{resultEqualityCheck:n}=t;let i,o=0;function a(){var t;let a=r;const{length:s}=arguments;for(let e=0,r=s;e<r;e++){const t=arguments[e];if("function"==typeof t||"object"==typeof t&&null!==t){let e=a.o;null===e&&(a.o=e=new WeakMap);const r=e.get(t);void 0===r?(a=createCacheNode(),e.set(t,a)):a=r}else{let e=a.p;null===e&&(a.p=e=new Map);const r=e.get(t);void 0===r?(a=createCacheNode(),e.set(t,a)):a=r}}const c=a;let l;if(a.s===TERMINATED)l=a.v;else if(l=e.apply(null,arguments),o++,n){const e=(null==(t=null==i?void 0:i.deref)?void 0:t.call(i))??i;null!=e&&n(e,l)&&(l=e,0!==o&&o--);i="object"==typeof l&&null!==l||"function"==typeof l?new Ref$1(l):l}return c.s=TERMINATED,c.v=l,l}return a.clearCache=()=>{r=createCacheNode(),a.resetResultsCount()},a.resultsCount=()=>o,a.resetResultsCount=()=>{o=0},a}function createSelectorCreator(e,...t){const r="function"==typeof e?{memoize:e,memoizeOptions:t}:e,n=(...e)=>{let t,n=0,i=0,o={},a=e.pop();"object"==typeof a&&(o=a,a=e.pop()),assertIsFunction(a,`createSelector expects an output function after the inputs, but received: [${typeof a}]`);const s={...r,...o},{memoize:c,memoizeOptions:l=[],argsMemoize:u=weakMapMemoize,argsMemoizeOptions:d=[]}=s,p=ensureIsArray(l),h=ensureIsArray(d),m=getDependencies(e),f=c(function(){return n++,a.apply(null,arguments)},...p),x=u(function(){i++;const e=collectInputSelectorResults(m,arguments);return t=f.apply(null,e),t},...h);return Object.assign(x,{resultFunc:a,memoizedResultFunc:f,dependencies:m,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>t,recomputations:()=>n,resetRecomputations:()=>{n=0},memoize:c,argsMemoize:u})};return Object.assign(n,{withTypes:()=>n}),n}var createSelector=createSelectorCreator(weakMapMemoize),createStructuredSelector=Object.assign((e,t=createSelector)=>{assertIsObject(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const r=Object.keys(e);return t(r.map(t=>e[t]),(...e)=>e.reduce((e,t,n)=>(e[r[n]]=t,e),{}))},{withTypes:()=>createStructuredSelector}),sortBy$2={},orderBy={},compareValues={};!function(e){function t(e){return"symbol"==typeof e?1:null===e?2:void 0===e?3:e!=e?4:0}Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});e.compareValues=(e,r,n)=>{if(e!==r){const i=t(e),o=t(r);if(i===o&&0===i){if(e<r)return"desc"===n?1:-1;if(e>r)return"desc"===n?-1:1}return"desc"===n?o-i:i-o}return 0}}(compareValues);var isKey={},isSymbol={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isSymbol=function(e){return"symbol"==typeof e||e instanceof Symbol}}(isSymbol),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=isSymbol,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;e.isKey=function(e,i){return!Array.isArray(e)&&(!("number"!=typeof e&&"boolean"!=typeof e&&null!=e&&!t.isSymbol(e))||("string"==typeof e&&(n.test(e)||!r.test(e))||null!=i&&Object.hasOwn(i,e)))}}(isKey),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=compareValues,r=isKey,n=toPath;e.orderBy=function(e,i,o,a){if(null==e)return[];o=a?void 0:o,Array.isArray(e)||(e=Object.values(e)),Array.isArray(i)||(i=null==i?[null]:[i]),0===i.length&&(i=[null]),Array.isArray(o)||(o=null==o?[]:[o]),o=o.map(e=>String(e));const s=(e,t)=>{let r=e;for(let n=0;n<t.length&&null!=r;++n)r=r[t[n]];return r},c=i.map(e=>(Array.isArray(e)&&1===e.length&&(e=e[0]),null==e||"function"==typeof e||Array.isArray(e)||r.isKey(e)?e:{key:e,path:n.toPath(e)}));return e.map(e=>({original:e,criteria:c.map(t=>((e,t)=>null==t||null==e?t:"object"==typeof e&&"key"in e?Object.hasOwn(t,e.key)?t[e.key]:s(t,e.path):"function"==typeof e?e(t):Array.isArray(e)?s(t,e):"object"==typeof t?t[e]:t)(t,e))})).slice().sort((e,r)=>{for(let n=0;n<c.length;n++){const i=t.compareValues(e.criteria[n],r.criteria[n],o[n]);if(0!==i)return i}return 0}).map(e=>e.original)}}(orderBy);var flatten={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.flatten=function(e,t=1){const r=[],n=Math.floor(t),i=(e,t)=>{for(let o=0;o<e.length;o++){const a=e[o];Array.isArray(a)&&t<n?i(a,t+1):r.push(a)}};return i(e,0),r}}(flatten);var isIterateeCall={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=isIndex,r=isArrayLike,n=isObject$1,i=eq;e.isIterateeCall=function(e,o,a){return!!n.isObject(a)&&(!!("number"==typeof o&&r.isArrayLike(a)&&t.isIndex(o)&&o<a.length||"string"==typeof o&&o in a)&&i.eq(a[o],e))}}(isIterateeCall),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=orderBy,r=flatten,n=isIterateeCall;e.sortBy=function(e,...i){const o=i.length;return o>1&&n.isIterateeCall(e,i[0],i[1])?i=[]:o>2&&n.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),t.orderBy(e,r.flatten(i),["asc"])}}(sortBy$2);var sortBy=sortBy$2.sortBy;const sortBy$1=getDefaultExportFromCjs(sortBy);var selectLegendSettings=e=>e.legend.settings,selectLegendSize=e=>e.legend.size,selectAllLegendPayload2DArray=e=>e.legend.payload;createSelector([selectAllLegendPayload2DArray,selectLegendSettings],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?sortBy$1(n,r):n});var EPS$1=1;function useElementOffset(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,r]=reactExports.useState({height:0,left:0,top:0,width:0}),n=reactExports.useCallback(e=>{if(null!=e){var n=e.getBoundingClientRect(),i={height:n.height,left:n.left,top:n.top,width:n.width};(Math.abs(i.height-t.height)>EPS$1||Math.abs(i.left-t.left)>EPS$1||Math.abs(i.top-t.top)>EPS$1||Math.abs(i.width-t.width)>EPS$1)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function formatProdErrorMessage$1(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var $$observable=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),symbol_observable_default=$$observable,randomString=()=>Math.random().toString(36).substring(7).split("").join("."),ActionTypes={INIT:`@@redux/INIT${randomString()}`,REPLACE:`@@redux/REPLACE${randomString()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${randomString()}`},actionTypes_default=ActionTypes;function isPlainObject$4(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function createStore$1(e,t,r){if("function"!=typeof e)throw new Error(formatProdErrorMessage$1(2));if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(formatProdErrorMessage$1(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(formatProdErrorMessage$1(1));return r(createStore$1)(e,t)}let n=e,i=t,o=new Map,a=o,s=0,c=!1;function l(){a===o&&(a=new Map,o.forEach((e,t)=>{a.set(t,e)}))}function u(){if(c)throw new Error(formatProdErrorMessage$1(3));return i}function d(e){if("function"!=typeof e)throw new Error(formatProdErrorMessage$1(4));if(c)throw new Error(formatProdErrorMessage$1(5));let t=!0;l();const r=s++;return a.set(r,e),function(){if(t){if(c)throw new Error(formatProdErrorMessage$1(6));t=!1,l(),a.delete(r),o=null}}}function p(e){if(!isPlainObject$4(e))throw new Error(formatProdErrorMessage$1(7));if(void 0===e.type)throw new Error(formatProdErrorMessage$1(8));if("string"!=typeof e.type)throw new Error(formatProdErrorMessage$1(17));if(c)throw new Error(formatProdErrorMessage$1(9));try{c=!0,i=n(i,e)}finally{c=!1}return(o=a).forEach(e=>{e()}),e}p({type:actionTypes_default.INIT});return{dispatch:p,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error(formatProdErrorMessage$1(10));n=e,p({type:actionTypes_default.REPLACE})},[symbol_observable_default]:function(){const e=d;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(formatProdErrorMessage$1(11));function r(){const e=t;e.next&&e.next(u())}r();return{unsubscribe:e(r)}},[symbol_observable_default](){return this}}}}}function assertReducerShape(e){Object.keys(e).forEach(t=>{const r=e[t];if(void 0===r(void 0,{type:actionTypes_default.INIT}))throw new Error(formatProdErrorMessage$1(12));if(void 0===r(void 0,{type:actionTypes_default.PROBE_UNKNOWN_ACTION()}))throw new Error(formatProdErrorMessage$1(13))})}function combineReducers(e){const t=Object.keys(e),r={};for(let o=0;o<t.length;o++){const n=t[o];"function"==typeof e[n]&&(r[n]=e[n])}const n=Object.keys(r);let i;try{assertReducerShape(r)}catch(e3){i=e3}return function(e={},t){if(i)throw i;let o=!1;const a={};for(let i=0;i<n.length;i++){const s=n[i],c=r[s],l=e[s],u=c(l,t);if(void 0===u)throw t&&t.type,new Error(formatProdErrorMessage$1(14));a[s]=u,o=o||u!==l}return o=o||n.length!==Object.keys(e).length,o?a:e}}function compose$1(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce((e,t)=>(...r)=>e(t(...r)))}function applyMiddleware(...e){return t=>(r,n)=>{const i=t(r,n);let o=()=>{throw new Error(formatProdErrorMessage$1(15))};const a={getState:i.getState,dispatch:(e,...t)=>o(e,...t)},s=e.map(e=>e(a));return o=compose$1(...s)(i.dispatch),{...i,dispatch:o}}}function isAction(e){return isPlainObject$4(e)&&"type"in e&&"string"==typeof e.type}var NOTHING=Symbol.for("immer-nothing"),DRAFTABLE=Symbol.for("immer-draftable"),DRAFT_STATE=Symbol.for("immer-state");function die(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var getPrototypeOf=Object.getPrototypeOf;function isDraft(e){return!!e&&!!e[DRAFT_STATE]}function isDraftable(e){var t;return!!e&&(isPlainObject$3(e)||Array.isArray(e)||!!e[DRAFTABLE]||!!(null==(t=e.constructor)?void 0:t[DRAFTABLE])||isMap(e)||isSet(e))}var objectCtorString=Object.prototype.constructor.toString(),cachedCtorStrings=new WeakMap;function isPlainObject$3(e){if(!e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);if(null===t||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if("function"!=typeof r)return!1;let n=cachedCtorStrings.get(r);return void 0===n&&(n=Function.toString.call(r),cachedCtorStrings.set(r,n)),n===objectCtorString}function each(e,t,r=!0){if(0===getArchtype(e)){(r?Reflect.ownKeys(e):Object.keys(e)).forEach(r=>{t(r,e[r],e)})}else e.forEach((r,n)=>t(n,r,e))}function getArchtype(e){const t=e[DRAFT_STATE];return t?t.type_:Array.isArray(e)?1:isMap(e)?2:isSet(e)?3:0}function has$1(e,t){return 2===getArchtype(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function set$1(e,t,r){const n=getArchtype(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function is$2(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function isMap(e){return e instanceof Map}function isSet(e){return e instanceof Set}function latest(e){return e.copy_||e.base_}function shallowCopy(e,t){if(isMap(e))return new Map(e);if(isSet(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=isPlainObject$3(e);if(!0===t||"class_only"===t&&!r){const t=Object.getOwnPropertyDescriptors(e);delete t[DRAFT_STATE];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){const i=r[n],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(getPrototypeOf(e),t)}{const t=getPrototypeOf(e);if(null!==t&&r)return{...e};const n=Object.create(t);return Object.assign(n,e)}}function freeze(e,t=!1){return isFrozen(e)||isDraft(e)||!isDraftable(e)||(getArchtype(e)>1&&Object.defineProperties(e,{set:dontMutateMethodOverride,add:dontMutateMethodOverride,clear:dontMutateMethodOverride,delete:dontMutateMethodOverride}),Object.freeze(e),t&&Object.values(e).forEach(e=>freeze(e,!0))),e}function dontMutateFrozenCollections(){die(2)}var dontMutateMethodOverride={value:dontMutateFrozenCollections};function isFrozen(e){return null===e||"object"!=typeof e||Object.isFrozen(e)}var plugins={},currentScope;function getPlugin(e){const t=plugins[e];return t||die(0,e),t}function getCurrentScope(){return currentScope}function createScope(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function usePatchesInScope(e,t){t&&(getPlugin("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function revokeScope(e){leaveScope(e),e.drafts_.forEach(revokeDraft),e.drafts_=null}function leaveScope(e){e===currentScope&&(currentScope=e.parent_)}function enterScope(e){return currentScope=createScope(currentScope,e)}function revokeDraft(e){const t=e[DRAFT_STATE];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function processResult(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[DRAFT_STATE].modified_&&(revokeScope(t),die(4)),isDraftable(e)&&(e=finalize(t,e),t.parent_||maybeFreeze(t,e)),t.patches_&&getPlugin("Patches").generateReplacementPatches_(r[DRAFT_STATE].base_,e,t.patches_,t.inversePatches_)):e=finalize(t,r,[]),revokeScope(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==NOTHING?e:void 0}function finalize(e,t,r){if(isFrozen(t))return t;const n=e.immer_.shouldUseStrictIteration(),i=t[DRAFT_STATE];if(!i)return each(t,(n,o)=>finalizeProperty(e,i,t,n,o,r),n),t;if(i.scope_!==e)return t;if(!i.modified_)return maybeFreeze(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const t=i.copy_;let o=t,a=!1;3===i.type_&&(o=new Set(t),t.clear(),a=!0),each(o,(n,o)=>finalizeProperty(e,i,t,n,o,r,a),n),maybeFreeze(e,t,!1),r&&e.patches_&&getPlugin("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function finalizeProperty(e,t,r,n,i,o,a){if(null==i)return;if("object"!=typeof i&&!a)return;const s=isFrozen(i);if(!s||a){if(isDraft(i)){const a=finalize(e,i,o&&t&&3!==t.type_&&!has$1(t.assigned_,n)?o.concat(n):void 0);if(set$1(r,n,a),!isDraft(a))return;e.canAutoFreeze_=!1}else a&&r.add(i);if(isDraftable(i)&&!s){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;if(t&&t.base_&&t.base_[n]===i&&s)return;finalize(e,i),t&&t.scope_.parent_||"symbol"==typeof n||!(isMap(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))||maybeFreeze(e,i)}}}function maybeFreeze(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&freeze(t,r)}function createProxyProxy(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:getCurrentScope(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,o=objectTraps;r&&(i=[n],o=arrayTraps);const{revoke:a,proxy:s}=Proxy.revocable(i,o);return n.draft_=s,n.revoke_=a,s}var objectTraps={get(e,t){if(t===DRAFT_STATE)return e;const r=latest(e);if(!has$1(r,t))return readPropFromProto(e,r,t);const n=r[t];return e.finalized_||!isDraftable(n)?n:n===peek(e.base_,t)?(prepareCopy(e),e.copy_[t]=createProxy(n,e)):n},has:(e,t)=>t in latest(e),ownKeys:e=>Reflect.ownKeys(latest(e)),set(e,t,r){const n=getDescriptorFromProto(latest(e),t);if(null==n?void 0:n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=peek(latest(e),t),i=null==n?void 0:n[DRAFT_STATE];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(is$2(r,n)&&(void 0!==r||has$1(e.base_,t)))return!0;prepareCopy(e),markChanged(e)}return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==peek(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,prepareCopy(e),markChanged(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=latest(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){die(11)},getPrototypeOf:e=>getPrototypeOf(e.base_),setPrototypeOf(){die(12)}},arrayTraps={};function peek(e,t){const r=e[DRAFT_STATE];return(r?latest(r):e)[t]}function readPropFromProto(e,t,r){var n;const i=getDescriptorFromProto(t,r);return i?"value"in i?i.value:null==(n=i.get)?void 0:n.call(e.draft_):void 0}function getDescriptorFromProto(e,t){if(!(t in e))return;let r=getPrototypeOf(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=getPrototypeOf(r)}}function markChanged(e){e.modified_||(e.modified_=!0,e.parent_&&markChanged(e.parent_))}function prepareCopy(e){e.copy_||(e.copy_=shallowCopy(e.base_,e.scope_.immer_.useStrictShallowCopy_))}each(objectTraps,(e,t)=>{arrayTraps[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),arrayTraps.deleteProperty=function(e,t){return arrayTraps.set.call(this,e,t,void 0)},arrayTraps.set=function(e,t,r){return objectTraps.set.call(this,e[0],t,r,e[0])};var Immer2=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,r)=>{if("function"==typeof e&&"function"!=typeof t){const r=t;t=e;const n=this;return function(e=r,...i){return n.produce(e,e=>t.call(this,e,...i))}}let n;if("function"!=typeof t&&die(6),void 0!==r&&"function"!=typeof r&&die(7),isDraftable(e)){const i=enterScope(this),o=createProxy(e,void 0);let a=!0;try{n=t(o),a=!1}finally{a?revokeScope(i):leaveScope(i)}return usePatchesInScope(i,r),processResult(n,i)}if(!e||"object"!=typeof e){if(n=t(e),void 0===n&&(n=e),n===NOTHING&&(n=void 0),this.autoFreeze_&&freeze(n,!0),r){const t=[],i=[];getPlugin("Patches").generateReplacementPatches_(e,n,t,i),r(t,i)}return n}die(1,e)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...r)=>this.produceWithPatches(t,t=>e(t,...r));let r,n;return[this.produce(e,t,(e,t)=>{r=e,n=t}),r,n]},"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof(null==e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),"boolean"==typeof(null==e?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){isDraftable(e)||die(8),isDraft(e)&&(e=current(e));const t=enterScope(this),r=createProxy(e,void 0);return r[DRAFT_STATE].isManual_=!0,leaveScope(t),r}finishDraft(e,t){const r=e&&e[DRAFT_STATE];r&&r.isManual_||die(9);const{scope_:n}=r;return usePatchesInScope(n,t),processResult(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=getPlugin("Patches").applyPatches_;return isDraft(e)?n(e,t):this.produce(e,e=>n(e,t))}};function createProxy(e,t){const r=isMap(e)?getPlugin("MapSet").proxyMap_(e,t):isSet(e)?getPlugin("MapSet").proxySet_(e,t):createProxyProxy(e,t);return(t?t.scope_:getCurrentScope()).drafts_.push(r),r}function current(e){return isDraft(e)||die(10,e),currentImpl(e)}function currentImpl(e){if(!isDraftable(e)||isFrozen(e))return e;const t=e[DRAFT_STATE];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=shallowCopy(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=shallowCopy(e,!0);return each(r,(e,t)=>{set$1(r,e,currentImpl(t))},n),t&&(t.finalized_=!1),r}var immer=new Immer2,produce=immer.produce,setUseStrictIteration=immer.setUseStrictIteration.bind(immer);function castDraft(e){return e}function createThunkMiddleware(e){return({dispatch:t,getState:r})=>n=>i=>"function"==typeof i?i(t,r,e):n(i)}var thunk=createThunkMiddleware(),withExtraArgument=createThunkMiddleware,composeWithDevTools="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?compose$1:compose$1.apply(null,arguments)};function createAction(e,t){function r(...r){if(t){let n=t(...r);if(!n)throw new Error(formatProdErrorMessage(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:r[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=t=>isAction(t)&&t.type===e,r}var Tuple$1=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function freezeDraftable(e){return isDraftable(e)?produce(e,()=>{}):e}function getOrInsertComputed(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function isBoolean(e){return"boolean"==typeof e}var buildGetDefaultMiddleware=()=>function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:i=!0}=e??{};let o=new Tuple$1;return t&&(isBoolean(t)?o.push(thunk):o.push(withExtraArgument(t.extraArgument))),o},SHOULD_AUTOBATCH="RTK_autoBatch",prepareAutoBatched=()=>e=>({payload:e,meta:{[SHOULD_AUTOBATCH]:!0}}),createQueueWithTimer=e=>t=>{setTimeout(t,e)},autoBatchEnhancer=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,o=!1,a=!1;const s=new Set,c="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:createQueueWithTimer(10):"callback"===e.type?e.queueNotification:createQueueWithTimer(e.timeout),l=()=>{a=!1,o&&(o=!1,s.forEach(e=>e()))};return Object.assign({},n,{subscribe(e){const t=n.subscribe(()=>i&&e());return s.add(e),()=>{t(),s.delete(e)}},dispatch(e){var t;try{return i=!(null==(t=null==e?void 0:e.meta)?void 0:t[SHOULD_AUTOBATCH]),o=!i,o&&(a||(a=!0,c(l))),n.dispatch(e)}finally{i=!0}}})},buildGetDefaultEnhancers=e=>function(t){const{autoBatch:r=!0}=t??{};let n=new Tuple$1(e);return r&&n.push(autoBatchEnhancer("object"==typeof r?r:void 0)),n};function configureStore(e){const t=buildGetDefaultMiddleware(),{reducer:r,middleware:n,devTools:i=!0,preloadedState:o,enhancers:a}=e||{};let s,c;if("function"==typeof r)s=r;else{if(!isPlainObject$4(r))throw new Error(formatProdErrorMessage(1));s=combineReducers(r)}c="function"==typeof n?n(t):t();let l=compose$1;i&&(l=composeWithDevTools({trace:!1,..."object"==typeof i&&i}));const u=applyMiddleware(...c),d=buildGetDefaultEnhancers(u);return createStore$1(s,o,l(..."function"==typeof a?a(d):d()))}function executeReducerBuilderCallback(e){const t={},r=[];let n;const i={addCase(e,r){const n="string"==typeof e?e:e.type;if(!n)throw new Error(formatProdErrorMessage(28));if(n in t)throw new Error(formatProdErrorMessage(29));return t[n]=r,i},addAsyncThunk:(e,n)=>(n.pending&&(t[e.pending.type]=n.pending),n.rejected&&(t[e.rejected.type]=n.rejected),n.fulfilled&&(t[e.fulfilled.type]=n.fulfilled),n.settled&&r.push({matcher:e.settled,reducer:n.settled}),i),addMatcher:(e,t)=>(r.push({matcher:e,reducer:t}),i),addDefaultCase:e=>(n=e,i)};return e(i),[t,r,n]}function isStateFunction(e){return"function"==typeof e}function createReducer(e,t){let r,[n,i,o]=executeReducerBuilderCallback(t);if(isStateFunction(e))r=()=>freezeDraftable(e());else{const t=freezeDraftable(e);r=()=>t}function a(e=r(),t){let a=[n[t.type],...i.filter(({matcher:e})=>e(t)).map(({reducer:e})=>e)];return 0===a.filter(e=>!!e).length&&(a=[o]),a.reduce((e,r)=>{if(r){if(isDraft(e)){const n=r(e,t);return void 0===n?e:n}if(isDraftable(e))return produce(e,e=>r(e,t));{const n=r(e,t);if(void 0===n){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}}return e},e)}return a.getInitialState=r,a}setUseStrictIteration(!1);var urlAlphabet="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",nanoid=(e=21)=>{let t="",r=e;for(;r--;)t+=urlAlphabet[64*Math.random()|0];return t},asyncThunkSymbol=Symbol.for("rtk-slice-createasyncthunk");function getType(e,t){return`${e}/${t}`}function buildCreateSlice({creators:e}={}){var t;const r=null==(t=null==e?void 0:e.asyncThunk)?void 0:t[asyncThunkSymbol];return function(e){const{name:t,reducerPath:n=t}=e;if(!t)throw new Error(formatProdErrorMessage(11));const i=("function"==typeof e.reducers?e.reducers(buildReducerCreators()):e.reducers)||{},o=Object.keys(i),a={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},s={addCase(e,t){const r="string"==typeof e?e:e.type;if(!r)throw new Error(formatProdErrorMessage(12));if(r in a.sliceCaseReducersByType)throw new Error(formatProdErrorMessage(13));return a.sliceCaseReducersByType[r]=t,s},addMatcher:(e,t)=>(a.sliceMatchers.push({matcher:e,reducer:t}),s),exposeAction:(e,t)=>(a.actionCreators[e]=t,s),exposeCaseReducer:(e,t)=>(a.sliceCaseReducersByName[e]=t,s)};function c(){const[t={},r=[],n]="function"==typeof e.extraReducers?executeReducerBuilderCallback(e.extraReducers):[e.extraReducers],i={...t,...a.sliceCaseReducersByType};return createReducer(e.initialState,e=>{for(let t in i)e.addCase(t,i[t]);for(let t of a.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of r)e.addMatcher(t.matcher,t.reducer);n&&e.addDefaultCase(n)})}o.forEach(n=>{const o=i[n],a={reducerName:n,type:getType(t,n),createNotation:"function"==typeof e.reducers};isAsyncThunkSliceReducerDefinition(o)?handleThunkCaseReducerDefinition(a,o,s,r):handleNormalReducerDefinition(a,o,s)});const l=e=>e,u=new Map,d=new WeakMap;let p;function h(e,t){return p||(p=c()),p(e,t)}function m(){return p||(p=c()),p.getInitialState()}function f(t,r=!1){function n(e){let i=e[t];return void 0===i&&r&&(i=getOrInsertComputed(d,n,m)),i}function i(t=l){const n=getOrInsertComputed(u,r,()=>new WeakMap);return getOrInsertComputed(n,t,()=>{const n={};for(const[i,o]of Object.entries(e.selectors??{}))n[i]=wrapSelector(o,t,()=>getOrInsertComputed(d,t,m),r);return n})}return{reducerPath:t,getSelectors:i,get selectors(){return i(n)},selectSlice:n}}const x={name:t,reducer:h,actions:a.actionCreators,caseReducers:a.sliceCaseReducersByName,getInitialState:m,...f(n),injectInto(e,{reducerPath:t,...r}={}){const i=t??n;return e.inject({reducerPath:i,reducer:h},r),{...x,...f(i,!0)}}};return x}}function wrapSelector(e,t,r,n){function i(i,...o){let a=t(i);return void 0===a&&n&&(a=r()),e(a,...o)}return i.unwrapped=e,i}var createSlice=buildCreateSlice();function buildReducerCreators(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}function handleNormalReducerDefinition({type:e,reducerName:t,createNotation:r},n,i){let o,a;if("reducer"in n){if(r&&!isCaseReducerWithPrepareDefinition(n))throw new Error(formatProdErrorMessage(17));o=n.reducer,a=n.prepare}else o=n;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,a?createAction(e,a):createAction(e))}function isAsyncThunkSliceReducerDefinition(e){return"asyncThunk"===e._reducerDefinitionType}function isCaseReducerWithPrepareDefinition(e){return"reducerWithPrepare"===e._reducerDefinitionType}function handleThunkCaseReducerDefinition({type:e,reducerName:t},r,n,i){if(!i)throw new Error(formatProdErrorMessage(18));const{payloadCreator:o,fulfilled:a,pending:s,rejected:c,settled:l,options:u}=r,d=i(e,o,u);n.exposeAction(t,d),a&&n.addCase(d.fulfilled,a),s&&n.addCase(d.pending,s),c&&n.addCase(d.rejected,c),l&&n.addMatcher(d.settled,l),n.exposeCaseReducer(t,{fulfilled:a||noop$3,pending:s||noop$3,rejected:c||noop$3,settled:l||noop$3})}function noop$3(){}var task="task",listener="listener",completed="completed",cancelled="cancelled",taskCancelled=`task-${cancelled}`,taskCompleted=`task-${completed}`,listenerCancelled=`${listener}-${cancelled}`,listenerCompleted=`${listener}-${completed}`,TaskAbortError=class{constructor(e){__publicField(this,"name","TaskAbortError"),__publicField(this,"message"),this.code=e,this.message=`${task} ${cancelled} (reason: ${e})`}},assertFunction=(e,t)=>{if("function"!=typeof e)throw new TypeError(formatProdErrorMessage(32))},noop2=()=>{},catchRejection=(e,t=noop2)=>(e.catch(t),e),addAbortSignalListener=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),abortControllerWithReason=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},validateActive=e=>{if(e.aborted){const{reason:t}=e;throw new TaskAbortError(t)}};function raceWithSignal(e,t){let r=noop2;return new Promise((n,i)=>{const o=()=>i(new TaskAbortError(e.reason));e.aborted?o():(r=addAbortSignalListener(e,o),t.finally(()=>r()).then(n,i))}).finally(()=>{r=noop2})}var runTask=async(e,t)=>{try{await Promise.resolve();return{status:"ok",value:await e()}}catch(r){return{status:r instanceof TaskAbortError?"cancelled":"rejected",error:r}}finally{null==t||t()}},createPause=e=>t=>catchRejection(raceWithSignal(e,t).then(t=>(validateActive(e),t))),createDelay=e=>{const t=createPause(e);return e=>t(new Promise(t=>setTimeout(t,e)))},{assign:assign}=Object,INTERNAL_NIL_TOKEN={},alm="listenerMiddleware",createFork=(e,t)=>(r,n)=>{assertFunction(r);const i=new AbortController;var o;o=i,addAbortSignalListener(e,()=>abortControllerWithReason(o,e.reason));const a=runTask(async()=>{validateActive(e),validateActive(i.signal);const t=await r({pause:createPause(i.signal),delay:createDelay(i.signal),signal:i.signal});return validateActive(i.signal),t},()=>abortControllerWithReason(i,taskCompleted));return(null==n?void 0:n.autoJoin)&&t.push(a.catch(noop2)),{result:createPause(e)(a),cancel(){abortControllerWithReason(i,taskCancelled)}}},createTakePattern=(e,t)=>(r,n)=>catchRejection((async(r,n)=>{validateActive(t);let i=()=>{};const o=[new Promise((t,n)=>{let o=e({predicate:r,effect:(e,r)=>{r.unsubscribe(),t([e,r.getState(),r.getOriginalState()])}});i=()=>{o(),n()}})];null!=n&&o.push(new Promise(e=>setTimeout(e,n,null)));try{const e=await raceWithSignal(t,Promise.race(o));return validateActive(t),e}finally{i()}})(r,n)),getListenerEntryPropsFrom=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:o}=e;if(t)i=createAction(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(formatProdErrorMessage(21));return assertFunction(o),{predicate:i,type:t,effect:o}},createListenerEntry=assign(e=>{const{type:t,predicate:r,effect:n}=getListenerEntryPropsFrom(e);return{id:nanoid(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(formatProdErrorMessage(22))}}},{withTypes:()=>createListenerEntry}),findListenerEntry=(e,t)=>{const{type:r,effect:n,predicate:i}=getListenerEntryPropsFrom(t);return Array.from(e.values()).find(e=>("string"==typeof r?e.type===r:e.predicate===i)&&e.effect===n)},cancelActiveListeners=e=>{e.pending.forEach(e=>{abortControllerWithReason(e,listenerCancelled)})},createClearListenerMiddleware=(e,t)=>()=>{for(const e of t.keys())cancelActiveListeners(e);e.clear()},safelyNotifyError=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},addListener=assign(createAction(`${alm}/add`),{withTypes:()=>addListener}),clearAllListeners=createAction(`${alm}/removeAll`),removeListener=assign(createAction(`${alm}/remove`),{withTypes:()=>removeListener}),defaultErrorHandler=(...e)=>{},createListenerMiddleware=(e={})=>{const t=new Map,r=new Map,{extra:n,onError:i=defaultErrorHandler}=e;assertFunction(i);const o=e=>(e=>(e.unsubscribe=()=>t.delete(e.id),t.set(e.id,e),t=>{e.unsubscribe(),(null==t?void 0:t.cancelActive)&&cancelActiveListeners(e)}))(findListenerEntry(t,e)??createListenerEntry(e));assign(o,{withTypes:()=>o});const a=e=>{const r=findListenerEntry(t,e);return r&&(r.unsubscribe(),e.cancelActive&&cancelActiveListeners(r)),!!r};assign(a,{withTypes:()=>a});const s=async(e,a,s,c)=>{const l=new AbortController,u=createTakePattern(o,l.signal),d=[];try{e.pending.add(l),(e=>{const t=r.get(e)??0;r.set(e,t+1)})(e),await Promise.resolve(e.effect(a,assign({},s,{getOriginalState:c,condition:(e,t)=>u(e,t).then(Boolean),take:u,delay:createDelay(l.signal),pause:createPause(l.signal),extra:n,signal:l.signal,fork:createFork(l.signal,d),unsubscribe:e.unsubscribe,subscribe:()=>{t.set(e.id,e)},cancelActiveListeners:()=>{e.pending.forEach((e,t,r)=>{e!==l&&(abortControllerWithReason(e,listenerCancelled),r.delete(e))})},cancel:()=>{abortControllerWithReason(l,listenerCancelled),e.pending.delete(l)},throwIfCancelled:()=>{validateActive(l.signal)}})))}catch(p){p instanceof TaskAbortError||safelyNotifyError(i,p,{raisedBy:"effect"})}finally{await Promise.all(d),abortControllerWithReason(l,listenerCompleted),(e=>{const t=r.get(e)??1;1===t?r.delete(e):r.set(e,t-1)})(e),e.pending.delete(l)}},c=createClearListenerMiddleware(t,r);return{middleware:e=>r=>n=>{if(!isAction(n))return r(n);if(addListener.match(n))return o(n.payload);if(clearAllListeners.match(n))return void c();if(removeListener.match(n))return a(n.payload);let l=e.getState();const u=()=>{if(l===INTERNAL_NIL_TOKEN)throw new Error(formatProdErrorMessage(23));return l};let d;try{if(d=r(n),t.size>0){const r=e.getState(),o=Array.from(t.values());for(const t of o){let o=!1;try{o=t.predicate(n,r,l)}catch(p){o=!1,safelyNotifyError(i,p,{raisedBy:"predicate"})}o&&s(t,n,e,u)}}}finally{l=INTERNAL_NIL_TOKEN}return d},startListening:o,stopListening:a,clearListeners:c}};function formatProdErrorMessage(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var initialState$b={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},chartLayoutSlice=createSlice({name:"chartLayout",initialState:initialState$b,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,i,o;e.margin.top=null!==(r=t.payload.top)&&void 0!==r?r:0,e.margin.right=null!==(n=t.payload.right)&&void 0!==n?n:0,e.margin.bottom=null!==(i=t.payload.bottom)&&void 0!==i?i:0,e.margin.left=null!==(o=t.payload.left)&&void 0!==o?o:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:setMargin,setLayout:setLayout,setChartSize:setChartSize,setScale:setScale}=chartLayoutSlice.actions,chartLayoutReducer=chartLayoutSlice.reducer;function getSliced(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function ownKeys$v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$v(Object(r),!0).forEach(function(t){_defineProperty$x(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$v(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$x(e,t,r){return(t=_toPropertyKey$x(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$x(e){var t=_toPrimitive$x(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$x(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function getValueByDataKey(e,t,r){return isNullish$1(e)||isNullish$1(t)?r:isNumOrStr(t)?get$a(e,t,r):"function"==typeof t?t(e):r}var appendOffsetOfLegend=(e,t,r)=>{if(t&&r){var{width:n,height:i}=r,{align:o,verticalAlign:a,layout:s}=t;if(("vertical"===s||"horizontal"===s&&"middle"===a)&&"center"!==o&&isNumber(e[o]))return _objectSpread$v(_objectSpread$v({},e),{},{[o]:e[o]+(n||0)});if(("horizontal"===s||"vertical"===s&&"center"===o)&&"middle"!==a&&isNumber(e[a]))return _objectSpread$v(_objectSpread$v({},e),{},{[a]:e[a]+(i||0)})}return e},isCategoricalAxis=(e,t)=>"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t,getCoordinatesOfGrid=(e,t,r,n)=>{if(n)return e.map(e=>e.coordinate);var i,o,a=e.map(e=>(e.coordinate===t&&(i=!0),e.coordinate===r&&(o=!0),e.coordinate));return i||a.push(t),o||a.push(r),a},getTicksOfAxis=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:i,range:o,scale:a,realScaleType:s,isCategorical:c,categoricalDomain:l,tickCount:u,ticks:d,niceTicks:p,axisType:h}=e;if(!a)return null;var m="scaleBand"===s&&a.bandwidth?a.bandwidth()/2:2,f="category"===i&&a.bandwidth?a.bandwidth()/m:0;return f="angleAxis"===h&&o&&o.length>=2?2*mathSign(o[0]-o[1])*f:f,d||p?(d||p||[]).map((e,t)=>{var r=n?n.indexOf(e):e;return{coordinate:a(r)+f,value:e,offset:f,index:t}}).filter(e=>!isNan(e.coordinate)):c&&l?l.map((e,t)=>({coordinate:a(e)+f,value:e,index:t,offset:f})):a.ticks&&null!=u?a.ticks(u).map((e,t)=>({coordinate:a(e)+f,value:e,offset:f,index:t})):a.domain().map((e,t)=>({coordinate:a(e)+f,value:n?n[e]:e,index:t,offset:f}))},EPS=1e-4,checkDomainOfScale=e=>{var t=e.domain();if(t&&!(t.length<=2)){var r=t.length,n=e.range(),i=Math.min(n[0],n[1])-EPS,o=Math.max(n[0],n[1])+EPS,a=e(t[0]),s=e(t[r-1]);(a<i||a>o||s<i||s>o)&&e.domain([t[0],t[r-1]])}},offsetSign=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var i=0,o=0,a=0;a<t;++a){var s=isNan(e[a][r][1])?e[a][r][0]:e[a][r][1];s>=0?(e[a][r][0]=i,e[a][r][1]=i+s,i=e[a][r][1]):(e[a][r][0]=o,e[a][r][1]=o+s,o=e[a][r][1])}},offsetPositive=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var i=0,o=0;o<t;++o){var a=isNan(e[o][r][1])?e[o][r][0]:e[o][r][1];a>=0?(e[o][r][0]=i,e[o][r][1]=i+a,i=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},STACK_OFFSET_MAP={sign:offsetSign,expand:stackOffsetExpand,none:stackOffsetNone,silhouette:stackOffsetSilhouette,wiggle:stackOffsetWiggle,positive:offsetPositive},getStackedData=(e,t,r)=>{var n=STACK_OFFSET_MAP[r];return shapeStack().keys(t).value((e,t)=>Number(getValueByDataKey(e,t,0))).order(stackOrderNone).offset(n)(e)};function getCateCoordinateOfLine(e){var{axis:t,ticks:r,bandSize:n,entry:i,index:o,dataKey:a}=e;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!isNullish$1(i[t.dataKey])){var s=findEntryInArray(r,"value",i[t.dataKey]);if(s)return s.coordinate+n/2}return r[o]?r[o].coordinate+n/2:null}var c=getValueByDataKey(i,isNullish$1(a)?t.dataKey:a);return isNullish$1(c)?null:t.scale(c)}var getDomainOfSingle=e=>{var t=e.flat(2).filter(isNumber);return[Math.min(...t),Math.max(...t)]},makeDomainFinite=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],getDomainOfStackGroups=(e,t,r)=>{if(null!=e)return makeDomainFinite(Object.keys(e).reduce((n,i)=>{var o=e[i],{stackedData:a}=o,s=a.reduce((e,n)=>{var i=getSliced(n,t,r),o=getDomainOfSingle(i);return[Math.min(e[0],o[0]),Math.max(e[1],o[1])]},[1/0,-1/0]);return[Math.min(s[0],n[0]),Math.max(s[1],n[1])]},[1/0,-1/0]))},MIN_VALUE_REG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,MAX_VALUE_REG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,getBandSizeOfAxis=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var i=sortBy$1(t,e=>e.coordinate),o=1/0,a=1,s=i.length;a<s;a++){var c=i[a],l=i[a-1];o=Math.min((c.coordinate||0)-(l.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0};function getTooltipEntry(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:i,name:o}=e;return _objectSpread$v(_objectSpread$v({},t),{},{dataKey:r,payload:n,value:i,name:o})}function getTooltipNameProp(e,t){return e?String(e):"string"==typeof t?t:void 0}var calculateCartesianTooltipPos=(e,t)=>"horizontal"===t?e.chartX:"vertical"===t?e.chartY:void 0,calculatePolarTooltipPos=(e,t)=>"centric"===t?e.angle:e.radius,selectChartWidth=e=>e.layout.width,selectChartHeight=e=>e.layout.height,selectContainerScale=e=>e.layout.scale,selectMargin=e=>e.layout.margin,selectAllXAxes=createSelector(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),selectAllYAxes=createSelector(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),DATA_ITEM_INDEX_ATTRIBUTE_NAME="data-recharts-item-index",DATA_ITEM_DATAKEY_ATTRIBUTE_NAME="data-recharts-item-data-key",DEFAULT_Y_AXIS_WIDTH=60;function ownKeys$u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$u(Object(r),!0).forEach(function(t){_defineProperty$w(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$w(e,t,r){return(t=_toPropertyKey$w(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$w(e){var t=_toPrimitive$w(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$w(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var selectBrushHeight=e=>e.brush.height;function selectLeftAxesOffset(e){return selectAllYAxes(e).reduce((e,t)=>"left"!==t.orientation||t.mirror||t.hide?e:e+("number"==typeof t.width?t.width:DEFAULT_Y_AXIS_WIDTH),0)}function selectRightAxesOffset(e){return selectAllYAxes(e).reduce((e,t)=>"right"!==t.orientation||t.mirror||t.hide?e:e+("number"==typeof t.width?t.width:DEFAULT_Y_AXIS_WIDTH),0)}function selectTopAxesOffset(e){return selectAllXAxes(e).reduce((e,t)=>"top"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)}function selectBottomAxesOffset(e){return selectAllXAxes(e).reduce((e,t)=>"bottom"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)}var selectChartOffsetInternal=createSelector([selectChartWidth,selectChartHeight,selectMargin,selectBrushHeight,selectLeftAxesOffset,selectRightAxesOffset,selectTopAxesOffset,selectBottomAxesOffset,selectLegendSettings,selectLegendSize],(e,t,r,n,i,o,a,s,c,l)=>{var u={left:(r.left||0)+i,right:(r.right||0)+o},d=_objectSpread$u(_objectSpread$u({},{top:(r.top||0)+a,bottom:(r.bottom||0)+s}),u),p=d.bottom;d.bottom+=n;var h=e-(d=appendOffsetOfLegend(d,c,l)).left-d.right,m=t-d.top-d.bottom;return _objectSpread$u(_objectSpread$u({brushBottom:p},d),{},{width:Math.max(h,0),height:Math.max(m,0)})}),selectChartViewBox=createSelector(selectChartOffsetInternal,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),selectAxisViewBox=createSelector(selectChartWidth,selectChartHeight,(e,t)=>({x:0,y:0,width:e,height:t})),PanoramaContext=reactExports.createContext(null),useIsPanorama=()=>null!=reactExports.useContext(PanoramaContext),selectBrushSettings=e=>e.brush,selectBrushDimensions=createSelector([selectBrushSettings,selectChartOffsetInternal,selectMargin],(e,t,r)=>({height:e.height,x:isNumber(e.x)?e.x:t.left,y:isNumber(e.y)?e.y:t.top+t.height+t.brushBottom-((null==r?void 0:r.bottom)||0),width:isNumber(e.width)?e.width:t.width})),throttle$2={},debounce$1={},debounce={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.debounce=function(e,t,{signal:r,edges:n}={}){let i,o=null;const a=null!=n&&n.includes("leading"),s=null==n||n.includes("trailing"),c=()=>{null!==o&&(e.apply(i,o),i=void 0,o=null)};let l=null;const u=()=>{null!=l&&clearTimeout(l),l=setTimeout(()=>{l=null,s&&c(),d()},t)},d=()=>{null!==l&&(clearTimeout(l),l=null),i=void 0,o=null},p=function(...e){if(null==r?void 0:r.aborted)return;i=this,o=e;const t=null==l;u(),a&&t&&c()};return p.schedule=u,p.cancel=d,p.flush=()=>{c()},null==r||r.addEventListener("abort",d,{once:!0}),p}}(debounce),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=debounce;e.debounce=function(e,r=0,n={}){"object"!=typeof n&&(n={});const{leading:i=!1,trailing:o=!0,maxWait:a}=n,s=Array(2);let c;i&&(s[0]="leading"),o&&(s[1]="trailing");let l=null;const u=t.debounce(function(...t){c=e.apply(this,t),l=null},r,{edges:s}),d=function(...t){return null!=a&&(null===l&&(l=Date.now()),Date.now()-l>=a)?(c=e.apply(this,t),l=Date.now(),u.cancel(),u.schedule(),c):(u.apply(this,t),c)};return d.cancel=u.cancel,d.flush=()=>(u.flush(),c),d}}(debounce$1),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=debounce$1;e.throttle=function(e,r=0,n={}){const{leading:i=!0,trailing:o=!0}=n;return t.debounce(e,r,{leading:i,maxWait:r,trailing:o})}}(throttle$2);var throttle=throttle$2.throttle;const throttle$1=getDefaultExportFromCjs(throttle);var warn=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i]},calculateChartDimensions=(e,t,r)=>{var{width:n="100%",height:i="100%",aspect:o,maxHeight:a}=r,s=isPercent(n)?e:Number(n),c=isPercent(i)?t:Number(i);return o&&o>0&&(s?c=s/o:c&&(s=c*o),a&&null!=c&&c>a&&(c=a)),{calculatedWidth:s,calculatedHeight:c}},bothOverflow={width:0,height:0,overflow:"visible"},overflowX={width:0,overflowX:"visible"},overflowY={height:0,overflowY:"visible"},noStyle={},getInnerDivStyle=e=>{var{width:t,height:r}=e,n=isPercent(t),i=isPercent(r);return n&&i?bothOverflow:n?overflowX:i?overflowY:noStyle};function getDefaultWidthAndHeight(e){var{width:t,height:r,aspect:n}=e,i=t,o=r;return void 0===i&&void 0===o?(i="100%",o="100%"):void 0===i?i=n&&n>0?void 0:"100%":void 0===o&&(o=n&&n>0?void 0:"100%"),{width:i,height:o}}function isWellBehavedNumber(e){return Number.isFinite(e)}function isPositiveNumber(e){return"number"==typeof e&&e>0&&Number.isFinite(e)}function _extends$k(){return _extends$k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$k.apply(null,arguments)}function ownKeys$t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$t(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$t(Object(r),!0).forEach(function(t){_defineProperty$v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$t(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$v(e,t,r){return(t=_toPropertyKey$v(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$v(e){var t=_toPrimitive$v(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$v(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var ResponsiveContainerContext=reactExports.createContext({width:-1,height:-1});function isAcceptableSize(e){return isPositiveNumber(e.width)&&isPositiveNumber(e.height)}function ResponsiveContainerContextProvider(e){var{children:t,width:r,height:n}=e,i=reactExports.useMemo(()=>({width:r,height:n}),[r,n]);return isAcceptableSize(i)?reactExports.createElement(ResponsiveContainerContext.Provider,{value:i},t):null}var useResponsiveContainerContext=()=>reactExports.useContext(ResponsiveContainerContext),SizeDetectorContainer=reactExports.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:i,height:o,minWidth:a=0,minHeight:s,maxHeight:c,children:l,debounce:u=0,id:d,className:p,onResize:h,style:m={}}=e,f=reactExports.useRef(null),x=reactExports.useRef();x.current=h,reactExports.useImperativeHandle(t,()=>f.current);var[g,y]=reactExports.useState({containerWidth:n.width,containerHeight:n.height}),b=reactExports.useCallback((e,t)=>{y(r=>{var n=Math.round(e),i=Math.round(t);return r.containerWidth===n&&r.containerHeight===i?r:{containerWidth:n,containerHeight:i}})},[]);reactExports.useEffect(()=>{if(null==f.current||"undefined"==typeof ResizeObserver)return noop$5;var e=e=>{var t,{width:r,height:n}=e[0].contentRect;b(r,n),null===(t=x.current)||void 0===t||t.call(x,r,n)};u>0&&(e=throttle$1(e,u,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),{width:r,height:n}=f.current.getBoundingClientRect();return b(r,n),t.observe(f.current),()=>{t.disconnect()}},[b,u]);var{containerWidth:v,containerHeight:E}=g;warn(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:w,calculatedHeight:S}=calculateChartDimensions(v,E,{width:i,height:o,aspect:r,maxHeight:c});return warn(null!=w&&w>0||null!=S&&S>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",w,S,i,o,a,s,r),reactExports.createElement("div",{id:d?"".concat(d):void 0,className:clsx("recharts-responsive-container",p),style:_objectSpread$t(_objectSpread$t({},m),{},{width:i,height:o,minWidth:a,minHeight:s,maxHeight:c}),ref:f},reactExports.createElement("div",{style:getInnerDivStyle({width:i,height:o})},reactExports.createElement(ResponsiveContainerContextProvider,{width:w,height:S},l)))}),ResponsiveContainer=reactExports.forwardRef((e,t)=>{var r=useResponsiveContainerContext();if(isPositiveNumber(r.width)&&isPositiveNumber(r.height))return e.children;var{width:n,height:i}=getDefaultWidthAndHeight({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:o,calculatedHeight:a}=calculateChartDimensions(void 0,void 0,{width:n,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return isNumber(o)&&isNumber(a)?reactExports.createElement(ResponsiveContainerContextProvider,{width:o,height:a},e.children):reactExports.createElement(SizeDetectorContainer,_extends$k({},e,{width:n,height:i,ref:t}))});function cartesianViewBoxToTrapezoid(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var useViewBox=()=>{var e,t=useIsPanorama(),r=useAppSelector(selectChartViewBox),n=useAppSelector(selectBrushDimensions),i=null===(e=useAppSelector(selectBrushSettings))||void 0===e?void 0:e.padding;return t&&n&&i?{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}:r},manyComponentsThrowErrorsIfOffsetIsUndefined={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},useOffsetInternal=()=>{var e;return null!==(e=useAppSelector(selectChartOffsetInternal))&&void 0!==e?e:manyComponentsThrowErrorsIfOffsetIsUndefined},useChartWidth=()=>useAppSelector(selectChartWidth),useChartHeight=()=>useAppSelector(selectChartHeight),selectChartLayout=e=>e.layout.layoutType,useChartLayout=()=>useAppSelector(selectChartLayout),useIsInChartContext=()=>void 0!==useChartLayout(),ReportChartSize=e=>{var t=useAppDispatch(),r=useIsPanorama(),{width:n,height:i}=e,o=useResponsiveContainerContext(),a=n,s=i;return o&&(a=o.width>0?o.width:n,s=o.height>0?o.height:i),reactExports.useEffect(()=>{!r&&isPositiveNumber(a)&&isPositiveNumber(s)&&t(setChartSize({width:a,height:s}))},[t,r,a,s]),null},initialState$a={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},legendSlice=createSlice({name:"legend",initialState:initialState$a,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(castDraft(t.payload))},prepare:prepareAutoBatched()},removeLegendPayload:{reducer(e,t){var r=current(e).payload.indexOf(castDraft(t.payload));r>-1&&e.payload.splice(r,1)},prepare:prepareAutoBatched()}}}),{setLegendSize:setLegendSize,setLegendSettings:setLegendSettings,addLegendPayload:addLegendPayload,removeLegendPayload:removeLegendPayload}=legendSlice.actions,legendReducer=legendSlice.reducer;function _extends$j(){return _extends$j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$j.apply(null,arguments)}function ownKeys$s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$s(Object(r),!0).forEach(function(t){_defineProperty$u(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$u(e,t,r){return(t=_toPropertyKey$u(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$u(e){var t=_toPrimitive$u(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$u(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function defaultFormatter(e){return Array.isArray(e)&&isNumOrStr(e[0])&&isNumOrStr(e[1])?e.join(" ~ "):e}var DefaultTooltipContent=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:i={},payload:o,formatter:a,itemSorter:s,wrapperClassName:c,labelClassName:l,label:u,labelFormatter:d,accessibilityLayer:p=!1}=e,h=_objectSpread$s({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),m=_objectSpread$s({margin:0},i),f=!isNullish$1(u),x=f?u:"",g=clsx("recharts-default-tooltip",c),y=clsx("recharts-tooltip-label",l);f&&d&&null!=o&&(x=d(u,o));var b=p?{role:"status","aria-live":"assertive"}:{};return reactExports.createElement("div",_extends$j({className:g,style:h},b),reactExports.createElement("p",{className:y,style:m},reactExports.isValidElement(x)?x:"".concat(x)),(()=>{if(o&&o.length){var e=(s?sortBy$1(o,s):o).map((e,r)=>{if("none"===e.type)return null;var i=e.formatter||a||defaultFormatter,{value:s,name:c}=e,l=s,u=c;if(i){var d=i(s,c,e,r,o);if(Array.isArray(d))[l,u]=d;else{if(null==d)return null;l=d}}var p=_objectSpread$s({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},n);return reactExports.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(r),style:p},isNumOrStr(u)?reactExports.createElement("span",{className:"recharts-tooltip-item-name"},u):null,isNumOrStr(u)?reactExports.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,reactExports.createElement("span",{className:"recharts-tooltip-item-value"},l),reactExports.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return reactExports.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null})())},CSS_CLASS_PREFIX="recharts-tooltip-wrapper",TOOLTIP_HIDDEN={visibility:"hidden"};function getTooltipCSSClassName(e){var{coordinate:t,translateX:r,translateY:n}=e;return clsx(CSS_CLASS_PREFIX,{["".concat(CSS_CLASS_PREFIX,"-right")]:isNumber(r)&&t&&isNumber(t.x)&&r>=t.x,["".concat(CSS_CLASS_PREFIX,"-left")]:isNumber(r)&&t&&isNumber(t.x)&&r<t.x,["".concat(CSS_CLASS_PREFIX,"-bottom")]:isNumber(n)&&t&&isNumber(t.y)&&n>=t.y,["".concat(CSS_CLASS_PREFIX,"-top")]:isNumber(n)&&t&&isNumber(t.y)&&n<t.y})}function getTooltipTranslateXY(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:i,position:o,reverseDirection:a,tooltipDimension:s,viewBox:c,viewBoxDimension:l}=e;if(o&&isNumber(o[n]))return o[n];var u=r[n]-s-(i>0?i:0),d=r[n]+i;if(t[n])return a[n]?u:d;var p=c[n];return null==p?0:a[n]?u<p?Math.max(d,p):Math.max(u,p):null==l?0:d+s>p+l?Math.max(u,p):Math.max(d,p)}function getTransformStyle(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function getTooltipTranslate(e){var t,r,{allowEscapeViewBox:n,coordinate:i,offsetTopLeft:o,position:a,reverseDirection:s,tooltipBox:c,useTranslate3d:l,viewBox:u}=e;return{cssProperties:c.height>0&&c.width>0&&i?getTransformStyle({translateX:t=getTooltipTranslateXY({allowEscapeViewBox:n,coordinate:i,key:"x",offsetTopLeft:o,position:a,reverseDirection:s,tooltipDimension:c.width,viewBox:u,viewBoxDimension:u.width}),translateY:r=getTooltipTranslateXY({allowEscapeViewBox:n,coordinate:i,key:"y",offsetTopLeft:o,position:a,reverseDirection:s,tooltipDimension:c.height,viewBox:u,viewBoxDimension:u.height}),useTranslate3d:l}):TOOLTIP_HIDDEN,cssClasses:getTooltipCSSClassName({translateX:t,translateY:r,coordinate:i})}}function ownKeys$r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$r(Object(r),!0).forEach(function(t){_defineProperty$t(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$r(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$t(e,t,r){return(t=_toPropertyKey$t(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$t(e){var t=_toPrimitive$t(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$t(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}class TooltipBoundingBox extends reactExports.PureComponent{constructor(){super(...arguments),_defineProperty$t(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),_defineProperty$t(this,"handleKeyDown",e=>{var t,r,n,i;"Escape"===e.key&&this.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(t=null===(r=this.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==t?t:0,y:null!==(n=null===(i=this.props.coordinate)||void 0===i?void 0:i.y)&&void 0!==n?n:0}})})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}render(){var{active:e,allowEscapeViewBox:t,animationDuration:r,animationEasing:n,children:i,coordinate:o,hasPayload:a,isAnimationActive:s,offset:c,position:l,reverseDirection:u,useTranslate3d:d,viewBox:p,wrapperStyle:h,lastBoundingBox:m,innerRef:f,hasPortalFromProps:x}=this.props,{cssClasses:g,cssProperties:y}=getTooltipTranslate({allowEscapeViewBox:t,coordinate:o,offsetTopLeft:c,position:l,reverseDirection:u,tooltipBox:{height:m.height,width:m.width},useTranslate3d:d,viewBox:p}),b=x?{}:_objectSpread$r(_objectSpread$r({transition:s&&e?"transform ".concat(r,"ms ").concat(n):void 0},y),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&a?"visible":"hidden",position:"absolute",top:0,left:0}),v=_objectSpread$r(_objectSpread$r({},b),{},{visibility:!this.state.dismissed&&e&&a?"visible":"hidden"},h);return reactExports.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:g,style:v,ref:f},i)}}var parseIsSsrByDefault=()=>!("undefined"!=typeof window&&window.document&&Boolean(window.document.createElement)&&window.setTimeout),Global={devToolsEnabled:!1,isSsr:parseIsSsrByDefault()},useAccessibilityLayer=()=>{var e;return null===(e=useAppSelector(e=>e.rootProps.accessibilityLayer))||void 0===e||e};function _extends$i(){return _extends$i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$i.apply(null,arguments)}function ownKeys$q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$q(Object(r),!0).forEach(function(t){_defineProperty$s(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$q(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$s(e,t,r){return(t=_toPropertyKey$s(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$s(e){var t=_toPrimitive$s(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$s(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var CURVE_FACTORIES={curveBasisClosed:curveBasisClosed,curveBasisOpen:curveBasisOpen,curveBasis:curveBasis,curveBumpX:bumpX,curveBumpY:bumpY,curveLinearClosed:curveLinearClosed,curveLinear:curveLinear,curveMonotoneX:monotoneX,curveMonotoneY:monotoneY,curveNatural:curveNatural,curveStep:curveStep,curveStepAfter:stepAfter,curveStepBefore:stepBefore},defined=e=>isWellBehavedNumber(e.x)&&isWellBehavedNumber(e.y),areaDefined=e=>null!=e.base&&defined(e.base)&&defined(e),getX=e=>e.x,getY=e=>e.y,getCurveFactory=(e,t)=>{if("function"==typeof e)return e;var r="curve".concat(upperFirst(e));return"curveMonotone"!==r&&"curveBump"!==r||!t?CURVE_FACTORIES[r]||curveLinear:CURVE_FACTORIES["".concat(r).concat("vertical"===t?"Y":"X")]},getPath$1=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:i,connectNulls:o=!1}=e,a=getCurveFactory(t,i),s=o?r.filter(defined):r;if(Array.isArray(n)){var c=r.map((e,t)=>_objectSpread$q(_objectSpread$q({},e),{},{base:n[t]}));return("vertical"===i?shapeArea().y(getY).x1(getX).x0(e=>e.base.x):shapeArea().x(getX).y1(getY).y0(e=>e.base.y)).defined(areaDefined).curve(a)(o?c.filter(areaDefined):c)}return("vertical"===i&&isNumber(n)?shapeArea().y(getY).x1(getX).x0(n):isNumber(n)?shapeArea().x(getX).y1(getY).y0(n):shapeLine().x(getX).y(getY)).defined(defined).curve(a)(s)},Curve=e=>{var{className:t,points:r,path:n,pathRef:i}=e;if(!(r&&r.length||n))return null;var o=r&&r.length?getPath$1(e):n;return reactExports.createElement("path",_extends$i({},svgPropertiesNoEvents(e),adaptEventHandlers(e),{className:clsx("recharts-curve",t),d:null===o?void 0:o,ref:i}))},_excluded$f=["x","y","top","left","width","height","className"];function _extends$h(){return _extends$h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$h.apply(null,arguments)}function ownKeys$p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$p(Object(r),!0).forEach(function(t){_defineProperty$r(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$r(e,t,r){return(t=_toPropertyKey$r(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$r(e){var t=_toPrimitive$r(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$r(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _objectWithoutProperties$f(e,t){if(null==e)return{};var r,n,i=_objectWithoutPropertiesLoose$f(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _objectWithoutPropertiesLoose$f(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}var getPath=(e,t,r,n,i,o)=>"M".concat(e,",").concat(i,"v").concat(n,"M").concat(o,",").concat(t,"h").concat(r),Cross=e=>{var{x:t=0,y:r=0,top:n=0,left:i=0,width:o=0,height:a=0,className:s}=e,c=_objectSpread$p({x:t,y:r,top:n,left:i,width:o,height:a},_objectWithoutProperties$f(e,_excluded$f));return isNumber(t)&&isNumber(r)&&isNumber(o)&&isNumber(a)&&isNumber(n)&&isNumber(i)?reactExports.createElement("path",_extends$h({},svgPropertiesAndEvents(c),{className:clsx("recharts-cross",s),d:getPath(t,r,o,a,n,i)})):null};function getCursorRectangle(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-i:r.left+.5,y:"horizontal"===e?r.top+.5:t.y-i,width:"horizontal"===e?n:r.width-1,height:"horizontal"===e?r.height-1:n}}function ownKeys$o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$o(Object(r),!0).forEach(function(t){_defineProperty$q(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$q(e,t,r){return(t=_toPropertyKey$q(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$q(e){var t=_toPrimitive$q(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$q(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var getDashCase=e=>e.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),getTransitionVal=(e,t,r)=>e.map(e=>"".concat(getDashCase(e)," ").concat(t,"ms ").concat(r)).join(","),getIntersectionKeys=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((e,t)=>e.filter(e=>t.includes(e))),mapObject=(e,t)=>Object.keys(t).reduce((r,n)=>_objectSpread$o(_objectSpread$o({},r),{},{[n]:e(n,t[n])}),{});function ownKeys$n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$n(Object(r),!0).forEach(function(t){_defineProperty$p(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$p(e,t,r){return(t=_toPropertyKey$p(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$p(e){var t=_toPrimitive$p(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$p(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var alpha$1=(e,t,r)=>e+(t-e)*r,needContinue=e=>{var{from:t,to:r}=e;return t!==r},calStepperVals=(e,t,r)=>{var n=mapObject((t,r)=>{if(needContinue(r)){var[n,i]=e(r.from,r.to,r.velocity);return _objectSpread$n(_objectSpread$n({},r),{},{from:n,velocity:i})}return r},t);return r<1?mapObject((e,t)=>needContinue(t)?_objectSpread$n(_objectSpread$n({},t),{},{velocity:alpha$1(t.velocity,n[e].velocity,r),from:alpha$1(t.from,n[e].from,r)}):t,t):calStepperVals(e,n,r-1)};function createStepperUpdate(e,t,r,n,i,o){var a,s=n.reduce((r,n)=>_objectSpread$n(_objectSpread$n({},r),{},{[n]:{from:e[n],velocity:0,to:t[n]}}),{}),c=null,l=n=>{a||(a=n);var u=(n-a)/r.dt;s=calStepperVals(r,s,u),i(_objectSpread$n(_objectSpread$n(_objectSpread$n({},e),t),mapObject((e,t)=>t.from,s))),a=n,Object.values(s).filter(needContinue).length&&(c=o.setTimeout(l))};return()=>(c=o.setTimeout(l),()=>{var e;null===(e=c)||void 0===e||e()})}function createTimingUpdate(e,t,r,n,i,o,a){var s,c=null,l=i.reduce((r,n)=>_objectSpread$n(_objectSpread$n({},r),{},{[n]:[e[n],t[n]]}),{}),u=i=>{s||(s=i);var d=(i-s)/n,p=mapObject((e,t)=>alpha$1(...t,r(d)),l);if(o(_objectSpread$n(_objectSpread$n(_objectSpread$n({},e),t),p)),d<1)c=a.setTimeout(u);else{var h=mapObject((e,t)=>alpha$1(...t,r(1)),l);o(_objectSpread$n(_objectSpread$n(_objectSpread$n({},e),t),h))}};return()=>(c=a.setTimeout(u),()=>{var e;null===(e=c)||void 0===e||e()})}const configUpdate=(e,t,r,n,i,o)=>{var a=getIntersectionKeys(e,t);return null==r?()=>(i(_objectSpread$n(_objectSpread$n({},e),t)),()=>{}):!0===r.isStepper?createStepperUpdate(e,t,r,a,i,o):createTimingUpdate(e,t,r,n,a,i,o)};var ACCURACY=1e-4,cubicBezierFactor=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],evaluatePolynomial=(e,t)=>e.map((e,r)=>e*t**r).reduce((e,t)=>e+t),cubicBezier$1=(e,t)=>r=>{var n=cubicBezierFactor(e,t);return evaluatePolynomial(n,r)},derivativeCubicBezier=(e,t)=>r=>{var n=[...cubicBezierFactor(e,t).map((e,t)=>e*t).slice(1),0];return evaluatePolynomial(n,r)},getBezierCoordinates=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(1===t.length)switch(t[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:var n,i=t[0].split("(");if("cubic-bezier"===i[0]&&4===(null===(n=i[1])||void 0===n?void 0:n.split(")")[0].split(",").length)){var o=i[1].split(")")[0].split(",").map(e=>parseFloat(e));return[o[0],o[1],o[2],o[3]]}}return 4===t.length?t:[0,0,1,1]},createBezierEasing=(e,t,r,n)=>{var i=cubicBezier$1(e,r),o=cubicBezier$1(t,n),a=derivativeCubicBezier(e,r),s=e=>e>1?1:e<0?0:e,c=e=>{for(var t=e>1?1:e,r=t,n=0;n<8;++n){var c=i(r)-t,l=a(r);if(Math.abs(c-t)<ACCURACY||l<ACCURACY)return o(r);r=s(r-c/l)}return o(r)};return c.isStepper=!1,c},configBezier=function(){return createBezierEasing(...getBezierCoordinates(...arguments))},configSpring=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stiff:t=100,damping:r=8,dt:n=17}=e,i=(e,i,o)=>{var a=o+(-(e-i)*t-o*r)*n/1e3,s=o*n/1e3+e;return Math.abs(s-i)<ACCURACY&&Math.abs(a)<ACCURACY?[i,0]:[s,a]};return i.isStepper=!0,i.dt=n,i},configEasing=e=>{if("string"==typeof e)switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return configBezier(e);case"spring":return configSpring();default:if("cubic-bezier"===e.split("(")[0])return configBezier(e)}return"function"==typeof e?e:null};function createAnimateManager(e){var t=()=>null,r=!1,n=null,i=o=>{if(!r){if(Array.isArray(o)){if(!o.length)return;var a=o,[s,...c]=a;return"number"==typeof s?void(n=e.setTimeout(i.bind(null,c),s)):(i(s),void(n=e.setTimeout(i.bind(null,c))))}"string"==typeof o&&t(o),"object"==typeof o&&t(o),"function"==typeof o&&o()}};return{stop:()=>{r=!0},start:e=>{r=!1,n&&(n(),n=null),i(e)},subscribe:e=>(t=e,()=>{t=()=>null}),getTimeoutController:()=>e}}class RequestAnimationFrameTimeoutController{setTimeout(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=performance.now(),n=null,i=o=>{o-r>=t?e(o):"function"==typeof requestAnimationFrame&&(n=requestAnimationFrame(i))};return n=requestAnimationFrame(i),()=>{null!=n&&cancelAnimationFrame(n)}}}function createDefaultAnimationManager(){return createAnimateManager(new RequestAnimationFrameTimeoutController)}var AnimationManagerContext=reactExports.createContext(createDefaultAnimationManager);function useAnimationManager(e,t){var r=reactExports.useContext(AnimationManagerContext);return reactExports.useMemo(()=>null!=t?t:r(e),[e,t,r])}var defaultJavascriptAnimateProps={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},from$7={t:0},to={t:1};function JavascriptAnimate(e){var t=resolveDefaultProps(e,defaultJavascriptAnimateProps),{isActive:r,canBegin:n,duration:i,easing:o,begin:a,onAnimationEnd:s,onAnimationStart:c,children:l}=t,u=useAnimationManager(t.animationId,t.animationManager),[d,p]=reactExports.useState(r?from$7:to),h=reactExports.useRef(null);return reactExports.useEffect(()=>{r||p(to)},[r]),reactExports.useEffect(()=>{if(!r||!n)return noop$5;var e=configUpdate(from$7,to,configEasing(o),i,p,u.getTimeoutController());return u.start([c,a,()=>{h.current=e()},i,s]),()=>{u.stop(),h.current&&h.current(),s()}},[r,n,i,o,a,c,s,u]),l(d.t)}function useAnimationId(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation-",r=reactExports.useRef(uniqueId(t)),n=reactExports.useRef(e);return n.current!==e&&(r.current=uniqueId(t),n.current=e),r.current}var _excluded$e=["radius"],_excluded2$7=["radius"];function ownKeys$m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$m(Object(r),!0).forEach(function(t){_defineProperty$o(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$o(e,t,r){return(t=_toPropertyKey$o(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$o(e){var t=_toPrimitive$o(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$o(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _extends$g(){return _extends$g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$g.apply(null,arguments)}function _objectWithoutProperties$e(e,t){if(null==e)return{};var r,n,i=_objectWithoutPropertiesLoose$e(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _objectWithoutPropertiesLoose$e(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}var getRectanglePath=(e,t,r,n,i)=>{var o,a=Math.min(Math.abs(r)/2,Math.abs(n)/2),s=n>=0?1:-1,c=r>=0?1:-1,l=n>=0&&r>=0||n<0&&r<0?1:0;if(a>0&&i instanceof Array){for(var u=[0,0,0,0],d=0;d<4;d++)u[d]=i[d]>a?a:i[d];o="M".concat(e,",").concat(t+s*u[0]),u[0]>0&&(o+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(l,",").concat(e+c*u[0],",").concat(t)),o+="L ".concat(e+r-c*u[1],",").concat(t),u[1]>0&&(o+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(l,",\n        ").concat(e+r,",").concat(t+s*u[1])),o+="L ".concat(e+r,",").concat(t+n-s*u[2]),u[2]>0&&(o+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(l,",\n        ").concat(e+r-c*u[2],",").concat(t+n)),o+="L ".concat(e+c*u[3],",").concat(t+n),u[3]>0&&(o+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(l,",\n        ").concat(e,",").concat(t+n-s*u[3])),o+="Z"}else if(a>0&&i===+i&&i>0){var p=Math.min(a,i);o="M ".concat(e,",").concat(t+s*p,"\n            A ").concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+c*p,",").concat(t,"\n            L ").concat(e+r-c*p,",").concat(t,"\n            A ").concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+r,",").concat(t+s*p,"\n            L ").concat(e+r,",").concat(t+n-s*p,"\n            A ").concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+r-c*p,",").concat(t+n,"\n            L ").concat(e+c*p,",").concat(t+n,"\n            A ").concat(p,",").concat(p,",0,0,").concat(l,",").concat(e,",").concat(t+n-s*p," Z")}else o="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return o},defaultProps$3={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Rectangle=e=>{var t=resolveDefaultProps(e,defaultProps$3),r=reactExports.useRef(null),[n,i]=reactExports.useState(-1);reactExports.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&i(e)}catch(t){}},[]);var{x:o,y:a,width:s,height:c,radius:l,className:u}=t,{animationEasing:d,animationDuration:p,animationBegin:h,isAnimationActive:m,isUpdateAnimationActive:f}=t,x=reactExports.useRef(s),g=reactExports.useRef(c),y=reactExports.useRef(o),b=reactExports.useRef(a),v=useAnimationId(reactExports.useMemo(()=>({x:o,y:a,width:s,height:c,radius:l}),[o,a,s,c,l]),"rectangle-");if(o!==+o||a!==+a||s!==+s||c!==+c||0===s||0===c)return null;var E=clsx("recharts-rectangle",u);if(!f){var w=svgPropertiesAndEvents(t),{radius:S}=w,j=_objectWithoutProperties$e(w,_excluded$e);return reactExports.createElement("path",_extends$g({},j,{radius:"number"==typeof l?l:void 0,className:E,d:getRectanglePath(o,a,s,c,l)}))}var A=x.current,T=g.current,P=y.current,$=b.current,R="0px ".concat(-1===n?1:n,"px"),k="".concat(n,"px 0px"),C=getTransitionVal(["strokeDasharray"],p,"string"==typeof d?d:defaultProps$3.animationEasing);return reactExports.createElement(JavascriptAnimate,{animationId:v,key:v,canBegin:n>0,duration:p,easing:d,isActive:f,begin:h},e=>{var n,i=interpolate$2(A,s,e),u=interpolate$2(T,c,e),d=interpolate$2(P,o,e),p=interpolate$2($,a,e);r.current&&(x.current=i,g.current=u,y.current=d,b.current=p),n=m?e>0?{transition:C,strokeDasharray:k}:{strokeDasharray:R}:{strokeDasharray:k};var h=svgPropertiesAndEvents(t),{radius:f}=h,v=_objectWithoutProperties$e(h,_excluded2$7);return reactExports.createElement("path",_extends$g({},v,{radius:"number"==typeof l?l:void 0,className:E,d:getRectanglePath(d,p,i,u,l),ref:r,style:_objectSpread$m(_objectSpread$m({},n),t.style)}))})};function ownKeys$l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$l(Object(r),!0).forEach(function(t){_defineProperty$n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$n(e,t,r){return(t=_toPropertyKey$n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$n(e){var t=_toPrimitive$n(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$n(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var RADIAN=Math.PI/180,radianToDegree=e=>180*e/Math.PI,polarToCartesian=(e,t,r,n)=>({x:e+Math.cos(-RADIAN*n)*r,y:t+Math.sin(-RADIAN*n)*r}),getMaxRadius=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2},distanceBetweenPoints=(e,t)=>{var{x:r,y:n}=e,{x:i,y:o}=t;return Math.sqrt((r-i)**2+(n-o)**2)},getAngleOfPoint=(e,t)=>{var{x:r,y:n}=e,{cx:i,cy:o}=t,a=distanceBetweenPoints({x:r,y:n},{x:i,y:o});if(a<=0)return{radius:a,angle:0};var s=(r-i)/a,c=Math.acos(s);return n>o&&(c=2*Math.PI-c),{radius:a,angle:radianToDegree(c),angleInRadian:c}},formatAngleOfSector=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),i=Math.floor(r/360),o=Math.min(n,i);return{startAngle:t-360*o,endAngle:r-360*o}},reverseFormatAngleOfSector=(e,t)=>{var{startAngle:r,endAngle:n}=t,i=Math.floor(r/360),o=Math.floor(n/360);return e+360*Math.min(i,o)},inRangeOfSector=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:i,angle:o}=getAngleOfPoint({x:r,y:n},t),{innerRadius:a,outerRadius:s}=t;if(i<a||i>s)return null;if(0===i)return null;var c,{startAngle:l,endAngle:u}=formatAngleOfSector(t),d=o;if(l<=u){for(;d>u;)d-=360;for(;d<l;)d+=360;c=d>=l&&d<=u}else{for(;d>l;)d-=360;for(;d<u;)d+=360;c=d>=u&&d<=l}return c?_objectSpread$l(_objectSpread$l({},t),{},{radius:i,angle:reverseFormatAngleOfSector(d,t)}):null};function getRadialCursorPoints(e){var{cx:t,cy:r,radius:n,startAngle:i,endAngle:o}=e;return{points:[polarToCartesian(t,r,n,i),polarToCartesian(t,r,n,o)],cx:t,cy:r,radius:n,startAngle:i,endAngle:o}}function _extends$f(){return _extends$f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$f.apply(null,arguments)}var getDeltaAngle$1=(e,t)=>mathSign(t-e)*Math.min(Math.abs(t-e),359.999),getTangentCircle=e=>{var{cx:t,cy:r,radius:n,angle:i,sign:o,isExternal:a,cornerRadius:s,cornerIsExternal:c}=e,l=s*(a?1:-1)+n,u=Math.asin(s/l)/RADIAN,d=c?i:i+o*u,p=c?i-o*u:i;return{center:polarToCartesian(t,r,l,d),circleTangency:polarToCartesian(t,r,n,d),lineTangency:polarToCartesian(t,r,l*Math.cos(u*RADIAN),p),theta:u}},getSectorPath=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:o,endAngle:a}=e,s=getDeltaAngle$1(o,a),c=o+s,l=polarToCartesian(t,r,i,o),u=polarToCartesian(t,r,i,c),d="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(i,",").concat(i,",0,\n    ").concat(+(Math.abs(s)>180),",").concat(+(o>c),",\n    ").concat(u.x,",").concat(u.y,"\n  ");if(n>0){var p=polarToCartesian(t,r,n,o),h=polarToCartesian(t,r,n,c);d+="L ".concat(h.x,",").concat(h.y,"\n            A ").concat(n,",").concat(n,",0,\n            ").concat(+(Math.abs(s)>180),",").concat(+(o<=c),",\n            ").concat(p.x,",").concat(p.y," Z")}else d+="L ".concat(t,",").concat(r," Z");return d},getSectorWithCorner=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,cornerRadius:o,forceCornerRadius:a,cornerIsExternal:s,startAngle:c,endAngle:l}=e,u=mathSign(l-c),{circleTangency:d,lineTangency:p,theta:h}=getTangentCircle({cx:t,cy:r,radius:i,angle:c,sign:u,cornerRadius:o,cornerIsExternal:s}),{circleTangency:m,lineTangency:f,theta:x}=getTangentCircle({cx:t,cy:r,radius:i,angle:l,sign:-u,cornerRadius:o,cornerIsExternal:s}),g=s?Math.abs(c-l):Math.abs(c-l)-h-x;if(g<0)return a?"M ".concat(p.x,",").concat(p.y,"\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*o,",0\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*-o,",0\n      "):getSectorPath({cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:c,endAngle:l});var y="M ".concat(p.x,",").concat(p.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(d.x,",").concat(d.y,"\n    A").concat(i,",").concat(i,",0,").concat(+(g>180),",").concat(+(u<0),",").concat(m.x,",").concat(m.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(f.x,",").concat(f.y,"\n  ");if(n>0){var{circleTangency:b,lineTangency:v,theta:E}=getTangentCircle({cx:t,cy:r,radius:n,angle:c,sign:u,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),{circleTangency:w,lineTangency:S,theta:j}=getTangentCircle({cx:t,cy:r,radius:n,angle:l,sign:-u,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),A=s?Math.abs(c-l):Math.abs(c-l)-E-j;if(A<0&&0===o)return"".concat(y,"L").concat(t,",").concat(r,"Z");y+="L".concat(S.x,",").concat(S.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(w.x,",").concat(w.y,"\n      A").concat(n,",").concat(n,",0,").concat(+(A>180),",").concat(+(u>0),",").concat(b.x,",").concat(b.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(v.x,",").concat(v.y,"Z")}else y+="L".concat(t,",").concat(r,"Z");return y},defaultProps$2={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Sector=e=>{var t=resolveDefaultProps(e,defaultProps$2),{cx:r,cy:n,innerRadius:i,outerRadius:o,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:c,startAngle:l,endAngle:u,className:d}=t;if(o<i||l===u)return null;var p,h=clsx("recharts-sector",d),m=o-i,f=getPercentValue(a,m,0,!0);return p=f>0&&Math.abs(l-u)<360?getSectorWithCorner({cx:r,cy:n,innerRadius:i,outerRadius:o,cornerRadius:Math.min(f,m/2),forceCornerRadius:s,cornerIsExternal:c,startAngle:l,endAngle:u}):getSectorPath({cx:r,cy:n,innerRadius:i,outerRadius:o,startAngle:l,endAngle:u}),reactExports.createElement("path",_extends$f({},svgPropertiesAndEvents(t),{className:h,d:p}))};function getCursorPoints(e,t,r){if("horizontal"===e)return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if("vertical"===e)return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(isPolarCoordinate(t)){if("centric"===e){var{cx:n,cy:i,innerRadius:o,outerRadius:a,angle:s}=t,c=polarToCartesian(n,i,o,s),l=polarToCartesian(n,i,a,s);return[{x:c.x,y:c.y},{x:l.x,y:l.y}]}return getRadialCursorPoints(t)}}var range$4={},toFinite={},toNumber={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=isSymbol;e.toNumber=function(e){return t.isSymbol(e)?NaN:Number(e)}}(toNumber),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=toNumber;e.toFinite=function(e){if(!e)return 0===e?e:0;if((e=t.toNumber(e))===1/0||e===-1/0){return(e<0?-1:1)*Number.MAX_VALUE}return e==e?e:0}}(toFinite),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=isIterateeCall,r=toFinite;e.range=function(e,n,i){i&&"number"!=typeof i&&t.isIterateeCall(e,n,i)&&(n=i=void 0),e=r.toFinite(e),void 0===n?(n=e,e=0):n=r.toFinite(n),i=void 0===i?e<n?1:-1:r.toFinite(i);const o=Math.max(Math.ceil((n-e)/(i||1)),0),a=new Array(o);for(let t=0;t<o;t++)a[t]=e,e+=i;return a}}(range$4);var range$2=range$4.range;const range$3=getDefaultExportFromCjs(range$2);function ascending(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function descending(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function bisector(e){let t,r,n;function i(e,n,i=0,o=e.length){if(i<o){if(0!==t(n,n))return o;do{const t=i+o>>>1;r(e[t],n)<0?i=t+1:o=t}while(i<o)}return i}return 2!==e.length?(t=ascending,r=(t,r)=>ascending(e(t),r),n=(t,r)=>e(t)-r):(t=e===ascending||e===descending?e:zero$1,r=e,n=e),{left:i,center:function(e,t,r=0,o=e.length){const a=i(e,t,r,o-1);return a>r&&n(e[a-1],t)>-n(e[a],t)?a-1:a},right:function(e,n,i=0,o=e.length){if(i<o){if(0!==t(n,n))return o;do{const t=i+o>>>1;r(e[t],n)<=0?i=t+1:o=t}while(i<o)}return i}}}function zero$1(){return 0}function number$4(e){return null===e?NaN:+e}function*numbers(e,t){for(let r of e)null!=r&&(r=+r)>=r&&(yield r)}const ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right;bisector(number$4).center;class InternMap extends Map{constructor(e,t=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[r,n]of e)this.set(r,n)}get(e){return super.get(intern_get(this,e))}has(e){return super.has(intern_get(this,e))}set(e,t){return super.set(intern_set(this,e),t)}delete(e){return super.delete(intern_delete(this,e))}}function intern_get({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function intern_set({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function intern_delete({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function keyof(e){return null!==e&&"object"==typeof e?e.valueOf():e}function compareDefined(e=ascending){if(e===ascending)return ascendingDefined;if("function"!=typeof e)throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||0===n?n:(0===e(r,r))-(0===e(t,t))}}function ascendingDefined(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),o=n/Math.pow(10,i),a=o>=e10?10:o>=e5?5:o>=e2?2:1;let s,c,l;return i<0?(l=Math.pow(10,-i)/a,s=Math.round(e*l),c=Math.round(t*l),s/l<e&&++s,c/l>t&&--c,l=-l):(l=Math.pow(10,i)*a,s=Math.round(e/l),c=Math.round(t/l),s*l<e&&++s,c*l>t&&--c),c<s&&.5<=r&&r<2?tickSpec(e,t,2*r):[s,c,l]}function ticks(e,t,r){if(!((r=+r)>0))return[];if((e=+e)===(t=+t))return[e];const n=t<e,[i,o,a]=n?tickSpec(t,e,r):tickSpec(e,t,r);if(!(o>=i))return[];const s=o-i+1,c=new Array(s);if(n)if(a<0)for(let l=0;l<s;++l)c[l]=(o-l)/-a;else for(let l=0;l<s;++l)c[l]=(o-l)*a;else if(a<0)for(let l=0;l<s;++l)c[l]=(i+l)/-a;else for(let l=0;l<s;++l)c[l]=(i+l)*a;return c}function tickIncrement(e,t,r){return tickSpec(e=+e,t=+t,r=+r)[2]}function tickStep(e,t,r){r=+r;const n=(t=+t)<(e=+e),i=n?tickIncrement(t,e,r):tickIncrement(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function max(e,t){let r;for(const n of e)null!=n&&(r<n||void 0===r&&n>=n)&&(r=n);return r}function min(e,t){let r;for(const n of e)null!=n&&(r>n||void 0===r&&n>=n)&&(r=n);return r}function quickselect(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=void 0===i?ascendingDefined:compareDefined(i);n>r;){if(n-r>600){const o=n-r+1,a=t-r+1,s=Math.log(o),c=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*c*(o-c)/o)*(a-o/2<0?-1:1);quickselect(e,t,Math.max(r,Math.floor(t-a*c/o+l)),Math.min(n,Math.floor(t+(o-a)*c/o+l)),i)}const o=e[t];let a=r,s=n;for(swap(e,r,t),i(e[n],o)>0&&swap(e,r,n);a<s;){for(swap(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}0===i(e[r],o)?swap(e,r,s):(++s,swap(e,s,n)),s<=t&&(r=s+1),t<=s&&(n=s-1)}return e}function swap(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function quantile$1(e,t,r){if((n=(e=Float64Array.from(numbers(e))).length)&&!isNaN(t=+t)){if(t<=0||n<2)return min(e);if(t>=1)return max(e);var n,i=(n-1)*t,o=Math.floor(i),a=max(quickselect(e,o).subarray(0,o+1));return a+(min(e.subarray(o+1))-a)*(i-o)}}function quantileSorted(e,t,r=number$4){if((n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,o=Math.floor(i),a=+r(e[o],o,e);return a+(+r(e[o+1],o+1,e)-a)*(i-o)}}function range$1(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=0|Math.max(0,Math.ceil((t-e)/r)),o=new Array(i);++n<i;)o[n]=e+n*r;return o}function initRange(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function initInterpolator(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}const implicit=Symbol("implicit");function ordinal(){var e=new InternMap,t=[],r=[],n=implicit;function i(i){let o=e.get(i);if(void 0===o){if(n!==implicit)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return i.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new InternMap;for(const n of r)e.has(n)||e.set(n,t.push(n)-1);return i},i.range=function(e){return arguments.length?(r=Array.from(e),i):r.slice()},i.unknown=function(e){return arguments.length?(n=e,i):n},i.copy=function(){return ordinal(t,r).unknown(n)},initRange.apply(i,arguments),i}function band(){var e,t,r=ordinal().unknown(void 0),n=r.domain,i=r.range,o=0,a=1,s=!1,c=0,l=0,u=.5;function d(){var r=n().length,d=a<o,p=d?a:o,h=d?o:a;e=(h-p)/Math.max(1,r-c+2*l),s&&(e=Math.floor(e)),p+=(h-p-e*(r-c))*u,t=e*(1-c),s&&(p=Math.round(p),t=Math.round(t));var m=range$1(r).map(function(t){return p+e*t});return i(d?m.reverse():m)}return delete r.unknown,r.domain=function(e){return arguments.length?(n(e),d()):n()},r.range=function(e){return arguments.length?([o,a]=e,o=+o,a=+a,d()):[o,a]},r.rangeRound=function(e){return[o,a]=e,o=+o,a=+a,s=!0,d()},r.bandwidth=function(){return t},r.step=function(){return e},r.round=function(e){return arguments.length?(s=!!e,d()):s},r.padding=function(e){return arguments.length?(c=Math.min(1,l=+e),d()):c},r.paddingInner=function(e){return arguments.length?(c=Math.min(1,e),d()):c},r.paddingOuter=function(e){return arguments.length?(l=+e,d()):l},r.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),d()):u},r.copy=function(){return band(n(),[o,a]).round(s).paddingInner(c).paddingOuter(l).align(u)},initRange.apply(d(),arguments)}function pointish(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return pointish(t())},e}function point(){return pointish(band.apply(null,arguments).paddingInner(1))}function define(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function extend(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color$1(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=reHex.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?rgbn(t):3===r?new Rgb(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?rgba$1(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?rgba$1(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=reRgbInteger.exec(e))?new Rgb(t[1],t[2],t[3],1):(t=reRgbPercent.exec(e))?new Rgb(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=reRgbaInteger.exec(e))?rgba$1(t[1],t[2],t[3],t[4]):(t=reRgbaPercent.exec(e))?rgba$1(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=reHslPercent.exec(e))?hsla$1(t[1],t[2]/100,t[3]/100,1):(t=reHslaPercent.exec(e))?hsla$1(t[1],t[2]/100,t[3]/100,t[4]):named.hasOwnProperty(e)?rgbn(named[e]):"transparent"===e?new Rgb(NaN,NaN,NaN,0):null}function rgbn(e){return new Rgb(e>>16&255,e>>8&255,255&e,1)}function rgba$1(e,t,r,n){return n<=0&&(e=t=r=NaN),new Rgb(e,t,r,n)}function rgbConvert(e){return e instanceof Color||(e=color$1(e)),e?new Rgb((e=e.rgb()).r,e.g,e.b,e.opacity):new Rgb}function rgb$1(e,t,r,n){return 1===arguments.length?rgbConvert(e):new Rgb(e,t,r,null==n?1:n)}function Rgb(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function rgb_formatHex(){return`#${hex$1(this.r)}${hex$1(this.g)}${hex$1(this.b)}`}function rgb_formatHex8(){return`#${hex$1(this.r)}${hex$1(this.g)}${hex$1(this.b)}${hex$1(255*(isNaN(this.opacity)?1:this.opacity))}`}function rgb_formatRgb(){const e=clampa(this.opacity);return`${1===e?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${1===e?")":`, ${e})`}`}function clampa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function clampi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hex$1(e){return((e=clampi(e))<16?"0":"")+e.toString(16)}function hsla$1(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Hsl(e,t,r,n)}function hslConvert(e){if(e instanceof Hsl)return new Hsl(e.h,e.s,e.l,e.opacity);if(e instanceof Color||(e=color$1(e)),!e)return new Hsl;if(e instanceof Hsl)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),o=Math.max(t,r,n),a=NaN,s=o-i,c=(o+i)/2;return s?(a=t===o?(r-n)/s+6*(r<n):r===o?(n-t)/s+2:(t-r)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=c>0&&c<1?0:a,new Hsl(a,s,c,e.opacity)}function hsl(e,t,r,n){return 1===arguments.length?hslConvert(e):new Hsl(e,t,r,null==n?1:n)}function Hsl(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function clamph(e){return(e=(e||0)%360)<0?e+360:e}function clampt(e){return Math.max(0,Math.min(1,e||0))}function hsl2rgb(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}define(Color,color$1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb}),define(Rgb,rgb$1,extend(Color,{brighter(e){return e=null==e?brighter:Math.pow(brighter,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?darker:Math.pow(darker,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb})),define(Hsl,hsl,extend(Color,{brighter(e){return e=null==e?brighter:Math.pow(brighter,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?darker:Math.pow(darker,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Rgb(hsl2rgb(e>=240?e-240:e+120,i,n),hsl2rgb(e,i,n),hsl2rgb(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=clampa(this.opacity);return`${1===e?"hsl(":"hsla("}${clamph(this.h)}, ${100*clampt(this.s)}%, ${100*clampt(this.l)}%${1===e?")":`, ${e})`}`}}));const constant=e=>()=>e;function linear$1(e,t){return function(r){return e+r*t}}function exponential(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function gamma(e){return 1===(e=+e)?nogamma:function(t,r){return r-t?exponential(t,r,e):constant(isNaN(t)?r:t)}}function nogamma(e,t){var r=t-e;return r?linear$1(e,r):constant(isNaN(e)?t:e)}const rgb=function e(t){var r=gamma(t);function n(e,t){var n=r((e=rgb$1(e)).r,(t=rgb$1(t)).r),i=r(e.g,t.g),o=r(e.b,t.b),a=nogamma(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return n.gamma=e,n}(1);function numberArray(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(r=0;r<n;++r)i[r]=e[r]*(1-o)+t[r]*o;return i}}function isNumberArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function genericArray(e,t){var r,n=t?t.length:0,i=e?Math.min(n,e.length):0,o=new Array(i),a=new Array(n);for(r=0;r<i;++r)o[r]=interpolate$1(e[r],t[r]);for(;r<n;++r)a[r]=t[r];return function(e){for(r=0;r<i;++r)a[r]=o[r](e);return a}}function date$1(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function interpolateNumber(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function object(e,t){var r,n={},i={};for(r in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)r in e?n[r]=interpolate$1(e[r],t[r]):i[r]=t[r];return function(e){for(r in n)i[r]=n[r](e);return i}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(e){return function(){return e}}function one(e){return function(t){return e(t)+""}}function string$1(e,t){var r,n,i,o=reA.lastIndex=reB.lastIndex=0,a=-1,s=[],c=[];for(e+="",t+="";(r=reA.exec(e))&&(n=reB.exec(t));)(i=n.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(r=r[0])===(n=n[0])?s[a]?s[a]+=n:s[++a]=n:(s[++a]=null,c.push({i:a,x:interpolateNumber(r,n)})),o=reB.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?c[0]?one(c[0].x):zero(t):(t=c.length,function(e){for(var r,n=0;n<t;++n)s[(r=c[n]).i]=r.x(e);return s.join("")})}function interpolate$1(e,t){var r,n=typeof t;return null==t||"boolean"===n?constant(t):("number"===n?interpolateNumber:"string"===n?(r=color$1(t))?(t=r,rgb):string$1:t instanceof color$1?rgb:t instanceof Date?date$1:isNumberArray(t)?numberArray:Array.isArray(t)?genericArray:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?object:interpolateNumber)(e,t)}function interpolateRound(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function piecewise(e,t){void 0===t&&(t=e,e=interpolate$1);for(var r=0,n=t.length-1,i=t[0],o=new Array(n<0?0:n);r<n;)o[r]=e(i,i=t[++r]);return function(e){var t=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return o[t](e-t)}}function constants(e){return function(){return e}}function number$3(e){return+e}var unit=[0,1];function identity$4(e){return e}function normalize(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:constants(isNaN(t)?NaN:.5)}function clamper(e,t){var r;return e>t&&(r=e,e=t,t=r),function(r){return Math.max(e,Math.min(t,r))}}function bimap(e,t,r){var n=e[0],i=e[1],o=t[0],a=t[1];return i<n?(n=normalize(i,n),o=r(a,o)):(n=normalize(n,i),o=r(o,a)),function(e){return o(n(e))}}function polymap(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),o=new Array(n),a=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<n;)i[a]=normalize(e[a],e[a+1]),o[a]=r(t[a],t[a+1]);return function(t){var r=bisectRight(e,t,1,n)-1;return o[r](i[r](t))}}function copy$1(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function transformer$2(){var e,t,r,n,i,o,a=unit,s=unit,c=interpolate$1,l=identity$4;function u(){var e=Math.min(a.length,s.length);return l!==identity$4&&(l=clamper(a[0],a[e-1])),n=e>2?polymap:bimap,i=o=null,d}function d(t){return null==t||isNaN(t=+t)?r:(i||(i=n(a.map(e),s,c)))(e(l(t)))}return d.invert=function(r){return l(t((o||(o=n(s,a.map(e),interpolateNumber)))(r)))},d.domain=function(e){return arguments.length?(a=Array.from(e,number$3),u()):a.slice()},d.range=function(e){return arguments.length?(s=Array.from(e),u()):s.slice()},d.rangeRound=function(e){return s=Array.from(e),c=interpolateRound,u()},d.clamp=function(e){return arguments.length?(l=!!e||identity$4,u()):l!==identity$4},d.interpolate=function(e){return arguments.length?(c=e,u()):c},d.unknown=function(e){return arguments.length?(r=e,d):r},function(r,n){return e=r,t=n,u()}}function continuous(){return transformer$2()(identity$4,identity$4)}function formatDecimal(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function formatDecimalParts(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function exponent(e){return(e=formatDecimalParts(Math.abs(e)))?e[1]:NaN}function formatGroup(e,t){return function(r,n){for(var i=r.length,o=[],a=0,s=e[0],c=0;i>0&&s>0&&(c+s+1>n&&(s=Math.max(1,n-c)),o.push(r.substring(i-=s,i+s)),!((c+=s+1)>n));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}function formatNumerals(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i,prefixExponent;function formatSpecifier(e){if(!(t=re.exec(e)))throw new Error("invalid format: "+e);var t;return new FormatSpecifier({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function FormatSpecifier(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function formatTrim(e){e:for(var t,r=e.length,n=1,i=-1;n<r;++n)switch(e[n]){case".":i=t=n;break;case"0":0===i&&(i=n),t=n;break;default:if(!+e[n])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}function formatPrefixAuto(e,t){var r=formatDecimalParts(e,t);if(!r)return e+"";var n=r[0],i=r[1],o=i-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=n.length;return o===a?n:o>a?n+new Array(o-a+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+formatDecimalParts(e,Math.max(0,t+o-1))[0]}function formatRounded(e,t){var r=formatDecimalParts(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const formatTypes={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:formatDecimal,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>formatRounded(100*e,t),r:formatRounded,s:formatPrefixAuto,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function identity$3(e){return e}var map$1=Array.prototype.map,prefixes=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"],locale$1,format$5,formatPrefix;function formatLocale$1(e){var t=void 0===e.grouping||void 0===e.thousands?identity$3:formatGroup(map$1.call(e.grouping,Number),e.thousands+""),r=void 0===e.currency?"":e.currency[0]+"",n=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?identity$3:formatNumerals(map$1.call(e.numerals,String)),a=void 0===e.percent?"%":e.percent+"",s=void 0===e.minus?"âˆ’":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function l(e){var l=(e=formatSpecifier(e)).fill,u=e.align,d=e.sign,p=e.symbol,h=e.zero,m=e.width,f=e.comma,x=e.precision,g=e.trim,y=e.type;"n"===y?(f=!0,y="g"):formatTypes[y]||(void 0===x&&(x=12),g=!0,y="g"),(h||"0"===l&&"="===u)&&(h=!0,l="0",u="=");var b="$"===p?r:"#"===p&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",v="$"===p?n:/[%p]/.test(y)?a:"",E=formatTypes[y],w=/[defgprs%]/.test(y);function S(e){var r,n,a,p=b,S=v;if("c"===y)S=E(e)+S,e="";else{var j=(e=+e)<0||1/e<0;if(e=isNaN(e)?c:E(Math.abs(e),x),g&&(e=formatTrim(e)),j&&0===+e&&"+"!==d&&(j=!1),p=(j?"("===d?d:s:"-"===d||"("===d?"":d)+p,S=("s"===y?prefixes[8+prefixExponent/3]:"")+S+(j&&"("===d?")":""),w)for(r=-1,n=e.length;++r<n;)if(48>(a=e.charCodeAt(r))||a>57){S=(46===a?i+e.slice(r+1):e.slice(r))+S,e=e.slice(0,r);break}}f&&!h&&(e=t(e,1/0));var A=p.length+e.length+S.length,T=A<m?new Array(m-A+1).join(l):"";switch(f&&h&&(e=t(T+e,T.length?m-S.length:1/0),T=""),u){case"<":e=p+e+S+T;break;case"=":e=p+T+e+S;break;case"^":e=T.slice(0,A=T.length>>1)+p+e+S+T.slice(A);break;default:e=T+p+e+S}return o(e)}return x=void 0===x?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x)),S.toString=function(){return e+""},S}return{format:l,formatPrefix:function(e,t){var r=l(((e=formatSpecifier(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor(exponent(t)/3))),i=Math.pow(10,-n),o=prefixes[8+n/3];return function(e){return r(i*e)+o}}}}function defaultLocale$1(e){return locale$1=formatLocale$1(e),format$5=locale$1.format,formatPrefix=locale$1.formatPrefix,locale$1}function precisionFixed(e){return Math.max(0,-exponent(Math.abs(e)))}function precisionPrefix(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(exponent(t)/3)))-exponent(Math.abs(e)))}function precisionRound(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,exponent(t)-exponent(e))+1}function tickFormat(e,t,r,n){var i,o=tickStep(e,t,r);switch((n=formatSpecifier(null==n?",f":n)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=n.precision||isNaN(i=precisionPrefix(o,a))||(n.precision=i),formatPrefix(n,a);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(i=precisionRound(o,Math.max(Math.abs(e),Math.abs(t))))||(n.precision=i-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(i=precisionFixed(o))||(n.precision=i-2*("%"===n.type))}return format$5(n)}function linearish(e){var t=e.domain;return e.ticks=function(e){var r=t();return ticks(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){var n=t();return tickFormat(n[0],n[n.length-1],null==e?10:e,r)},e.nice=function(r){null==r&&(r=10);var n,i,o=t(),a=0,s=o.length-1,c=o[a],l=o[s],u=10;for(l<c&&(i=c,c=l,l=i,i=a,a=s,s=i);u-- >0;){if((i=tickIncrement(c,l,r))===n)return o[a]=c,o[s]=l,t(o);if(i>0)c=Math.floor(c/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;c=Math.ceil(c*i)/i,l=Math.floor(l*i)/i}n=i}return e},e}function linear(){var e=continuous();return e.copy=function(){return copy$1(e,linear())},initRange.apply(e,arguments),linearish(e)}function identity$2(e){var t;function r(e){return null==e||isNaN(e=+e)?t:e}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(e=Array.from(t,number$3),r):e.slice()},r.unknown=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return identity$2(e).unknown(t)},e=arguments.length?Array.from(e,number$3):[0,1],linearish(r)}function nice(e,t){var r,n=0,i=(e=e.slice()).length-1,o=e[n],a=e[i];return a<o&&(r=n,n=i,i=r,r=o,o=a,a=r),e[n]=t.floor(o),e[i]=t.ceil(a),e}function transformLog(e){return Math.log(e)}function transformExp(e){return Math.exp(e)}function transformLogn(e){return-Math.log(-e)}function transformExpn(e){return-Math.exp(-e)}function pow10(e){return isFinite(e)?+("1e"+e):e<0?0:e}function powp(e){return 10===e?pow10:e===Math.E?Math.exp:t=>Math.pow(e,t)}function logp(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function reflect(e){return(t,r)=>-e(-t,r)}function loggish(e){const t=e(transformLog,transformExp),r=t.domain;let n,i,o=10;function a(){return n=logp(o),i=powp(o),r()[0]<0?(n=reflect(n),i=reflect(i),e(transformLogn,transformExpn)):e(transformLog,transformExp),t}return t.base=function(e){return arguments.length?(o=+e,a()):o},t.domain=function(e){return arguments.length?(r(e),a()):r()},t.ticks=e=>{const t=r();let a=t[0],s=t[t.length-1];const c=s<a;c&&([a,s]=[s,a]);let l,u,d=n(a),p=n(s);const h=null==e?10:+e;let m=[];if(!(o%1)&&p-d<h){if(d=Math.floor(d),p=Math.ceil(p),a>0){for(;d<=p;++d)for(l=1;l<o;++l)if(u=d<0?l/i(-d):l*i(d),!(u<a)){if(u>s)break;m.push(u)}}else for(;d<=p;++d)for(l=o-1;l>=1;--l)if(u=d>0?l/i(-d):l*i(d),!(u<a)){if(u>s)break;m.push(u)}2*m.length<h&&(m=ticks(a,s,h))}else m=ticks(d,p,Math.min(p-d,h)).map(i);return c?m.reverse():m},t.tickFormat=(e,r)=>{if(null==e&&(e=10),null==r&&(r=10===o?"s":","),"function"!=typeof r&&(o%1||null!=(r=formatSpecifier(r)).precision||(r.trim=!0),r=format$5(r)),e===1/0)return r;const a=Math.max(1,o*e/t.ticks().length);return e=>{let t=e/i(Math.round(n(e)));return t*o<o-.5&&(t*=o),t<=a?r(e):""}},t.nice=()=>r(nice(r(),{floor:e=>i(Math.floor(n(e))),ceil:e=>i(Math.ceil(n(e)))})),t}function log(){const e=loggish(transformer$2()).domain([1,10]);return e.copy=()=>copy$1(e,log()).base(e.base()),initRange.apply(e,arguments),e}function transformSymlog(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function transformSymexp(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function symlogish(e){var t=1,r=e(transformSymlog(t),transformSymexp(t));return r.constant=function(r){return arguments.length?e(transformSymlog(t=+r),transformSymexp(t)):t},linearish(r)}function symlog(){var e=symlogish(transformer$2());return e.copy=function(){return copy$1(e,symlog()).constant(e.constant())},initRange.apply(e,arguments)}function transformPow(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function transformSqrt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function transformSquare(e){return e<0?-e*e:e*e}function powish(e){var t=e(identity$4,identity$4),r=1;return t.exponent=function(t){return arguments.length?1===(r=+t)?e(identity$4,identity$4):.5===r?e(transformSqrt,transformSquare):e(transformPow(r),transformPow(1/r)):r},linearish(t)}function pow(){var e=powish(transformer$2());return e.copy=function(){return copy$1(e,pow()).exponent(e.exponent())},initRange.apply(e,arguments),e}function sqrt(){return pow.apply(null,arguments).exponent(.5)}function square(e){return Math.sign(e)*e*e}function unsquare(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function radial(){var e,t=continuous(),r=[0,1],n=!1;function i(r){var i=unsquare(t(r));return isNaN(i)?e:n?Math.round(i):i}return i.invert=function(e){return t.invert(square(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain()},i.range=function(e){return arguments.length?(t.range((r=Array.from(e,number$3)).map(square)),i):r.slice()},i.rangeRound=function(e){return i.range(e).round(!0)},i.round=function(e){return arguments.length?(n=!!e,i):n},i.clamp=function(e){return arguments.length?(t.clamp(e),i):t.clamp()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return radial(t.domain(),r).round(n).clamp(t.clamp()).unknown(e)},initRange.apply(i,arguments),linearish(i)}function quantile(){var e,t=[],r=[],n=[];function i(){var e=0,i=Math.max(1,r.length);for(n=new Array(i-1);++e<i;)n[e-1]=quantileSorted(t,e/i);return o}function o(t){return null==t||isNaN(t=+t)?e:r[bisectRight(n,t)]}return o.invertExtent=function(e){var i=r.indexOf(e);return i<0?[NaN,NaN]:[i>0?n[i-1]:t[0],i<n.length?n[i]:t[t.length-1]]},o.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let r of e)null==r||isNaN(r=+r)||t.push(r);return t.sort(ascending),i()},o.range=function(e){return arguments.length?(r=Array.from(e),i()):r.slice()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.quantiles=function(){return n.slice()},o.copy=function(){return quantile().domain(t).range(r).unknown(e)},initRange.apply(o,arguments)}function quantize(){var e,t=0,r=1,n=1,i=[.5],o=[0,1];function a(t){return null!=t&&t<=t?o[bisectRight(i,t,0,n)]:e}function s(){var e=-1;for(i=new Array(n);++e<n;)i[e]=((e+1)*r-(e-n)*t)/(n+1);return a}return a.domain=function(e){return arguments.length?([t,r]=e,t=+t,r=+r,s()):[t,r]},a.range=function(e){return arguments.length?(n=(o=Array.from(e)).length-1,s()):o.slice()},a.invertExtent=function(e){var a=o.indexOf(e);return a<0?[NaN,NaN]:a<1?[t,i[0]]:a>=n?[i[n-1],r]:[i[a-1],i[a]]},a.unknown=function(t){return arguments.length?(e=t,a):a},a.thresholds=function(){return i.slice()},a.copy=function(){return quantize().domain([t,r]).range(o).unknown(e)},initRange.apply(linearish(a),arguments)}function threshold(){var e,t=[.5],r=[0,1],n=1;function i(i){return null!=i&&i<=i?r[bisectRight(t,i,0,n)]:e}return i.domain=function(e){return arguments.length?(t=Array.from(e),n=Math.min(t.length,r.length-1),i):t.slice()},i.range=function(e){return arguments.length?(r=Array.from(e),n=Math.min(t.length,r.length-1),i):r.slice()},i.invertExtent=function(e){var n=r.indexOf(e);return[t[n-1],t[n]]},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return threshold().domain(t).range(r).unknown(e)},initRange.apply(i,arguments)}defaultLocale$1({thousands:",",grouping:[3],currency:["$",""]});const t0=new Date,t1=new Date;function timeInterval(e,t,r,n){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=t=>(e(t=new Date(+t)),t),i.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),i.round=e=>{const t=i(e),r=i.ceil(e);return e-t<r-e?t:r},i.offset=(e,r)=>(t(e=new Date(+e),null==r?1:Math.floor(r)),e),i.range=(r,n,o)=>{const a=[];if(r=i.ceil(r),o=null==o?1:Math.floor(o),!(r<n&&o>0))return a;let s;do{a.push(s=new Date(+r)),t(r,o),e(r)}while(s<r&&r<n);return a},i.filter=r=>timeInterval(t=>{if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)},(e,n)=>{if(e>=e)if(n<0)for(;++n<=0;)for(;t(e,-1),!r(e););else for(;--n>=0;)for(;t(e,1),!r(e););}),r&&(i.count=(t,n)=>(t0.setTime(+t),t1.setTime(+n),e(t0),e(t1),Math.floor(r(t0,t1))),i.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(n?t=>n(t)%e===0:t=>i.count(0,t)%e===0):i:null)),i}const millisecond=timeInterval(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);millisecond.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?timeInterval(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):millisecond:null),millisecond.range;const durationSecond=1e3,durationMinute=60*durationSecond,durationHour=60*durationMinute,durationDay=24*durationHour,durationWeek=7*durationDay,durationMonth=30*durationDay,durationYear=365*durationDay,second=timeInterval(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*durationSecond)},(e,t)=>(t-e)/durationSecond,e=>e.getUTCSeconds());second.range;const timeMinute=timeInterval(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*durationSecond)},(e,t)=>{e.setTime(+e+t*durationMinute)},(e,t)=>(t-e)/durationMinute,e=>e.getMinutes());timeMinute.range;const utcMinute=timeInterval(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*durationMinute)},(e,t)=>(t-e)/durationMinute,e=>e.getUTCMinutes());utcMinute.range;const timeHour=timeInterval(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*durationSecond-e.getMinutes()*durationMinute)},(e,t)=>{e.setTime(+e+t*durationHour)},(e,t)=>(t-e)/durationHour,e=>e.getHours());timeHour.range;const utcHour=timeInterval(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*durationHour)},(e,t)=>(t-e)/durationHour,e=>e.getUTCHours());utcHour.range;const timeDay=timeInterval(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*durationMinute)/durationDay,e=>e.getDate()-1);timeDay.range;const utcDay=timeInterval(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/durationDay,e=>e.getUTCDate()-1);utcDay.range;const unixDay=timeInterval(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/durationDay,e=>Math.floor(e/durationDay));function timeWeekday(e){return timeInterval(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*durationMinute)/durationWeek)}unixDay.range;const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6);function utcWeekday(e){return timeInterval(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/durationWeek)}timeSunday.range,timeMonday.range,timeTuesday.range,timeWednesday.range,timeThursday.range,timeFriday.range,timeSaturday.range;const utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6);utcSunday.range,utcMonday.range,utcTuesday.range,utcWednesday.range,utcThursday.range,utcFriday.range,utcSaturday.range;const timeMonth=timeInterval(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth());timeMonth.range;const utcMonth=timeInterval(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth());utcMonth.range;const timeYear=timeInterval(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());timeYear.every=e=>isFinite(e=Math.floor(e))&&e>0?timeInterval(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)}):null,timeYear.range;const utcYear=timeInterval(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());function ticker(e,t,r,n,i,o){const a=[[second,1,durationSecond],[second,5,5*durationSecond],[second,15,15*durationSecond],[second,30,30*durationSecond],[o,1,durationMinute],[o,5,5*durationMinute],[o,15,15*durationMinute],[o,30,30*durationMinute],[i,1,durationHour],[i,3,3*durationHour],[i,6,6*durationHour],[i,12,12*durationHour],[n,1,durationDay],[n,2,2*durationDay],[r,1,durationWeek],[t,1,durationMonth],[t,3,3*durationMonth],[e,1,durationYear]];function s(t,r,n){const i=Math.abs(r-t)/n,o=bisector(([,,e])=>e).right(a,i);if(o===a.length)return e.every(tickStep(t/durationYear,r/durationYear,n));if(0===o)return millisecond.every(Math.max(tickStep(t,r,n),1));const[s,c]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return s.every(c)}return[function(e,t,r){const n=t<e;n&&([e,t]=[t,e]);const i=r&&"function"==typeof r.range?r:s(e,t,r),o=i?i.range(e,+t+1):[];return n?o.reverse():o},s]}utcYear.every=e=>isFinite(e=Math.floor(e))&&e>0?timeInterval(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)}):null,utcYear.range;const[utcTicks,utcTickInterval]=ticker(utcYear,utcMonth,utcSunday,unixDay,utcHour,utcMinute),[timeTicks,timeTickInterval]=ticker(timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute);function localDate(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function utcDate(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function newDate(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function formatLocale(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,c=e.shortMonths,l=formatRe(i),u=formatLookup(i),d=formatRe(o),p=formatLookup(o),h=formatRe(a),m=formatLookup(a),f=formatRe(s),x=formatLookup(s),g=formatRe(c),y=formatLookup(c),b={a:function(e){return a[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return c[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},v={a:function(e){return a[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return c[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},E={a:function(e,t,r){var n=h.exec(t.slice(r));return n?(e.w=m.get(n[0].toLowerCase()),r+n[0].length):-1},A:function(e,t,r){var n=d.exec(t.slice(r));return n?(e.w=p.get(n[0].toLowerCase()),r+n[0].length):-1},b:function(e,t,r){var n=g.exec(t.slice(r));return n?(e.m=y.get(n[0].toLowerCase()),r+n[0].length):-1},B:function(e,t,r){var n=f.exec(t.slice(r));return n?(e.m=x.get(n[0].toLowerCase()),r+n[0].length):-1},c:function(e,r,n){return j(e,t,r,n)},d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:function(e,t,r){var n=l.exec(t.slice(r));return n?(e.p=u.get(n[0].toLowerCase()),r+n[0].length):-1},q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:function(e,t,n){return j(e,r,t,n)},X:function(e,t,r){return j(e,n,t,r)},y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};function w(e,t){return function(r){var n,i,o,a=[],s=-1,c=0,l=e.length;for(r instanceof Date||(r=new Date(+r));++s<l;)37===e.charCodeAt(s)&&(a.push(e.slice(c,s)),null!=(i=pads[n=e.charAt(++s)])?n=e.charAt(++s):i="e"===n?" ":"0",(o=t[n])&&(n=o(r,i)),a.push(n),c=s+1);return a.push(e.slice(c,s)),a.join("")}}function S(e,t){return function(r){var n,i,o=newDate(1900,void 0,1);if(j(o,e,r+="",0)!=r.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(n=utcDate(newDate(o.y,0,1))).getUTCDay(),n=i>4||0===i?utcMonday.ceil(n):utcMonday(n),n=utcDay.offset(n,7*(o.V-1)),o.y=n.getUTCFullYear(),o.m=n.getUTCMonth(),o.d=n.getUTCDate()+(o.w+6)%7):(i=(n=localDate(newDate(o.y,0,1))).getDay(),n=i>4||0===i?timeMonday.ceil(n):timeMonday(n),n=timeDay.offset(n,7*(o.V-1)),o.y=n.getFullYear(),o.m=n.getMonth(),o.d=n.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?utcDate(newDate(o.y,0,1)).getUTCDay():localDate(newDate(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,utcDate(o)):localDate(o)}}function j(e,t,r,n){for(var i,o,a=0,s=t.length,c=r.length;a<s;){if(n>=c)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=E[i in pads?t.charAt(a++):i])||(n=o(e,r,n))<0)return-1}else if(i!=r.charCodeAt(n++))return-1}return n}return b.x=w(r,b),b.X=w(n,b),b.c=w(t,b),v.x=w(r,v),v.X=w(n,v),v.c=w(t,v),{format:function(e){var t=w(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=S(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",v);return t.toString=function(){return e},t},utcParse:function(e){var t=S(e+="",!0);return t.toString=function(){return e},t}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g,locale,timeFormat,utcFormat;function pad(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",o=i.length;return n+(o<r?new Array(r-o+1).join(t)+i:i)}function requote(e){return e.replace(requoteRe,"\\$&")}function formatRe(e){return new RegExp("^(?:"+e.map(requote).join("|")+")","i")}function formatLookup(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function parseWeekdayNumberSunday(e,t,r){var n=numberRe.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function parseWeekdayNumberMonday(e,t,r){var n=numberRe.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function parseWeekNumberSunday(e,t,r){var n=numberRe.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function parseWeekNumberISO(e,t,r){var n=numberRe.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function parseWeekNumberMonday(e,t,r){var n=numberRe.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function parseFullYear(e,t,r){var n=numberRe.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function parseYear(e,t,r){var n=numberRe.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function parseZone(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function parseQuarter(e,t,r){var n=numberRe.exec(t.slice(r,r+1));return n?(e.q=3*n[0]-3,r+n[0].length):-1}function parseMonthNumber(e,t,r){var n=numberRe.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function parseDayOfMonth(e,t,r){var n=numberRe.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function parseDayOfYear(e,t,r){var n=numberRe.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function parseHour24(e,t,r){var n=numberRe.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function parseMinutes(e,t,r){var n=numberRe.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function parseSeconds(e,t,r){var n=numberRe.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function parseMilliseconds(e,t,r){var n=numberRe.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function parseMicroseconds(e,t,r){var n=numberRe.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function parseLiteralPercent(e,t,r){var n=percentRe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function parseUnixTimestamp(e,t,r){var n=numberRe.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function parseUnixTimestampSeconds(e,t,r){var n=numberRe.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function formatDayOfMonth(e,t){return pad(e.getDate(),t,2)}function formatHour24(e,t){return pad(e.getHours(),t,2)}function formatHour12(e,t){return pad(e.getHours()%12||12,t,2)}function formatDayOfYear(e,t){return pad(1+timeDay.count(timeYear(e),e),t,3)}function formatMilliseconds(e,t){return pad(e.getMilliseconds(),t,3)}function formatMicroseconds(e,t){return formatMilliseconds(e,t)+"000"}function formatMonthNumber(e,t){return pad(e.getMonth()+1,t,2)}function formatMinutes(e,t){return pad(e.getMinutes(),t,2)}function formatSeconds(e,t){return pad(e.getSeconds(),t,2)}function formatWeekdayNumberMonday(e){var t=e.getDay();return 0===t?7:t}function formatWeekNumberSunday(e,t){return pad(timeSunday.count(timeYear(e)-1,e),t,2)}function dISO(e){var t=e.getDay();return t>=4||0===t?timeThursday(e):timeThursday.ceil(e)}function formatWeekNumberISO(e,t){return e=dISO(e),pad(timeThursday.count(timeYear(e),e)+(4===timeYear(e).getDay()),t,2)}function formatWeekdayNumberSunday(e){return e.getDay()}function formatWeekNumberMonday(e,t){return pad(timeMonday.count(timeYear(e)-1,e),t,2)}function formatYear(e,t){return pad(e.getFullYear()%100,t,2)}function formatYearISO(e,t){return pad((e=dISO(e)).getFullYear()%100,t,2)}function formatFullYear(e,t){return pad(e.getFullYear()%1e4,t,4)}function formatFullYearISO(e,t){var r=e.getDay();return pad((e=r>=4||0===r?timeThursday(e):timeThursday.ceil(e)).getFullYear()%1e4,t,4)}function formatZone(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pad(t/60|0,"0",2)+pad(t%60,"0",2)}function formatUTCDayOfMonth(e,t){return pad(e.getUTCDate(),t,2)}function formatUTCHour24(e,t){return pad(e.getUTCHours(),t,2)}function formatUTCHour12(e,t){return pad(e.getUTCHours()%12||12,t,2)}function formatUTCDayOfYear(e,t){return pad(1+utcDay.count(utcYear(e),e),t,3)}function formatUTCMilliseconds(e,t){return pad(e.getUTCMilliseconds(),t,3)}function formatUTCMicroseconds(e,t){return formatUTCMilliseconds(e,t)+"000"}function formatUTCMonthNumber(e,t){return pad(e.getUTCMonth()+1,t,2)}function formatUTCMinutes(e,t){return pad(e.getUTCMinutes(),t,2)}function formatUTCSeconds(e,t){return pad(e.getUTCSeconds(),t,2)}function formatUTCWeekdayNumberMonday(e){var t=e.getUTCDay();return 0===t?7:t}function formatUTCWeekNumberSunday(e,t){return pad(utcSunday.count(utcYear(e)-1,e),t,2)}function UTCdISO(e){var t=e.getUTCDay();return t>=4||0===t?utcThursday(e):utcThursday.ceil(e)}function formatUTCWeekNumberISO(e,t){return e=UTCdISO(e),pad(utcThursday.count(utcYear(e),e)+(4===utcYear(e).getUTCDay()),t,2)}function formatUTCWeekdayNumberSunday(e){return e.getUTCDay()}function formatUTCWeekNumberMonday(e,t){return pad(utcMonday.count(utcYear(e)-1,e),t,2)}function formatUTCYear(e,t){return pad(e.getUTCFullYear()%100,t,2)}function formatUTCYearISO(e,t){return pad((e=UTCdISO(e)).getUTCFullYear()%100,t,2)}function formatUTCFullYear(e,t){return pad(e.getUTCFullYear()%1e4,t,4)}function formatUTCFullYearISO(e,t){var r=e.getUTCDay();return pad((e=r>=4||0===r?utcThursday(e):utcThursday.ceil(e)).getUTCFullYear()%1e4,t,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(e){return+e}function formatUnixTimestampSeconds(e){return Math.floor(+e/1e3)}function defaultLocale(e){return locale=formatLocale(e),timeFormat=locale.format,locale.parse,utcFormat=locale.utcFormat,locale.utcParse,locale}function date(e){return new Date(e)}function number$2(e){return e instanceof Date?+e:+new Date(+e)}function calendar(e,t,r,n,i,o,a,s,c,l){var u=continuous(),d=u.invert,p=u.domain,h=l(".%L"),m=l(":%S"),f=l("%I:%M"),x=l("%I %p"),g=l("%a %d"),y=l("%b %d"),b=l("%B"),v=l("%Y");function E(e){return(c(e)<e?h:s(e)<e?m:a(e)<e?f:o(e)<e?x:n(e)<e?i(e)<e?g:y:r(e)<e?b:v)(e)}return u.invert=function(e){return new Date(d(e))},u.domain=function(e){return arguments.length?p(Array.from(e,number$2)):p().map(date)},u.ticks=function(t){var r=p();return e(r[0],r[r.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?E:l(t)},u.nice=function(e){var r=p();return e&&"function"==typeof e.range||(e=t(r[0],r[r.length-1],null==e?10:e)),e?p(nice(r,e)):u},u.copy=function(){return copy$1(u,calendar(e,t,r,n,i,o,a,s,c,l))},u}function time$1(){return initRange.apply(calendar(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute,second,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function utcTime(){return initRange.apply(calendar(utcTicks,utcTickInterval,utcYear,utcMonth,utcSunday,utcDay,utcHour,utcMinute,second,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function transformer$1(){var e,t,r,n,i,o=0,a=1,s=identity$4,c=!1;function l(t){return null==t||isNaN(t=+t)?i:s(0===r?.5:(t=(n(t)-e)*r,c?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var r,n;return arguments.length?([r,n]=t,s=e(r,n),l):[s(0),s(1)]}}return l.domain=function(i){return arguments.length?([o,a]=i,e=n(o=+o),t=n(a=+a),r=e===t?0:1/(t-e),l):[o,a]},l.clamp=function(e){return arguments.length?(c=!!e,l):c},l.interpolator=function(e){return arguments.length?(s=e,l):s},l.range=u(interpolate$1),l.rangeRound=u(interpolateRound),l.unknown=function(e){return arguments.length?(i=e,l):i},function(i){return n=i,e=i(o),t=i(a),r=e===t?0:1/(t-e),l}}function copy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function sequential(){var e=linearish(transformer$1()(identity$4));return e.copy=function(){return copy(e,sequential())},initInterpolator.apply(e,arguments)}function sequentialLog(){var e=loggish(transformer$1()).domain([1,10]);return e.copy=function(){return copy(e,sequentialLog()).base(e.base())},initInterpolator.apply(e,arguments)}function sequentialSymlog(){var e=symlogish(transformer$1());return e.copy=function(){return copy(e,sequentialSymlog()).constant(e.constant())},initInterpolator.apply(e,arguments)}function sequentialPow(){var e=powish(transformer$1());return e.copy=function(){return copy(e,sequentialPow()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function sequentialSqrt(){return sequentialPow.apply(null,arguments).exponent(.5)}function sequentialQuantile(){var e=[],t=identity$4;function r(r){if(null!=r&&!isNaN(r=+r))return t((bisectRight(e,r,1)-1)/(e.length-1))}return r.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let r of t)null==r||isNaN(r=+r)||e.push(r);return e.sort(ascending),r},r.interpolator=function(e){return arguments.length?(t=e,r):t},r.range=function(){return e.map((r,n)=>t(n/(e.length-1)))},r.quantiles=function(t){return Array.from({length:t+1},(r,n)=>quantile$1(e,n/t))},r.copy=function(){return sequentialQuantile(t).domain(e)},initInterpolator.apply(r,arguments)}function transformer(){var e,t,r,n,i,o,a,s=0,c=.5,l=1,u=1,d=identity$4,p=!1;function h(e){return isNaN(e=+e)?a:(e=.5+((e=+o(e))-t)*(u*e<u*t?n:i),d(p?Math.max(0,Math.min(1,e)):e))}function m(e){return function(t){var r,n,i;return arguments.length?([r,n,i]=t,d=piecewise(e,[r,n,i]),h):[d(0),d(.5),d(1)]}}return h.domain=function(a){return arguments.length?([s,c,l]=a,e=o(s=+s),t=o(c=+c),r=o(l=+l),n=e===t?0:.5/(t-e),i=t===r?0:.5/(r-t),u=t<e?-1:1,h):[s,c,l]},h.clamp=function(e){return arguments.length?(p=!!e,h):p},h.interpolator=function(e){return arguments.length?(d=e,h):d},h.range=m(interpolate$1),h.rangeRound=m(interpolateRound),h.unknown=function(e){return arguments.length?(a=e,h):a},function(a){return o=a,e=a(s),t=a(c),r=a(l),n=e===t?0:.5/(t-e),i=t===r?0:.5/(r-t),u=t<e?-1:1,h}}function diverging(){var e=linearish(transformer()(identity$4));return e.copy=function(){return copy(e,diverging())},initInterpolator.apply(e,arguments)}function divergingLog(){var e=loggish(transformer()).domain([.1,1,10]);return e.copy=function(){return copy(e,divergingLog()).base(e.base())},initInterpolator.apply(e,arguments)}function divergingSymlog(){var e=symlogish(transformer());return e.copy=function(){return copy(e,divergingSymlog()).constant(e.constant())},initInterpolator.apply(e,arguments)}function divergingPow(){var e=powish(transformer());return e.copy=function(){return copy(e,divergingPow()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function divergingSqrt(){return divergingPow.apply(null,arguments).exponent(.5)}defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const d3Scales=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:band,scaleDiverging:diverging,scaleDivergingLog:divergingLog,scaleDivergingPow:divergingPow,scaleDivergingSqrt:divergingSqrt,scaleDivergingSymlog:divergingSymlog,scaleIdentity:identity$2,scaleImplicit:implicit,scaleLinear:linear,scaleLog:log,scaleOrdinal:ordinal,scalePoint:point,scalePow:pow,scaleQuantile:quantile,scaleQuantize:quantize,scaleRadial:radial,scaleSequential:sequential,scaleSequentialLog:sequentialLog,scaleSequentialPow:sequentialPow,scaleSequentialQuantile:sequentialQuantile,scaleSequentialSqrt:sequentialSqrt,scaleSequentialSymlog:sequentialSymlog,scaleSqrt:sqrt,scaleSymlog:symlog,scaleThreshold:threshold,scaleTime:time$1,scaleUtc:utcTime,tickFormat:tickFormat},Symbol.toStringTag,{value:"Module"}));var selectChartDataWithIndexes=e=>e.chartData,selectChartDataAndAlwaysIgnoreIndexes=createSelector([selectChartDataWithIndexes],e=>{var t=null!=e.chartData?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),selectChartDataWithIndexesIfNotInPanorama=(e,t,r,n)=>n?selectChartDataAndAlwaysIgnoreIndexes(e):selectChartDataWithIndexes(e);function isWellFormedNumberDomain(e){if(Array.isArray(e)&&2===e.length){var[t,r]=e;if(isWellBehavedNumber(t)&&isWellBehavedNumber(r))return!0}return!1}function extendDomain(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function numericalDomainSpecifiedWithoutRequiringData(e,t){if(t&&"function"!=typeof e&&Array.isArray(e)&&2===e.length){var r,n,[i,o]=e;if(isWellBehavedNumber(i))r=i;else if("function"==typeof i)return;if(isWellBehavedNumber(o))n=o;else if("function"==typeof o)return;var a=[r,n];if(isWellFormedNumberDomain(a))return a}}function parseNumericalUserDomain(e,t,r){if(r||null!=t){if("function"==typeof e&&null!=t)try{var n=e(t,r);if(isWellFormedNumberDomain(n))return extendDomain(n,t,r)}catch(h){}if(Array.isArray(e)&&2===e.length){var i,o,[a,s]=e;if("auto"===a)null!=t&&(i=Math.min(...t));else if(isNumber(a))i=a;else if("function"==typeof a)try{null!=t&&(i=a(null==t?void 0:t[0]))}catch(m){}else if("string"==typeof a&&MIN_VALUE_REG.test(a)){var c=MIN_VALUE_REG.exec(a);if(null==c||null==t)i=void 0;else{var l=+c[1];i=t[0]-l}}else i=null==t?void 0:t[0];if("auto"===s)null!=t&&(o=Math.max(...t));else if(isNumber(s))o=s;else if("function"==typeof s)try{null!=t&&(o=s(null==t?void 0:t[1]))}catch(f){}else if("string"==typeof s&&MAX_VALUE_REG.test(s)){var u=MAX_VALUE_REG.exec(s);if(null==u||null==t)o=void 0;else{var d=+u[1];o=t[1]+d}}else o=null==t?void 0:t[1];var p=[i,o];if(isWellFormedNumberDomain(p))return null==t?p:extendDomain(p,t,r)}}}var MAX_DIGITS=1e9,defaults$2={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Decimal,external=!0,decimalError="[DecimalError] ",invalidArgument=decimalError+"Invalid argument: ",exponentOutOfRange=decimalError+"Exponent out of range: ",mathfloor=Math.floor,mathpow=Math.pow,isDecimal=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ONE,BASE=1e7,LOG_BASE=7,MAX_SAFE_INTEGER=9007199254740991,MAX_E=mathfloor(MAX_SAFE_INTEGER/LOG_BASE),P={};function add$6(e,t){var r,n,i,o,a,s,c,l,u=e.constructor,d=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),external?round(t,d):t;if(c=e.d,l=t.d,a=e.e,i=t.e,c=c.slice(),o=a-i){for(o<0?(n=c,o=-o,s=l.length):(n=l,i=a,s=c.length),o>(s=(a=Math.ceil(d/LOG_BASE))>s?a+1:s+1)&&(o=s,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for((s=c.length)-(o=l.length)<0&&(o=s,n=l,l=c,c=n),r=0;o;)r=(c[--o]=c[o]+l[o]+r)/BASE|0,c[o]%=BASE;for(r&&(c.unshift(r),++i),s=c.length;0==c[--s];)c.pop();return t.d=c,t.e=i,external?round(t,d):t}function checkInt32(e,t,r){if(e!==~~e||e<t||e>r)throw Error(invalidArgument+e)}function digitsToString(e){var t,r,n,i=e.length-1,o="",a=e[0];if(i>0){for(o+=a,t=1;t<i;t++)n=e[t]+"",(r=LOG_BASE-n.length)&&(o+=getZeroString(r)),o+=n;a=e[t],(r=LOG_BASE-(n=a+"").length)&&(o+=getZeroString(r))}else if(0===a)return"0";for(;a%10==0;)a/=10;return o+a}P.absoluteValue=P.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},P.comparedTo=P.cmp=function(e){var t,r,n,i,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(t=0,r=(n=o.d.length)<(i=e.d.length)?n:i;t<r;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return n===i?0:n>i^o.s<0?1:-1},P.decimalPlaces=P.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*LOG_BASE;if(t=e.d[t])for(;t%10==0;t/=10)r--;return r<0?0:r},P.dividedBy=P.div=function(e){return divide(this,new this.constructor(e))},P.dividedToIntegerBy=P.idiv=function(e){var t=this.constructor;return round(divide(this,new t(e),0,1),t.precision)},P.equals=P.eq=function(e){return!this.cmp(e)},P.exponent=function(){return getBase10Exponent(this)},P.greaterThan=P.gt=function(e){return this.cmp(e)>0},P.greaterThanOrEqualTo=P.gte=function(e){return this.cmp(e)>=0},P.isInteger=P.isint=function(){return this.e>this.d.length-2},P.isNegative=P.isneg=function(){return this.s<0},P.isPositive=P.ispos=function(){return this.s>0},P.isZero=function(){return 0===this.s},P.lessThan=P.lt=function(e){return this.cmp(e)<0},P.lessThanOrEqualTo=P.lte=function(e){return this.cmp(e)<1},P.logarithm=P.log=function(e){var t,r=this,n=r.constructor,i=n.precision,o=i+5;if(void 0===e)e=new n(10);else if((e=new n(e)).s<1||e.eq(ONE))throw Error(decimalError+"NaN");if(r.s<1)throw Error(decimalError+(r.s?"NaN":"-Infinity"));return r.eq(ONE)?new n(0):(external=!1,t=divide(ln(r,o),ln(e,o),o),external=!0,round(t,i))},P.minus=P.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?subtract(t,e):add$6(t,(e.s=-e.s,e))},P.modulo=P.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(!(e=new n(e)).s)throw Error(decimalError+"NaN");return r.s?(external=!1,t=divide(r,e,0,1).times(e),external=!0,r.minus(t)):round(new n(r),i)},P.naturalExponential=P.exp=function(){return exp(this)},P.naturalLogarithm=P.ln=function(){return ln(this)},P.negated=P.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},P.plus=P.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?add$6(t,e):subtract(t,(e.s=-e.s,e))},P.precision=P.sd=function(e){var t,r,n,i=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(invalidArgument+e);if(t=getBase10Exponent(i)+1,r=(n=i.d.length-1)*LOG_BASE+1,n=i.d[n]){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r},P.squareRoot=P.sqrt=function(){var e,t,r,n,i,o,a,s=this,c=s.constructor;if(s.s<1){if(!s.s)return new c(0);throw Error(decimalError+"NaN")}for(e=getBase10Exponent(s),external=!1,0==(i=Math.sqrt(+s))||i==1/0?(((t=digitsToString(s.d)).length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=mathfloor((e+1)/2)-(e<0||e%2),n=new c(t=i==1/0?"5e"+e:(t=i.toExponential()).slice(0,t.indexOf("e")+1)+e)):n=new c(i.toString()),i=a=(r=c.precision)+3;;)if(n=(o=n).plus(divide(s,o,a+2)).times(.5),digitsToString(o.d).slice(0,a)===(t=digitsToString(n.d)).slice(0,a)){if(t=t.slice(a-3,a+1),i==a&&"4999"==t){if(round(o,r+1,0),o.times(o).eq(s)){n=o;break}}else if("9999"!=t)break;a+=4}return external=!0,round(n,r)},P.times=P.mul=function(e){var t,r,n,i,o,a,s,c,l,u=this,d=u.constructor,p=u.d,h=(e=new d(e)).d;if(!u.s||!e.s)return new d(0);for(e.s*=u.s,r=u.e+e.e,(c=p.length)<(l=h.length)&&(o=p,p=h,h=o,a=c,c=l,l=a),o=[],n=a=c+l;n--;)o.push(0);for(n=l;--n>=0;){for(t=0,i=c+n;i>n;)s=o[i]+h[n]*p[i-n-1]+t,o[i--]=s%BASE|0,t=s/BASE|0;o[i]=(o[i]+t)%BASE|0}for(;!o[--a];)o.pop();return t?++r:o.shift(),e.d=o,e.e=r,external?round(e,d.precision):e},P.toDecimalPlaces=P.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),void 0===e?r:(checkInt32(e,0,MAX_DIGITS),void 0===t?t=n.rounding:checkInt32(t,0,8),round(r,e+getBase10Exponent(r)+1,t))},P.toExponential=function(e,t){var r,n=this,i=n.constructor;return void 0===e?r=toString$3(n,!0):(checkInt32(e,0,MAX_DIGITS),void 0===t?t=i.rounding:checkInt32(t,0,8),r=toString$3(n=round(new i(n),e+1,t),!0,e+1)),r},P.toFixed=function(e,t){var r,n,i=this,o=i.constructor;return void 0===e?toString$3(i):(checkInt32(e,0,MAX_DIGITS),void 0===t?t=o.rounding:checkInt32(t,0,8),r=toString$3((n=round(new o(i),e+getBase10Exponent(i)+1,t)).abs(),!1,e+getBase10Exponent(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)},P.toInteger=P.toint=function(){var e=this,t=e.constructor;return round(new t(e),getBase10Exponent(e)+1,t.rounding)},P.toNumber=function(){return+this},P.toPower=P.pow=function(e){var t,r,n,i,o,a,s=this,c=s.constructor,l=+(e=new c(e));if(!e.s)return new c(ONE);if(!(s=new c(s)).s){if(e.s<1)throw Error(decimalError+"Infinity");return s}if(s.eq(ONE))return s;if(n=c.precision,e.eq(ONE))return round(s,n);if(a=(t=e.e)>=(r=e.d.length-1),o=s.s,a){if((r=l<0?-l:l)<=MAX_SAFE_INTEGER){for(i=new c(ONE),t=Math.ceil(n/LOG_BASE+4),external=!1;r%2&&truncate$1((i=i.times(s)).d,t),0!==(r=mathfloor(r/2));)truncate$1((s=s.times(s)).d,t);return external=!0,e.s<0?new c(ONE).div(i):round(i,n)}}else if(o<0)throw Error(decimalError+"NaN");return o=o<0&&1&e.d[Math.max(t,r)]?-1:1,s.s=1,external=!1,i=e.times(ln(s,n+12)),external=!0,(i=exp(i)).s=o,i},P.toPrecision=function(e,t){var r,n,i=this,o=i.constructor;return void 0===e?n=toString$3(i,(r=getBase10Exponent(i))<=o.toExpNeg||r>=o.toExpPos):(checkInt32(e,1,MAX_DIGITS),void 0===t?t=o.rounding:checkInt32(t,0,8),n=toString$3(i=round(new o(i),e,t),e<=(r=getBase10Exponent(i))||r<=o.toExpNeg,e)),n},P.toSignificantDigits=P.tosd=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(checkInt32(e,1,MAX_DIGITS),void 0===t?t=r.rounding:checkInt32(t,0,8)),round(new r(this),e,t)},P.toString=P.valueOf=P.val=P.toJSON=P[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=getBase10Exponent(e),r=e.constructor;return toString$3(e,t<=r.toExpNeg||t>=r.toExpPos)};var divide=function(){function e(e,t){var r,n=0,i=e.length;for(e=e.slice();i--;)r=e[i]*t+n,e[i]=r%BASE|0,n=r/BASE|0;return n&&e.unshift(n),e}function t(e,t,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;i<r;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function r(e,t,r){for(var n=0;r--;)e[r]-=n,n=e[r]<t[r]?1:0,e[r]=n*BASE+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(n,i,o,a){var s,c,l,u,d,p,h,m,f,x,g,y,b,v,E,w,S,j,A=n.constructor,T=n.s==i.s?1:-1,P=n.d,$=i.d;if(!n.s)return new A(n);if(!i.s)throw Error(decimalError+"Division by zero");for(c=n.e-i.e,S=$.length,E=P.length,m=(h=new A(T)).d=[],l=0;$[l]==(P[l]||0);)++l;if($[l]>(P[l]||0)&&--c,(y=null==o?o=A.precision:a?o+(getBase10Exponent(n)-getBase10Exponent(i))+1:o)<0)return new A(0);if(y=y/LOG_BASE+2|0,l=0,1==S)for(u=0,$=$[0],y++;(l<E||u)&&y--;l++)b=u*BASE+(P[l]||0),m[l]=b/$|0,u=b%$|0;else{for((u=BASE/($[0]+1)|0)>1&&($=e($,u),P=e(P,u),S=$.length,E=P.length),v=S,x=(f=P.slice(0,S)).length;x<S;)f[x++]=0;(j=$.slice()).unshift(0),w=$[0],$[1]>=BASE/2&&++w;do{u=0,(s=t($,f,S,x))<0?(g=f[0],S!=x&&(g=g*BASE+(f[1]||0)),(u=g/w|0)>1?(u>=BASE&&(u=BASE-1),1==(s=t(d=e($,u),f,p=d.length,x=f.length))&&(u--,r(d,S<p?j:$,p))):(0==u&&(s=u=1),d=$.slice()),(p=d.length)<x&&d.unshift(0),r(f,d,x),-1==s&&(s=t($,f,S,x=f.length))<1&&(u++,r(f,S<x?j:$,x)),x=f.length):0===s&&(u++,f=[0]),m[l++]=u,s&&f[0]?f[x++]=P[v]||0:(f=[P[v]],x=1)}while((v++<E||void 0!==f[0])&&y--)}return m[0]||m.shift(),h.e=c,round(h,a?o+getBase10Exponent(h)+1:o)}}();function exp(e,t){var r,n,i,o,a,s=0,c=0,l=e.constructor,u=l.precision;if(getBase10Exponent(e)>16)throw Error(exponentOutOfRange+getBase10Exponent(e));if(!e.s)return new l(ONE);for(external=!1,a=u,o=new l(.03125);e.abs().gte(.1);)e=e.times(o),c+=5;for(a+=Math.log(mathpow(2,c))/Math.LN10*2+5|0,r=n=i=new l(ONE),l.precision=a;;){if(n=round(n.times(e),a),r=r.times(++s),digitsToString((o=i.plus(divide(n,r,a))).d).slice(0,a)===digitsToString(i.d).slice(0,a)){for(;c--;)i=round(i.times(i),a);return l.precision=u,null==t?(external=!0,round(i,u)):i}i=o}}function getBase10Exponent(e){for(var t=e.e*LOG_BASE,r=e.d[0];r>=10;r/=10)t++;return t}function getLn10(e,t,r){if(t>e.LN10.sd())throw external=!0,r&&(e.precision=r),Error(decimalError+"LN10 precision limit exceeded");return round(new e(e.LN10),t)}function getZeroString(e){for(var t="";e--;)t+="0";return t}function ln(e,t){var r,n,i,o,a,s,c,l,u,d=1,p=e,h=p.d,m=p.constructor,f=m.precision;if(p.s<1)throw Error(decimalError+(p.s?"NaN":"-Infinity"));if(p.eq(ONE))return new m(0);if(null==t?(external=!1,l=f):l=t,p.eq(10))return null==t&&(external=!0),getLn10(m,l);if(l+=10,m.precision=l,n=(r=digitsToString(h)).charAt(0),o=getBase10Exponent(p),!(Math.abs(o)<15e14))return c=getLn10(m,l+2,f).times(o+""),p=ln(new m(n+"."+r.slice(1)),l-10).plus(c),m.precision=f,null==t?(external=!0,round(p,f)):p;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=digitsToString((p=p.times(e)).d)).charAt(0),d++;for(o=getBase10Exponent(p),n>1?(p=new m("0."+r),o++):p=new m(n+"."+r.slice(1)),s=a=p=divide(p.minus(ONE),p.plus(ONE),l),u=round(p.times(p),l),i=3;;){if(a=round(a.times(u),l),digitsToString((c=s.plus(divide(a,new m(i),l))).d).slice(0,l)===digitsToString(s.d).slice(0,l))return s=s.times(2),0!==o&&(s=s.plus(getLn10(m,l+2,f).times(o+""))),s=divide(s,new m(d),l),m.precision=f,null==t?(external=!0,round(s,f)):s;s=c,i+=2}}function parseDecimal(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);)++n;for(i=t.length;48===t.charCodeAt(i-1);)--i;if(t=t.slice(n,i)){if(i-=n,r=r-n-1,e.e=mathfloor(r/LOG_BASE),e.d=[],n=(r+1)%LOG_BASE,r<0&&(n+=LOG_BASE),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=LOG_BASE;n<i;)e.d.push(+t.slice(n,n+=LOG_BASE));t=t.slice(n),n=LOG_BASE-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),external&&(e.e>MAX_E||e.e<-MAX_E))throw Error(exponentOutOfRange+r)}else e.s=0,e.e=0,e.d=[0];return e}function round(e,t,r){var n,i,o,a,s,c,l,u,d=e.d;for(a=1,o=d[0];o>=10;o/=10)a++;if((n=t-a)<0)n+=LOG_BASE,i=t,l=d[u=0];else{if((u=Math.ceil((n+1)/LOG_BASE))>=(o=d.length))return e;for(l=o=d[u],a=1;o>=10;o/=10)a++;i=(n%=LOG_BASE)-LOG_BASE+a}if(void 0!==r&&(s=l/(o=mathpow(10,a-i-1))%10|0,c=t<0||void 0!==d[u+1]||l%o,c=r<4?(s||c)&&(0==r||r==(e.s<0?3:2)):s>5||5==s&&(4==r||c||6==r&&(n>0?i>0?l/mathpow(10,a-i):0:d[u-1])%10&1||r==(e.s<0?8:7))),t<1||!d[0])return c?(o=getBase10Exponent(e),d.length=1,t=t-o-1,d[0]=mathpow(10,(LOG_BASE-t%LOG_BASE)%LOG_BASE),e.e=mathfloor(-t/LOG_BASE)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(0==n?(d.length=u,o=1,u--):(d.length=u+1,o=mathpow(10,LOG_BASE-n),d[u]=i>0?(l/mathpow(10,a-i)%mathpow(10,i)|0)*o:0),c)for(;;){if(0==u){(d[0]+=o)==BASE&&(d[0]=1,++e.e);break}if(d[u]+=o,d[u]!=BASE)break;d[u--]=0,o=1}for(n=d.length;0===d[--n];)d.pop();if(external&&(e.e>MAX_E||e.e<-MAX_E))throw Error(exponentOutOfRange+getBase10Exponent(e));return e}function subtract(e,t){var r,n,i,o,a,s,c,l,u,d,p=e.constructor,h=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),external?round(t,h):t;if(c=e.d,d=t.d,n=t.e,l=e.e,c=c.slice(),a=l-n){for((u=a<0)?(r=c,a=-a,s=d.length):(r=d,n=l,s=c.length),a>(i=Math.max(Math.ceil(h/LOG_BASE),s)+2)&&(a=i,r.length=1),r.reverse(),i=a;i--;)r.push(0);r.reverse()}else{for((u=(i=c.length)<(s=d.length))&&(s=i),i=0;i<s;i++)if(c[i]!=d[i]){u=c[i]<d[i];break}a=0}for(u&&(r=c,c=d,d=r,t.s=-t.s),s=c.length,i=d.length-s;i>0;--i)c[s++]=0;for(i=d.length;i>a;){if(c[--i]<d[i]){for(o=i;o&&0===c[--o];)c[o]=BASE-1;--c[o],c[i]+=BASE}c[i]-=d[i]}for(;0===c[--s];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(t.d=c,t.e=n,external?round(t,h):t):new p(0)}function toString$3(e,t,r){var n,i=getBase10Exponent(e),o=digitsToString(e.d),a=o.length;return t?(r&&(n=r-a)>0?o=o.charAt(0)+"."+o.slice(1)+getZeroString(n):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+getZeroString(-i-1)+o,r&&(n=r-a)>0&&(o+=getZeroString(n))):i>=a?(o+=getZeroString(i+1-a),r&&(n=r-i-1)>0&&(o=o+"."+getZeroString(n))):((n=i+1)<a&&(o=o.slice(0,n)+"."+o.slice(n)),r&&(n=r-a)>0&&(i+1===a&&(o+="."),o+=getZeroString(n))),e.s<0?"-"+o:o}function truncate$1(e,t){if(e.length>t)return e.length=t,!0}function clone(e){var t,r,n;function i(e){var t=this;if(!(t instanceof i))return new i(e);if(t.constructor=i,e instanceof i)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"==typeof e){if(0*e!=0)throw Error(invalidArgument+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):parseDecimal(t,e.toString())}if("string"!=typeof e)throw Error(invalidArgument+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!isDecimal.test(e))throw Error(invalidArgument+e);parseDecimal(t,e)}if(i.prototype=P,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=clone,i.config=i.set=config,void 0===e&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function config(e){if(!e||"object"!=typeof e)throw Error(decimalError+"Object expected");var t,r,n,i=["precision",1,MAX_DIGITS,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if(void 0!==(n=e[r=i[t]])){if(!(mathfloor(n)===n&&n>=i[t+1]&&n<=i[t+2]))throw Error(invalidArgument+r+": "+n);this[r]=n}if(void 0!==(n=e[r="LN10"])){if(n!=Math.LN10)throw Error(invalidArgument+r+": "+n);this[r]=new this(n)}return this}var Decimal=clone(defaults$2);ONE=new Decimal(1);const Decimal$1=Decimal;var identity$1=e=>e,PLACE_HOLDER={},isPlaceHolder=e=>e===PLACE_HOLDER,curry0=e=>function t(){return 0===arguments.length||1===arguments.length&&isPlaceHolder(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},curryN=(e,t)=>1===e?t:curry0(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=n.filter(e=>e!==PLACE_HOLDER).length;return o>=e?t(...n):curryN(e-o,curry0(function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var o=n.map(e=>isPlaceHolder(e)?r.shift():e);return t(...o,...r)}))}),curry=e=>curryN(e.length,e),range=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},map=curry((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(e=>t[e]).map(e)),compose=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return identity$1;var n=t.reverse(),i=n[0],o=n.slice(1);return function(){return o.reduce((e,t)=>t(e),i(...arguments))}},reverse=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),memoize=e=>{var t=null,r=null;return function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t&&i.every((e,r)=>{var n;return e===(null===(n=t)||void 0===n?void 0:n[r])})?r:(t=i,r=e(...i))}};function getDigitCount(e){return 0===e?1:Math.floor(new Decimal$1(e).abs().log(10).toNumber())+1}function rangeStep(e,t,r){for(var n=new Decimal$1(e),i=0,o=[];n.lt(t)&&i<1e5;)o.push(n.toNumber()),n=n.add(r),i++;return o}curry((e,t,r)=>{var n=+e;return n+r*(+t-n)}),curry((e,t,r)=>{var n=t-+e;return(r-e)/(n=n||1/0)}),curry((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var getValidInterval=e=>{var[t,r]=e,[n,i]=[t,r];return t>r&&([n,i]=[r,t]),[n,i]},getFormatStep=(e,t,r)=>{if(e.lte(0))return new Decimal$1(0);var n=getDigitCount(e.toNumber()),i=new Decimal$1(10).pow(n),o=e.div(i),a=1!==n?.05:.1,s=new Decimal$1(Math.ceil(o.div(a).toNumber())).add(r).mul(a).mul(i);return new Decimal$1(t?s.toNumber():Math.ceil(s.toNumber()))},getTickOfSingleValue=(e,t,r)=>{var n=new Decimal$1(1),i=new Decimal$1(e);if(!i.isint()&&r){var o=Math.abs(e);o<1?(n=new Decimal$1(10).pow(getDigitCount(e)-1),i=new Decimal$1(Math.floor(i.div(n).toNumber())).mul(n)):o>1&&(i=new Decimal$1(Math.floor(e)))}else 0===e?i=new Decimal$1(Math.floor((t-1)/2)):r||(i=new Decimal$1(Math.floor(e)));var a=Math.floor((t-1)/2);return compose(map(e=>i.add(new Decimal$1(e-a).mul(n)).toNumber()),range)(0,t)},_calculateStep=function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Decimal$1(0),tickMin:new Decimal$1(0),tickMax:new Decimal$1(0)};var o,a=getFormatStep(new Decimal$1(t).sub(e).div(r-1),n,i);o=e<=0&&t>=0?new Decimal$1(0):(o=new Decimal$1(e).add(t).div(2)).sub(new Decimal$1(o).mod(a));var s=Math.ceil(o.sub(e).div(a).toNumber()),c=Math.ceil(new Decimal$1(t).sub(o).div(a).toNumber()),l=s+c+1;return l>r?_calculateStep(e,t,r,n,i+1):(l<r&&(c=t>0?c+(r-l):c,s=t>0?s:s+(r-l)),{step:a,tickMin:o.sub(new Decimal$1(s).mul(a)),tickMax:o.add(new Decimal$1(c).mul(a))})};function getNiceTickValuesFn(e){var[t,r]=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=Math.max(n,2),[a,s]=getValidInterval([t,r]);if(a===-1/0||s===1/0){var c=s===1/0?[a,...range(0,n-1).map(()=>1/0)]:[...range(0,n-1).map(()=>-1/0),s];return t>r?reverse(c):c}if(a===s)return getTickOfSingleValue(a,n,i);var{step:l,tickMin:u,tickMax:d}=_calculateStep(a,s,o,i,0),p=rangeStep(u,d.add(new Decimal$1(.1).mul(l)),l);return t>r?reverse(p):p}function getTickValuesFixedDomainFn(e,t){var[r,n]=e,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],[o,a]=getValidInterval([r,n]);if(o===-1/0||a===1/0)return[r,n];if(o===a)return[o];var s=Math.max(t,2),c=getFormatStep(new Decimal$1(a).sub(o).div(s-1),i,0),l=[...rangeStep(new Decimal$1(o),new Decimal$1(a),c),a];return!1===i&&(l=l.map(e=>Math.round(e))),r>n?reverse(l):l}var getNiceTickValues=memoize(getNiceTickValuesFn),getTickValuesFixedDomain=memoize(getTickValuesFixedDomainFn),selectBarCategoryGap=e=>e.rootProps.barCategoryGap,selectStackOffsetType=e=>e.rootProps.stackOffset,selectChartName=e=>e.options.chartName,selectSyncId=e=>e.rootProps.syncId,selectSyncMethod=e=>e.rootProps.syncMethod,selectEventEmitter=e=>e.options.eventEmitter,DefaultZIndexes={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},defaultPolarAngleAxisProps={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},defaultPolarRadiusAxisProps={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},combineAxisRangeWithReverse=(e,t)=>{if(e&&t)return null!=e&&e.reversed?[t[1],t[0]]:t},implicitAngleAxis={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:defaultPolarAngleAxisProps.angleAxisId,includeHidden:!1,name:void 0,reversed:defaultPolarAngleAxisProps.reversed,scale:defaultPolarAngleAxisProps.scale,tick:defaultPolarAngleAxisProps.tick,tickCount:void 0,ticks:void 0,type:defaultPolarAngleAxisProps.type,unit:void 0},implicitRadiusAxis={allowDataOverflow:defaultPolarRadiusAxisProps.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:defaultPolarRadiusAxisProps.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:defaultPolarRadiusAxisProps.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:defaultPolarRadiusAxisProps.scale,tick:defaultPolarRadiusAxisProps.tick,tickCount:defaultPolarRadiusAxisProps.tickCount,ticks:void 0,type:defaultPolarRadiusAxisProps.type,unit:void 0},implicitRadialBarAngleAxis={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:defaultPolarAngleAxisProps.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:defaultPolarAngleAxisProps.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:defaultPolarAngleAxisProps.scale,tick:defaultPolarAngleAxisProps.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},implicitRadialBarRadiusAxis={allowDataOverflow:defaultPolarRadiusAxisProps.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:defaultPolarRadiusAxisProps.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:defaultPolarRadiusAxisProps.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:defaultPolarRadiusAxisProps.scale,tick:defaultPolarRadiusAxisProps.tick,tickCount:defaultPolarRadiusAxisProps.tickCount,ticks:void 0,type:"category",unit:void 0},selectAngleAxis=(e,t)=>null!=e.polarAxis.angleAxis[t]?e.polarAxis.angleAxis[t]:"radial"===e.layout.layoutType?implicitRadialBarAngleAxis:implicitAngleAxis,selectRadiusAxis=(e,t)=>null!=e.polarAxis.radiusAxis[t]?e.polarAxis.radiusAxis[t]:"radial"===e.layout.layoutType?implicitRadialBarRadiusAxis:implicitRadiusAxis,selectPolarOptions=e=>e.polarOptions,selectMaxRadius=createSelector([selectChartWidth,selectChartHeight,selectChartOffsetInternal],getMaxRadius),selectInnerRadius=createSelector([selectPolarOptions,selectMaxRadius],(e,t)=>{if(null!=e)return getPercentValue(e.innerRadius,t,0)}),selectOuterRadius=createSelector([selectPolarOptions,selectMaxRadius],(e,t)=>{if(null!=e)return getPercentValue(e.outerRadius,t,.8*t)}),combineAngleAxisRange=e=>{if(null==e)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},selectAngleAxisRange=createSelector([selectPolarOptions],combineAngleAxisRange);createSelector([selectAngleAxis,selectAngleAxisRange],combineAxisRangeWithReverse);var selectRadiusAxisRange=createSelector([selectMaxRadius,selectInnerRadius,selectOuterRadius],(e,t,r)=>{if(null!=e&&null!=t&&null!=r)return[t,r]});createSelector([selectRadiusAxis,selectRadiusAxisRange],combineAxisRangeWithReverse);var selectPolarViewBox=createSelector([selectChartLayout,selectPolarOptions,selectInnerRadius,selectOuterRadius,selectChartWidth,selectChartHeight],(e,t,r,n,i,o)=>{if(("centric"===e||"radial"===e)&&null!=t&&null!=r&&null!=n){var{cx:a,cy:s,startAngle:c,endAngle:l}=t;return{cx:getPercentValue(a,i,i/2),cy:getPercentValue(s,o,o/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:l,clockWise:!1}}}),pickAxisType=(e,t)=>t,pickAxisId=(e,t,r)=>r;function getStackSeriesIdentifier(e){return null==e?void 0:e.id}function combineDisplayedStackedData(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:i,dataKey:o}=r,a=new Map;return e.forEach(e=>{var t,r=null!==(t=e.data)&&void 0!==t?t:n;if(null!=r&&0!==r.length){var s=getStackSeriesIdentifier(e);r.forEach((t,r)=>{var n,c=null==o||i?r:String(getValueByDataKey(t,o,null)),l=getValueByDataKey(t,e.dataKey,0);n=a.has(c)?a.get(c):{},Object.assign(n,{[s]:l}),a.set(c,n)})}}),Array.from(a.values())}function isStacked(e){return null!=e.stackId&&null!=e.dataKey}var numberDomainEqualityCheck=(e,t)=>e===t||null!=e&&null!=t&&(e[0]===t[0]&&e[1]===t[1]);function emptyArraysAreEqualCheck(e,t){return!(!Array.isArray(e)||!Array.isArray(t)||0!==e.length||0!==t.length)||e===t}function arrayContentsAreEqualCheck(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var selectTooltipAxisType=e=>{var t=selectChartLayout(e);return"horizontal"===t?"xAxis":"vertical"===t?"yAxis":"centric"===t?"angleAxis":"radiusAxis"},selectTooltipAxisId=e=>e.tooltip.settings.axisId;function ownKeys$k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$k(Object(r),!0).forEach(function(t){_defineProperty$m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$k(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$m(e,t,r){return(t=_toPropertyKey$m(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$m(e){var t=_toPrimitive$m(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$m(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var defaultNumericDomain=[0,"auto"],implicitXAxis={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},selectXAxisSettingsNoDefaults=(e,t)=>e.cartesianAxis.xAxis[t],selectXAxisSettings=(e,t)=>{var r=selectXAxisSettingsNoDefaults(e,t);return null==r?implicitXAxis:r},implicitYAxis={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:defaultNumericDomain,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:DEFAULT_Y_AXIS_WIDTH},selectYAxisSettingsNoDefaults=(e,t)=>e.cartesianAxis.yAxis[t],selectYAxisSettings=(e,t)=>{var r=selectYAxisSettingsNoDefaults(e,t);return null==r?implicitYAxis:r},implicitZAxis={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},selectZAxisSettings=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return null==r?implicitZAxis:r},selectBaseAxis=(e,t,r)=>{switch(t){case"xAxis":return selectXAxisSettings(e,r);case"yAxis":return selectYAxisSettings(e,r);case"zAxis":return selectZAxisSettings(e,r);case"angleAxis":return selectAngleAxis(e,r);case"radiusAxis":return selectRadiusAxis(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},selectCartesianAxisSettings=(e,t,r)=>{switch(t){case"xAxis":return selectXAxisSettings(e,r);case"yAxis":return selectYAxisSettings(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},selectAxisSettings=(e,t,r)=>{switch(t){case"xAxis":return selectXAxisSettings(e,r);case"yAxis":return selectYAxisSettings(e,r);case"angleAxis":return selectAngleAxis(e,r);case"radiusAxis":return selectRadiusAxis(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},selectHasBar=e=>e.graphicalItems.cartesianItems.some(e=>"bar"===e.type)||e.graphicalItems.polarItems.some(e=>"radialBar"===e.type);function itemAxisPredicate(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var selectUnfilteredCartesianItems=e=>e.graphicalItems.cartesianItems,selectAxisPredicate=createSelector([pickAxisType,pickAxisId],itemAxisPredicate),combineGraphicalItemsSettings=(e,t,r)=>e.filter(r).filter(e=>!0===(null==t?void 0:t.includeHidden)||!e.hide),selectCartesianItemsSettings=createSelector([selectUnfilteredCartesianItems,selectBaseAxis,selectAxisPredicate],combineGraphicalItemsSettings,{memoizeOptions:{resultEqualityCheck:emptyArraysAreEqualCheck}}),selectStackedCartesianItemsSettings=createSelector([selectCartesianItemsSettings],e=>e.filter(e=>"area"===e.type||"bar"===e.type).filter(isStacked)),filterGraphicalNotStackedItems=e=>e.filter(e=>!("stackId"in e)||void 0===e.stackId),selectCartesianItemsSettingsExceptStacked=createSelector([selectCartesianItemsSettings],filterGraphicalNotStackedItems),combineGraphicalItemsData=e=>e.map(e=>e.data).filter(Boolean).flat(1),selectCartesianGraphicalItemsData=createSelector([selectCartesianItemsSettings],combineGraphicalItemsData,{memoizeOptions:{resultEqualityCheck:emptyArraysAreEqualCheck}}),combineDisplayedData=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=t;return e.length>0?e:r.slice(n,i+1)},selectDisplayedData=createSelector([selectCartesianGraphicalItemsData,selectChartDataWithIndexesIfNotInPanorama],combineDisplayedData),combineAppliedValues=(e,t,r)=>null!=(null==t?void 0:t.dataKey)?e.map(e=>({value:getValueByDataKey(e,t.dataKey)})):r.length>0?r.map(e=>e.dataKey).flatMap(t=>e.map(e=>({value:getValueByDataKey(e,t)}))):e.map(e=>({value:e})),selectAllAppliedValues=createSelector([selectDisplayedData,selectBaseAxis,selectCartesianItemsSettings],combineAppliedValues);function isErrorBarRelevantForAxisType(e,t){switch(e){case"xAxis":return"x"===t.direction;case"yAxis":return"y"===t.direction;default:return!1}}function makeNumber(e){if(isNumOrStr(e)||e instanceof Date){var t=Number(e);if(isWellBehavedNumber(t))return t}}function makeDomain(e){if(Array.isArray(e)){var t=[makeNumber(e[0]),makeNumber(e[1])];return isWellFormedNumberDomain(t)?t:void 0}var r=makeNumber(e);if(null!=r)return[r,r]}function onlyAllowNumbers(e){return e.map(makeNumber).filter(isNotNil)}function getErrorDomainByDataKey(e,t,r){return!r||"number"!=typeof t||isNan(t)?[]:r.length?onlyAllowNumbers(r.flatMap(r=>{var n,i,o=getValueByDataKey(e,r.dataKey);if(Array.isArray(o)?[n,i]=o:n=i=o,isWellBehavedNumber(n)&&isWellBehavedNumber(i))return[t-n,t+i]})):[]}var selectTooltipAxis=e=>{var t=selectTooltipAxisType(e),r=selectTooltipAxisId(e);return selectAxisSettings(e,t,r)},selectTooltipAxisDataKey=createSelector([selectTooltipAxis],e=>null==e?void 0:e.dataKey),selectDisplayedStackedData=createSelector([selectStackedCartesianItemsSettings,selectChartDataWithIndexesIfNotInPanorama,selectTooltipAxis],combineDisplayedStackedData),combineStackGroups=(e,t,r)=>{var n=t.reduce((e,t)=>(null==t.stackId||(null==e[t.stackId]&&(e[t.stackId]=[]),e[t.stackId].push(t)),e),{});return Object.fromEntries(Object.entries(n).map(t=>{var[n,i]=t,o=i.map(getStackSeriesIdentifier);return[n,{stackedData:getStackedData(e,o,r),graphicalItems:i}]}))},selectStackGroups=createSelector([selectDisplayedStackedData,selectStackedCartesianItemsSettings,selectStackOffsetType],combineStackGroups),combineDomainOfStackGroups=(e,t,r,n)=>{var{dataStartIndex:i,dataEndIndex:o}=t;if(null==n&&"zAxis"!==r){var a=getDomainOfStackGroups(e,i,o);if(null==a||0!==a[0]||0!==a[1])return a}},selectAllowsDataOverflow=createSelector([selectBaseAxis],e=>e.allowDataOverflow),getDomainDefinition=e=>{var t;if(null==e||!("domain"in e))return defaultNumericDomain;if(null!=e.domain)return e.domain;if(null!=e.ticks){if("number"===e.type){var r=onlyAllowNumbers(e.ticks);return[Math.min(...r),Math.max(...r)]}if("category"===e.type)return e.ticks.map(String)}return null!==(t=null==e?void 0:e.domain)&&void 0!==t?t:defaultNumericDomain},selectDomainDefinition=createSelector([selectBaseAxis],getDomainDefinition),selectDomainFromUserPreference=createSelector([selectDomainDefinition,selectAllowsDataOverflow],numericalDomainSpecifiedWithoutRequiringData),selectDomainOfStackGroups=createSelector([selectStackGroups,selectChartDataWithIndexes,pickAxisType,selectDomainFromUserPreference],combineDomainOfStackGroups,{memoizeOptions:{resultEqualityCheck:numberDomainEqualityCheck}}),selectAllErrorBarSettings=e=>e.errorBars,combineRelevantErrorBarSettings=(e,t,r)=>e.flatMap(e=>t[e.id]).filter(Boolean).filter(e=>isErrorBarRelevantForAxisType(r,e)),mergeDomains=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.filter(Boolean);if(0!==n.length){var i=n.flat();return[Math.min(...i),Math.max(...i)]}},combineDomainOfAllAppliedNumericalValuesIncludingErrorValues=(e,t,r,n,i)=>{var o,a;if(r.length>0&&e.forEach(e=>{r.forEach(r=>{var s,c,l=null===(s=n[r.id])||void 0===s?void 0:s.filter(e=>isErrorBarRelevantForAxisType(i,e)),u=getValueByDataKey(e,null!==(c=t.dataKey)&&void 0!==c?c:r.dataKey),d=getErrorDomainByDataKey(e,u,l);if(d.length>=2){var p=Math.min(...d),h=Math.max(...d);(null==o||p<o)&&(o=p),(null==a||h>a)&&(a=h)}var m=makeDomain(u);null!=m&&(o=null==o?m[0]:Math.min(o,m[0]),a=null==a?m[1]:Math.max(a,m[1]))})}),null!=(null==t?void 0:t.dataKey)&&e.forEach(e=>{var r=makeDomain(getValueByDataKey(e,t.dataKey));null!=r&&(o=null==o?r[0]:Math.min(o,r[0]),a=null==a?r[1]:Math.max(a,r[1]))}),isWellBehavedNumber(o)&&isWellBehavedNumber(a))return[o,a]},selectDomainOfAllAppliedNumericalValuesIncludingErrorValues$1=createSelector([selectDisplayedData,selectBaseAxis,selectCartesianItemsSettingsExceptStacked,selectAllErrorBarSettings,pickAxisType],combineDomainOfAllAppliedNumericalValuesIncludingErrorValues,{memoizeOptions:{resultEqualityCheck:numberDomainEqualityCheck}});function onlyAllowNumbersAndStringsAndDates(e){var{value:t}=e;if(isNumOrStr(t)||t instanceof Date)return t}var computeDomainOfTypeCategory=(e,t,r)=>{var n=e.map(onlyAllowNumbersAndStringsAndDates).filter(e=>null!=e);return r&&(null==t.dataKey||t.allowDuplicatedCategory&&hasDuplicate(n))?range$3(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},selectReferenceDots=e=>e.referenceElements.dots,filterReferenceElements=(e,t,r)=>e.filter(e=>"extendDomain"===e.ifOverflow).filter(e=>"xAxis"===t?e.xAxisId===r:e.yAxisId===r),selectReferenceDotsByAxis=createSelector([selectReferenceDots,pickAxisType,pickAxisId],filterReferenceElements),selectReferenceAreas=e=>e.referenceElements.areas,selectReferenceAreasByAxis=createSelector([selectReferenceAreas,pickAxisType,pickAxisId],filterReferenceElements),selectReferenceLines=e=>e.referenceElements.lines,selectReferenceLinesByAxis=createSelector([selectReferenceLines,pickAxisType,pickAxisId],filterReferenceElements),combineDotsDomain=(e,t)=>{var r=onlyAllowNumbers(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},selectReferenceDotsDomain=createSelector(selectReferenceDotsByAxis,pickAxisType,combineDotsDomain),combineAreasDomain=(e,t)=>{var r=onlyAllowNumbers(e.flatMap(e=>["xAxis"===t?e.x1:e.y1,"xAxis"===t?e.x2:e.y2]));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},selectReferenceAreasDomain=createSelector([selectReferenceAreasByAxis,pickAxisType],combineAreasDomain);function extractXCoordinates(e){var t;if(null!=e.x)return onlyAllowNumbers([e.x]);var r=null===(t=e.segment)||void 0===t?void 0:t.map(e=>e.x);return null==r||0===r.length?[]:onlyAllowNumbers(r)}function extractYCoordinates(e){var t;if(null!=e.y)return onlyAllowNumbers([e.y]);var r=null===(t=e.segment)||void 0===t?void 0:t.map(e=>e.y);return null==r||0===r.length?[]:onlyAllowNumbers(r)}var combineLinesDomain=(e,t)=>{var r=e.flatMap(e=>"xAxis"===t?extractXCoordinates(e):extractYCoordinates(e));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},selectReferenceLinesDomain=createSelector([selectReferenceLinesByAxis,pickAxisType],combineLinesDomain),selectReferenceElementsDomain=createSelector(selectReferenceDotsDomain,selectReferenceLinesDomain,selectReferenceAreasDomain,(e,t,r)=>mergeDomains(e,r,t)),combineNumericalDomain=(e,t,r,n,i,o,a,s)=>null!=r?r:parseNumericalUserDomain(t,"vertical"===a&&"xAxis"===s||"horizontal"===a&&"yAxis"===s?mergeDomains(n,o,i):mergeDomains(o,i),e.allowDataOverflow),selectNumericalDomain=createSelector([selectBaseAxis,selectDomainDefinition,selectDomainFromUserPreference,selectDomainOfStackGroups,selectDomainOfAllAppliedNumericalValuesIncludingErrorValues$1,selectReferenceElementsDomain,selectChartLayout,pickAxisType],combineNumericalDomain,{memoizeOptions:{resultEqualityCheck:numberDomainEqualityCheck}}),expandDomain=[0,1],combineAxisDomain=(e,t,r,n,i,o,a)=>{if(null!=e&&null!=r&&0!==r.length||void 0!==a){var s,{dataKey:c,type:l}=e,u=isCategoricalAxis(t,o);return u&&null==c?range$3(0,null!==(s=null==r?void 0:r.length)&&void 0!==s?s:0):"category"===l?computeDomainOfTypeCategory(n,e,u):"expand"===i?expandDomain:a}},selectAxisDomain=createSelector([selectBaseAxis,selectChartLayout,selectDisplayedData,selectAllAppliedValues,selectStackOffsetType,pickAxisType,selectNumericalDomain],combineAxisDomain),combineRealScaleType=(e,t,r,n,i)=>{if(null!=e){var{scale:o,type:a}=e;if("auto"===o)return"radial"===t&&"radiusAxis"===i?"band":"radial"===t&&"angleAxis"===i?"linear":"category"===a&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":"category"===a?"band":"linear";if("string"==typeof o){var s="scale".concat(upperFirst(o));return s in d3Scales?s:"point"}}},selectRealScaleType=createSelector([selectBaseAxis,selectChartLayout,selectHasBar,selectChartName,pickAxisType],combineRealScaleType);function getD3ScaleFromType(e){if(null!=e){if(e in d3Scales)return d3Scales[e]();var t="scale".concat(upperFirst(e));return t in d3Scales?d3Scales[t]():void 0}}function combineScaleFunction(e,t,r,n){if(null!=r&&null!=n){if("function"==typeof e.scale)return e.scale.copy().domain(r).range(n);var i=getD3ScaleFromType(t);if(null!=i){var o=i.domain(r).range(n);return checkDomainOfScale(o),o}}}var combineNiceTicks=(e,t,r)=>{var n=getDomainDefinition(t);if("auto"===r||"linear"===r)return null!=t&&t.tickCount&&Array.isArray(n)&&("auto"===n[0]||"auto"===n[1])&&isWellFormedNumberDomain(e)?getNiceTickValues(e,t.tickCount,t.allowDecimals):null!=t&&t.tickCount&&"number"===t.type&&isWellFormedNumberDomain(e)?getTickValuesFixedDomain(e,t.tickCount,t.allowDecimals):void 0},selectNiceTicks=createSelector([selectAxisDomain,selectAxisSettings,selectRealScaleType],combineNiceTicks),combineAxisDomainWithNiceTicks=(e,t,r,n)=>{if("angleAxis"!==n&&"number"===(null==e?void 0:e.type)&&isWellFormedNumberDomain(t)&&Array.isArray(r)&&r.length>0){var i=t[0],o=r[0],a=t[1],s=r[r.length-1];return[Math.min(i,o),Math.max(a,s)]}return t},selectAxisDomainIncludingNiceTicks=createSelector([selectBaseAxis,selectAxisDomain,selectNiceTicks,pickAxisType],combineAxisDomainWithNiceTicks),selectSmallestDistanceBetweenValues=createSelector(selectAllAppliedValues,selectBaseAxis,(e,t)=>{if(t&&"number"===t.type){var r=1/0,n=Array.from(onlyAllowNumbers(e.map(e=>e.value))).sort((e,t)=>e-t);if(n.length<2)return 1/0;var i=n[n.length-1]-n[0];if(0===i)return 1/0;for(var o=0;o<n.length-1;o++){var a=n[o+1]-n[o];r=Math.min(r,a)}return r/i}}),selectCalculatedPadding=createSelector(selectSmallestDistanceBetweenValues,selectChartLayout,selectBarCategoryGap,selectChartOffsetInternal,(e,t,r,n)=>n,(e,t,r,n,i)=>{if(!isWellBehavedNumber(e))return 0;var o="vertical"===t?n.height:n.width;if("gap"===i)return e*o/2;if("no-gap"===i){var a=getPercentValue(r,e*o),s=e*o/2;return s-a-(s-a)/o*a}return 0}),selectCalculatedXAxisPadding=(e,t)=>{var r=selectXAxisSettings(e,t);return null==r||"string"!=typeof r.padding?0:selectCalculatedPadding(e,"xAxis",t,r.padding)},selectCalculatedYAxisPadding=(e,t)=>{var r=selectYAxisSettings(e,t);return null==r||"string"!=typeof r.padding?0:selectCalculatedPadding(e,"yAxis",t,r.padding)},selectXAxisPadding=createSelector(selectXAxisSettings,selectCalculatedXAxisPadding,(e,t)=>{var r,n;if(null==e)return{left:0,right:0};var{padding:i}=e;return"string"==typeof i?{left:t,right:t}:{left:(null!==(r=i.left)&&void 0!==r?r:0)+t,right:(null!==(n=i.right)&&void 0!==n?n:0)+t}}),selectYAxisPadding=createSelector(selectYAxisSettings,selectCalculatedYAxisPadding,(e,t)=>{var r,n;if(null==e)return{top:0,bottom:0};var{padding:i}=e;return"string"==typeof i?{top:t,bottom:t}:{top:(null!==(r=i.top)&&void 0!==r?r:0)+t,bottom:(null!==(n=i.bottom)&&void 0!==n?n:0)+t}}),combineXAxisRange=createSelector([selectChartOffsetInternal,selectXAxisPadding,selectBrushDimensions,selectBrushSettings,(e,t,r)=>r],(e,t,r,n,i)=>{var{padding:o}=n;return i?[o.left,r.width-o.right]:[e.left+t.left,e.left+e.width-t.right]}),combineYAxisRange=createSelector([selectChartOffsetInternal,selectChartLayout,selectYAxisPadding,selectBrushDimensions,selectBrushSettings,(e,t,r)=>r],(e,t,r,n,i,o)=>{var{padding:a}=i;return o?[n.height-a.bottom,a.top]:"horizontal"===t?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),selectAxisRange=(e,t,r,n)=>{var i;switch(t){case"xAxis":return combineXAxisRange(e,r,n);case"yAxis":return combineYAxisRange(e,r,n);case"zAxis":return null===(i=selectZAxisSettings(e,r))||void 0===i?void 0:i.range;case"angleAxis":return selectAngleAxisRange(e);case"radiusAxis":return selectRadiusAxisRange(e,r);default:return}},selectAxisRangeWithReverse=createSelector([selectBaseAxis,selectAxisRange],combineAxisRangeWithReverse),selectAxisScale=createSelector([selectBaseAxis,selectRealScaleType,selectAxisDomainIncludingNiceTicks,selectAxisRangeWithReverse],combineScaleFunction);function compareIds(e,t){return e.id<t.id?-1:e.id>t.id?1:0}createSelector([selectCartesianItemsSettings,selectAllErrorBarSettings,pickAxisType],combineRelevantErrorBarSettings);var pickAxisOrientation=(e,t)=>t,pickMirror=(e,t,r)=>r,selectAllXAxesWithOffsetType=createSelector(selectAllXAxes,pickAxisOrientation,pickMirror,(e,t,r)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===r).sort(compareIds)),selectAllYAxesWithOffsetType=createSelector(selectAllYAxes,pickAxisOrientation,pickMirror,(e,t,r)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===r).sort(compareIds)),getXAxisSize=(e,t)=>({width:e.width,height:t.height}),getYAxisSize=(e,t)=>({width:"number"==typeof t.width?t.width:DEFAULT_Y_AXIS_WIDTH,height:e.height}),selectXAxisSize=createSelector(selectChartOffsetInternal,selectXAxisSettings,getXAxisSize),combineXAxisPositionStartingPoint=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},combineYAxisPositionStartingPoint=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},selectAllXAxesOffsetSteps=createSelector(selectChartHeight,selectChartOffsetInternal,selectAllXAxesWithOffsetType,pickAxisOrientation,pickMirror,(e,t,r,n,i)=>{var o,a={};return r.forEach(r=>{var s=getXAxisSize(t,r);null==o&&(o=combineXAxisPositionStartingPoint(t,n,e));var c="top"===n&&!i||"bottom"===n&&i;a[r.id]=o-Number(c)*s.height,o+=(c?-1:1)*s.height}),a}),selectAllYAxesOffsetSteps=createSelector(selectChartWidth,selectChartOffsetInternal,selectAllYAxesWithOffsetType,pickAxisOrientation,pickMirror,(e,t,r,n,i)=>{var o,a={};return r.forEach(r=>{var s=getYAxisSize(t,r);null==o&&(o=combineYAxisPositionStartingPoint(t,n,e));var c="left"===n&&!i||"right"===n&&i;a[r.id]=o-Number(c)*s.width,o+=(c?-1:1)*s.width}),a}),selectXAxisOffsetSteps=(e,t)=>{var r=selectXAxisSettings(e,t);if(null!=r)return selectAllXAxesOffsetSteps(e,r.orientation,r.mirror)},selectXAxisPosition=createSelector([selectChartOffsetInternal,selectXAxisSettings,selectXAxisOffsetSteps,(e,t)=>t],(e,t,r,n)=>{if(null!=t){var i=null==r?void 0:r[n];return null==i?{x:e.left,y:0}:{x:e.left,y:i}}}),selectYAxisOffsetSteps=(e,t)=>{var r=selectYAxisSettings(e,t);if(null!=r)return selectAllYAxesOffsetSteps(e,r.orientation,r.mirror)},selectYAxisPosition=createSelector([selectChartOffsetInternal,selectYAxisSettings,selectYAxisOffsetSteps,(e,t)=>t],(e,t,r,n)=>{if(null!=t){var i=null==r?void 0:r[n];return null==i?{x:0,y:e.top}:{x:i,y:e.top}}}),selectYAxisSize=createSelector(selectChartOffsetInternal,selectYAxisSettings,(e,t)=>({width:"number"==typeof t.width?t.width:DEFAULT_Y_AXIS_WIDTH,height:e.height})),combineDuplicateDomain=(e,t,r,n)=>{if(null!=r){var{allowDuplicatedCategory:i,type:o,dataKey:a}=r,s=isCategoricalAxis(e,n),c=t.map(e=>e.value);return a&&s&&"category"===o&&i&&hasDuplicate(c)?c:void 0}},selectDuplicateDomain=createSelector([selectChartLayout,selectAllAppliedValues,selectBaseAxis,pickAxisType],combineDuplicateDomain),combineCategoricalDomain=(e,t,r,n)=>{if(null!=r&&null!=r.dataKey){var{type:i,scale:o}=r;return!isCategoricalAxis(e,n)||"number"!==i&&"auto"===o?void 0:t.map(e=>e.value)}},selectCategoricalDomain=createSelector([selectChartLayout,selectAllAppliedValues,selectAxisSettings,pickAxisType],combineCategoricalDomain),selectAxisPropsNeededForCartesianGridTicksGenerator=createSelector([selectChartLayout,selectCartesianAxisSettings,selectRealScaleType,selectAxisScale,selectDuplicateDomain,selectCategoricalDomain,selectAxisRange,selectNiceTicks,pickAxisType],(e,t,r,n,i,o,a,s,c)=>{if(null!=t){var l=isCategoricalAxis(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:o,duplicateDomain:i,isCategorical:l,niceTicks:s,range:a,realScaleType:r,scale:n}}}),combineAxisTicks=(e,t,r,n,i,o,a,s,c)=>{if(null!=t&&null!=n){var l=isCategoricalAxis(e,c),{type:u,ticks:d,tickCount:p}=t,h="scaleBand"===r&&"function"==typeof n.bandwidth?n.bandwidth()/2:2,m="category"===u&&n.bandwidth?n.bandwidth()/h:0;m="angleAxis"===c&&null!=o&&o.length>=2?2*mathSign(o[0]-o[1])*m:m;var f=d||i;return f?f.map((e,t)=>{var r=a?a.indexOf(e):e;return{index:t,coordinate:n(r)+m,value:e,offset:m}}).filter(e=>isWellBehavedNumber(e.coordinate)):l&&s?s.map((e,t)=>({coordinate:n(e)+m,value:e,index:t,offset:m})).filter(e=>isWellBehavedNumber(e.coordinate)):n.ticks?n.ticks(p).map(e=>({coordinate:n(e)+m,value:e,offset:m})):n.domain().map((e,t)=>({coordinate:n(e)+m,value:a?a[e]:e,index:t,offset:m}))}},selectTicksOfAxis=createSelector([selectChartLayout,selectAxisSettings,selectRealScaleType,selectAxisScale,selectNiceTicks,selectAxisRange,selectDuplicateDomain,selectCategoricalDomain,pickAxisType],combineAxisTicks),combineGraphicalItemTicks=(e,t,r,n,i,o,a)=>{if(null!=t&&null!=r&&null!=n&&n[0]!==n[1]){var s=isCategoricalAxis(e,a),{tickCount:c}=t,l=0;return l="angleAxis"===a&&(null==n?void 0:n.length)>=2?2*mathSign(n[0]-n[1])*l:l,s&&o?o.map((e,t)=>({coordinate:r(e)+l,value:e,index:t,offset:l})):r.ticks?r.ticks(c).map(e=>({coordinate:r(e)+l,value:e,offset:l})):r.domain().map((e,t)=>({coordinate:r(e)+l,value:i?i[e]:e,index:t,offset:l}))}},selectTicksOfGraphicalItem=createSelector([selectChartLayout,selectAxisSettings,selectAxisScale,selectAxisRange,selectDuplicateDomain,selectCategoricalDomain,pickAxisType],combineGraphicalItemTicks),selectAxisWithScale=createSelector(selectBaseAxis,selectAxisScale,(e,t)=>{if(null!=e&&null!=t)return _objectSpread$k(_objectSpread$k({},e),{},{scale:t})}),selectZAxisScale=createSelector([selectBaseAxis,selectRealScaleType,selectAxisDomain,selectAxisRangeWithReverse],combineScaleFunction);createSelector((e,t,r)=>selectZAxisSettings(e,r),selectZAxisScale,(e,t)=>{if(null!=e&&null!=t)return _objectSpread$k(_objectSpread$k({},e),{},{scale:t})});var selectChartDirection=createSelector([selectChartLayout,selectAllXAxes,selectAllYAxes],(e,t,r)=>{switch(e){case"horizontal":return t.some(e=>e.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(e=>e.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),selectDefaultTooltipEventType=e=>e.options.defaultTooltipEventType,selectValidateTooltipEventTypes=e=>e.options.validateTooltipEventTypes;function combineTooltipEventType(e,t,r){if(null==e)return t;var n=e?"axis":"item";return null==r?t:r.includes(n)?n:t}function selectTooltipEventType$1(e,t){return combineTooltipEventType(t,selectDefaultTooltipEventType(e),selectValidateTooltipEventTypes(e))}function useTooltipEventType(e){return useAppSelector(t=>selectTooltipEventType$1(t,e))}var combineActiveLabel=(e,t)=>{var r,n=Number(t);if(!isNan(n)&&null!=t)return n>=0?null==e||null===(r=e[n])||void 0===r?void 0:r.value:void 0},selectTooltipSettings=e=>e.tooltip.settings,noInteraction={active:!1,index:null,dataKey:void 0,coordinate:void 0},initialState$9={itemInteraction:{click:noInteraction,hover:noInteraction},axisInteraction:{click:noInteraction,hover:noInteraction},keyboardInteraction:noInteraction,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},tooltipSlice=createSlice({name:"tooltip",initialState:initialState$9,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(castDraft(t.payload))},prepare:prepareAutoBatched()},removeTooltipEntrySettings:{reducer(e,t){var r=current(e).tooltipItemPayloads.indexOf(castDraft(t.payload));r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:prepareAutoBatched()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:addTooltipEntrySettings,removeTooltipEntrySettings:removeTooltipEntrySettings,setTooltipSettingsState:setTooltipSettingsState,setActiveMouseOverItemIndex:setActiveMouseOverItemIndex,mouseLeaveItem:mouseLeaveItem,mouseLeaveChart:mouseLeaveChart,setActiveClickItemIndex:setActiveClickItemIndex,setMouseOverAxisIndex:setMouseOverAxisIndex,setMouseClickAxisIndex:setMouseClickAxisIndex,setSyncInteraction:setSyncInteraction,setKeyboardInteraction:setKeyboardInteraction}=tooltipSlice.actions,tooltipReducer=tooltipSlice.reducer;function ownKeys$j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$j(Object(r),!0).forEach(function(t){_defineProperty$l(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$j(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$l(e,t,r){return(t=_toPropertyKey$l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$l(e){var t=_toPrimitive$l(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$l(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function chooseAppropriateMouseInteraction(e,t,r){return"axis"===t?"click"===r?e.axisInteraction.click:e.axisInteraction.hover:"click"===r?e.itemInteraction.click:e.itemInteraction.hover}function hasBeenActivePreviously(e){return null!=e.index}var combineTooltipInteractionState=(e,t,r,n)=>{if(null==t)return noInteraction;var i=chooseAppropriateMouseInteraction(e,t,r);if(null==i)return noInteraction;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&null!=e.syncInteraction.index)return e.syncInteraction;var o=!0===e.settings.active;if(hasBeenActivePreviously(i)){if(o)return _objectSpread$j(_objectSpread$j({},i),{},{active:!0})}else if(null!=n)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return _objectSpread$j(_objectSpread$j({},noInteraction),{},{coordinate:i.coordinate})},combineActiveTooltipIndex=(e,t)=>{var r=null==e?void 0:e.index;if(null==r)return null;var n=Number(r);if(!isWellBehavedNumber(n))return r;var i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(0,Math.min(n,i)))},combineCoordinateForDefaultIndex=(e,t,r,n,i,o,a,s)=>{if(null!=o&&null!=s){var c=a[0],l=null==c?void 0:s(c.positions,o);if(null!=l)return l;var u=null==i?void 0:i[Number(o)];if(u)return"horizontal"===r?{x:u.coordinate,y:(n.top+t)/2}:{x:(n.left+e)/2,y:u.coordinate}}},combineTooltipPayloadConfigurations=(e,t,r,n)=>{return"axis"===t?e.tooltipItemPayloads:0===e.tooltipItemPayloads.length?[]:null==(i="hover"===r?e.itemInteraction.hover.dataKey:e.itemInteraction.click.dataKey)&&null!=n?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(e=>{var t;return(null===(t=e.settings)||void 0===t?void 0:t.dataKey)===i});var i},selectTooltipPayloadSearcher=e=>e.options.tooltipPayloadSearcher,selectTooltipState=e=>e.tooltip;function ownKeys$i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$i(Object(r),!0).forEach(function(t){_defineProperty$k(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$k(e,t,r){return(t=_toPropertyKey$k(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$k(e){var t=_toPrimitive$k(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$k(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function selectFinalData(e,t){return null!=e?e:t}var combineTooltipPayload=(e,t,r,n,i,o,a)=>{if(null!=t&&null!=o){var{chartData:s,computedData:c,dataStartIndex:l,dataEndIndex:u}=r;return e.reduce((e,r)=>{var d,p,h,{dataDefinedOnItem:m,settings:f}=r,x=selectFinalData(m,s),g=Array.isArray(x)?getSliced(x,l,u):x,y=null!==(d=null==f?void 0:f.dataKey)&&void 0!==d?d:n,b=null==f?void 0:f.nameKey;(p=n&&Array.isArray(g)&&!Array.isArray(g[0])&&"axis"===a?findEntryInArray(g,n,i):o(g,t,c,b),Array.isArray(p))?p.forEach(t=>{var r=_objectSpread$i(_objectSpread$i({},f),{},{name:t.name,unit:t.unit,color:void 0,fill:void 0});e.push(getTooltipEntry({tooltipEntrySettings:r,dataKey:t.dataKey,payload:t.payload,value:getValueByDataKey(t.payload,t.dataKey),name:t.name}))}):e.push(getTooltipEntry({tooltipEntrySettings:f,dataKey:y,payload:p,value:getValueByDataKey(p,y),name:null!==(h=getValueByDataKey(p,b))&&void 0!==h?h:null==f?void 0:f.name}));return e},[])}},selectTooltipAxisRealScaleType=createSelector([selectTooltipAxis,selectChartLayout,selectHasBar,selectChartName,selectTooltipAxisType],combineRealScaleType),selectAllUnfilteredGraphicalItems=createSelector([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),selectTooltipAxisPredicate=createSelector([selectTooltipAxisType,selectTooltipAxisId],itemAxisPredicate),selectAllGraphicalItemsSettings=createSelector([selectAllUnfilteredGraphicalItems,selectTooltipAxis,selectTooltipAxisPredicate],combineGraphicalItemsSettings,{memoizeOptions:{resultEqualityCheck:emptyArraysAreEqualCheck}}),selectAllStackedGraphicalItemsSettings=createSelector([selectAllGraphicalItemsSettings],e=>e.filter(isStacked)),selectTooltipGraphicalItemsData=createSelector([selectAllGraphicalItemsSettings],combineGraphicalItemsData,{memoizeOptions:{resultEqualityCheck:emptyArraysAreEqualCheck}}),selectTooltipDisplayedData=createSelector([selectTooltipGraphicalItemsData,selectChartDataWithIndexes],combineDisplayedData),selectTooltipStackedData=createSelector([selectAllStackedGraphicalItemsSettings,selectChartDataWithIndexes,selectTooltipAxis],combineDisplayedStackedData),selectAllTooltipAppliedValues=createSelector([selectTooltipDisplayedData,selectTooltipAxis,selectAllGraphicalItemsSettings],combineAppliedValues),selectTooltipAxisDomainDefinition=createSelector([selectTooltipAxis],getDomainDefinition),selectTooltipDataOverflow=createSelector([selectTooltipAxis],e=>e.allowDataOverflow),selectTooltipDomainFromUserPreferences=createSelector([selectTooltipAxisDomainDefinition,selectTooltipDataOverflow],numericalDomainSpecifiedWithoutRequiringData),selectAllStackedGraphicalItems=createSelector([selectAllGraphicalItemsSettings],e=>e.filter(isStacked)),selectTooltipStackGroups=createSelector([selectTooltipStackedData,selectAllStackedGraphicalItems,selectStackOffsetType],combineStackGroups),selectTooltipDomainOfStackGroups=createSelector([selectTooltipStackGroups,selectChartDataWithIndexes,selectTooltipAxisType,selectTooltipDomainFromUserPreferences],combineDomainOfStackGroups),selectTooltipItemsSettingsExceptStacked=createSelector([selectAllGraphicalItemsSettings],filterGraphicalNotStackedItems),selectDomainOfAllAppliedNumericalValuesIncludingErrorValues=createSelector([selectTooltipDisplayedData,selectTooltipAxis,selectTooltipItemsSettingsExceptStacked,selectAllErrorBarSettings,selectTooltipAxisType],combineDomainOfAllAppliedNumericalValuesIncludingErrorValues,{memoizeOptions:{resultEqualityCheck:numberDomainEqualityCheck}}),selectReferenceDotsByTooltipAxis=createSelector([selectReferenceDots,selectTooltipAxisType,selectTooltipAxisId],filterReferenceElements),selectTooltipReferenceDotsDomain=createSelector([selectReferenceDotsByTooltipAxis,selectTooltipAxisType],combineDotsDomain),selectReferenceAreasByTooltipAxis=createSelector([selectReferenceAreas,selectTooltipAxisType,selectTooltipAxisId],filterReferenceElements),selectTooltipReferenceAreasDomain=createSelector([selectReferenceAreasByTooltipAxis,selectTooltipAxisType],combineAreasDomain),selectReferenceLinesByTooltipAxis=createSelector([selectReferenceLines,selectTooltipAxisType,selectTooltipAxisId],filterReferenceElements),selectTooltipReferenceLinesDomain=createSelector([selectReferenceLinesByTooltipAxis,selectTooltipAxisType],combineLinesDomain),selectTooltipReferenceElementsDomain=createSelector([selectTooltipReferenceDotsDomain,selectTooltipReferenceLinesDomain,selectTooltipReferenceAreasDomain],mergeDomains),selectTooltipNumericalDomain=createSelector([selectTooltipAxis,selectTooltipAxisDomainDefinition,selectTooltipDomainFromUserPreferences,selectTooltipDomainOfStackGroups,selectDomainOfAllAppliedNumericalValuesIncludingErrorValues,selectTooltipReferenceElementsDomain,selectChartLayout,selectTooltipAxisType],combineNumericalDomain),selectTooltipAxisDomain=createSelector([selectTooltipAxis,selectChartLayout,selectTooltipDisplayedData,selectAllTooltipAppliedValues,selectStackOffsetType,selectTooltipAxisType,selectTooltipNumericalDomain],combineAxisDomain),selectTooltipNiceTicks=createSelector([selectTooltipAxisDomain,selectTooltipAxis,selectTooltipAxisRealScaleType],combineNiceTicks),selectTooltipAxisDomainIncludingNiceTicks=createSelector([selectTooltipAxis,selectTooltipAxisDomain,selectTooltipNiceTicks,selectTooltipAxisType],combineAxisDomainWithNiceTicks),selectTooltipAxisRange=e=>{var t=selectTooltipAxisType(e),r=selectTooltipAxisId(e);return selectAxisRange(e,t,r,!1)},selectTooltipAxisRangeWithReverse=createSelector([selectTooltipAxis,selectTooltipAxisRange],combineAxisRangeWithReverse),selectTooltipAxisScale=createSelector([selectTooltipAxis,selectTooltipAxisRealScaleType,selectTooltipAxisDomainIncludingNiceTicks,selectTooltipAxisRangeWithReverse],combineScaleFunction),selectTooltipDuplicateDomain=createSelector([selectChartLayout,selectAllTooltipAppliedValues,selectTooltipAxis,selectTooltipAxisType],combineDuplicateDomain),selectTooltipCategoricalDomain=createSelector([selectChartLayout,selectAllTooltipAppliedValues,selectTooltipAxis,selectTooltipAxisType],combineCategoricalDomain),combineTicksOfTooltipAxis=(e,t,r,n,i,o,a,s)=>{if(t){var{type:c}=t,l=isCategoricalAxis(e,s);if(n){var u="scaleBand"===r&&n.bandwidth?n.bandwidth()/2:2,d="category"===c&&n.bandwidth?n.bandwidth()/u:0;return d="angleAxis"===s&&null!=i&&(null==i?void 0:i.length)>=2?2*mathSign(i[0]-i[1])*d:d,l&&a?a.map((e,t)=>({coordinate:n(e)+d,value:e,index:t,offset:d})):n.domain().map((e,t)=>({coordinate:n(e)+d,value:o?o[e]:e,index:t,offset:d}))}}},selectTooltipAxisTicks=createSelector([selectChartLayout,selectTooltipAxis,selectTooltipAxisRealScaleType,selectTooltipAxisScale,selectTooltipAxisRange,selectTooltipDuplicateDomain,selectTooltipCategoricalDomain,selectTooltipAxisType],combineTicksOfTooltipAxis),selectTooltipEventType=createSelector([selectDefaultTooltipEventType,selectValidateTooltipEventTypes,selectTooltipSettings],(e,t,r)=>combineTooltipEventType(r.shared,e,t)),selectTooltipTrigger=e=>e.tooltip.settings.trigger,selectDefaultIndex=e=>e.tooltip.settings.defaultIndex,selectTooltipInteractionState$1=createSelector([selectTooltipState,selectTooltipEventType,selectTooltipTrigger,selectDefaultIndex],combineTooltipInteractionState),selectActiveTooltipIndex=createSelector([selectTooltipInteractionState$1,selectTooltipDisplayedData],combineActiveTooltipIndex),selectActiveLabel$1=createSelector([selectTooltipAxisTicks,selectActiveTooltipIndex],combineActiveLabel),selectActiveTooltipDataKey=createSelector([selectTooltipInteractionState$1],e=>{if(e)return e.dataKey}),selectTooltipPayloadConfigurations$1=createSelector([selectTooltipState,selectTooltipEventType,selectTooltipTrigger,selectDefaultIndex],combineTooltipPayloadConfigurations),selectTooltipCoordinateForDefaultIndex=createSelector([selectChartWidth,selectChartHeight,selectChartLayout,selectChartOffsetInternal,selectTooltipAxisTicks,selectDefaultIndex,selectTooltipPayloadConfigurations$1,selectTooltipPayloadSearcher],combineCoordinateForDefaultIndex),selectActiveTooltipCoordinate=createSelector([selectTooltipInteractionState$1,selectTooltipCoordinateForDefaultIndex],(e,t)=>null!=e&&e.coordinate?e.coordinate:t),selectIsTooltipActive$1=createSelector([selectTooltipInteractionState$1],e=>e.active),selectActiveTooltipPayload=createSelector([selectTooltipPayloadConfigurations$1,selectActiveTooltipIndex,selectChartDataWithIndexes,selectTooltipAxisDataKey,selectActiveLabel$1,selectTooltipPayloadSearcher,selectTooltipEventType],combineTooltipPayload),selectActiveTooltipDataPoints=createSelector([selectActiveTooltipPayload],e=>{if(null!=e){var t=e.map(e=>e.payload).filter(e=>null!=e);return Array.from(new Set(t))}});function ownKeys$h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$h(Object(r),!0).forEach(function(t){_defineProperty$j(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$j(e,t,r){return(t=_toPropertyKey$j(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$j(e){var t=_toPrimitive$j(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$j(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var useTooltipAxis=()=>useAppSelector(selectTooltipAxis),useTooltipAxisBandSize=()=>{var e=useTooltipAxis(),t=useAppSelector(selectTooltipAxisTicks),r=useAppSelector(selectTooltipAxisScale);return getBandSizeOfAxis(e&&r?_objectSpread$h(_objectSpread$h({},e),{},{scale:r}):void 0,t)};function ownKeys$g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$g(Object(r),!0).forEach(function(t){_defineProperty$i(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$i(e,t,r){return(t=_toPropertyKey$i(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$i(e){var t=_toPrimitive$i(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$i(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var getActiveCartesianCoordinate=(e,t,r,n)=>{var i=t.find(e=>e&&e.index===r);if(i){if("horizontal"===e)return{x:i.coordinate,y:n.chartY};if("vertical"===e)return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}},getActivePolarCoordinate=(e,t,r,n)=>{var i=t.find(e=>e&&e.index===r);if(i){if("centric"===e){var o=i.coordinate,{radius:a}=n;return _objectSpread$g(_objectSpread$g(_objectSpread$g({},n),polarToCartesian(n.cx,n.cy,a,o)),{},{angle:o,radius:a})}var s=i.coordinate,{angle:c}=n;return _objectSpread$g(_objectSpread$g(_objectSpread$g({},n),polarToCartesian(n.cx,n.cy,s,c)),{},{angle:c,radius:s})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function isInCartesianRange(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var calculateActiveTickIndex=(e,t,r,n,i)=>{var o,a=-1,s=null!==(o=null==t?void 0:t.length)&&void 0!==o?o:0;if(s<=1||null==e)return 0;if("angleAxis"===n&&null!=i&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var c=0;c<s;c++){var l=c>0?r[c-1].coordinate:r[s-1].coordinate,u=r[c].coordinate,d=c>=s-1?r[0].coordinate:r[c+1].coordinate,p=void 0;if(mathSign(u-l)!==mathSign(d-u)){var h=[];if(mathSign(d-u)===mathSign(i[1]-i[0])){p=d;var m=u+i[1]-i[0];h[0]=Math.min(m,(m+l)/2),h[1]=Math.max(m,(m+l)/2)}else{p=l;var f=d+i[1]-i[0];h[0]=Math.min(u,(f+u)/2),h[1]=Math.max(u,(f+u)/2)}var x=[Math.min(u,(p+u)/2),Math.max(u,(p+u)/2)];if(e>x[0]&&e<=x[1]||e>=h[0]&&e<=h[1]){({index:a}=r[c]);break}}else{var g=Math.min(l,d),y=Math.max(l,d);if(e>(g+u)/2&&e<=(y+u)/2){({index:a}=r[c]);break}}}else if(t)for(var b=0;b<s;b++)if(0===b&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b>0&&b<s-1&&e>(t[b].coordinate+t[b-1].coordinate)/2&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b===s-1&&e>(t[b].coordinate+t[b-1].coordinate)/2){({index:a}=t[b]);break}return a},useChartName=()=>useAppSelector(selectChartName),pickTooltipEventType=(e,t)=>t,pickTrigger=(e,t,r)=>r,pickDefaultIndex=(e,t,r,n)=>n,selectOrderedTooltipTicks=createSelector(selectTooltipAxisTicks,e=>sortBy$1(e,e=>e.coordinate)),selectTooltipInteractionState=createSelector([selectTooltipState,pickTooltipEventType,pickTrigger,pickDefaultIndex],combineTooltipInteractionState),selectActiveIndex=createSelector([selectTooltipInteractionState,selectTooltipDisplayedData],combineActiveTooltipIndex),selectTooltipDataKey=(e,t,r)=>{if(null!=t){var n=selectTooltipState(e);return"axis"===t?"hover"===r?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:"hover"===r?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},selectTooltipPayloadConfigurations=createSelector([selectTooltipState,pickTooltipEventType,pickTrigger,pickDefaultIndex],combineTooltipPayloadConfigurations),selectCoordinateForDefaultIndex=createSelector([selectChartWidth,selectChartHeight,selectChartLayout,selectChartOffsetInternal,selectTooltipAxisTicks,pickDefaultIndex,selectTooltipPayloadConfigurations,selectTooltipPayloadSearcher],combineCoordinateForDefaultIndex),selectActiveCoordinate=createSelector([selectTooltipInteractionState,selectCoordinateForDefaultIndex],(e,t)=>{var r;return null!==(r=e.coordinate)&&void 0!==r?r:t}),selectActiveLabel=createSelector([selectTooltipAxisTicks,selectActiveIndex],combineActiveLabel),selectTooltipPayload=createSelector([selectTooltipPayloadConfigurations,selectActiveIndex,selectChartDataWithIndexes,selectTooltipAxisDataKey,selectActiveLabel,selectTooltipPayloadSearcher,pickTooltipEventType],combineTooltipPayload),selectIsTooltipActive=createSelector([selectTooltipInteractionState],e=>({isActive:e.active,activeIndex:e.index})),combineActiveCartesianProps=(e,t,r,n,i,o,a)=>{if(e&&r&&n&&i&&isInCartesianRange(e,a)){var s=calculateCartesianTooltipPos(e,t),c=calculateActiveTickIndex(s,o,i,r,n),l=getActiveCartesianCoordinate(t,i,c,e);return{activeIndex:String(c),activeCoordinate:l}}},combineActivePolarProps=(e,t,r,n,i,o,a)=>{if(e&&n&&i&&o&&r){var s=inRangeOfSector(e,r);if(s){var c=calculatePolarTooltipPos(s,t),l=calculateActiveTickIndex(c,a,o,n,i),u=getActivePolarCoordinate(t,o,l,s);return{activeIndex:String(l),activeCoordinate:u}}}},combineActiveProps=(e,t,r,n,i,o,a,s)=>{if(e&&t&&n&&i&&o)return"horizontal"===t||"vertical"===t?combineActiveCartesianProps(e,t,n,i,o,a,s):combineActivePolarProps(e,t,r,n,i,o,a)},selectZIndexPortalId=createSelector(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(null!=t){var n=e[t];if(null!=n)return r?n.panoramaElementId:n.elementId}}),selectAllRegisteredZIndexes=createSelector(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(e=>parseInt(e,10)).concat(Object.values(DefaultZIndexes));return Array.from(new Set(t)).sort((e,t)=>e-t)},{memoizeOptions:{resultEqualityCheck:arrayContentsAreEqualCheck}});function ownKeys$f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$f(Object(r),!0).forEach(function(t){_defineProperty$h(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$h(e,t,r){return(t=_toPropertyKey$h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$h(e){var t=_toPrimitive$h(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$h(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var seed={},initialState$8={zIndexMap:Object.values(DefaultZIndexes).reduce((e,t)=>_objectSpread$f(_objectSpread$f({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),seed)},defaultZIndexSet=new Set(Object.values(DefaultZIndexes));function isDefaultZIndex(e){return defaultZIndexSet.has(e)}var zIndexSlice=createSlice({name:"zIndex",initialState:initialState$8,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:prepareAutoBatched()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!isDefaultZIndex(r)&&delete e.zIndexMap[r])},prepare:prepareAutoBatched()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:i}=t.payload;e.zIndexMap[r]?i?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:i?void 0:n,panoramaElementId:i?n:void 0}},prepare:prepareAutoBatched()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:prepareAutoBatched()}}}),{registerZIndexPortal:registerZIndexPortal,unregisterZIndexPortal:unregisterZIndexPortal,registerZIndexPortalId:registerZIndexPortalId,unregisterZIndexPortalId:unregisterZIndexPortalId}=zIndexSlice.actions,zIndexReducer=zIndexSlice.reducer;function ZIndexLayer(e){var{zIndex:t,children:r}=e,n=useIsInChartContext()&&void 0!==t&&0!==t,i=useIsPanorama(),o=useAppDispatch();reactExports.useLayoutEffect(()=>n?(o(registerZIndexPortal({zIndex:t})),()=>{o(unregisterZIndexPortal({zIndex:t}))}):noop$5,[o,t,n]);var a=useAppSelector(e=>selectZIndexPortalId(e,t,i));if(!n)return r;if(!a)return null;var s=document.getElementById(a);return s?reactDomExports.createPortal(r,s):null}function _extends$e(){return _extends$e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$e.apply(null,arguments)}function ownKeys$e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$e(Object(r),!0).forEach(function(t){_defineProperty$g(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$e(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$g(e,t,r){return(t=_toPropertyKey$g(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$g(e){var t=_toPrimitive$g(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$g(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function RenderCursor(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return reactExports.isValidElement(t)?reactExports.cloneElement(t,n):reactExports.createElement(r,n)}function CursorInternal(e){var t,r,n,i,{coordinate:o,payload:a,index:s,offset:c,tooltipAxisBandSize:l,layout:u,cursor:d,tooltipEventType:p,chartName:h}=e,m=o,f=a,x=s;if(!d||!m||"ScatterChart"!==h&&"axis"!==p)return null;if("ScatterChart"===h)r=m,n=Cross,i=DefaultZIndexes.cursorLine;else if("BarChart"===h)r=getCursorRectangle(u,m,c,l),n=Rectangle,i=DefaultZIndexes.cursorRectangle;else if("radial"===u&&isPolarCoordinate(m)){var{cx:g,cy:y,radius:b,startAngle:v,endAngle:E}=getRadialCursorPoints(m);r={cx:g,cy:y,startAngle:v,endAngle:E,innerRadius:b,outerRadius:b},n=Sector,i=DefaultZIndexes.cursorLine}else r={points:getCursorPoints(u,m,c)},n=Curve,i=DefaultZIndexes.cursorLine;var w="object"==typeof d&&"className"in d?d.className:void 0,S=_objectSpread$e(_objectSpread$e(_objectSpread$e(_objectSpread$e({stroke:"#ccc",pointerEvents:"none"},c),r),svgPropertiesNoEventsFromUnknown(d)),{},{payload:f,payloadIndex:x,className:clsx("recharts-tooltip-cursor",w)});return reactExports.createElement(ZIndexLayer,{zIndex:null!==(t=e.zIndex)&&void 0!==t?t:i},reactExports.createElement(RenderCursor,{cursor:d,cursorComp:n,cursorProps:S}))}function Cursor(e){var t=useTooltipAxisBandSize(),r=useOffsetInternal(),n=useChartLayout(),i=useChartName();return null==t||null==r||null==n||null==i?null:reactExports.createElement(CursorInternal,_extends$e({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:i}))}var TooltipPortalContext=reactExports.createContext(null),useTooltipPortal=()=>reactExports.useContext(TooltipPortalContext),eventemitter3={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,n,o,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new i(n,o||e,a),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),s.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,a=new Array(o);i<o;i++)a[i]=n[i].fn;return a},s.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,i,o,a){var s=r?r+e:e;if(!this._events[s])return!1;var c,l,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,o),!0;case 6:return u.fn.call(u.context,t,n,i,o,a),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var p,h=u.length;for(l=0;l<h;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;case 4:u[l].fn.call(u[l].context,t,n,i);break;default:if(!c)for(p=1,c=new Array(d-1);p<d;p++)c[p-1]=arguments[p];u[l].fn.apply(u[l].context,c)}}return!0},s.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||n&&s.context!==n||a(this,o);else{for(var c=0,l=[],u=s.length;c<u;c++)(s[c].fn!==t||i&&!s[c].once||n&&s[c].context!==n)&&l.push(s[c]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s}(eventemitter3);var eventemitter3Exports=eventemitter3.exports;const EventEmitter$1=getDefaultExportFromCjs(eventemitter3Exports);var eventCenter=new EventEmitter$1,TOOLTIP_SYNC_EVENT="recharts.syncEvent.tooltip",BRUSH_SYNC_EVENT="recharts.syncEvent.brush";function arrayTooltipSearcher(e,t){if(t){var r=Number.parseInt(t,10);if(!isNan(r))return null==e?void 0:e[r]}}var initialState$7={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},optionsSlice=createSlice({name:"options",initialState:initialState$7,reducers:{createEventEmitter:e=>{null==e.eventEmitter&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),optionsReducer=optionsSlice.reducer,{createEventEmitter:createEventEmitter}=optionsSlice.actions;function selectSynchronisedTooltipState(e){return e.tooltip.syncInteraction}var initialChartDataState={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},chartDataSlice=createSlice({name:"chartData",initialState:initialChartDataState,reducers:{setChartData(e,t){if(e.chartData=t.payload,null==t.payload)return e.dataStartIndex=0,void(e.dataEndIndex=0);t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;null!=r&&(e.dataStartIndex=r),null!=n&&(e.dataEndIndex=n)}}}),{setChartData:setChartData,setDataStartEndIndexes:setDataStartEndIndexes,setComputedData:setComputedData}=chartDataSlice.actions,chartDataReducer=chartDataSlice.reducer,_excluded$d=["x","y"];function ownKeys$d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$d(Object(r),!0).forEach(function(t){_defineProperty$f(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$f(e,t,r){return(t=_toPropertyKey$f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$f(e){var t=_toPrimitive$f(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$f(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _objectWithoutProperties$d(e,t){if(null==e)return{};var r,n,i=_objectWithoutPropertiesLoose$d(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _objectWithoutPropertiesLoose$d(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}function useTooltipSyncEventsListener(){var e=useAppSelector(selectSyncId),t=useAppSelector(selectEventEmitter),r=useAppDispatch(),n=useAppSelector(selectSyncMethod),i=useAppSelector(selectTooltipAxisTicks),o=useChartLayout(),a=useViewBox(),s=useAppSelector(e=>e.rootProps.className);reactExports.useEffect(()=>{if(null==e)return noop$5;var s=(s,c,l)=>{var u;if(t!==l&&e===s)if("index"!==n){if(null!=i){var d;if("function"==typeof n){var p={activeTooltipIndex:null==c.payload.index?void 0:Number(c.payload.index),isTooltipActive:c.payload.active,activeIndex:null==c.payload.index?void 0:Number(c.payload.index),activeLabel:c.payload.label,activeDataKey:c.payload.dataKey,activeCoordinate:c.payload.coordinate},h=n(i,p);d=i[h]}else"value"===n&&(d=i.find(e=>String(e.value)===c.payload.label));var{coordinate:m}=c.payload;if(null!=d&&!1!==c.payload.active&&null!=m&&null!=a){var{x:f,y:x}=m,g=Math.min(f,a.x+a.width),y=Math.min(x,a.y+a.height),b={x:"horizontal"===o?d.coordinate:g,y:"horizontal"===o?y:d.coordinate},v=setSyncInteraction({active:c.payload.active,coordinate:b,dataKey:c.payload.dataKey,index:String(d.index),label:c.payload.label,sourceViewBox:c.payload.sourceViewBox});r(v)}else r(setSyncInteraction({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}))}}else if(a&&null!=c&&null!==(u=c.payload)&&void 0!==u&&u.coordinate&&c.payload.sourceViewBox){var E=c.payload.coordinate,{x:w,y:S}=E,j=_objectWithoutProperties$d(E,_excluded$d),{x:A,y:T,width:P,height:$}=c.payload.sourceViewBox,R=_objectSpread$d(_objectSpread$d({},j),{},{x:a.x+(P?(w-A)/P:0)*a.width,y:a.y+($?(S-T)/$:0)*a.height});r(_objectSpread$d(_objectSpread$d({},c),{},{payload:_objectSpread$d(_objectSpread$d({},c.payload),{},{coordinate:R})}))}else r(c)};return eventCenter.on(TOOLTIP_SYNC_EVENT,s),()=>{eventCenter.off(TOOLTIP_SYNC_EVENT,s)}},[s,r,t,e,n,i,o,a])}function useBrushSyncEventsListener(){var e=useAppSelector(selectSyncId),t=useAppSelector(selectEventEmitter),r=useAppDispatch();reactExports.useEffect(()=>{if(null==e)return noop$5;var n=(n,i,o)=>{t!==o&&e===n&&r(setDataStartEndIndexes(i))};return eventCenter.on(BRUSH_SYNC_EVENT,n),()=>{eventCenter.off(BRUSH_SYNC_EVENT,n)}},[r,t,e])}function useSynchronisedEventsFromOtherCharts(){var e=useAppDispatch();reactExports.useEffect(()=>{e(createEventEmitter())},[e]),useTooltipSyncEventsListener(),useBrushSyncEventsListener()}function useTooltipChartSynchronisation(e,t,r,n,i,o){var a=useAppSelector(r=>selectTooltipDataKey(r,e,t)),s=useAppSelector(selectEventEmitter),c=useAppSelector(selectSyncId),l=useAppSelector(selectSyncMethod),u=useAppSelector(selectSynchronisedTooltipState),d=null==u?void 0:u.active,p=useViewBox();reactExports.useEffect(()=>{if(!d&&null!=c&&null!=s){var e=setSyncInteraction({active:o,coordinate:r,dataKey:a,index:i,label:"number"==typeof n?String(n):n,sourceViewBox:p});eventCenter.emit(TOOLTIP_SYNC_EVENT,c,e,s)}},[d,r,a,i,n,s,c,l,o,p])}function ownKeys$c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$c(Object(r),!0).forEach(function(t){_defineProperty$e(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$e(e,t,r){return(t=_toPropertyKey$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$e(e){var t=_toPrimitive$e(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$e(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function defaultUniqBy(e){return e.dataKey}function renderContent(e,t){return reactExports.isValidElement(e)?reactExports.cloneElement(e,t):"function"==typeof e?reactExports.createElement(e,t):reactExports.createElement(DefaultTooltipContent,t)}var emptyPayload=[],defaultTooltipProps={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Global.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Tooltip(e){var t,r,n=resolveDefaultProps(e,defaultTooltipProps),{active:i,allowEscapeViewBox:o,animationDuration:a,animationEasing:s,content:c,filterNull:l,isAnimationActive:u,offset:d,payloadUniqBy:p,position:h,reverseDirection:m,useTranslate3d:f,wrapperStyle:x,cursor:g,shared:y,trigger:b,defaultIndex:v,portal:E,axisId:w}=n,S=useAppDispatch(),j="number"==typeof v?String(v):v;reactExports.useEffect(()=>{S(setTooltipSettingsState({shared:y,trigger:b,axisId:w,active:i,defaultIndex:j}))},[S,y,b,w,i,j]);var A=useViewBox(),T=useAccessibilityLayer(),P=useTooltipEventType(y),{activeIndex:$,isActive:R}=null!==(t=useAppSelector(e=>selectIsTooltipActive(e,P,b,j)))&&void 0!==t?t:{},k=useAppSelector(e=>selectTooltipPayload(e,P,b,j)),C=useAppSelector(e=>selectActiveLabel(e,P,b,j)),N=useAppSelector(e=>selectActiveCoordinate(e,P,b,j)),D=k,_=useTooltipPortal(),O=null!==(r=null!=i?i:R)&&void 0!==r&&r,[I,M]=useElementOffset([D,O]),L="axis"===P?C:void 0;useTooltipChartSynchronisation(P,b,N,L,$,O);var B=null!=E?E:_;if(null==B||null==A||null==P)return null;var F=null!=D?D:emptyPayload;O||(F=emptyPayload),l&&F.length&&(F=getUniqPayload(F.filter(e=>null!=e.value&&(!0!==e.hide||n.includeHidden)),p,defaultUniqBy));var V=F.length>0,U=reactExports.createElement(TooltipBoundingBox,{allowEscapeViewBox:o,animationDuration:a,animationEasing:s,isAnimationActive:u,active:O,coordinate:N,hasPayload:V,offset:d,position:h,reverseDirection:m,useTranslate3d:f,viewBox:A,wrapperStyle:x,lastBoundingBox:I,innerRef:M,hasPortalFromProps:Boolean(E)},renderContent(c,_objectSpread$c(_objectSpread$c({},n),{},{payload:F,label:L,active:O,activeIndex:$,coordinate:N,accessibilityLayer:T})));return reactExports.createElement(reactExports.Fragment,null,reactDomExports.createPortal(U,B),O&&reactExports.createElement(Cursor,{cursor:g,tooltipEventType:P,coordinate:N,payload:F,index:$}))}function _defineProperty$d(e,t,r){return(t=_toPropertyKey$d(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$d(e){var t=_toPrimitive$d(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$d(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}class LRUCache{constructor(e){_defineProperty$d(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return void 0!==t&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}function ownKeys$b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$b(Object(r),!0).forEach(function(t){_defineProperty$c(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$c(e,t,r){return(t=_toPropertyKey$c(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$c(e){var t=_toPrimitive$c(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$c(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var defaultConfig={cacheSize:2e3,enableCache:!0},currentConfig=_objectSpread$b({},defaultConfig),stringCache=new LRUCache(currentConfig.cacheSize),SPAN_STYLE={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},MEASUREMENT_SPAN_ID="recharts_measurement_span";function createCacheKey(e,t){var r=t.fontSize||"",n=t.fontFamily||"",i=t.fontWeight||"",o=t.fontStyle||"",a=t.letterSpacing||"",s=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(o,"|").concat(a,"|").concat(s)}var measureTextWithDOM=(e,t)=>{try{var r=document.getElementById(MEASUREMENT_SPAN_ID);r||((r=document.createElement("span")).setAttribute("id",MEASUREMENT_SPAN_ID),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,SPAN_STYLE,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch(i){return{width:0,height:0}}},getStringSize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e||Global.isSsr)return{width:0,height:0};if(!currentConfig.enableCache)return measureTextWithDOM(e,t);var r=createCacheKey(e,t),n=stringCache.get(r);if(n)return n;var i=measureTextWithDOM(e,t);return stringCache.set(r,i),i},MULTIPLY_OR_DIVIDE_REGEX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ADD_OR_SUBTRACT_REGEX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,CSS_LENGTH_UNIT_REGEX=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,NUM_SPLIT_REGEX=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,CONVERSION_RATES={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},FIXED_CSS_LENGTH_UNITS=Object.keys(CONVERSION_RATES),STR_NAN="NaN";function convertToPx(e,t){return e*CONVERSION_RATES[t]}class DecimalCSS{static parse(e){var t,[,r,n]=null!==(t=NUM_SPLIT_REGEX.exec(e))&&void 0!==t?t:[];return new DecimalCSS(parseFloat(r),null!=n?n:"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,isNan(e)&&(this.unit=""),""===t||CSS_LENGTH_UNIT_REGEX.test(t)||(this.num=NaN,this.unit=""),FIXED_CSS_LENGTH_UNITS.includes(t)&&(this.num=convertToPx(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num-e.num,this.unit)}multiply(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num*e.num,this.unit||e.unit)}divide(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return isNan(this.num)}}function calculateArithmetic(e){if(e.includes(STR_NAN))return STR_NAN;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,i,o]=null!==(r=MULTIPLY_OR_DIVIDE_REGEX.exec(t))&&void 0!==r?r:[],a=DecimalCSS.parse(null!=n?n:""),s=DecimalCSS.parse(null!=o?o:""),c="*"===i?a.multiply(s):a.divide(s);if(c.isNaN())return STR_NAN;t=t.replace(MULTIPLY_OR_DIVIDE_REGEX,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var l,[,u,d,p]=null!==(l=ADD_OR_SUBTRACT_REGEX.exec(t))&&void 0!==l?l:[],h=DecimalCSS.parse(null!=u?u:""),m=DecimalCSS.parse(null!=p?p:""),f="+"===d?h.add(m):h.subtract(m);if(f.isNaN())return STR_NAN;t=t.replace(ADD_OR_SUBTRACT_REGEX,f.toString())}return t}var PARENTHESES_REGEX=/\(([^()]*)\)/;function calculateParentheses(e){for(var t,r=e;null!=(t=PARENTHESES_REGEX.exec(r));){var[,n]=t;r=r.replace(PARENTHESES_REGEX,calculateArithmetic(n))}return r}function evaluateExpression(e){var t=e.replace(/\s+/g,"");return t=calculateArithmetic(t=calculateParentheses(t))}function safeEvaluateExpression(e){try{return evaluateExpression(e)}catch(t){return STR_NAN}}function reduceCSSCalc(e){var t=safeEvaluateExpression(e.slice(5,-1));return t===STR_NAN?"":t}var _excluded$c=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],_excluded2$6=["dx","dy","angle","className","breakAll"];function _extends$d(){return _extends$d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$d.apply(null,arguments)}function _objectWithoutProperties$c(e,t){if(null==e)return{};var r,n,i=_objectWithoutPropertiesLoose$c(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _objectWithoutPropertiesLoose$c(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}var BREAKING_SPACES=/[ \f\n\r\t\v\u2028\u2029]+/,calculateWordWidths=e=>{var{children:t,breakAll:r,style:n}=e;try{var i=[];return isNullish$1(t)||(i=r?t.toString().split(""):t.toString().split(BREAKING_SPACES)),{wordsWithComputedWidth:i.map(e=>({word:e,width:getStringSize(e,n).width})),spaceWidth:r?0:getStringSize("Â ",n).width}}catch(o){return null}};function isValidTextAnchor(e){return"start"===e||"middle"===e||"end"===e||"inherit"===e}var calculate=(e,t,r,n)=>e.reduce((e,i)=>{var{word:o,width:a}=i,s=e[e.length-1];if(s&&null!=a&&(null==t||n||s.width+a+r<Number(t)))s.words.push(o),s.width+=a+r;else{var c={words:[o],width:a};e.push(c)}return e},[]),findLongestLine=e=>e.reduce((e,t)=>e.width>t.width?e:t),suffix="â€¦",checkOverflow=(e,t,r,n,i,o,a,s)=>{var c=e.slice(0,t),l=calculateWordWidths({breakAll:r,style:n,children:c+suffix});if(!l)return[!1,[]];var u=calculate(l.wordsWithComputedWidth,o,a,s);return[u.length>i||findLongestLine(u).width>Number(o),u]},calculateWordsByLines=(e,t,r,n,i)=>{var{maxLines:o,children:a,style:s,breakAll:c}=e,l=isNumber(o),u=String(a),d=calculate(t,n,r,i);if(!l||i)return d;if(!(d.length>o||findLongestLine(d).width>Number(n)))return d;for(var p,h=0,m=u.length-1,f=0;h<=m&&f<=u.length-1;){var x=Math.floor((h+m)/2),g=x-1,[y,b]=checkOverflow(u,g,c,s,o,n,r,i),[v]=checkOverflow(u,x,c,s,o,n,r,i);if(y||v||(h=x+1),y&&v&&(m=x-1),!y&&v){p=b;break}f++}return p||d},getWordsWithoutCalculate=e=>[{words:isNullish$1(e)?[]:e.toString().split(BREAKING_SPACES),width:void 0}],getWordsByLines=e=>{var{width:t,scaleToFit:r,children:n,style:i,breakAll:o,maxLines:a}=e;if((t||r)&&!Global.isSsr){var s=calculateWordWidths({breakAll:o,children:n,style:i});if(!s)return getWordsWithoutCalculate(n);var{wordsWithComputedWidth:c,spaceWidth:l}=s;return calculateWordsByLines({breakAll:o,children:n,maxLines:a,style:i},c,l,t,Boolean(r))}return getWordsWithoutCalculate(n)},DEFAULT_FILL="#808080",textDefaultProps={breakAll:!1,capHeight:"0.71em",fill:DEFAULT_FILL,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Text=reactExports.forwardRef((e,t)=>{var r=resolveDefaultProps(e,textDefaultProps),{x:n,y:i,lineHeight:o,capHeight:a,fill:s,scaleToFit:c,textAnchor:l,verticalAnchor:u}=r,d=_objectWithoutProperties$c(r,_excluded$c),p=reactExports.useMemo(()=>getWordsByLines({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:c,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,c,d.style,d.width]),{dx:h,dy:m,angle:f,className:x,breakAll:g}=d,y=_objectWithoutProperties$c(d,_excluded2$6);if(!isNumOrStr(n)||!isNumOrStr(i)||0===p.length)return null;var b,v=Number(n)+(isNumber(h)?h:0),E=Number(i)+(isNumber(m)?m:0);if(!isWellBehavedNumber(v)||!isWellBehavedNumber(E))return null;switch(u){case"start":b=reduceCSSCalc("calc(".concat(a,")"));break;case"middle":b=reduceCSSCalc("calc(".concat((p.length-1)/2," * -").concat(o," + (").concat(a," / 2))"));break;default:b=reduceCSSCalc("calc(".concat(p.length-1," * -").concat(o,")"))}var w=[];if(c){var S=p[0].width,{width:j}=d;w.push("scale(".concat(isNumber(j)&&isNumber(S)?j/S:1,")"))}return f&&w.push("rotate(".concat(f,", ").concat(v,", ").concat(E,")")),w.length&&(y.transform=w.join(" ")),reactExports.createElement("text",_extends$d({},svgPropertiesAndEvents(y),{ref:t,x:v,y:E,className:clsx("recharts-text",x),textAnchor:l,fill:s.includes("url")?DEFAULT_FILL:s}),p.map((e,t)=>{var r=e.words.join(g?"":" ");return reactExports.createElement("tspan",{x:v,dy:0===t?b:o,key:"".concat(r,"-").concat(t)},r)}))});Text.displayName="Text";var _excluded$b=["labelRef"];function _objectWithoutProperties$b(e,t){if(null==e)return{};var r,n,i=_objectWithoutPropertiesLoose$b(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _objectWithoutPropertiesLoose$b(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}function ownKeys$a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$a(Object(r),!0).forEach(function(t){_defineProperty$b(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$b(e,t,r){return(t=_toPropertyKey$b(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$b(e){var t=_toPrimitive$b(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$b(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _extends$c(){return _extends$c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$c.apply(null,arguments)}var CartesianLabelContext=reactExports.createContext(null),CartesianLabelContextProvider=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:i,width:o,height:a,children:s}=e,c=reactExports.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:i,width:o,height:a}),[t,r,n,i,o,a]);return reactExports.createElement(CartesianLabelContext.Provider,{value:c},s)},useCartesianLabelContext=()=>{var e=reactExports.useContext(CartesianLabelContext),t=useViewBox();return e||cartesianViewBoxToTrapezoid(t)},PolarLabelContext=reactExports.createContext(null),usePolarLabelContext=()=>{var e=reactExports.useContext(PolarLabelContext),t=useAppSelector(selectPolarViewBox);return e||t},getLabel=e=>{var{value:t,formatter:r}=e,n=isNullish$1(e.children)?t:e.children;return"function"==typeof r?r(n):n},isLabelContentAFunction=e=>null!=e&&"function"==typeof e,getDeltaAngle=(e,t)=>mathSign(t-e)*Math.min(Math.abs(t-e),360),renderRadialLabel=(e,t,r,n,i)=>{var o,a,{offset:s,className:c}=e,{cx:l,cy:u,innerRadius:d,outerRadius:p,startAngle:h,endAngle:m,clockWise:f}=i,x=(d+p)/2,g=getDeltaAngle(h,m),y=g>=0?1:-1;switch(t){case"insideStart":o=h+y*s,a=f;break;case"insideEnd":o=m-y*s,a=!f;break;case"end":o=m+y*s,a=f;break;default:throw new Error("Unsupported position ".concat(t))}a=g<=0?a:!a;var b=polarToCartesian(l,u,x,o),v=polarToCartesian(l,u,x,o+359*(a?1:-1)),E="M".concat(b.x,",").concat(b.y,"\n    A").concat(x,",").concat(x,",0,1,").concat(a?0:1,",\n    ").concat(v.x,",").concat(v.y),w=isNullish$1(e.id)?uniqueId("recharts-radial-line-"):e.id;return reactExports.createElement("text",_extends$c({},n,{dominantBaseline:"central",className:clsx("recharts-radial-bar-label",c)}),reactExports.createElement("defs",null,reactExports.createElement("path",{id:w,d:E})),reactExports.createElement("textPath",{xlinkHref:"#".concat(w)},r))},getAttrsOfPolarLabel=(e,t,r)=>{var{cx:n,cy:i,innerRadius:o,outerRadius:a,startAngle:s,endAngle:c}=e,l=(s+c)/2;if("outside"===r){var{x:u,y:d}=polarToCartesian(n,i,a+t,l);return{x:u,y:d,textAnchor:u>=n?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var p=(o+a)/2,{x:h,y:m}=polarToCartesian(n,i,p,l);return{x:h,y:m,textAnchor:"middle",verticalAnchor:"middle"}},isPolar=e=>"cx"in e&&isNumber(e.cx),getAttrsOfCartesianLabel=(e,t)=>{var r,{parentViewBox:n,offset:i,position:o}=e;null==n||isPolar(n)||(r=n);var{x:a,y:s,upperWidth:c,lowerWidth:l,height:u}=t,d=a,p=a+(c-l)/2,h=(d+p)/2,m=(c+l)/2,f=d+c/2,x=u>=0?1:-1,g=x*i,y=x>0?"end":"start",b=x>0?"start":"end",v=c>=0?1:-1,E=v*i,w=v>0?"end":"start",S=v>0?"start":"end";if("top"===o)return _objectSpread$a(_objectSpread$a({},{x:d+c/2,y:s-g,textAnchor:"middle",verticalAnchor:y}),r?{height:Math.max(s-r.y,0),width:c}:{});if("bottom"===o)return _objectSpread$a(_objectSpread$a({},{x:p+l/2,y:s+u+g,textAnchor:"middle",verticalAnchor:b}),r?{height:Math.max(r.y+r.height-(s+u),0),width:l}:{});if("left"===o){var j={x:h-E,y:s+u/2,textAnchor:w,verticalAnchor:"middle"};return _objectSpread$a(_objectSpread$a({},j),r?{width:Math.max(j.x-r.x,0),height:u}:{})}if("right"===o){var A={x:h+m+E,y:s+u/2,textAnchor:S,verticalAnchor:"middle"};return _objectSpread$a(_objectSpread$a({},A),r?{width:Math.max(r.x+r.width-A.x,0),height:u}:{})}var T=r?{width:m,height:u}:{};return"insideLeft"===o?_objectSpread$a({x:h+E,y:s+u/2,textAnchor:S,verticalAnchor:"middle"},T):"insideRight"===o?_objectSpread$a({x:h+m-E,y:s+u/2,textAnchor:w,verticalAnchor:"middle"},T):"insideTop"===o?_objectSpread$a({x:d+c/2,y:s+g,textAnchor:"middle",verticalAnchor:b},T):"insideBottom"===o?_objectSpread$a({x:p+l/2,y:s+u-g,textAnchor:"middle",verticalAnchor:y},T):"insideTopLeft"===o?_objectSpread$a({x:d+E,y:s+g,textAnchor:S,verticalAnchor:b},T):"insideTopRight"===o?_objectSpread$a({x:d+c-E,y:s+g,textAnchor:w,verticalAnchor:b},T):"insideBottomLeft"===o?_objectSpread$a({x:p+E,y:s+u-g,textAnchor:S,verticalAnchor:y},T):"insideBottomRight"===o?_objectSpread$a({x:p+l-E,y:s+u-g,textAnchor:w,verticalAnchor:y},T):o&&"object"==typeof o&&(isNumber(o.x)||isPercent(o.x))&&(isNumber(o.y)||isPercent(o.y))?_objectSpread$a({x:a+getPercentValue(o.x,m),y:s+getPercentValue(o.y,u),textAnchor:"end",verticalAnchor:"end"},T):_objectSpread$a({x:f,y:s+u/2,textAnchor:"middle",verticalAnchor:"middle"},T)},defaultLabelProps={offset:5,zIndex:DefaultZIndexes.label};function Label(e){var t,r,n,i=resolveDefaultProps(e,defaultLabelProps),{viewBox:o,position:a,value:s,children:c,content:l,className:u="",textBreakAll:d,labelRef:p}=i,h=usePolarLabelContext(),m=useCartesianLabelContext();if(!(t=null==o?"center"===a?m:null!=h?h:m:isPolar(o)?o:cartesianViewBoxToTrapezoid(o))||isNullish$1(s)&&isNullish$1(c)&&!reactExports.isValidElement(l)&&"function"!=typeof l)return null;var f=_objectSpread$a(_objectSpread$a({},i),{},{viewBox:t});if(reactExports.isValidElement(l)){var{labelRef:x}=f,g=_objectWithoutProperties$b(f,_excluded$b);return reactExports.cloneElement(l,g)}if("function"==typeof l){if(r=reactExports.createElement(l,f),reactExports.isValidElement(r))return r}else r=getLabel(i);var y=svgPropertiesAndEvents(i);if(isPolar(t)){if("insideStart"===a||"insideEnd"===a||"end"===a)return renderRadialLabel(i,a,r,y,t);n=getAttrsOfPolarLabel(t,i.offset,i.position)}else n=getAttrsOfCartesianLabel(i,t);return reactExports.createElement(ZIndexLayer,{zIndex:i.zIndex},reactExports.createElement(Text,_extends$c({ref:p,className:clsx("recharts-label",u)},y,n,{textAnchor:isValidTextAnchor(y.textAnchor)?y.textAnchor:n.textAnchor,breakAll:d}),r))}Label.displayName="Label";var parseLabel=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return!0===e?reactExports.createElement(Label,_extends$c({key:"label-implicit"},n)):isNumOrStr(e)?reactExports.createElement(Label,_extends$c({key:"label-implicit",value:e},n)):reactExports.isValidElement(e)?e.type===Label?reactExports.cloneElement(e,_objectSpread$a({key:"label-implicit"},n)):reactExports.createElement(Label,_extends$c({key:"label-implicit",content:e},n)):isLabelContentAFunction(e)?reactExports.createElement(Label,_extends$c({key:"label-implicit",content:e},n)):e&&"object"==typeof e?reactExports.createElement(Label,_extends$c({},e,{key:"label-implicit"},n)):null};function CartesianLabelFromLabelProp(e){var{label:t,labelRef:r}=e,n=useCartesianLabelContext();return parseLabel(t,n,r)||null}var last$3={},last$2={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.last=function(e){return e[e.length-1]}}(last$2);var toArray={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.toArray=function(e){return Array.isArray(e)?e:Array.from(e)}}(toArray),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=last$2,r=toArray,n=isArrayLike;e.last=function(e){if(n.isArrayLike(e))return t.last(r.toArray(e))}}(last$3);var last=last$3.last;const last$1=getDefaultExportFromCjs(last);var _excluded$a=["valueAccessor"],_excluded2$5=["dataKey","clockWise","id","textBreakAll","zIndex"];function _extends$b(){return _extends$b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$b.apply(null,arguments)}function _objectWithoutProperties$a(e,t){if(null==e)return{};var r,n,i=_objectWithoutPropertiesLoose$a(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _objectWithoutPropertiesLoose$a(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}var defaultAccessor=e=>Array.isArray(e.value)?last$1(e.value):e.value,CartesianLabelListContext=reactExports.createContext(void 0),CartesianLabelListContextProvider=CartesianLabelListContext.Provider,PolarLabelListContext=reactExports.createContext(void 0);function useCartesianLabelListContext(){return reactExports.useContext(CartesianLabelListContext)}function usePolarLabelListContext(){return reactExports.useContext(PolarLabelListContext)}function LabelList(e){var{valueAccessor:t=defaultAccessor}=e,r=_objectWithoutProperties$a(e,_excluded$a),{dataKey:n,clockWise:i,id:o,textBreakAll:a,zIndex:s}=r,c=_objectWithoutProperties$a(r,_excluded2$5),l=useCartesianLabelListContext(),u=usePolarLabelListContext(),d=l||u;return d&&d.length?reactExports.createElement(ZIndexLayer,{zIndex:null!=s?s:DefaultZIndexes.label},reactExports.createElement(Layer,{className:"recharts-label-list"},d.map((e,i)=>{var s,l=isNullish$1(n)?t(e,i):getValueByDataKey(e&&e.payload,n),u=isNullish$1(o)?{}:{id:"".concat(o,"-").concat(i)};return reactExports.createElement(Label,_extends$b({key:"label-".concat(i)},svgPropertiesAndEvents(e),c,u,{fill:null!==(s=r.fill)&&void 0!==s?s:e.fill,parentViewBox:e.parentViewBox,value:l,textBreakAll:a,viewBox:e.viewBox,index:i,zIndex:0}))}))):null}function LabelListFromLabelProp(e){var{label:t}=e;return t?!0===t?reactExports.createElement(LabelList,{key:"labelList-implicit"}):reactExports.isValidElement(t)||isLabelContentAFunction(t)?reactExports.createElement(LabelList,{key:"labelList-implicit",content:t}):"object"==typeof t?reactExports.createElement(LabelList,_extends$b({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function _extends$a(){return _extends$a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$a.apply(null,arguments)}PolarLabelListContext.Provider,LabelList.displayName="LabelList";var Dot=e=>{var{cx:t,cy:r,r:n,className:i}=e,o=clsx("recharts-dot",i);return isNumber(t)&&isNumber(r)&&isNumber(n)?reactExports.createElement("circle",_extends$a({},svgPropertiesNoEvents(e),adaptEventHandlers(e),{className:o,cx:t,cy:r,r:n})):null},initialState$6={radiusAxis:{},angleAxis:{}},polarAxisSlice=createSlice({name:"polarAxis",initialState:initialState$6,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=castDraft(t.payload)},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=castDraft(t.payload)},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:addRadiusAxis,removeRadiusAxis:removeRadiusAxis,addAngleAxis:addAngleAxis,removeAngleAxis:removeAngleAxis}=polarAxisSlice.actions,polarAxisReducer=polarAxisSlice.reducer,isClipDot=e=>!e||"object"!=typeof e||!("clipDot"in e)||Boolean(e.clipDot),isPlainObject$2={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isPlainObject=function(e){var t;if("object"!=typeof e)return!1;if(null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){const r=e[Symbol.toStringTag];if(null==r)return!1;return!!(null==(t=Object.getOwnPropertyDescriptor(e,Symbol.toStringTag))?void 0:t.writable)&&e.toString()===`[object ${r}]`}let r=e;for(;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}}(isPlainObject$2);var isPlainObject=isPlainObject$2.isPlainObject;const isPlainObject$1=getDefaultExportFromCjs(isPlainObject);function ownKeys$9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$9(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$9(Object(r),!0).forEach(function(t){_defineProperty$a(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$9(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$a(e,t,r){return(t=_toPropertyKey$a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$a(e){var t=_toPrimitive$a(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$a(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$9.apply(null,arguments)}var getTrapezoidPath=(e,t,r,n,i)=>{var o,a=r-n;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-a/2,",").concat(t+i),o+="L ".concat(e+r-a/2-n,",").concat(t+i),o+="L ".concat(e,",").concat(t," Z")},defaultProps$1={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Trapezoid=e=>{var t=resolveDefaultProps(e,defaultProps$1),{x:r,y:n,upperWidth:i,lowerWidth:o,height:a,className:s}=t,{animationEasing:c,animationDuration:l,animationBegin:u,isUpdateAnimationActive:d}=t,p=reactExports.useRef(null),[h,m]=reactExports.useState(-1),f=reactExports.useRef(i),x=reactExports.useRef(o),g=reactExports.useRef(a),y=reactExports.useRef(r),b=reactExports.useRef(n),v=useAnimationId(e,"trapezoid-");if(reactExports.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var e=p.current.getTotalLength();e&&m(e)}catch(t){}},[]),r!==+r||n!==+n||i!==+i||o!==+o||a!==+a||0===i&&0===o||0===a)return null;var E=clsx("recharts-trapezoid",s);if(!d)return reactExports.createElement("g",null,reactExports.createElement("path",_extends$9({},svgPropertiesAndEvents(t),{className:E,d:getTrapezoidPath(r,n,i,o,a)})));var w=f.current,S=x.current,j=g.current,A=y.current,T=b.current,P="0px ".concat(-1===h?1:h,"px"),$="".concat(h,"px 0px"),R=getTransitionVal(["strokeDasharray"],l,c);return reactExports.createElement(JavascriptAnimate,{animationId:v,key:v,canBegin:h>0,duration:l,easing:c,isActive:d,begin:u},e=>{var s=interpolate$2(w,i,e),c=interpolate$2(S,o,e),l=interpolate$2(j,a,e),u=interpolate$2(A,r,e),d=interpolate$2(T,n,e);p.current&&(f.current=s,x.current=c,g.current=l,y.current=u,b.current=d);var h=e>0?{transition:R,strokeDasharray:$}:{strokeDasharray:P};return reactExports.createElement("path",_extends$9({},svgPropertiesAndEvents(t),{className:E,d:getTrapezoidPath(u,d,s,c,l),ref:p,style:_objectSpread$9(_objectSpread$9({},h),t.style)}))})},_excluded$9=["option","shapeType","propTransformer","activeClassName","isActive"],_ref;function _objectWithoutProperties$9(e,t){if(null==e)return{};var r,n,i=_objectWithoutPropertiesLoose$9(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _objectWithoutPropertiesLoose$9(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}function ownKeys$8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$8(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$8(Object(r),!0).forEach(function(t){_defineProperty$9(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$8(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$9(e,t,r){return(t=_toPropertyKey$9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$9(e){var t=_toPrimitive$9(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$9(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function defaultPropTransformer(e,t){return _objectSpread$8(_objectSpread$8({},t),e)}function isSymbolsProps(e,t){return"symbols"===e}function ShapeSelector(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return reactExports.createElement(Rectangle,r);case"trapezoid":return reactExports.createElement(Trapezoid,r);case"sector":return reactExports.createElement(Sector,r);case"symbols":if(isSymbolsProps(t))return reactExports.createElement(Symbols,r);break;case"curve":return reactExports.createElement(Curve,r);default:return null}}function getPropsFromShapeOption(e){return reactExports.isValidElement(e)?e.props:e}function Shape(e){var t,{option:r,shapeType:n,propTransformer:i=defaultPropTransformer,activeClassName:o="recharts-active-shape",isActive:a}=e,s=_objectWithoutProperties$9(e,_excluded$9);if(reactExports.isValidElement(r))t=reactExports.cloneElement(r,_objectSpread$8(_objectSpread$8({},s),getPropsFromShapeOption(r)));else if("function"==typeof r)t=r(s);else if(isPlainObject$1(r)&&"boolean"!=typeof r){var c=i(r,s);t=reactExports.createElement(ShapeSelector,{shapeType:n,elementProps:c})}else{var l=s;t=reactExports.createElement(ShapeSelector,{shapeType:n,elementProps:l})}return a?reactExports.createElement(Layer,{className:o},t):t}function SetTooltipEntrySettings(e){var{fn:t,args:r}=e,n=useAppDispatch(),i=useIsPanorama();return reactExports.useLayoutEffect(()=>{if(!i){var e=t(r);return n(addTooltipEntrySettings(e)),()=>{n(removeTooltipEntrySettings(e))}}},[t,r,n,i]),null}function SetLegendPayload(e){var{legendPayload:t}=e,r=useAppDispatch(),n=useIsPanorama();return reactExports.useLayoutEffect(()=>n?noop$5:(r(addLegendPayload(t)),()=>{r(removeLegendPayload(t))}),[r,n,t]),null}var useIdFallback=()=>{var[e]=reactExports.useState(()=>uniqueId("uid-"));return e},useId=null!==(_ref=React$3["useId".toString()])&&void 0!==_ref?_ref:useIdFallback;function useUniqueId(e,t){var r=useId();return t||(e?"".concat(e,"-").concat(r):r)}var GraphicalItemIdContext=reactExports.createContext(void 0),RegisterGraphicalItemId=e=>{var{id:t,type:r,children:n}=e,i=useUniqueId("recharts-".concat(r),t);return reactExports.createElement(GraphicalItemIdContext.Provider,{value:i},n(i))},initialState$5={cartesianItems:[],polarItems:[]},graphicalItemsSlice=createSlice({name:"graphicalItems",initialState:initialState$5,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(castDraft(t.payload))},prepare:prepareAutoBatched()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,i=current(e).cartesianItems.indexOf(castDraft(r));i>-1&&(e.cartesianItems[i]=castDraft(n))},prepare:prepareAutoBatched()},removeCartesianGraphicalItem:{reducer(e,t){var r=current(e).cartesianItems.indexOf(castDraft(t.payload));r>-1&&e.cartesianItems.splice(r,1)},prepare:prepareAutoBatched()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(castDraft(t.payload))},prepare:prepareAutoBatched()},removePolarGraphicalItem:{reducer(e,t){var r=current(e).polarItems.indexOf(castDraft(t.payload));r>-1&&e.polarItems.splice(r,1)},prepare:prepareAutoBatched()}}}),{addCartesianGraphicalItem:addCartesianGraphicalItem,replaceCartesianGraphicalItem:replaceCartesianGraphicalItem,removeCartesianGraphicalItem:removeCartesianGraphicalItem,addPolarGraphicalItem:addPolarGraphicalItem,removePolarGraphicalItem:removePolarGraphicalItem}=graphicalItemsSlice.actions,graphicalItemsReducer=graphicalItemsSlice.reducer;function SetCartesianGraphicalItem(e){var t=useAppDispatch(),r=reactExports.useRef(null);return reactExports.useLayoutEffect(()=>{null===r.current?t(addCartesianGraphicalItem(e)):r.current!==e&&t(replaceCartesianGraphicalItem({prev:r.current,next:e})),r.current=e},[t,e]),reactExports.useLayoutEffect(()=>()=>{r.current&&(t(removeCartesianGraphicalItem(r.current)),r.current=null)},[t]),null}var _excluded$8=["points"];function ownKeys$7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$7(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$7(Object(r),!0).forEach(function(t){_defineProperty$8(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$7(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$8(e,t,r){return(t=_toPropertyKey$8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$8(e){var t=_toPrimitive$8(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$8(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$8.apply(null,arguments)}function _objectWithoutProperties$8(e,t){if(null==e)return{};var r,n,i=_objectWithoutPropertiesLoose$8(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _objectWithoutPropertiesLoose$8(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}function DotItem(e){var{option:t,dotProps:r,className:n}=e;if(reactExports.isValidElement(t))return reactExports.cloneElement(t,r);if("function"==typeof t)return t(r);var i=clsx(n,"boolean"!=typeof t?t.className:""),o=null!=r?r:{},{points:a}=o,s=_objectWithoutProperties$8(o,_excluded$8);return reactExports.createElement(Dot,_extends$8({},s,{className:i}))}function shouldRenderDots(e,t){return null!=e&&(!!t||1===e.length)}function Dots(e){var{points:t,dot:r,className:n,dotClassName:i,dataKey:o,baseProps:a,needClip:s,clipPathId:c,zIndex:l=DefaultZIndexes.scatter}=e;if(!shouldRenderDots(t,r))return null;var u=isClipDot(r),d=svgPropertiesAndEventsFromUnknown(r),p=t.map((e,n)=>{var s,c,l=_objectSpread$7(_objectSpread$7(_objectSpread$7({r:3},a),d),{},{index:n,cx:null!==(s=e.x)&&void 0!==s?s:void 0,cy:null!==(c=e.y)&&void 0!==c?c:void 0,dataKey:o,value:e.value,payload:e.payload,points:t});return reactExports.createElement(DotItem,{key:"dot-".concat(n),option:r,dotProps:l,className:i})}),h={};return s&&null!=c&&(h.clipPath="url(#clipPath-".concat(u?"":"dots-").concat(c,")")),reactExports.createElement(ZIndexLayer,{zIndex:l},reactExports.createElement(Layer,_extends$8({className:n},h),p))}function ownKeys$6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$6(Object(r),!0).forEach(function(t){_defineProperty$7(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$6(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$7(e,t,r){return(t=_toPropertyKey$7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$7(e){var t=_toPrimitive$7(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$7(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var initialState$4={xAxis:{},yAxis:{},zAxis:{}},cartesianAxisSlice=createSlice({name:"cartesianAxis",initialState:initialState$4,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=castDraft(t.payload)},prepare:prepareAutoBatched()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:prepareAutoBatched()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=castDraft(t.payload)},prepare:prepareAutoBatched()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:prepareAutoBatched()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=castDraft(t.payload)},prepare:prepareAutoBatched()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:prepareAutoBatched()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,i=e.yAxis[r];if(i){var o=i.widthHistory||[];if(3===o.length&&o[0]===o[2]&&n===o[1]&&n!==i.width&&Math.abs(n-o[0])<=1)return;var a=[...o,n].slice(-3);e.yAxis[r]=_objectSpread$6(_objectSpread$6({},e.yAxis[r]),{},{width:n,widthHistory:a})}}}}),{addXAxis:addXAxis,removeXAxis:removeXAxis,addYAxis:addYAxis,removeYAxis:removeYAxis,addZAxis:addZAxis,removeZAxis:removeZAxis,updateYAxisWidth:updateYAxisWidth}=cartesianAxisSlice.actions,cartesianAxisReducer=cartesianAxisSlice.reducer,selectChartOffset=createSelector([selectChartOffsetInternal],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),selectPlotArea=createSelector([selectChartOffset,selectChartWidth,selectChartHeight],(e,t,r)=>{if(e&&null!=t&&null!=r)return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),usePlotArea=()=>useAppSelector(selectPlotArea),useActiveTooltipDataPoints=()=>useAppSelector(selectActiveTooltipDataPoints);function ownKeys$5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$5(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$5(Object(r),!0).forEach(function(t){_defineProperty$6(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$5(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$6(e,t,r){return(t=_toPropertyKey$6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$6(e){var t=_toPrimitive$6(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$6(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var ActivePoint=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:i,dataKey:o}=e;if(!1===i||null==t.x||null==t.y)return null;var a,s=_objectSpread$5(_objectSpread$5(_objectSpread$5({},{index:r,dataKey:o,cx:t.x,cy:t.y,r:4,fill:null!=n?n:"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value}),svgPropertiesNoEventsFromUnknown(i)),adaptEventHandlers(i));return a=reactExports.isValidElement(i)?reactExports.cloneElement(i,s):"function"==typeof i?i(s):reactExports.createElement(Dot,s),reactExports.createElement(Layer,{className:"recharts-active-dot"},a)};function ActivePoints(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:i,zIndex:o=DefaultZIndexes.activeDot}=e,a=useAppSelector(selectActiveTooltipIndex),s=useActiveTooltipDataPoints();if(null==t||null==s)return null;var c=t.find(e=>s.includes(e.payload));return isNullish$1(c)?null:reactExports.createElement(ZIndexLayer,{zIndex:o},reactExports.createElement(ActivePoint,{point:c,childIndex:Number(a),mainColor:r,dataKey:i,activeDot:n}))}var initialState$3={},errorBarSlice=createSlice({name:"errorBars",initialState:initialState$3,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:i}=t.payload;e[r]&&(e[r]=e[r].map(e=>e.dataKey===n.dataKey&&e.direction===n.direction?i:e))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(e=>e.dataKey!==n.dataKey||e.direction!==n.direction))}}}),{addErrorBar:addErrorBar,replaceErrorBar:replaceErrorBar,removeErrorBar:removeErrorBar}=errorBarSlice.actions,errorBarReducer=errorBarSlice.reducer,_excluded$7=["children"];function _objectWithoutProperties$7(e,t){if(null==e)return{};var r,n,i=_objectWithoutPropertiesLoose$7(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _objectWithoutPropertiesLoose$7(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}var initialContextState={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},ErrorBarContext=reactExports.createContext(initialContextState);function SetErrorBarContext(e){var{children:t}=e,r=_objectWithoutProperties$7(e,_excluded$7);return reactExports.createElement(ErrorBarContext.Provider,{value:r},t)}function useNeedsClip(e,t){var r,n,i=useAppSelector(t=>selectXAxisSettings(t,e)),o=useAppSelector(e=>selectYAxisSettings(e,t)),a=null!==(r=null==i?void 0:i.allowDataOverflow)&&void 0!==r?r:implicitXAxis.allowDataOverflow,s=null!==(n=null==o?void 0:o.allowDataOverflow)&&void 0!==n?n:implicitYAxis.allowDataOverflow;return{needClip:a||s,needClipX:a,needClipY:s}}function GraphicalItemClipPath(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,i=usePlotArea(),{needClipX:o,needClipY:a,needClip:s}=useNeedsClip(t,r);if(!s||!i)return null;var{x:c,y:l,width:u,height:d}=i;return reactExports.createElement("clipPath",{id:"clipPath-".concat(n)},reactExports.createElement("rect",{x:o?c:c-u/2,y:a?l:l-d/2,width:o?u:2*u,height:a?d:2*d}))}var ChartDataContextProvider=e=>{var{chartData:t}=e,r=useAppDispatch(),n=useIsPanorama();return reactExports.useEffect(()=>n?()=>{}:(r(setChartData(t)),()=>{r(setChartData(void 0))}),[t,r,n]),null},initialState$2={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},brushSlice=createSlice({name:"brush",initialState:initialState$2,reducers:{setBrushSettings:(e,t)=>null==t.payload?initialState$2:t.payload}}),{setBrushSettings:setBrushSettings}=brushSlice.actions,brushReducer=brushSlice.reducer;function _defineProperty$5(e,t,r){return(t=_toPropertyKey$5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$5(e){var t=_toPrimitive$5(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$5(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}class ScaleHelper{static create(e){return new ScaleHelper(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:t,position:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==e){if(r)switch(r){case"start":default:return this.scale(e);case"middle":var n=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+n;case"end":var i=this.bandwidth?this.bandwidth():0;return this.scale(e)+i}if(t){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var t=this.range(),r=t[0],n=t[t.length-1];return r<=n?e>=r&&e<=n:e>=n&&e<=r}}function normalizeAngle(e){return(e%180+180)%180}_defineProperty$5(ScaleHelper,"EPS",1e-4);var getAngledRectangleWidth=function(e){var{width:t,height:r}=e,n=normalizeAngle(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)*Math.PI/180,i=Math.atan(r/t),o=n>i&&n<Math.PI-i?r/Math.sin(n):t/Math.cos(n);return Math.abs(o)},initialState$1={dots:[],areas:[],lines:[]},referenceElementsSlice=createSlice({name:"referenceElements",initialState:initialState$1,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=current(e).dots.findIndex(e=>e===t.payload);-1!==r&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=current(e).areas.findIndex(e=>e===t.payload);-1!==r&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=current(e).lines.findIndex(e=>e===t.payload);-1!==r&&e.lines.splice(r,1)}}}),{addDot:addDot,removeDot:removeDot,addArea:addArea,removeArea:removeArea,addLine:addLine,removeLine:removeLine}=referenceElementsSlice.actions,referenceElementsReducer=referenceElementsSlice.reducer,ClipPathIdContext=reactExports.createContext(void 0),ClipPathProvider=e=>{var{children:t}=e,[r]=reactExports.useState("".concat(uniqueId("recharts"),"-clip")),n=usePlotArea();if(null==n)return null;var{x:i,y:o,width:a,height:s}=n;return reactExports.createElement(ClipPathIdContext.Provider,{value:r},reactExports.createElement("defs",null,reactExports.createElement("clipPath",{id:r},reactExports.createElement("rect",{x:i,y:o,height:s,width:a}))),t)};function shallowEqual(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function getEveryNthWithCondition(e,t){if(t<1)return[];if(1===t)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function getAngledTickWidth(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return getAngledRectangleWidth(n,r)}function getTickBoundaries(e,t,r){var n="width"===r,{x:i,y:o,width:a,height:s}=e;return 1===t?{start:n?i:o,end:n?i+a:o+s}:{start:n?i+a:o+s,end:n?i:o}}function isVisible(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var o=r();return e*(t-e*o/2-n)>=0&&e*(t+e*o/2-i)<=0}function getNumberIntervalTicks(e,t){return getEveryNthWithCondition(e,t+1)}function getEquidistantTicks(e,t,r,n,i){for(var o,a=(n||[]).slice(),{start:s,end:c}=t,l=0,u=1,d=s,p=function(){var t=null==n?void 0:n[l];if(void 0===t)return{v:getEveryNthWithCondition(n,u)};var o,a=l,p=()=>(void 0===o&&(o=r(t,a)),o),h=t.coordinate,m=0===l||isVisible(e,h,p,d,c);m||(l=0,d=s,u+=1),m&&(d=h+e*(p()/2+i),l+=u)};u<=a.length;)if(o=p())return o.v;return[]}function ownKeys$4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$4(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$4(Object(r),!0).forEach(function(t){_defineProperty$4(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$4(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$4(e,t,r){return(t=_toPropertyKey$4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$4(e){var t=_toPrimitive$4(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$4(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function getTicksEnd(e,t,r,n,i){for(var o=(n||[]).slice(),a=o.length,{start:s}=t,{end:c}=t,l=function(t){var n,l=o[t],u=()=>(void 0===n&&(n=r(l,t)),n);if(t===a-1){var d=e*(l.coordinate+e*u()/2-c);o[t]=l=_objectSpread$4(_objectSpread$4({},l),{},{tickCoord:d>0?l.coordinate-d*e:l.coordinate})}else o[t]=l=_objectSpread$4(_objectSpread$4({},l),{},{tickCoord:l.coordinate});null!=l.tickCoord&&(isVisible(e,l.tickCoord,u,s,c)&&(c=l.tickCoord-e*(u()/2+i),o[t]=_objectSpread$4(_objectSpread$4({},l),{},{isShow:!0})))},u=a-1;u>=0;u--)l(u);return o}function getTicksStart(e,t,r,n,i,o){var a=(n||[]).slice(),s=a.length,{start:c,end:l}=t;if(o){var u=n[s-1],d=r(u,s-1),p=e*(u.coordinate+e*d/2-l);if(a[s-1]=u=_objectSpread$4(_objectSpread$4({},u),{},{tickCoord:p>0?u.coordinate-p*e:u.coordinate}),null!=u.tickCoord)isVisible(e,u.tickCoord,()=>d,c,l)&&(l=u.tickCoord-e*(d/2+i),a[s-1]=_objectSpread$4(_objectSpread$4({},u),{},{isShow:!0}))}for(var h=o?s-1:s,m=function(t){var n,o=a[t],s=()=>(void 0===n&&(n=r(o,t)),n);if(0===t){var u=e*(o.coordinate-e*s()/2-c);a[t]=o=_objectSpread$4(_objectSpread$4({},o),{},{tickCoord:u<0?o.coordinate-u*e:o.coordinate})}else a[t]=o=_objectSpread$4(_objectSpread$4({},o),{},{tickCoord:o.coordinate});null!=o.tickCoord&&(isVisible(e,o.tickCoord,s,c,l)&&(c=o.tickCoord+e*(s()/2+i),a[t]=_objectSpread$4(_objectSpread$4({},o),{},{isShow:!0})))},f=0;f<h;f++)m(f);return a}function getTicks(e,t,r){var n,{tick:i,ticks:o,viewBox:a,minTickGap:s,orientation:c,interval:l,tickFormatter:u,unit:d,angle:p}=e;if(!o||!o.length||!i)return[];if(isNumber(l)||Global.isSsr)return null!==(n=getNumberIntervalTicks(o,isNumber(l)?l:0))&&void 0!==n?n:[];var h="top"===c||"bottom"===c?"width":"height",m=d&&"width"===h?getStringSize(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},f=(e,n)=>{var i="function"==typeof u?u(e.value,n):e.value;return"width"===h?getAngledTickWidth(getStringSize(i,{fontSize:t,letterSpacing:r}),m,p):getStringSize(i,{fontSize:t,letterSpacing:r})[h]},x=o.length>=2?mathSign(o[1].coordinate-o[0].coordinate):1,g=getTickBoundaries(a,x,h);return"equidistantPreserveStart"===l?getEquidistantTicks(x,g,f,o,s):("preserveStart"===l||"preserveStartEnd"===l?getTicksStart(x,g,f,o,s,"preserveStartEnd"===l):getTicksEnd(x,g,f,o,s)).filter(e=>e.isShow)}var getCalculatedYAxisWidth=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:o=0}=e,a=0;if(t){Array.from(t).forEach(e=>{if(e){var t=e.getBoundingClientRect();t.width>a&&(a=t.width)}});var s=r?r.getBoundingClientRect().width:0,c=a+(i+o)+s+(r?n:0);return Math.round(c)}return 0},_excluded$6=["axisLine","width","height","className","hide","ticks","axisType"],_excluded2$4=["viewBox"],_excluded3$4=["viewBox"];function _objectWithoutProperties$6(e,t){if(null==e)return{};var r,n,i=_objectWithoutPropertiesLoose$6(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _objectWithoutPropertiesLoose$6(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$7.apply(null,arguments)}function ownKeys$3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$3(Object(r),!0).forEach(function(t){_defineProperty$3(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$3(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$3(e,t,r){return(t=_toPropertyKey$3(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$3(e){var t=_toPrimitive$3(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$3(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var defaultCartesianAxisProps={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:DefaultZIndexes.axis};function AxisLine(e){var{x:t,y:r,width:n,height:i,orientation:o,mirror:a,axisLine:s,otherSvgProps:c}=e;if(!s)return null;var l=_objectSpread$3(_objectSpread$3(_objectSpread$3({},c),svgPropertiesNoEvents(s)),{},{fill:"none"});if("top"===o||"bottom"===o){var u=+("top"===o&&!a||"bottom"===o&&a);l=_objectSpread$3(_objectSpread$3({},l),{},{x1:t,y1:r+u*i,x2:t+n,y2:r+u*i})}else{var d=+("left"===o&&!a||"right"===o&&a);l=_objectSpread$3(_objectSpread$3({},l),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+i})}return reactExports.createElement("line",_extends$7({},l,{className:clsx("recharts-cartesian-axis-line",get$a(s,"className"))}))}function getTickLineCoord(e,t,r,n,i,o,a,s,c){var l,u,d,p,h,m,f=s?-1:1,x=e.tickSize||a,g=isNumber(e.tickCoord)?e.tickCoord:e.coordinate;switch(o){case"top":l=u=e.coordinate,m=(d=(p=r+ +!s*i)-f*x)-f*c,h=g;break;case"left":d=p=e.coordinate,h=(l=(u=t+ +!s*n)-f*x)-f*c,m=g;break;case"right":d=p=e.coordinate,h=(l=(u=t+ +s*n)+f*x)+f*c,m=g;break;default:l=u=e.coordinate,m=(d=(p=r+ +s*i)+f*x)+f*c,h=g}return{line:{x1:l,y1:d,x2:u,y2:p},tick:{x:h,y:m}}}function getTickTextAnchor(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function getTickVerticalAnchor(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function TickItem(e){var t,{option:r,tickProps:n,value:i}=e,o=clsx(n.className,"recharts-cartesian-axis-tick-value");if(reactExports.isValidElement(r))t=reactExports.cloneElement(r,_objectSpread$3(_objectSpread$3({},n),{},{className:o}));else if("function"==typeof r)t=r(_objectSpread$3(_objectSpread$3({},n),{},{className:o}));else{var a="recharts-cartesian-axis-tick-value";"boolean"!=typeof r&&(a=clsx(a,null==r?void 0:r.className)),t=reactExports.createElement(Text,_extends$7({},n,{className:a}),i)}return t}var Ticks=reactExports.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:i,stroke:o,tickFormatter:a,unit:s,padding:c,tickTextProps:l,orientation:u,mirror:d,x:p,y:h,width:m,height:f,tickSize:x,tickMargin:g,fontSize:y,letterSpacing:b,getTicksConfig:v,events:E,axisType:w}=e,S=getTicks(_objectSpread$3(_objectSpread$3({},v),{},{ticks:r}),y,b),j=getTickTextAnchor(u,d),A=getTickVerticalAnchor(u,d),T=svgPropertiesNoEvents(v),P=svgPropertiesNoEventsFromUnknown(n),$={};"object"==typeof i&&($=i);var R=_objectSpread$3(_objectSpread$3({},T),{},{fill:"none"},$),k=S.map(e=>_objectSpread$3({entry:e},getTickLineCoord(e,p,h,m,f,u,x,d,g))),C=k.map(e=>{var{entry:t,line:r}=e;return reactExports.createElement(Layer,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},i&&reactExports.createElement("line",_extends$7({},R,r,{className:clsx("recharts-cartesian-axis-tick-line",get$a(i,"className"))})))}),N=k.map((e,t)=>{var{entry:r,tick:i}=e,u=_objectSpread$3(_objectSpread$3(_objectSpread$3(_objectSpread$3({textAnchor:j,verticalAnchor:A},T),{},{stroke:"none",fill:o},P),i),{},{index:t,payload:r,visibleTicksCount:S.length,tickFormatter:a,padding:c},l);return reactExports.createElement(Layer,_extends$7({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(r.value,"-").concat(r.coordinate,"-").concat(r.tickCoord)},adaptEventsOfChild(E,r,t)),n&&reactExports.createElement(TickItem,{option:n,tickProps:u,value:"".concat("function"==typeof a?a(r.value,t):r.value).concat(s||"")}))});return reactExports.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(w,"-ticks")},N.length>0&&reactExports.createElement(ZIndexLayer,{zIndex:DefaultZIndexes.label},reactExports.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(w,"-tick-labels"),ref:t},N)),C.length>0&&reactExports.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(w,"-tick-lines")},C))}),CartesianAxisComponent=reactExports.forwardRef((e,t)=>{var{axisLine:r,width:n,height:i,className:o,hide:a,ticks:s,axisType:c}=e,l=_objectWithoutProperties$6(e,_excluded$6),[u,d]=reactExports.useState(""),[p,h]=reactExports.useState(""),m=reactExports.useRef(null);reactExports.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var t;return getCalculatedYAxisWidth({ticks:m.current,label:null===(t=e.labelRef)||void 0===t?void 0:t.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var f=reactExports.useCallback(e=>{if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value");m.current=t;var r=t[0];if(r){var n=window.getComputedStyle(r),i=n.fontSize,o=n.letterSpacing;i===u&&o===p||(d(i),h(o))}}},[u,p]);return a||null!=n&&n<=0||null!=i&&i<=0?null:reactExports.createElement(ZIndexLayer,{zIndex:e.zIndex},reactExports.createElement(Layer,{className:clsx("recharts-cartesian-axis",o)},reactExports.createElement(AxisLine,{x:e.x,y:e.y,width:n,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:svgPropertiesNoEvents(e)}),reactExports.createElement(Ticks,{ref:f,axisType:c,events:l,fontSize:u,getTicksConfig:e,height:e.height,letterSpacing:p,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:s,unit:e.unit,width:e.width,x:e.x,y:e.y}),reactExports.createElement(CartesianLabelContextProvider,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},reactExports.createElement(CartesianLabelFromLabelProp,{label:e.label,labelRef:e.labelRef}),e.children)))}),MemoCartesianAxis=reactExports.memo(CartesianAxisComponent,(e,t)=>{var{viewBox:r}=e,n=_objectWithoutProperties$6(e,_excluded2$4),{viewBox:i}=t,o=_objectWithoutProperties$6(t,_excluded3$4);return shallowEqual(r,i)&&shallowEqual(n,o)}),CartesianAxis=reactExports.forwardRef((e,t)=>{var r=resolveDefaultProps(e,defaultCartesianAxisProps);return reactExports.createElement(MemoCartesianAxis,_extends$7({},r,{ref:t}))});CartesianAxis.displayName="CartesianAxis";var _excluded$5=["x1","y1","x2","y2","key"],_excluded2$3=["offset"],_excluded3$3=["xAxisId","yAxisId"],_excluded4$2=["xAxisId","yAxisId"];function ownKeys$2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$2(Object(r),!0).forEach(function(t){_defineProperty$2(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$2(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$2(e,t,r){return(t=_toPropertyKey$2(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$2(e){var t=_toPrimitive$2(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$2(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$6.apply(null,arguments)}function _objectWithoutProperties$5(e,t){if(null==e)return{};var r,n,i=_objectWithoutPropertiesLoose$5(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _objectWithoutPropertiesLoose$5(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}var Background=e=>{var{fill:t}=e;if(!t||"none"===t)return null;var{fillOpacity:r,x:n,y:i,width:o,height:a,ry:s}=e;return reactExports.createElement("rect",{x:n,y:i,ry:s,width:o,height:a,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function LineItem(e){var t,{option:r,lineItemProps:n}=e;if(reactExports.isValidElement(r))t=reactExports.cloneElement(r,n);else if("function"==typeof r)t=r(n);else{var i,{x1:o,y1:a,x2:s,y2:c,key:l}=n,u=null!==(i=svgPropertiesNoEvents(_objectWithoutProperties$5(n,_excluded$5)))&&void 0!==i?i:{},{offset:d}=u,p=_objectWithoutProperties$5(u,_excluded2$3);t=reactExports.createElement("line",_extends$6({},p,{x1:o,y1:a,x2:s,y2:c,fill:"none",key:l}))}return t}function HorizontalGridLines(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:o,yAxisId:a}=e,s=_objectWithoutProperties$5(e,_excluded3$3),c=i.map((e,i)=>{var o=_objectSpread$2(_objectSpread$2({},s),{},{x1:t,y1:e,x2:t+r,y2:e,key:"line-".concat(i),index:i});return reactExports.createElement(LineItem,{key:"line-".concat(i),option:n,lineItemProps:o})});return reactExports.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function VerticalGridLines(e){var{y:t,height:r,vertical:n=!0,verticalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:o,yAxisId:a}=e,s=_objectWithoutProperties$5(e,_excluded4$2),c=i.map((e,i)=>{var o=_objectSpread$2(_objectSpread$2({},s),{},{x1:e,y1:t,x2:e,y2:t+r,key:"line-".concat(i),index:i});return reactExports.createElement(LineItem,{option:n,lineItemProps:o,key:"line-".concat(i)})});return reactExports.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function HorizontalStripes(e){var{horizontalFill:t,fillOpacity:r,x:n,y:i,width:o,height:a,horizontalPoints:s,horizontal:c=!0}=e;if(!c||!t||!t.length||null==s)return null;var l=s.map(e=>Math.round(e+i-i)).sort((e,t)=>e-t);i!==l[0]&&l.unshift(0);var u=l.map((e,s)=>{var c=!l[s+1]?i+a-e:l[s+1]-e;if(c<=0)return null;var u=s%t.length;return reactExports.createElement("rect",{key:"react-".concat(s),y:e,x:n,height:c,width:o,stroke:"none",fill:t[u],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return reactExports.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function VerticalStripes(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:i,y:o,width:a,height:s,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var l=c.map(e=>Math.round(e+i-i)).sort((e,t)=>e-t);i!==l[0]&&l.unshift(0);var u=l.map((e,t)=>{var c=!l[t+1]?i+a-e:l[t+1]-e;if(c<=0)return null;var u=t%r.length;return reactExports.createElement("rect",{key:"react-".concat(t),x:e,y:o,width:c,height:s,stroke:"none",fill:r[u],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return reactExports.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var defaultVerticalCoordinatesGenerator=(e,t)=>{var{xAxis:r,width:n,height:i,offset:o}=e;return getCoordinatesOfGrid(getTicks(_objectSpread$2(_objectSpread$2(_objectSpread$2({},defaultCartesianAxisProps),r),{},{ticks:getTicksOfAxis(r),viewBox:{x:0,y:0,width:n,height:i}})),o.left,o.left+o.width,t)},defaultHorizontalCoordinatesGenerator=(e,t)=>{var{yAxis:r,width:n,height:i,offset:o}=e;return getCoordinatesOfGrid(getTicks(_objectSpread$2(_objectSpread$2(_objectSpread$2({},defaultCartesianAxisProps),r),{},{ticks:getTicksOfAxis(r),viewBox:{x:0,y:0,width:n,height:i}})),o.top,o.top+o.height,t)},defaultCartesianGridProps={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:DefaultZIndexes.grid};function CartesianGrid(e){var t=useChartWidth(),r=useChartHeight(),n=useOffsetInternal(),i=_objectSpread$2(_objectSpread$2({},resolveDefaultProps(e,defaultCartesianGridProps)),{},{x:isNumber(e.x)?e.x:n.left,y:isNumber(e.y)?e.y:n.top,width:isNumber(e.width)?e.width:n.width,height:isNumber(e.height)?e.height:n.height}),{xAxisId:o,yAxisId:a,x:s,y:c,width:l,height:u,syncWithTicks:d,horizontalValues:p,verticalValues:h}=i,m=useIsPanorama(),f=useAppSelector(e=>selectAxisPropsNeededForCartesianGridTicksGenerator(e,"xAxis",o,m)),x=useAppSelector(e=>selectAxisPropsNeededForCartesianGridTicksGenerator(e,"yAxis",a,m));if(!(isPositiveNumber(l)&&isPositiveNumber(u)&&isNumber(s)&&isNumber(c)))return null;var g=i.verticalCoordinatesGenerator||defaultVerticalCoordinatesGenerator,y=i.horizontalCoordinatesGenerator||defaultHorizontalCoordinatesGenerator,{horizontalPoints:b,verticalPoints:v}=i;if(!(b&&b.length||"function"!=typeof y)){var E=p&&p.length,w=y({yAxis:x?_objectSpread$2(_objectSpread$2({},x),{},{ticks:E?p:x.ticks}):void 0,width:null!=t?t:l,height:null!=r?r:u,offset:n},!!E||d);warn(Array.isArray(w),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof w,"]")),Array.isArray(w)&&(b=w)}if(!(v&&v.length||"function"!=typeof g)){var S=h&&h.length,j=g({xAxis:f?_objectSpread$2(_objectSpread$2({},f),{},{ticks:S?h:f.ticks}):void 0,width:null!=t?t:l,height:null!=r?r:u,offset:n},!!S||d);warn(Array.isArray(j),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof j,"]")),Array.isArray(j)&&(v=j)}return reactExports.createElement(ZIndexLayer,{zIndex:i.zIndex},reactExports.createElement("g",{className:"recharts-cartesian-grid"},reactExports.createElement(Background,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),reactExports.createElement(HorizontalStripes,_extends$6({},i,{horizontalPoints:b})),reactExports.createElement(VerticalStripes,_extends$6({},i,{verticalPoints:v})),reactExports.createElement(HorizontalGridLines,_extends$6({},i,{offset:n,horizontalPoints:b,xAxis:f,yAxis:x})),reactExports.createElement(VerticalGridLines,_extends$6({},i,{offset:n,verticalPoints:v,xAxis:f,yAxis:x}))))}CartesianGrid.displayName="CartesianGrid";var selectXAxisWithScale=(e,t,r,n)=>selectAxisWithScale(e,"xAxis",t,n),selectXAxisTicks=(e,t,r,n)=>selectTicksOfGraphicalItem(e,"xAxis",t,n),selectYAxisWithScale=(e,t,r,n)=>selectAxisWithScale(e,"yAxis",r,n),selectYAxisTicks=(e,t,r,n)=>selectTicksOfGraphicalItem(e,"yAxis",r,n),selectBandSize=createSelector([selectChartLayout,selectXAxisWithScale,selectYAxisWithScale,selectXAxisTicks,selectYAxisTicks],(e,t,r,n,i)=>isCategoricalAxis(e,"xAxis")?getBandSizeOfAxis(t,n,!1):getBandSizeOfAxis(r,i,!1)),pickLineId=(e,t,r,n,i)=>i;function isLineSettings(e){return"line"===e.type}var selectSynchronisedLineSettings=createSelector([selectUnfilteredCartesianItems,pickLineId],(e,t)=>e.filter(isLineSettings).find(e=>e.id===t)),selectLinePoints=createSelector([selectChartLayout,selectXAxisWithScale,selectYAxisWithScale,selectXAxisTicks,selectYAxisTicks,selectSynchronisedLineSettings,selectBandSize,selectChartDataWithIndexesIfNotInPanorama],(e,t,r,n,i,o,a,s)=>{var{chartData:c,dataStartIndex:l,dataEndIndex:u}=s;if(null!=o&&null!=t&&null!=r&&null!=n&&null!=i&&0!==n.length&&0!==i.length&&null!=a){var d,{dataKey:p,data:h}=o;if(null!=(d=null!=h&&h.length>0?h:null==c?void 0:c.slice(l,u+1)))return computeLinePoints({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:i,dataKey:p,bandSize:a,displayedData:d})}});function getRadiusAndStrokeWidthFromDot(e){var t=svgPropertiesNoEventsFromUnknown(e);if(null!=t){var{r:r,strokeWidth:n}=t,i=Number(r),o=Number(n);return(Number.isNaN(i)||i<0)&&(i=3),(Number.isNaN(o)||o<0)&&(o=2),{r:i,strokeWidth:o}}return{r:3,strokeWidth:2}}var _excluded$4=["id"],_excluded2$2=["type","layout","connectNulls","needClip","shape"],_excluded3$2=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$5.apply(null,arguments)}function ownKeys$1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$1(Object(r),!0).forEach(function(t){_defineProperty$1(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$1(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty$1(e,t,r){return(t=_toPropertyKey$1(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey$1(e){var t=_toPrimitive$1(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive$1(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _objectWithoutProperties$4(e,t){if(null==e)return{};var r,n,i=_objectWithoutPropertiesLoose$4(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _objectWithoutPropertiesLoose$4(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}var computeLegendPayloadFromAreaData=e=>{var{dataKey:t,name:r,stroke:n,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:n,value:getTooltipNameProp(r,t),payload:e}]};function getTooltipEntrySettings(e){var{dataKey:t,data:r,stroke:n,strokeWidth:i,fill:o,name:a,hide:s,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:o,dataKey:t,nameKey:void 0,name:getTooltipNameProp(a,t),hide:s,type:e.tooltipType,color:e.stroke,unit:c}}}var generateSimpleStrokeDasharray=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function repeat(e,t){for(var r=e.length%2!=0?[...e,0]:e,n=[],i=0;i<t;++i)n=[...n,...r];return n}var getStrokeDasharray=(e,t,r)=>{var n=r.reduce((e,t)=>e+t);if(!n)return generateSimpleStrokeDasharray(t,e);for(var i=Math.floor(e/n),o=e%n,a=t-e,s=[],c=0,l=0;c<r.length;l+=r[c],++c)if(l+r[c]>o){s=[...r.slice(0,c),o-l];break}var u=s.length%2==0?[0,a]:[a];return[...repeat(r,i),...s,...u].map(e=>"".concat(e,"px")).join(", ")};function LineDotsWrapper(e){var{clipPathId:t,points:r,props:n}=e,{dot:i,dataKey:o,needClip:a}=n,{id:s}=n,c=svgPropertiesNoEvents(_objectWithoutProperties$4(n,_excluded$4));return reactExports.createElement(Dots,{points:r,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:o,baseProps:c,needClip:a,clipPathId:t})}function LineLabelListProvider(e){var{showLabels:t,children:r,points:n}=e,i=reactExports.useMemo(()=>null==n?void 0:n.map(e=>{var t,r,n={x:null!==(t=e.x)&&void 0!==t?t:0,y:null!==(r=e.y)&&void 0!==r?r:0,width:0,lowerWidth:0,upperWidth:0,height:0};return _objectSpread$1(_objectSpread$1({},n),{},{value:e.value,payload:e.payload,viewBox:n,parentViewBox:void 0,fill:void 0})}),[n]);return reactExports.createElement(CartesianLabelListContextProvider,{value:t?i:void 0},r)}function StaticCurve(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:i,props:o}=e,{type:a,layout:s,connectNulls:c,needClip:l,shape:u}=o,d=_objectSpread$1(_objectSpread$1({},svgPropertiesAndEvents(_objectWithoutProperties$4(o,_excluded2$2))),{},{fill:"none",className:"recharts-line-curve",clipPath:l?"url(#clipPath-".concat(t,")"):void 0,points:n,type:a,layout:s,connectNulls:c,strokeDasharray:null!=i?i:o.strokeDasharray});return reactExports.createElement(reactExports.Fragment,null,(null==n?void 0:n.length)>1&&reactExports.createElement(Shape,_extends$5({shapeType:"curve",option:u},d,{pathRef:r})),reactExports.createElement(LineDotsWrapper,{points:n,clipPathId:t,props:o}))}function getTotalLength(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(t){return 0}}function CurveWithAnimation(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:i,longestAnimatedLengthRef:o}=e,{points:a,strokeDasharray:s,isAnimationActive:c,animationBegin:l,animationDuration:u,animationEasing:d,animateNewValues:p,width:h,height:m,onAnimationEnd:f,onAnimationStart:x}=r,g=i.current,y=useAnimationId(r,"recharts-line-"),[b,v]=reactExports.useState(!1),E=!b,w=reactExports.useCallback(()=>{"function"==typeof f&&f(),v(!1)},[f]),S=reactExports.useCallback(()=>{"function"==typeof x&&x(),v(!0)},[x]),j=getTotalLength(n.current),A=o.current;return reactExports.createElement(LineLabelListProvider,{points:a,showLabels:E},r.children,reactExports.createElement(JavascriptAnimate,{animationId:y,begin:l,duration:u,isActive:c,easing:d,onAnimationEnd:w,onAnimationStart:S,key:y},e=>{var l,u=interpolate$2(A,j+A,e),d=Math.min(u,j);if(c)if(s){var f="".concat(s).split(/[,\s]+/gim).map(e=>parseFloat(e));l=getStrokeDasharray(d,j,f)}else l=generateSimpleStrokeDasharray(j,d);else l=null==s?void 0:String(s);if(g){var x=g.length/a.length,y=1===e?a:a.map((t,r)=>{var n=Math.floor(r*x);if(g[n]){var i=g[n];return _objectSpread$1(_objectSpread$1({},t),{},{x:interpolate$2(i.x,t.x,e),y:interpolate$2(i.y,t.y,e)})}return _objectSpread$1(_objectSpread$1({},t),{},p?{x:interpolate$2(2*h,t.x,e),y:interpolate$2(m/2,t.y,e)}:{x:t.x,y:t.y})});return i.current=y,reactExports.createElement(StaticCurve,{props:r,points:y,clipPathId:t,pathRef:n,strokeDasharray:l})}return e>0&&j>0&&(i.current=a,o.current=d),reactExports.createElement(StaticCurve,{props:r,points:a,clipPathId:t,pathRef:n,strokeDasharray:l})}),reactExports.createElement(LabelListFromLabelProp,{label:r.label}))}function RenderCurve(e){var{clipPathId:t,props:r}=e,n=reactExports.useRef(null),i=reactExports.useRef(0),o=reactExports.useRef(null);return reactExports.createElement(CurveWithAnimation,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:i,pathRef:o})}var errorBarDataPointFormatter=(e,t)=>{var r,n;return{x:null!==(r=e.x)&&void 0!==r?r:void 0,y:null!==(n=e.y)&&void 0!==n?n:void 0,value:e.value,errorVal:getValueByDataKey(e.payload,t)}};class LineWithState extends reactExports.Component{render(){var{hide:e,dot:t,points:r,className:n,xAxisId:i,yAxisId:o,top:a,left:s,width:c,height:l,id:u,needClip:d,zIndex:p}=this.props;if(e)return null;var h=clsx("recharts-line",n),m=u,{r:f,strokeWidth:x}=getRadiusAndStrokeWidthFromDot(t),g=isClipDot(t),y=2*f+x;return reactExports.createElement(ZIndexLayer,{zIndex:p},reactExports.createElement(Layer,{className:h},d&&reactExports.createElement("defs",null,reactExports.createElement(GraphicalItemClipPath,{clipPathId:m,xAxisId:i,yAxisId:o}),!g&&reactExports.createElement("clipPath",{id:"clipPath-dots-".concat(m)},reactExports.createElement("rect",{x:s-y/2,y:a-y/2,width:c+y,height:l+y}))),reactExports.createElement(SetErrorBarContext,{xAxisId:i,yAxisId:o,data:r,dataPointFormatter:errorBarDataPointFormatter,errorBarOffset:0},reactExports.createElement(RenderCurve,{props:this.props,clipPathId:m}))),reactExports.createElement(ActivePoints,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var defaultLineProps={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Global.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:DefaultZIndexes.line};function LineImpl(e){var t=resolveDefaultProps(e,defaultLineProps),{activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:o,animationEasing:a,connectNulls:s,dot:c,hide:l,isAnimationActive:u,label:d,legendType:p,xAxisId:h,yAxisId:m,id:f}=t,x=_objectWithoutProperties$4(t,_excluded3$2),{needClip:g}=useNeedsClip(h,m),y=usePlotArea(),b=useChartLayout(),v=useIsPanorama(),E=useAppSelector(e=>selectLinePoints(e,h,m,v,f));if("horizontal"!==b&&"vertical"!==b||null==E||null==y)return null;var{height:w,width:S,x:j,y:A}=y;return reactExports.createElement(LineWithState,_extends$5({},x,{id:f,connectNulls:s,dot:c,activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:o,animationEasing:a,isAnimationActive:u,hide:l,label:d,legendType:p,xAxisId:h,yAxisId:m,points:E,layout:b,height:w,width:S,left:j,top:A,needClip:g}))}function computeLinePoints(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:o,dataKey:a,bandSize:s,displayedData:c}=e;return c.map((e,c)=>{var l=getValueByDataKey(e,a);if("horizontal"===t)return{x:getCateCoordinateOfLine({axis:r,ticks:i,bandSize:s,entry:e,index:c}),y:isNullish$1(l)?null:n.scale(l),value:l,payload:e};var u=isNullish$1(l)?null:r.scale(l),d=getCateCoordinateOfLine({axis:n,ticks:o,bandSize:s,entry:e,index:c});return null==u||null==d?null:{x:u,y:d,value:l,payload:e}}).filter(Boolean)}function LineFn(e){var t=resolveDefaultProps(e,defaultLineProps),r=useIsPanorama();return reactExports.createElement(RegisterGraphicalItemId,{id:t.id,type:"line"},e=>reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(SetLegendPayload,{legendPayload:computeLegendPayloadFromAreaData(t)}),reactExports.createElement(SetTooltipEntrySettings,{fn:getTooltipEntrySettings,args:t}),reactExports.createElement(SetCartesianGraphicalItem,{type:"line",id:e,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),reactExports.createElement(LineImpl,_extends$5({},t,{id:e}))))}var Line=reactExports.memo(LineFn);Line.displayName="Line";var _excluded$3=["dangerouslySetInnerHTML","ticks"],_excluded2$1=["id"],_excluded3$1=["domain"],_excluded4$1=["domain"];function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$4.apply(null,arguments)}function _objectWithoutProperties$3(e,t){if(null==e)return{};var r,n,i=_objectWithoutPropertiesLoose$3(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _objectWithoutPropertiesLoose$3(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}function SetXAxisSettings(e){var t=useAppDispatch();return reactExports.useLayoutEffect(()=>(t(addXAxis(e)),()=>{t(removeXAxis(e))}),[e,t]),null}var XAxisImpl=e=>{var{xAxisId:t,className:r}=e,n=useAppSelector(selectAxisViewBox),i=useIsPanorama(),o="xAxis",a=useAppSelector(e=>selectAxisScale(e,o,t,i)),s=useAppSelector(e=>selectTicksOfAxis(e,o,t,i)),c=useAppSelector(e=>selectXAxisSize(e,t)),l=useAppSelector(e=>selectXAxisPosition(e,t)),u=useAppSelector(e=>selectXAxisSettingsNoDefaults(e,t));if(null==c||null==l||null==u)return null;var{dangerouslySetInnerHTML:d,ticks:p}=e,h=_objectWithoutProperties$3(e,_excluded$3),{id:m}=u,f=_objectWithoutProperties$3(u,_excluded2$1);return reactExports.createElement(CartesianAxis,_extends$4({},h,f,{scale:a,x:l.x,y:l.y,width:c.width,height:c.height,className:clsx("recharts-".concat(o," ").concat(o),r),viewBox:n,ticks:s,axisType:o}))},xAxisDefaultProps={allowDataOverflow:implicitXAxis.allowDataOverflow,allowDecimals:implicitXAxis.allowDecimals,allowDuplicatedCategory:implicitXAxis.allowDuplicatedCategory,height:implicitXAxis.height,hide:!1,mirror:implicitXAxis.mirror,orientation:implicitXAxis.orientation,padding:implicitXAxis.padding,reversed:implicitXAxis.reversed,scale:implicitXAxis.scale,tickCount:implicitXAxis.tickCount,type:implicitXAxis.type,xAxisId:0},XAxisSettingsDispatcher=e=>{var t,r,n,i,o,a=resolveDefaultProps(e,xAxisDefaultProps);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(SetXAxisSettings,{interval:null!==(t=a.interval)&&void 0!==t?t:"preserveEnd",id:a.xAxisId,scale:a.scale,type:a.type,padding:a.padding,allowDataOverflow:a.allowDataOverflow,domain:a.domain,dataKey:a.dataKey,allowDuplicatedCategory:a.allowDuplicatedCategory,allowDecimals:a.allowDecimals,tickCount:a.tickCount,includeHidden:null!==(r=a.includeHidden)&&void 0!==r&&r,reversed:a.reversed,ticks:a.ticks,height:a.height,orientation:a.orientation,mirror:a.mirror,hide:a.hide,unit:a.unit,name:a.name,angle:null!==(n=a.angle)&&void 0!==n?n:0,minTickGap:null!==(i=a.minTickGap)&&void 0!==i?i:5,tick:null===(o=a.tick)||void 0===o||o,tickFormatter:a.tickFormatter}),reactExports.createElement(XAxisImpl,a))},XAxisMemoComparator=(e,t)=>{var{domain:r}=e,n=_objectWithoutProperties$3(e,_excluded3$1),{domain:i}=t;return!!shallowEqual(n,_objectWithoutProperties$3(t,_excluded4$1))&&(Array.isArray(r)&&2===r.length&&Array.isArray(i)&&2===i.length?r[0]===i[0]&&r[1]===i[1]:shallowEqual({domain:r},{domain:i}))},XAxis=reactExports.memo(XAxisSettingsDispatcher,XAxisMemoComparator);XAxis.displayName="XAxis";var _excluded$2=["dangerouslySetInnerHTML","ticks"],_excluded2=["id"],_excluded3=["domain"],_excluded4=["domain"];function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$3.apply(null,arguments)}function _objectWithoutProperties$2(e,t){if(null==e)return{};var r,n,i=_objectWithoutPropertiesLoose$2(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _objectWithoutPropertiesLoose$2(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}function SetYAxisSettings(e){var t=useAppDispatch();return reactExports.useLayoutEffect(()=>(t(addYAxis(e)),()=>{t(removeYAxis(e))}),[e,t]),null}var YAxisImpl=e=>{var{yAxisId:t,className:r,width:n,label:i}=e,o=reactExports.useRef(null),a=reactExports.useRef(null),s=useAppSelector(selectAxisViewBox),c=useIsPanorama(),l=useAppDispatch(),u="yAxis",d=useAppSelector(e=>selectAxisScale(e,u,t,c)),p=useAppSelector(e=>selectYAxisSize(e,t)),h=useAppSelector(e=>selectYAxisPosition(e,t)),m=useAppSelector(e=>selectTicksOfAxis(e,u,t,c)),f=useAppSelector(e=>selectYAxisSettingsNoDefaults(e,t));if(reactExports.useLayoutEffect(()=>{if("auto"===n&&p&&!isLabelContentAFunction(i)&&!reactExports.isValidElement(i)&&null!=f){var e=o.current;if(e){var r=e.getCalculatedWidth();Math.round(p.width)!==Math.round(r)&&l(updateYAxisWidth({id:t,width:r}))}}},[m,p,l,i,t,n,f]),null==p||null==h||null==f)return null;var{dangerouslySetInnerHTML:x,ticks:g}=e,y=_objectWithoutProperties$2(e,_excluded$2),{id:b}=f,v=_objectWithoutProperties$2(f,_excluded2);return reactExports.createElement(CartesianAxis,_extends$3({},y,v,{ref:o,labelRef:a,scale:d,x:h.x,y:h.y,tickTextProps:"auto"===n?{width:void 0}:{width:n},width:p.width,height:p.height,className:clsx("recharts-".concat(u," ").concat(u),r),viewBox:s,ticks:m,axisType:u}))},yAxisDefaultProps={allowDataOverflow:implicitYAxis.allowDataOverflow,allowDecimals:implicitYAxis.allowDecimals,allowDuplicatedCategory:implicitYAxis.allowDuplicatedCategory,hide:!1,mirror:implicitYAxis.mirror,orientation:implicitYAxis.orientation,padding:implicitYAxis.padding,reversed:implicitYAxis.reversed,scale:implicitYAxis.scale,tickCount:implicitYAxis.tickCount,type:implicitYAxis.type,width:implicitYAxis.width,yAxisId:0},YAxisSettingsDispatcher=e=>{var t,r,n,i,o,a=resolveDefaultProps(e,yAxisDefaultProps);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(SetYAxisSettings,{interval:null!==(t=a.interval)&&void 0!==t?t:"preserveEnd",id:a.yAxisId,scale:a.scale,type:a.type,domain:a.domain,allowDataOverflow:a.allowDataOverflow,dataKey:a.dataKey,allowDuplicatedCategory:a.allowDuplicatedCategory,allowDecimals:a.allowDecimals,tickCount:a.tickCount,padding:a.padding,includeHidden:null!==(r=a.includeHidden)&&void 0!==r&&r,reversed:a.reversed,ticks:a.ticks,width:a.width,orientation:a.orientation,mirror:a.mirror,hide:a.hide,unit:a.unit,name:a.name,angle:null!==(n=a.angle)&&void 0!==n?n:0,minTickGap:null!==(i=a.minTickGap)&&void 0!==i?i:5,tick:null===(o=a.tick)||void 0===o||o,tickFormatter:a.tickFormatter}),reactExports.createElement(YAxisImpl,a))},YAxisMemoComparator=(e,t)=>{var{domain:r}=e,n=_objectWithoutProperties$2(e,_excluded3),{domain:i}=t;return!!shallowEqual(n,_objectWithoutProperties$2(t,_excluded4))&&(Array.isArray(r)&&2===r.length&&Array.isArray(i)&&2===i.length?r[0]===i[0]&&r[1]===i[1]:shallowEqual({domain:r},{domain:i}))},YAxis=reactExports.memo(YAxisSettingsDispatcher,YAxisMemoComparator);YAxis.displayName="YAxis";var useSyncExternalStoreWithSelector_production={},React=reactExports;
/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function is$1(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var objectIs="function"==typeof Object.is?Object.is:is$1,useSyncExternalStore=React.useSyncExternalStore,useRef=React.useRef,useEffect=React.useEffect,useMemo=React.useMemo,useDebugValue=React.useDebugValue;function defaultNoopBatch(e){e()}function createListenerCollection(){let e=null,t=null;return{clear(){e=null,t=null},notify(){defaultNoopBatch(()=>{let t=e;for(;t;)t.callback(),t=t.next})},get(){const t=[];let r=e;for(;r;)t.push(r),r=r.next;return t},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){n&&null!==e&&(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}useSyncExternalStoreWithSelector_production.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var o=useRef(null);if(null===o.current){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=useMemo(function(){function e(e){if(!c){if(c=!0,o=e,e=n(e),void 0!==i&&a.hasValue){var t=a.value;if(i(t,e))return s=t}return s=e}if(t=s,objectIs(o,e))return t;var r=n(e);return void 0!==i&&i(t,r)?(o=e,t):(o=e,s=r)}var o,s,c=!1,l=void 0===r?null:r;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]},[t,r,n,i]);var s=useSyncExternalStore(e,o[0],o[1]);return useEffect(function(){a.hasValue=!0,a.value=s},[s]),useDebugValue(s),s};var nullListeners={notify(){},get:()=>[]};function createSubscription(e,t){let r,n=nullListeners,i=0,o=!1;function a(){l.onStateChange&&l.onStateChange()}function s(){i++,r||(r=e.subscribe(a),n=createListenerCollection())}function c(){i--,r&&0===i&&(r(),r=void 0,n.clear(),n=nullListeners)}const l={addNestedSub:function(e){s();const t=n.subscribe(e);let r=!1;return()=>{r||(r=!0,t(),c())}},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:a,isSubscribed:function(){return o},trySubscribe:function(){o||(o=!0,s())},tryUnsubscribe:function(){o&&(o=!1,c())},getListeners:()=>n};return l}var canUseDOM=()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),isDOM=canUseDOM(),isRunningInReactNative=()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product,isReactNative=isRunningInReactNative(),getUseIsomorphicLayoutEffect=()=>isDOM||isReactNative?reactExports.useLayoutEffect:reactExports.useEffect,useIsomorphicLayoutEffect$1=getUseIsomorphicLayoutEffect(),ContextKey=Symbol.for("react-redux-context"),gT="undefined"!=typeof globalThis?globalThis:{};function getContext(){if(!reactExports.createContext)return{};const e=gT[ContextKey]??(gT[ContextKey]=new Map);let t=e.get(reactExports.createContext);return t||(t=reactExports.createContext(null),e.set(reactExports.createContext,t)),t}var ReactReduxContext=getContext();function Provider$2(e){const{children:t,context:r,serverState:n,store:i}=e,o=reactExports.useMemo(()=>{const e=createSubscription(i);return{store:i,subscription:e,getServerState:n?()=>n:void 0}},[i,n]),a=reactExports.useMemo(()=>i.getState(),[i]);useIsomorphicLayoutEffect$1(()=>{const{subscription:e}=o;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),a!==i.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[o,a]);const s=r||ReactReduxContext;return reactExports.createElement(s.Provider,{value:o},t)}var Provider_default=Provider$2,pickChartPointer=(e,t)=>t,selectActivePropsFromChartPointer=createSelector([pickChartPointer,selectChartLayout,selectPolarViewBox,selectTooltipAxisType,selectTooltipAxisRangeWithReverse,selectTooltipAxisTicks,selectOrderedTooltipTicks,selectChartOffsetInternal],combineActiveProps),getChartPointer=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},mouseClickAction=createAction("mouseClick"),mouseClickMiddleware=createListenerMiddleware();mouseClickMiddleware.startListening({actionCreator:mouseClickAction,effect:(e,t)=>{var r=e.payload,n=selectActivePropsFromChartPointer(t.getState(),getChartPointer(r));null!=(null==n?void 0:n.activeIndex)&&t.dispatch(setMouseClickAxisIndex({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var mouseMoveAction=createAction("mouseMove"),mouseMoveMiddleware=createListenerMiddleware();mouseMoveMiddleware.startListening({actionCreator:mouseMoveAction,effect:(e,t)=>{var r=e.payload,n=t.getState(),i=selectTooltipEventType$1(n,n.tooltip.settings.shared),o=selectActivePropsFromChartPointer(n,getChartPointer(r));"axis"===i&&(null!=(null==o?void 0:o.activeIndex)?t.dispatch(setMouseOverAxisIndex({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(mouseLeaveChart()))}});var initialState={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0},rootPropsSlice=createSlice({name:"rootProps",initialState:initialState,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=null!==(r=t.payload.barGap)&&void 0!==r?r:initialState.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue}}}),rootPropsReducer=rootPropsSlice.reducer,{updateOptions:updateOptions}=rootPropsSlice.actions,polarOptionsSlice=createSlice({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:updatePolarOptions}=polarOptionsSlice.actions,polarOptionsReducer=polarOptionsSlice.reducer,keyDownAction=createAction("keyDown"),focusAction=createAction("focus"),keyboardEventsMiddleware=createListenerMiddleware();keyboardEventsMiddleware.startListening({actionCreator:keyDownAction,effect:(e,t)=>{var r=t.getState();if(!1!==r.rootProps.accessibilityLayer){var{keyboardInteraction:n}=r.tooltip,i=e.payload;if("ArrowRight"===i||"ArrowLeft"===i||"Enter"===i){var o=Number(combineActiveTooltipIndex(n,selectTooltipDisplayedData(r))),a=selectTooltipAxisTicks(r);if("Enter"!==i){var s=o+("ArrowRight"===i?1:-1)*("left-to-right"===selectChartDirection(r)?1:-1);if(!(null==a||s>=a.length||s<0)){var c=selectCoordinateForDefaultIndex(r,"axis","hover",String(s));t.dispatch(setKeyboardInteraction({active:!0,activeIndex:s.toString(),activeDataKey:void 0,activeCoordinate:c}))}}else{var l=selectCoordinateForDefaultIndex(r,"axis","hover",String(n.index));t.dispatch(setKeyboardInteraction({active:!n.active,activeIndex:n.index,activeDataKey:n.dataKey,activeCoordinate:l}))}}}}}),keyboardEventsMiddleware.startListening({actionCreator:focusAction,effect:(e,t)=>{var r=t.getState();if(!1!==r.rootProps.accessibilityLayer){var{keyboardInteraction:n}=r.tooltip;if(!n.active&&null==n.index){var i=selectCoordinateForDefaultIndex(r,"axis","hover",String("0"));t.dispatch(setKeyboardInteraction({activeDataKey:void 0,active:!0,activeIndex:"0",activeCoordinate:i}))}}}});var externalEventAction=createAction("externalEvent"),externalEventsMiddleware=createListenerMiddleware();externalEventsMiddleware.startListening({actionCreator:externalEventAction,effect:(e,t)=>{if(null!=e.payload.handler){var r=t.getState(),n={activeCoordinate:selectActiveTooltipCoordinate(r),activeDataKey:selectActiveTooltipDataKey(r),activeIndex:selectActiveTooltipIndex(r),activeLabel:selectActiveLabel$1(r),activeTooltipIndex:selectActiveTooltipIndex(r),isTooltipActive:selectIsTooltipActive$1(r)};e.payload.handler(n,e.payload.reactEvent)}}});var selectAllTooltipPayloadConfiguration=createSelector([selectTooltipState],e=>e.tooltipItemPayloads),selectTooltipCoordinate=createSelector([selectAllTooltipPayloadConfiguration,selectTooltipPayloadSearcher,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var i=e.find(e=>e.settings.dataKey===n);if(null!=i){var{positions:o}=i;if(null!=o)return t(o,r)}}),touchEventAction=createAction("touchMove"),touchEventMiddleware=createListenerMiddleware();touchEventMiddleware.startListening({actionCreator:touchEventAction,effect:(e,t)=>{var r=e.payload;if(null!=r.touches&&0!==r.touches.length){var n=t.getState(),i=selectTooltipEventType$1(n,n.tooltip.settings.shared);if("axis"===i){var o=selectActivePropsFromChartPointer(n,getChartPointer({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));null!=(null==o?void 0:o.activeIndex)&&t.dispatch(setMouseOverAxisIndex({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if("item"===i){var a,s=r.touches[0];if(null==document.elementFromPoint)return;var c=document.elementFromPoint(s.clientX,s.clientY);if(!c||!c.getAttribute)return;var l=c.getAttribute(DATA_ITEM_INDEX_ATTRIBUTE_NAME),u=null!==(a=c.getAttribute(DATA_ITEM_DATAKEY_ATTRIBUTE_NAME))&&void 0!==a?a:void 0,d=selectTooltipCoordinate(t.getState(),l,u);t.dispatch(setActiveMouseOverItemIndex({activeDataKey:u,activeIndex:l,activeCoordinate:d}))}}}});var rootReducer=combineReducers({brush:brushReducer,cartesianAxis:cartesianAxisReducer,chartData:chartDataReducer,errorBars:errorBarReducer,graphicalItems:graphicalItemsReducer,layout:chartLayoutReducer,legend:legendReducer,options:optionsReducer,polarAxis:polarAxisReducer,polarOptions:polarOptionsReducer,referenceElements:referenceElementsReducer,rootProps:rootPropsReducer,tooltip:tooltipReducer,zIndex:zIndexReducer}),createRechartsStore=function(e){return configureStore({reducer:rootReducer,preloadedState:e,middleware:e=>e({serializableCheck:!1}).concat([mouseClickMiddleware.middleware,mouseMoveMiddleware.middleware,keyboardEventsMiddleware.middleware,externalEventsMiddleware.middleware,touchEventMiddleware.middleware]),enhancers:e=>{var t=e;return"function"==typeof e&&(t=e()),t.concat(autoBatchEnhancer({type:"raf"}))},devTools:Global.devToolsEnabled})};function RechartsStoreProvider(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,i=useIsPanorama(),o=reactExports.useRef(null);if(i)return r;null==o.current&&(o.current=createRechartsStore(t));var a=RechartsReduxContext;return reactExports.createElement(Provider_default,{context:a,store:o.current},r)}function ReportMainChartProps(e){var{layout:t,margin:r}=e,n=useAppDispatch(),i=useIsPanorama();return reactExports.useEffect(()=>{i||(n(setLayout(t)),n(setMargin(r)))},[n,i,t,r]),null}function ReportChartProps(e){var t=useAppDispatch();return reactExports.useEffect(()=>{t(updateOptions(e))},[t,e]),null}function ZIndexSvgPortal(e){var{zIndex:t,isPanorama:r}=e,n=useUniqueId("".concat(r?"recharts-zindex-panorama-":"recharts-zindex-").concat(t)),i=useAppDispatch();return reactExports.useLayoutEffect(()=>(i(registerZIndexPortalId({zIndex:t,elementId:n,isPanorama:r})),()=>{i(unregisterZIndexPortalId({zIndex:t,isPanorama:r}))}),[i,t,n,r]),reactExports.createElement("g",{id:n})}function AllZIndexPortals(e){var{children:t,isPanorama:r}=e,n=useAppSelector(selectAllRegisteredZIndexes);if(!n||0===n.length)return t;var i=n.filter(e=>e<0),o=n.filter(e=>e>0);return reactExports.createElement(reactExports.Fragment,null,i.map(e=>reactExports.createElement(ZIndexSvgPortal,{key:e,zIndex:e,isPanorama:r})),t,o.map(e=>reactExports.createElement(ZIndexSvgPortal,{key:e,zIndex:e,isPanorama:r})))}var _excluded$1=["children"];function _objectWithoutProperties$1(e,t){if(null==e)return{};var r,n,i=_objectWithoutPropertiesLoose$1(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _objectWithoutPropertiesLoose$1(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$2.apply(null,arguments)}var FULL_WIDTH_AND_HEIGHT={width:"100%",height:"100%",display:"block"},MainChartSurface=reactExports.forwardRef((e,t)=>{var r=useChartWidth(),n=useChartHeight(),i=useAccessibilityLayer();if(!isPositiveNumber(r)||!isPositiveNumber(n))return null;var o,a,{children:s,otherAttributes:c,title:l,desc:u}=e;return null!=c&&(o="number"==typeof c.tabIndex?c.tabIndex:i?0:void 0,a="string"==typeof c.role?c.role:i?"application":void 0),reactExports.createElement(Surface,_extends$2({},c,{title:l,desc:u,role:a,tabIndex:o,width:r,height:n,style:FULL_WIDTH_AND_HEIGHT,ref:t}),s)}),BrushPanoramaSurface=e=>{var{children:t}=e,r=useAppSelector(selectBrushDimensions);if(!r)return null;var{width:n,height:i,y:o,x:a}=r;return reactExports.createElement(Surface,{width:n,height:i,x:a,y:o},t)},RootSurface=reactExports.forwardRef((e,t)=>{var{children:r}=e,n=_objectWithoutProperties$1(e,_excluded$1);return useIsPanorama()?reactExports.createElement(BrushPanoramaSurface,null,reactExports.createElement(AllZIndexPortals,{isPanorama:!0},r)):reactExports.createElement(MainChartSurface,_extends$2({ref:t},n),reactExports.createElement(AllZIndexPortals,{isPanorama:!1},r))});function useReportScale(){var e=useAppDispatch(),[t,r]=reactExports.useState(null),n=useAppSelector(selectContainerScale);return reactExports.useEffect(()=>{if(null!=t){var r=t.getBoundingClientRect().width/t.offsetWidth;isWellBehavedNumber(r)&&r!==n&&e(setScale(r))}},[t,e,n]),r}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends$1.apply(null,arguments)}var EventSynchronizer=()=>(useSynchronisedEventsFromOtherCharts(),null);function getNumberOrZero(e){if("number"==typeof e)return e;if("string"==typeof e){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var ResponsiveDiv=reactExports.forwardRef((e,t)=>{var r,n,i=reactExports.useRef(null),[o,a]=reactExports.useState({containerWidth:getNumberOrZero(null===(r=e.style)||void 0===r?void 0:r.width),containerHeight:getNumberOrZero(null===(n=e.style)||void 0===n?void 0:n.height)}),s=reactExports.useCallback((e,t)=>{a(r=>{var n=Math.round(e),i=Math.round(t);return r.containerWidth===n&&r.containerHeight===i?r:{containerWidth:n,containerHeight:i}})},[]),c=reactExports.useCallback(e=>{if("function"==typeof t&&t(e),null!=e&&"undefined"!=typeof ResizeObserver){var{width:r,height:n}=e.getBoundingClientRect();s(r,n);var o=new ResizeObserver(e=>{var{width:t,height:r}=e[0].contentRect;s(t,r)});o.observe(e),i.current=o}},[t,s]);return reactExports.useEffect(()=>()=>{var e=i.current;null!=e&&e.disconnect()},[s]),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(ReportChartSize,{width:o.containerWidth,height:o.containerHeight}),reactExports.createElement("div",_extends$1({ref:c},e)))}),ReadSizeOnceDiv=reactExports.forwardRef((e,t)=>{var{width:r,height:n}=e,[i,o]=reactExports.useState({containerWidth:getNumberOrZero(r),containerHeight:getNumberOrZero(n)}),a=reactExports.useCallback((e,t)=>{o(r=>{var n=Math.round(e),i=Math.round(t);return r.containerWidth===n&&r.containerHeight===i?r:{containerWidth:n,containerHeight:i}})},[]),s=reactExports.useCallback(e=>{if("function"==typeof t&&t(e),null!=e){var{width:r,height:n}=e.getBoundingClientRect();a(r,n)}},[t,a]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(ReportChartSize,{width:i.containerWidth,height:i.containerHeight}),reactExports.createElement("div",_extends$1({ref:s},e)))}),StaticDiv=reactExports.forwardRef((e,t)=>{var{width:r,height:n}=e;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(ReportChartSize,{width:r,height:n}),reactExports.createElement("div",_extends$1({ref:t},e)))}),NonResponsiveDiv=reactExports.forwardRef((e,t)=>{var{width:r,height:n}=e;return isPercent(r)||isPercent(n)?reactExports.createElement(ReadSizeOnceDiv,_extends$1({},e,{ref:t})):reactExports.createElement(StaticDiv,_extends$1({},e,{ref:t}))});function getWrapperDivComponent(e){return!0===e?ResponsiveDiv:NonResponsiveDiv}var RechartsWrapper=reactExports.forwardRef((e,t)=>{var{children:r,className:n,height:i,onClick:o,onContextMenu:a,onDoubleClick:s,onMouseDown:c,onMouseEnter:l,onMouseLeave:u,onMouseMove:d,onMouseUp:p,onTouchEnd:h,onTouchMove:m,onTouchStart:f,style:x,width:g,responsive:y,dispatchTouchEvents:b=!0}=e,v=reactExports.useRef(null),E=useAppDispatch(),[w,S]=reactExports.useState(null),[j,A]=reactExports.useState(null),T=useReportScale(),P=useResponsiveContainerContext(),$=(null==P?void 0:P.width)>0?P.width:g,R=(null==P?void 0:P.height)>0?P.height:i,k=reactExports.useCallback(e=>{T(e),"function"==typeof t&&t(e),S(e),A(e),null!=e&&(v.current=e)},[T,t,S,A]),C=reactExports.useCallback(e=>{E(mouseClickAction(e)),E(externalEventAction({handler:o,reactEvent:e}))},[E,o]),N=reactExports.useCallback(e=>{E(mouseMoveAction(e)),E(externalEventAction({handler:l,reactEvent:e}))},[E,l]),D=reactExports.useCallback(e=>{E(mouseLeaveChart()),E(externalEventAction({handler:u,reactEvent:e}))},[E,u]),_=reactExports.useCallback(e=>{E(mouseMoveAction(e)),E(externalEventAction({handler:d,reactEvent:e}))},[E,d]),O=reactExports.useCallback(()=>{E(focusAction())},[E]),I=reactExports.useCallback(e=>{E(keyDownAction(e.key))},[E]),M=reactExports.useCallback(e=>{E(externalEventAction({handler:a,reactEvent:e}))},[E,a]),L=reactExports.useCallback(e=>{E(externalEventAction({handler:s,reactEvent:e}))},[E,s]),B=reactExports.useCallback(e=>{E(externalEventAction({handler:c,reactEvent:e}))},[E,c]),F=reactExports.useCallback(e=>{E(externalEventAction({handler:p,reactEvent:e}))},[E,p]),V=reactExports.useCallback(e=>{E(externalEventAction({handler:f,reactEvent:e}))},[E,f]),U=reactExports.useCallback(e=>{b&&E(touchEventAction(e)),E(externalEventAction({handler:m,reactEvent:e}))},[E,b,m]),z=reactExports.useCallback(e=>{E(externalEventAction({handler:h,reactEvent:e}))},[E,h]),W=getWrapperDivComponent(y);return reactExports.createElement(TooltipPortalContext.Provider,{value:w},reactExports.createElement(LegendPortalContext.Provider,{value:j},reactExports.createElement(W,{width:null!=$?$:null==x?void 0:x.width,height:null!=R?R:null==x?void 0:x.height,className:clsx("recharts-wrapper",n),style:_objectSpread({position:"relative",cursor:"default",width:$,height:R},x),onClick:C,onContextMenu:M,onDoubleClick:L,onFocus:O,onKeyDown:I,onMouseDown:B,onMouseEnter:N,onMouseLeave:D,onMouseMove:_,onMouseUp:F,onTouchEnd:z,onTouchMove:U,onTouchStart:V,ref:k},reactExports.createElement(EventSynchronizer,null),r)))}),_excluded=["width","height","responsive","children","className","style","compact","title","desc"];function _objectWithoutProperties(e,t){if(null==e)return{};var r,n,i=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}var CategoricalChart=reactExports.forwardRef((e,t)=>{var{width:r,height:n,responsive:i,children:o,className:a,style:s,compact:c,title:l,desc:u}=e,d=svgPropertiesNoEvents(_objectWithoutProperties(e,_excluded));return c?reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(ReportChartSize,{width:r,height:n}),reactExports.createElement(RootSurface,{otherAttributes:d,title:l,desc:u},o)):reactExports.createElement(RechartsWrapper,{className:a,style:s,width:r,height:n,responsive:null!=i&&i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},reactExports.createElement(RootSurface,{otherAttributes:d,title:l,desc:u,ref:t},reactExports.createElement(ClipPathProvider,null,o)))});function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends.apply(null,arguments)}var defaultMargin={top:5,right:5,bottom:5,left:5},defaultProps={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:defaultMargin,reverseStackOrder:!1,syncMethod:"index",responsive:!1},CartesianChart=reactExports.forwardRef(function(e,t){var r,n=resolveDefaultProps(e.categoricalChartProps,defaultProps),{chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:a,tooltipPayloadSearcher:s,categoricalChartProps:c}=e,l={chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:a,tooltipPayloadSearcher:s,eventEmitter:void 0};return reactExports.createElement(RechartsStoreProvider,{preloadedState:{options:l},reduxStoreName:null!==(r=c.id)&&void 0!==r?r:i},reactExports.createElement(ChartDataContextProvider,{chartData:c.data}),reactExports.createElement(ReportMainChartProps,{layout:n.layout,margin:n.margin}),reactExports.createElement(ReportChartProps,{baseValue:n.baseValue,accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),reactExports.createElement(CategoricalChart,_extends({},n,{ref:t})))}),allowedTooltipTypes=["axis"],LineChart=reactExports.forwardRef((e,t)=>reactExports.createElement(CartesianChart,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:allowedTooltipTypes,tooltipPayloadSearcher:arrayTooltipSearcher,categoricalChartProps:e,ref:t}));const LayoutGroupContext=reactExports.createContext({});function useConstant(e){const t=reactExports.useRef(null);return null===t.current&&(t.current=e()),t.current}const isBrowser="undefined"!=typeof window,useIsomorphicLayoutEffect=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,PresenceContext=reactExports.createContext(null);function addUniqueItem(e,t){-1===e.indexOf(t)&&e.push(t)}function removeItem(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const clamp=(e,t,r)=>r>t?t:r<e?e:r;let invariant=()=>{};const MotionGlobalConfig={},isNumericalString=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function isObject(e){return"object"==typeof e&&null!==e}const isZeroValueString=e=>/^0[^.\s]+$/u.test(e);function memo(e){let t;return()=>(void 0===t&&(t=e()),t)}const noop$2=e=>e,combineFunctions=(e,t)=>r=>t(e(r)),pipe=(...e)=>e.reduce(combineFunctions),progress=(e,t,r)=>{const n=t-e;return 0===n?1:(r-e)/n};class SubscriptionManager{constructor(){this.subscriptions=[]}add(e){return addUniqueItem(this.subscriptions,e),()=>removeItem(this.subscriptions,e)}notify(e,t,r){const n=this.subscriptions.length;if(n)if(1===n)this.subscriptions[0](e,t,r);else for(let i=0;i<n;i++){const n=this.subscriptions[i];n&&n(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const secondsToMilliseconds=e=>1e3*e,millisecondsToSeconds=e=>e/1e3;function velocityPerSecond(e,t){return t?e*(1e3/t):0}const calcBezier=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(e,t,r,n,i){let o,a,s=0;do{a=t+(r-t)/2,o=calcBezier(a,n,i)-e,o>0?r=a:t=a}while(Math.abs(o)>subdivisionPrecision&&++s<subdivisionMaxIterations);return a}function cubicBezier(e,t,r,n){if(e===t&&r===n)return noop$2;return i=>0===i||1===i?i:calcBezier(binarySubdivide(i,0,1,e,r),t,n)}const mirrorEasing=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,reverseEasing=e=>t=>1-e(1-t),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=e=>(e*=2)<1?.5*backIn(e):.5*(2-Math.pow(2,-10*(e-1))),circIn=e=>1-Math.sin(Math.acos(e)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=e=>Array.isArray(e)&&"number"!=typeof e[0],isBezierDefinition=e=>Array.isArray(e)&&"number"==typeof e[0],easingLookup={linear:noop$2,easeIn:easeIn,easeInOut:easeInOut,easeOut:easeOut,circIn:circIn,circInOut:circInOut,circOut:circOut,backIn:backIn,backInOut:backInOut,backOut:backOut,anticipate:anticipate},isValidEasing=e=>"string"==typeof e,easingDefinitionToFunction=e=>{if(isBezierDefinition(e)){invariant(4===e.length);const[t,r,n,i]=e;return cubicBezier(t,r,n,i)}return isValidEasing(e)?easingLookup[e]:e},stepsOrder=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function createRenderStep(e,t){let r=new Set,n=new Set,i=!1,o=!1;const a=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1};function c(t){a.has(t)&&(l.schedule(t),e()),t(s)}const l={schedule:(e,t=!1,o=!1)=>{const s=o&&i?r:n;return t&&a.add(e),s.has(e)||s.add(e),e},cancel:e=>{n.delete(e),a.delete(e)},process:e=>{s=e,i?o=!0:(i=!0,[r,n]=[n,r],r.forEach(c),r.clear(),i=!1,o&&(o=!1,l.process(e)))}};return l}const maxElapsed=40;function createRenderBatcher(e,t){let r=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>r=!0,a=stepsOrder.reduce((e,t)=>(e[t]=createRenderStep(o),e),{}),{setup:s,read:c,resolveKeyframes:l,preUpdate:u,update:d,preRender:p,render:h,postRender:m}=a,f=()=>{const o=MotionGlobalConfig.useManualTiming?i.timestamp:performance.now();r=!1,MotionGlobalConfig.useManualTiming||(i.delta=n?1e3/60:Math.max(Math.min(o-i.timestamp,maxElapsed),1)),i.timestamp=o,i.isProcessing=!0,s.process(i),c.process(i),l.process(i),u.process(i),d.process(i),p.process(i),h.process(i),m.process(i),i.isProcessing=!1,r&&t&&(n=!1,e(f))};return{schedule:stepsOrder.reduce((t,o)=>{const s=a[o];return t[o]=(t,o=!1,a=!1)=>(r||(r=!0,n=!0,i.isProcessing||e(f)),s.schedule(t,o,a)),t},{}),cancel:e=>{for(let t=0;t<stepsOrder.length;t++)a[stepsOrder[t]].cancel(e)},state:i,steps:a}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:noop$2,!0);let now$1;function clearTime(){now$1=void 0}const time={now:()=>(void 0===now$1&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now$1),set:e=>{now$1=e,queueMicrotask(clearTime)}},checkStringStartsWith=e=>t=>"string"==typeof t&&t.startsWith(e),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=e=>!!startsAsVariableToken(e)&&singleCssVariableRegex.test(e.split("/*")[0].trim()),singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,number$1={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},alpha={...number$1,transform:e=>clamp(0,1,e)},scale={...number$1,default:1},sanitize=e=>Math.round(1e5*e)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(e){return null==e}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(e,t)=>r=>Boolean("string"==typeof r&&singleColorRegex.test(r)&&r.startsWith(e)||t&&!isNullish(r)&&Object.prototype.hasOwnProperty.call(r,t)),splitColor=(e,t,r)=>n=>{if("string"!=typeof n)return n;const[i,o,a,s]=n.match(floatRegex);return{[e]:parseFloat(i),[t]:parseFloat(o),[r]:parseFloat(a),alpha:void 0!==s?parseFloat(s):1}},clampRgbUnit=e=>clamp(0,255,e),rgbUnit={...number$1,transform:e=>Math.round(clampRgbUnit(e))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+rgbUnit.transform(e)+", "+rgbUnit.transform(t)+", "+rgbUnit.transform(r)+", "+sanitize(alpha.transform(n))+")"};function parseHex(e){let t="",r="",n="",i="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),i=e.substring(4,5),t+=t,r+=r,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},createUnitType=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage=(()=>({...percent,parse:e=>percent.parse(e)/100,transform:e=>percent.transform(100*e)}))(),hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+percent.transform(sanitize(t))+", "+percent.transform(sanitize(r))+", "+sanitize(alpha.transform(n))+")"},color={test:e=>rgba.test(e)||hex.test(e)||hsla.test(e),parse:e=>rgba.test(e)?rgba.parse(e):hsla.test(e)?hsla.parse(e):hex.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?rgba.transform(e):hsla.transform(e),getAnimatableNone:e=>{const t=color.parse(e);return t.alpha=0,color.transform(t)}},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(e){var t,r;return isNaN(e)&&"string"==typeof e&&((null==(t=e.match(floatRegex))?void 0:t.length)||0)+((null==(r=e.match(colorRegex))?void 0:r.length)||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},i=[];let o=0;const a=t.replace(complexRegex,e=>(color.test(e)?(n.color.push(o),i.push(COLOR_TOKEN),r.push(color.parse(e))):e.startsWith(VAR_FUNCTION_TOKEN)?(n.var.push(o),i.push(VAR_TOKEN),r.push(e)):(n.number.push(o),i.push(NUMBER_TOKEN),r.push(parseFloat(e))),++o,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:r,split:a,indexes:n,types:i}}function parseComplexValue(e){return analyseComplexValue(e).values}function createTransformer(e){const{split:t,types:r}=analyseComplexValue(e),n=t.length;return e=>{let i="";for(let o=0;o<n;o++)if(i+=t[o],void 0!==e[o]){const t=r[o];i+=t===NUMBER_TOKEN?sanitize(e[o]):t===COLOR_TOKEN?color.transform(e[o]):e[o]}return i}}const convertNumbersToZero=e=>"number"==typeof e?0:color.test(e)?color.getAnimatableNone(e):e;function getAnimatableNone$1(e){const t=parseComplexValue(e);return createTransformer(e)(t.map(convertNumbersToZero))}const complex={test:test,parse:parseComplexValue,createTransformer:createTransformer,getAnimatableNone:getAnimatableNone$1};function hueToRgb(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function hslaToRgba({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,r/=100;let i=0,o=0,a=0;if(t/=100){const n=r<.5?r*(1+t):r+t-r*t,s=2*r-n;i=hueToRgb(s,n,e+1/3),o=hueToRgb(s,n,e),a=hueToRgb(s,n,e-1/3)}else i=o=a=r;return{red:Math.round(255*i),green:Math.round(255*o),blue:Math.round(255*a),alpha:n}}function mixImmediate(e,t){return r=>r>0?t:e}const mixNumber$1=(e,t,r)=>e+(t-e)*r,mixLinearColor=(e,t,r)=>{const n=e*e,i=r*(t*t-n)+n;return i<0?0:Math.sqrt(i)},colorTypes=[hex,rgba,hsla],getColorType=e=>colorTypes.find(t=>t.test(e));function asRGBA(e){const t=getColorType(e);if(!Boolean(t))return!1;let r=t.parse(e);return t===hsla&&(r=hslaToRgba(r)),r}const mixColor=(e,t)=>{const r=asRGBA(e),n=asRGBA(t);if(!r||!n)return mixImmediate(e,t);const i={...r};return e=>(i.red=mixLinearColor(r.red,n.red,e),i.green=mixLinearColor(r.green,n.green,e),i.blue=mixLinearColor(r.blue,n.blue,e),i.alpha=mixNumber$1(r.alpha,n.alpha,e),rgba.transform(i))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(e,t){return invisibleValues.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function mixNumber(e,t){return r=>mixNumber$1(e,t,r)}function getMixer(e){return"number"==typeof e?mixNumber:"string"==typeof e?isCSSVariableToken(e)?mixImmediate:color.test(e)?mixColor:mixComplex:Array.isArray(e)?mixArray:"object"==typeof e?color.test(e)?mixColor:mixObject:mixImmediate}function mixArray(e,t){const r=[...e],n=r.length,i=e.map((e,r)=>getMixer(e)(e,t[r]));return e=>{for(let t=0;t<n;t++)r[t]=i[t](e);return r}}function mixObject(e,t){const r={...e,...t},n={};for(const i in r)void 0!==e[i]&&void 0!==t[i]&&(n[i]=getMixer(e[i])(e[i],t[i]));return e=>{for(const t in n)r[t]=n[t](e);return r}}function matchOrder(e,t){const r=[],n={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const o=t.types[i],a=e.indexes[o][n[o]],s=e.values[a]??0;r[i]=s,n[o]++}return r}const mixComplex=(e,t)=>{const r=complex.createTransformer(t),n=analyseComplexValue(e),i=analyseComplexValue(t);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?invisibleValues.has(e)&&!i.values.length||invisibleValues.has(t)&&!n.values.length?mixVisibility(e,t):pipe(mixArray(matchOrder(n,i),i.values),r):mixImmediate(e,t)};function mix(e,t,r){if("number"==typeof e&&"number"==typeof t&&"number"==typeof r)return mixNumber$1(e,t,r);return getMixer(e)(e,t)}const frameloopDriver=e=>{const t=({timestamp:t})=>e(t);return{start:(e=!0)=>frame.update(t,e),stop:()=>cancelFrame(t),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generateLinearEasing=(e,t,r=10)=>{let n="";const i=Math.max(Math.round(t/r),2);for(let o=0;o<i;o++)n+=Math.round(1e4*e(o/(i-1)))/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},maxGeneratorDuration=2e4;function calcGeneratorDuration(e){let t=0;let r=e.next(t);for(;!r.done&&t<maxGeneratorDuration;)t+=50,r=e.next(t);return t>=maxGeneratorDuration?1/0:t}function createGeneratorEasing(e,t=100,r){const n=r({...e,keyframes:[0,t]}),i=Math.min(calcGeneratorDuration(n),maxGeneratorDuration);return{type:"keyframes",ease:e=>n.next(i*e).value/t,duration:millisecondsToSeconds(i)}}const velocitySampleDuration=5;function calcGeneratorVelocity(e,t,r){const n=Math.max(t-velocitySampleDuration,0);return velocityPerSecond(r-e(n),t-n)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:e=springDefaults.duration,bounce:t=springDefaults.bounce,velocity:r=springDefaults.velocity,mass:n=springDefaults.mass}){let i,o,a=1-t;a=clamp(springDefaults.minDamping,springDefaults.maxDamping,a),e=clamp(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(e)),a<1?(i=t=>{const n=t*a,i=n*e,o=n-r,s=calcAngularFreq(t,a),c=Math.exp(-i);return safeMin-o/s*c},o=t=>{const n=t*a*e,o=n*r+r,s=Math.pow(a,2)*Math.pow(t,2)*e,c=Math.exp(-n),l=calcAngularFreq(Math.pow(t,2),a);return(-i(t)+safeMin>0?-1:1)*((o-s)*c)/l}):(i=t=>Math.exp(-t*e)*((t-r)*e+1)-safeMin,o=t=>Math.exp(-t*e)*(e*e*(r-t)));const s=approximateRoot(i,o,5/e);if(e=secondsToMilliseconds(e),isNaN(s))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:e};{const t=Math.pow(s,2)*n;return{stiffness:t,damping:2*a*Math.sqrt(n*t),duration:e}}}const rootIterations=12;function approximateRoot(e,t,r){let n=r;for(let i=1;i<rootIterations;i++)n-=e(n)/t(n);return n}function calcAngularFreq(e,t){return e*Math.sqrt(1-t*t)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(e,t){return t.some(t=>void 0!==e[t])}function getSpringOptions(e){let t={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...e};if(!isSpringType(e,physicsKeys)&&isSpringType(e,durationKeys))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(1.2*r),i=n*n,o=2*clamp(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:springDefaults.mass,stiffness:i,damping:o}}else{const r=findSpring(e);t={...t,...r,mass:springDefaults.mass},t.isResolvedFromDuration=!0}return t}function spring(e=springDefaults.visualDuration,t=springDefaults.bounce){const r="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:i}=r;const o=r.keyframes[0],a=r.keyframes[r.keyframes.length-1],s={done:!1,value:o},{stiffness:c,damping:l,mass:u,duration:d,velocity:p,isResolvedFromDuration:h}=getSpringOptions({...r,velocity:-millisecondsToSeconds(r.velocity||0)}),m=p||0,f=l/(2*Math.sqrt(c*u)),x=a-o,g=millisecondsToSeconds(Math.sqrt(c/u)),y=Math.abs(x)<5;let b;if(n||(n=y?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),i||(i=y?springDefaults.restDelta.granular:springDefaults.restDelta.default),f<1){const e=calcAngularFreq(g,f);b=t=>{const r=Math.exp(-f*g*t);return a-r*((m+f*g*x)/e*Math.sin(e*t)+x*Math.cos(e*t))}}else if(1===f)b=e=>a-Math.exp(-g*e)*(x+(m+g*x)*e);else{const e=g*Math.sqrt(f*f-1);b=t=>{const r=Math.exp(-f*g*t),n=Math.min(e*t,300);return a-r*((m+f*g*x)*Math.sinh(n)+e*x*Math.cosh(n))/e}}const v={calculatedDuration:h&&d||null,next:e=>{const t=b(e);if(h)s.done=e>=d;else{let r=0===e?m:0;f<1&&(r=0===e?secondsToMilliseconds(m):calcGeneratorVelocity(b,e,t));const o=Math.abs(r)<=n,c=Math.abs(a-t)<=i;s.done=o&&c}return s.value=s.done?a:t,s},toString:()=>{const e=Math.min(calcGeneratorDuration(v),maxGeneratorDuration),t=generateLinearEasing(t=>v.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return v}function inertia({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:a,min:s,max:c,restDelta:l=.5,restSpeed:u}){const d=e[0],p={done:!1,value:d},h=e=>void 0===s?c:void 0===c||Math.abs(s-e)<Math.abs(c-e)?s:c;let m=r*t;const f=d+m,x=void 0===a?f:a(f);x!==f&&(m=x-d);const g=e=>-m*Math.exp(-e/n),y=e=>x+g(e),b=e=>{const t=g(e),r=y(e);p.done=Math.abs(t)<=l,p.value=p.done?x:r};let v,E;const w=e=>{var t;(t=p.value,void 0!==s&&t<s||void 0!==c&&t>c)&&(v=e,E=spring({keyframes:[p.value,h(p.value)],velocity:calcGeneratorVelocity(y,e,p.value),damping:i,stiffness:o,restDelta:l,restSpeed:u}))};return w(0),{calculatedDuration:null,next:e=>{let t=!1;return E||void 0!==v||(t=!0,b(e),w(e)),void 0!==v&&e>=v?E.next(e-v):(!t&&b(e),p)}}}function createMixers(e,t,r){const n=[],i=r||MotionGlobalConfig.mix||mix,o=e.length-1;for(let a=0;a<o;a++){let r=i(e[a],e[a+1]);if(t){const e=Array.isArray(t)?t[a]||noop$2:t;r=pipe(e,r)}n.push(r)}return n}function interpolate(e,t,{clamp:r=!0,ease:n,mixer:i}={}){const o=e.length;if(invariant(o===t.length),1===o)return()=>t[0];if(2===o&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const s=createMixers(t,n,i),c=s.length,l=r=>{if(a&&r<e[0])return t[0];let n=0;if(c>1)for(;n<e.length-2&&!(r<e[n+1]);n++);const i=progress(e[n],e[n+1],r);return s[n](i)};return r?t=>l(clamp(e[0],e[o-1],t)):l}function fillOffset(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const i=progress(0,t,n);e.push(mixNumber$1(r,1,i))}}function defaultOffset(e){const t=[0];return fillOffset(t,e.length-1),t}function convertOffsetToTimes(e,t){return e.map(e=>e*t)}function defaultEasing(e,t){return e.map(()=>t||easeInOut).splice(0,e.length-1)}function keyframes({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const i=isEasingArray(n)?n.map(easingDefinitionToFunction):easingDefinitionToFunction(n),o={done:!1,value:t[0]},a=interpolate(convertOffsetToTimes(r&&r.length===t.length?r:defaultOffset(t),e),t,{ease:Array.isArray(i)?i:defaultEasing(t,i)});return{calculatedDuration:e,next:t=>(o.value=a(t),o.done=t>=e,o)}}spring.applyToOptions=e=>{const t=createGeneratorEasing(e,100,spring);return e.ease=t.ease,e.duration=secondsToMilliseconds(t.duration),e.type="keyframes",e};const isNotNull$1=e=>null!==e;function getFinalKeyframe$1(e,{repeat:t,repeatType:r="loop"},n,i=1){const o=e.filter(isNotNull$1),a=i<0||t&&"loop"!==r&&t%2==1?0:o.length-1;return a&&void 0!==n?n:o[a]}const transitionTypeMap={decay:inertia,inertia:inertia,tween:keyframes,keyframes:keyframes,spring:spring};function replaceTransitionType(e){"string"==typeof e.type&&(e.type=transitionTypeMap[e.type])}class WithPromise{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const percentToProgress=e=>e/100;class JSAnimation extends WithPromise{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var e,t;const{motionValue:r}=this.options;r&&r.updatedAt!==time.now()&&this.tick(time.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),null==(t=(e=this.options).onStop)||t.call(e))},this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;replaceTransitionType(e);const{type:t=keyframes,repeat:r=0,repeatDelay:n=0,repeatType:i,velocity:o=0}=e;let{keyframes:a}=e;const s=t||keyframes;s!==keyframes&&"number"!=typeof a[0]&&(this.mixKeyframes=pipe(percentToProgress,mix(a[0],a[1])),a=[0,100]);const c=s({...e,keyframes:a});"mirror"===i&&(this.mirroredGenerator=s({...e,keyframes:[...a].reverse(),velocity:-o})),null===c.calculatedDuration&&(c.calculatedDuration=calcGeneratorDuration(c));const{calculatedDuration:l}=c;this.calculatedDuration=l,this.resolvedDuration=l+n,this.totalDuration=this.resolvedDuration*(r+1)-n,this.generator=c}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:n,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:s}=this;if(null===this.startTime)return r.next(0);const{delay:c=0,keyframes:l,repeat:u,repeatType:d,repeatDelay:p,type:h,onUpdate:m,finalKeyframe:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-n/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const x=this.currentTime-c*(this.playbackSpeed>=0?1:-1),g=this.playbackSpeed>=0?x<0:x>n;this.currentTime=Math.max(x,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=n);let y=this.currentTime,b=r;if(u){const e=Math.min(this.currentTime,n)/a;let t=Math.floor(e),r=e%1;!r&&e>=1&&(r=1),1===r&&t--,t=Math.min(t,u+1);Boolean(t%2)&&("reverse"===d?(r=1-r,p&&(r-=p/a)):"mirror"===d&&(b=o)),y=clamp(0,1,r)*a}const v=g?{done:!1,value:l[0]}:b.next(y);i&&(v.value=i(v.value));let{done:E}=v;g||null===s||(E=this.playbackSpeed>=0?this.currentTime>=n:this.currentTime<=0);const w=null===this.holdTime&&("finished"===this.state||"running"===this.state&&E);return w&&h!==inertia&&(v.value=getFinalKeyframe$1(l,this.options,f,this.speed)),m&&m(v.value),w&&this.finish(),v}then(e,t){return this.finished.then(e,t)}get duration(){return millisecondsToSeconds(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+millisecondsToSeconds(e)}get time(){return millisecondsToSeconds(this.currentTime)}set time(e){var t;e=secondsToMilliseconds(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null==(t=this.driver)||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(time.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=millisecondsToSeconds(this.currentTime))}play(){var e,t;if(this.isStopped)return;const{driver:r=frameloopDriver,startTime:n}=this.options;this.driver||(this.driver=r(e=>this.tick(e))),null==(t=(e=this.options).onPlay)||t.call(e);const i=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=i):null!==this.holdTime?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(time.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null==(t=(e=this.options).onComplete)||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null==(t=(e=this.options).onCancel)||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null==(t=this.driver)||t.stop(),e.observe(this)}}function fillWildcards(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const radToDeg=e=>180*e/Math.PI,rotate=e=>{const t=radToDeg(Math.atan2(e[1],e[0]));return rebaseAngle(t)},matrix2dParsers={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:rotate,rotateZ:rotate,skewX:e=>radToDeg(Math.atan(e[1])),skewY:e=>radToDeg(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},rebaseAngle=e=>((e%=360)<0&&(e+=360),e),rotateZ=rotate,scaleX=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),scaleY=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),matrix3dParsers={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:scaleX,scaleY:scaleY,scale:e=>(scaleX(e)+scaleY(e))/2,rotateX:e=>rebaseAngle(radToDeg(Math.atan2(e[6],e[5]))),rotateY:e=>rebaseAngle(radToDeg(Math.atan2(-e[2],e[0]))),rotateZ:rotateZ,rotate:rotateZ,skewX:e=>radToDeg(Math.atan(e[4])),skewY:e=>radToDeg(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function defaultTransformValue(e){return e.includes("scale")?1:0}function parseValueFromTransform(e,t){if(!e||"none"===e)return defaultTransformValue(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,i;if(r)n=matrix3dParsers,i=r;else{const t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=matrix2dParsers,i=t}if(!i)return defaultTransformValue(t);const o=n[t],a=i[1].split(",").map(convertTransformToNumber);return"function"==typeof o?o(a):a[o]}const readTransformValue=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return parseValueFromTransform(r,t)};function convertTransformToNumber(e){return parseFloat(e.trim())}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=(()=>new Set(transformPropOrder))(),isNumOrPxType=e=>e===number$1||e===px,transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(e=>!transformKeys.has(e));function removeNonTranslationalTransform(e){const t=[];return nonTranslationalTransformKeys.forEach(r=>{const n=e.getValue(r);void 0!==n&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const positionalValues={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>parseValueFromTransform(t,"x"),y:(e,{transform:t})=>parseValueFromTransform(t,"y")};positionalValues.translateX=positionalValues.x,positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1,isForced=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const e=Array.from(toResolve).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),r=new Map;t.forEach(e=>{const t=removeNonTranslationalTransform(e);t.length&&(r.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=r.get(e);t&&t.forEach(([t,r])=>{var n;null==(n=e.getValue(t))||n.set(r)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(e=>e.complete(isForced)),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){isForced=!0,readAllKeyframes(),measureAllKeyframes(),isForced=!1}class KeyframeResolver{constructor(e,t,r,n,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=n,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:n}=this;if(null===e[0]){const i=null==n?void 0:n.get(),o=e[e.length-1];if(void 0!==i)e[0]=i;else if(r&&t){const n=r.readValue(t,o);null!=n&&(e[0]=n)}void 0===e[0]&&(e[0]=o),n&&void 0===i&&n.set(e[0])}fillWildcards(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),toResolve.delete(this)}cancel(){"scheduled"===this.state&&(toResolve.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const isCSSVar=e=>e.startsWith("--");function setStyle(e,t,r){isCSSVar(t)?e.style.setProperty(t,r):e.style[t]=r}const supportsScrollTimeline=memo(()=>void 0!==window.ScrollTimeline),supportsFlags={};function memoSupports(e,t){const r=memo(e);return()=>supportsFlags[t]??r()}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e3){return!1}return!0},"linearEasing"),cubicBezierAsString=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(e,t){return e?"function"==typeof e?supportsLinearEasing()?generateLinearEasing(e,t):"ease-out":isBezierDefinition(e)?cubicBezierAsString(e):Array.isArray(e)?e.map(e=>mapEasingToNativeEasing(e,t)||supportedWaapiEasing.easeOut):supportedWaapiEasing[e]:void 0}function startWaapiAnimation(e,t,r,{delay:n=0,duration:i=300,repeat:o=0,repeatType:a="loop",ease:s="easeOut",times:c}={},l=void 0){const u={[t]:r};c&&(u.offset=c);const d=mapEasingToNativeEasing(s,i);Array.isArray(d)&&(u.easing=d);const p={delay:n,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:o+1,direction:"reverse"===a?"alternate":"normal"};l&&(p.pseudoElement=l);return e.animate(u,p)}function isGenerator(e){return"function"==typeof e&&"applyToOptions"in e}function applyGeneratorOptions({type:e,...t}){return isGenerator(e)&&supportsLinearEasing()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class NativeAnimation extends WithPromise{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:n,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:a,onComplete:s}=e;this.isPseudoElement=Boolean(i),this.allowFlatten=o,this.options=e,invariant("string"!=typeof e.type);const c=applyGeneratorOptions(e);this.animation=startWaapiAnimation(t,r,n,c,i),!1===c.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const e=getFinalKeyframe$1(n,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(e):setStyle(t,r,e),this.animation.cancel()}null==s||s(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;null==(t=(e=this.animation).finish)||t.call(e)}cancel(){try{this.animation.cancel()}catch(e3){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||null==(t=(e=this.animation).commitStyles)||t.call(e)}get duration(){var e,t;const r=(null==(t=null==(e=this.animation.effect)?void 0:e.getComputedTiming)?void 0:t.call(e).duration)||0;return millisecondsToSeconds(Number(r))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+millisecondsToSeconds(e)}get time(){return millisecondsToSeconds(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=secondsToMilliseconds(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var r;return this.allowFlatten&&(null==(r=this.animation.effect)||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&supportsScrollTimeline()?(this.animation.timeline=e,noop$2):t(this)}}const unsupportedEasingFunctions={anticipate:anticipate,backInOut:backInOut,circInOut:circInOut};function isUnsupportedEase(e){return e in unsupportedEasingFunctions}function replaceStringEasing(e){"string"==typeof e.ease&&isUnsupportedEase(e.ease)&&(e.ease=unsupportedEasingFunctions[e.ease])}const sampleDelta=10;class NativeAnimationExtended extends NativeAnimation{constructor(e){replaceStringEasing(e),replaceTransitionType(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:n,element:i,...o}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);const a=new JSAnimation({...o,autoplay:!1}),s=secondsToMilliseconds(this.finishedTime??this.time);t.setWithVelocity(a.sample(s-sampleDelta).value,a.sample(s).value,sampleDelta),a.stop()}}const isAnimatable=(e,t)=>"zIndex"!==t&&(!("number"!=typeof e&&!Array.isArray(e))||!("string"!=typeof e||!complex.test(e)&&"0"!==e||e.startsWith("url(")));function hasKeyframesChanged(e){const t=e[0];if(1===e.length)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function canAnimate(e,t,r,n){const i=e[0];if(null===i)return!1;if("display"===t||"visibility"===t)return!0;const o=e[e.length-1],a=isAnimatable(i,t),s=isAnimatable(o,t);return!(!a||!s)&&(hasKeyframesChanged(e)||("spring"===r||isGenerator(r))&&n)}function makeAnimationInstant(e){e.duration=0,e.type="keyframes"}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function supportsBrowserAnimation(e){var t;const{motionValue:r,name:n,repeatDelay:i,repeatType:o,damping:a,type:s}=e;if(!((null==(t=null==r?void 0:r.owner)?void 0:t.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:l}=r.owner.getProps();return supportsWaapi()&&n&&acceleratedValues.has(n)&&("transform"!==n||!l)&&!c&&!i&&"mirror"!==o&&0!==a&&"inertia"!==s}const MAX_RESOLVE_DELAY=40;class AsyncMotionValueAnimation extends WithPromise{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:o="loop",keyframes:a,name:s,motionValue:c,element:l,...u}){var d;super(),this.stop=()=>{var e,t;this._animation&&(this._animation.stop(),null==(e=this.stopTimeline)||e.call(this)),null==(t=this.keyframeResolver)||t.cancel()},this.createdAt=time.now();const p={autoplay:e,delay:t,type:r,repeat:n,repeatDelay:i,repeatType:o,name:s,motionValue:c,element:l,...u},h=(null==l?void 0:l.KeyframeResolver)||KeyframeResolver;this.keyframeResolver=new h(a,(e,t,r)=>this.onKeyframesResolved(e,t,p,!r),s,c,l),null==(d=this.keyframeResolver)||d.scheduleResolve()}onKeyframesResolved(e,t,r,n){this.keyframeResolver=void 0;const{name:i,type:o,velocity:a,delay:s,isHandoff:c,onUpdate:l}=r;this.resolvedAt=time.now(),canAnimate(e,i,o,a)||(!MotionGlobalConfig.instantAnimations&&s||null==l||l(getFinalKeyframe$1(e,r,t)),e[0]=e[e.length-1],makeAnimationInstant(r),r.repeat=0);const u={startTime:n?this.resolvedAt&&this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},d=!c&&supportsBrowserAnimation(u)?new NativeAnimationExtended({...u,element:u.motionValue.owner.current}):new JSAnimation(u);d.finished.then(()=>this.notifyFinished()).catch(noop$2),this.pendingTimeline&&(this.stopTimeline=d.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=d}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||(null==(e=this.keyframeResolver)||e.resume(),flushKeyframeResolvers()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),null==(e=this.keyframeResolver)||e.cancel()}}const splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(e){const t=splitCSSVariableRegex.exec(e);if(!t)return[,];const[,r,n,i]=t;return[`--${r??n}`,i]}function getVariableValue(e,t,r=1){const[n,i]=parseCSSVariable(e);if(!n)return;const o=window.getComputedStyle(t).getPropertyValue(n);if(o){const e=o.trim();return isNumericalString(e)?parseFloat(e):e}return isCSSVariableToken(i)?getVariableValue(i,t,r+1):i}function getValueTransition(e,t){return(null==e?void 0:e[t])??(null==e?void 0:e.default)??e}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]),auto={test:e=>"auto"===e,parse:e=>e},testValueType=e=>t=>t.test(e),dimensionValueTypes=[number$1,px,percent,degrees,vw,vh,auto],findDimensionValueType=e=>dimensionValueTypes.find(testValueType(e));function isNone(e){return"number"==typeof e?0===e:null===e||("none"===e||"0"===e||isZeroValueString(e))}const maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(e){const[t,r]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[n]=r.match(floatRegex)||[];if(!n)return e;const i=r.replace(n,"");let o=maxDefaults.has(t)?1:0;return n!==r&&(o*=100),t+"("+o+i+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:e=>{const t=e.match(functionRegex);return t?t.map(applyDefaultFilter).join(" "):e}},int={...number$1,transform:Math.round},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale:scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px,...transformValueTypes,zIndex:int,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},defaultValueTypes={...numberValueTypes,color:color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter:filter,WebkitFilter:filter},getDefaultValueType=e=>defaultValueTypes[e];function getAnimatableNone(e,t){let r=getDefaultValueType(e);return r!==filter&&(r=complex),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(e,t,r){let n,i=0;for(;i<e.length&&!n;){const t=e[i];"string"==typeof t&&!invalidTemplates.has(t)&&analyseComplexValue(t).values.length&&(n=e[i]),i++}if(n&&r)for(const o of t)e[o]=getAnimatableNone(r,n)}class DOMKeyframesResolver extends KeyframeResolver{constructor(e,t,r,n,i){super(e,t,r,n,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let s=0;s<e.length;s++){let r=e[s];if("string"==typeof r&&(r=r.trim(),isCSSVariableToken(r))){const n=getVariableValue(r,t.current);void 0!==n&&(e[s]=n),s===e.length-1&&(this.finalKeyframe=r)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(r)||2!==e.length)return;const[n,i]=e,o=findDimensionValueType(n),a=findDimensionValueType(i);if(o!==a)if(isNumOrPxType(o)&&isNumOrPxType(a))for(let s=0;s<e.length;s++){const t=e[s];"string"==typeof t&&(e[s]=parseFloat(t))}else positionalValues[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let n=0;n<e.length;n++)(null===e[n]||isNone(e[n]))&&r.push(n);r.length&&makeNoneKeyframesAnimatable(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;"height"===r&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const n=t[t.length-1];void 0!==n&&e.getValue(r,n).jump(n,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const i=t.getValue(r);i&&i.jump(this.measuredOrigin,!1);const o=n.length-1,a=n[o];n[o]=positionalValues[r](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==a&&void 0===this.finalKeyframe&&(this.finalKeyframe=a),(null==(e=this.removedTransforms)?void 0:e.length)&&this.removedTransforms.forEach(([e,r])=>{t.getValue(e).set(r)}),this.resolveNoneKeyframes()}}function resolveElements(e,t,r){if(e instanceof EventTarget)return[e];if("string"==typeof e){let t=document;const n=(null==r?void 0:r[e])??t.querySelectorAll(e);return n?Array.from(n):[]}return Array.from(e)}const getValueAsType=(e,t)=>t&&"number"==typeof e?t.transform(e):e;function isHTMLElement(e){return isObject(e)&&"offsetHeight"in e}const MAX_VELOCITY_DELTA=30,isFloat=e=>!isNaN(parseFloat(e));class MotionValue{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{var t;const r=time.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(null==(t=this.events.change)||t.notify(this.current),this.dependents))for(const n of this.dependents)n.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=time.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new SubscriptionManager);const r=this.events[e].add(t);return"change"===e?()=>{r(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;null==(e=this.events.change)||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=time.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;null==(e=this.dependents)||e.clear(),null==(t=this.events.destroy)||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(e,t){return new MotionValue(e,t)}const{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function setDragLock(e){return"x"===e||"y"===e?isDragging[e]?null:(isDragging[e]=!0,()=>{isDragging[e]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function setupGesture(e,t){const r=resolveElements(e),n=new AbortController;return[r,{passive:!0,...t,signal:n.signal},()=>n.abort()]}function isValidHover(e){return!("touch"===e.pointerType||isDragActive())}function hover(e,t,r={}){const[n,i,o]=setupGesture(e,r),a=e=>{if(!isValidHover(e))return;const{target:r}=e,n=t(r,e);if("function"!=typeof n||!r)return;const o=e=>{isValidHover(e)&&(n(e),r.removeEventListener("pointerleave",o))};r.addEventListener("pointerleave",o,i)};return n.forEach(e=>{e.addEventListener("pointerenter",a,i)}),o}const isNodeOrChild=(e,t)=>!!t&&(e===t||isNodeOrChild(e,t.parentElement)),isPrimaryPointer=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary,focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(e){return focusableElements.has(e.tagName)||-1!==e.tabIndex}const isPressing=new WeakSet;function filterEvents(e){return t=>{"Enter"===t.key&&e(t)}}function firePointerEvent(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=filterEvents(()=>{if(isPressing.has(r))return;firePointerEvent(r,"down");const e=filterEvents(()=>{firePointerEvent(r,"up")});r.addEventListener("keyup",e,t),r.addEventListener("blur",()=>firePointerEvent(r,"cancel"),t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function isValidPressEvent(e){return isPrimaryPointer(e)&&!isDragActive()}function press(e,t,r={}){const[n,i,o]=setupGesture(e,r),a=e=>{const n=e.currentTarget;if(!isValidPressEvent(e))return;isPressing.add(n);const o=t(n,e),a=(e,t)=>{window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",c),isPressing.has(n)&&isPressing.delete(n),isValidPressEvent(e)&&"function"==typeof o&&o(e,{success:t})},s=e=>{a(e,n===window||n===document||r.useGlobalTarget||isNodeOrChild(n,e.target))},c=e=>{a(e,!1)};window.addEventListener("pointerup",s,i),window.addEventListener("pointercancel",c,i)};return n.forEach(e=>{(r.useGlobalTarget?window:e).addEventListener("pointerdown",a,i),isHTMLElement(e)&&(e.addEventListener("focus",e=>enableKeyboardPress(e,i)),isElementKeyboardAccessible(e)||e.hasAttribute("tabindex")||(e.tabIndex=0))}),o}function isSVGElement(e){return isObject(e)&&"ownerSVGElement"in e}function isSVGSVGElement(e){return isSVGElement(e)&&"svg"===e.tagName}const isMotionValue=e=>Boolean(e&&e.getVelocity),valueTypes=[...dimensionValueTypes,color,complex],findValueType=e=>valueTypes.find(testValueType(e)),MotionConfigContext=reactExports.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function usePresence(e=!0){const t=reactExports.useContext(PresenceContext);if(null===t)return[!0,null];const{isPresent:r,onExitComplete:n,register:i}=t,o=reactExports.useId();reactExports.useEffect(()=>{if(e)return i(o)},[e]);const a=reactExports.useCallback(()=>e&&n&&n(o),[o,n,e]);return!r&&n?[!1,a]:[!0]}const LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const b in featureProps)featureDefinitions[b]={isEnabled:e=>featureProps[b].some(t=>!!e[t])};function loadFeatures(e){for(const t in e)featureDefinitions[t]={...featureDefinitions[t],...e[t]}}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||validMotionProps.has(e)}let shouldForward=e=>!isValidMotionProp(e);function loadExternalIsValidProp(e){"function"==typeof e&&(shouldForward=t=>t.startsWith("on")?!isValidMotionProp(t):e(t))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(e,t,r){const n={};for(const i in e)"values"===i&&"object"==typeof e.values||(shouldForward(i)||!0===r&&isValidMotionProp(i)||!t&&!isValidMotionProp(i)||e.draggable&&i.startsWith("onDrag"))&&(n[i]=e[i]);return n}const MotionContext=reactExports.createContext({});function isAnimationControls(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function isVariantLabel(e){return"string"==typeof e||Array.isArray(e)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(e){return isAnimationControls(e.animate)||variantProps.some(t=>isVariantLabel(e[t]))}function isVariantNode(e){return Boolean(isControllingVariants(e)||e.variants)}function getCurrentTreeVariants(e,t){if(isControllingVariants(e)){const{initial:t,animate:r}=e;return{initial:!1===t||isVariantLabel(t)?t:void 0,animate:isVariantLabel(r)?r:void 0}}return!1!==e.inherit?t:{}}function useCreateMotionContext(e){const{initial:t,animate:r}=getCurrentTreeVariants(e,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:t,animate:r}),[variantLabelsAsDependency(t),variantLabelsAsDependency(r)])}function variantLabelsAsDependency(e){return Array.isArray(e)?e.join(" "):e}const scaleCorrectors={};function addScaleCorrector(e){for(const t in e)scaleCorrectors[t]=e[t],isCSSVariableName(t)&&(scaleCorrectors[t].isCSSVariable=!0)}function isForcedMotionValue(e,{layout:t,layoutId:r}){return transformProps.has(e)||e.startsWith("origin")||(t||void 0!==r)&&(!!scaleCorrectors[e]||"opacity"===e)}const translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(e,t,r){let n="",i=!0;for(let o=0;o<numTransforms;o++){const a=transformPropOrder[o],s=e[a];if(void 0===s)continue;let c=!0;if(c="number"==typeof s?s===(a.startsWith("scale")?1:0):0===parseFloat(s),!c||r){const e=getValueAsType(s,numberValueTypes[a]);if(!c){i=!1;n+=`${translateAlias[a]||a}(${e}) `}r&&(t[a]=e)}}return n=n.trim(),r?n=r(t,i?"":n):i&&(n="none"),n}function buildHTMLStyles(e,t,r){const{style:n,vars:i,transformOrigin:o}=e;let a=!1,s=!1;for(const c in t){const e=t[c];if(transformProps.has(c))a=!0;else if(isCSSVariableName(c))i[c]=e;else{const t=getValueAsType(e,numberValueTypes[c]);c.startsWith("origin")?(s=!0,o[c]=t):n[c]=t}}if(t.transform||(a||r?n.transform=buildTransform(t,e.transform,r):n.transform&&(n.transform="none")),s){const{originX:e="50%",originY:t="50%",originZ:r=0}=o;n.transformOrigin=`${e} ${t} ${r}`}}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(e,t,r){for(const n in t)isMotionValue(t[n])||isForcedMotionValue(n,r)||(e[n]=t[n])}function useInitialMotionValues({transformTemplate:e},t){return reactExports.useMemo(()=>{const r=createHtmlRenderState();return buildHTMLStyles(r,t,e),Object.assign({},r.vars,r.style)},[t])}function useStyle(e,t){const r={};return copyRawValuesOnly(r,e.style||{},e),Object.assign(r,useInitialMotionValues(e,t)),r}function useHTMLProps(e,t){const r={},n=useStyle(e,t);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(e,t,r=1,n=0,i=!0){e.pathLength=1;const o=i?dashKeys:camelKeys;e[o.offset]=px.transform(-n);const a=px.transform(t),s=px.transform(r);e[o.array]=`${a} ${s}`}function buildSVGAttrs(e,{attrX:t,attrY:r,attrScale:n,pathLength:i,pathSpacing:o=1,pathOffset:a=0,...s},c,l,u){if(buildHTMLStyles(e,s,l),c)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:d,style:p}=e;d.transform&&(p.transform=d.transform,delete d.transform),(p.transform||d.transformOrigin)&&(p.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),p.transform&&(p.transformBox=(null==u?void 0:u.transformBox)??"fill-box",delete d.transformBox),void 0!==t&&(d.x=t),void 0!==r&&(d.y=r),void 0!==n&&(d.scale=n),void 0!==i&&buildSVGPath(d,i,o,a,!1)}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=e=>"string"==typeof e&&"svg"===e.toLowerCase();function useSVGProps(e,t,r,n){const i=reactExports.useMemo(()=>{const r=createSvgRenderState();return buildSVGAttrs(r,t,isSVGTag(n),e.transformTemplate,e.style),{...r.attrs,style:{...r.style}}},[t]);if(e.style){const t={};copyRawValuesOnly(t,e.style,e),i.style={...t,...i.style}}return i}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(e){return"string"==typeof e&&!e.includes("-")&&!!(lowercaseSVGElements.indexOf(e)>-1||/[A-Z]/u.test(e))}function useRender(e,t,r,{latestValues:n},i,o=!1){const a=(isSVGComponent(e)?useSVGProps:useHTMLProps)(t,n,i,e),s=filterProps(t,"string"==typeof e,o),c=e!==reactExports.Fragment?{...s,...a,ref:r}:{},{children:l}=t,u=reactExports.useMemo(()=>isMotionValue(l)?l.get():l,[l]);return reactExports.createElement(e,{...c,children:u})}function getValueState(e){const t=[{},{}];return null==e||e.values.forEach((e,r)=>{t[0][r]=e.get(),t[1][r]=e.getVelocity()}),t}function resolveVariantFromProps(e,t,r,n){if("function"==typeof t){const[i,o]=getValueState(n);t=t(void 0!==r?r:e.custom,i,o)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){const[i,o]=getValueState(n);t=t(void 0!==r?r:e.custom,i,o)}return t}function resolveMotionValue(e){return isMotionValue(e)?e.get():e}function makeState({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,i){return{latestValues:makeLatestValues(r,n,i,e),renderState:t()}}function makeLatestValues(e,t,r,n){const i={},o=n(e,{});for(const p in o)i[p]=resolveMotionValue(o[p]);let{initial:a,animate:s}=e;const c=isControllingVariants(e),l=isVariantNode(e);t&&l&&!c&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===s&&(s=t.animate));let u=!!r&&!1===r.initial;u=u||!1===a;const d=u?s:a;if(d&&"boolean"!=typeof d&&!isAnimationControls(d)){const t=Array.isArray(d)?d:[d];for(let r=0;r<t.length;r++){const n=resolveVariantFromProps(e,t[r]);if(n){const{transitionEnd:e,transition:t,...r}=n;for(const n in r){let e=r[n];if(Array.isArray(e)){e=e[u?e.length-1:0]}null!==e&&(i[n]=e)}for(const n in e)i[n]=e[n]}}}return i}const makeUseVisualState=e=>(t,r)=>{const n=reactExports.useContext(MotionContext),i=reactExports.useContext(PresenceContext),o=()=>makeState(e,t,n,i);return r?o():useConstant(o)};function scrapeMotionValuesFromProps$1(e,t,r){var n;const{style:i}=e,o={};for(const a in i)(isMotionValue(i[a])||t.style&&isMotionValue(t.style[a])||isForcedMotionValue(a,e)||void 0!==(null==(n=null==r?void 0:r.getValue(a))?void 0:n.liveStyle))&&(o[a]=i[a]);return o}const useHTMLVisualState=makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState});function scrapeMotionValuesFromProps(e,t,r){const n=scrapeMotionValuesFromProps$1(e,t,r);for(const i in e)if(isMotionValue(e[i])||isMotionValue(t[i])){n[-1!==transformPropOrder.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=e[i]}return n}const useSVGVisualState=makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps,createRenderState:createSvgRenderState}),motionComponentSymbol=Symbol.for("motionComponentSymbol");function isRefObject(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function useMotionRef(e,t,r){return reactExports.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&("function"==typeof r?r(n):isRefObject(r)&&(r.current=n))},[t])}const camelToDash=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId),SwitchLayoutGroupContext=reactExports.createContext({});function useVisualElement(e,t,r,n,i){var o,a;const{visualElement:s}=reactExports.useContext(MotionContext),c=reactExports.useContext(LazyContext),l=reactExports.useContext(PresenceContext),u=reactExports.useContext(MotionConfigContext).reducedMotion,d=reactExports.useRef(null);n=n||c.renderer,!d.current&&n&&(d.current=n(e,{visualState:t,parent:s,props:r,presenceContext:l,blockInitialAnimation:!!l&&!1===l.initial,reducedMotionConfig:u}));const p=d.current,h=reactExports.useContext(SwitchLayoutGroupContext);!p||p.projection||!i||"html"!==p.type&&"svg"!==p.type||createProjectionNode$1(d.current,r,i,h);const m=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{p&&m.current&&p.update(r,l)});const f=r[optimizedAppearDataAttribute],x=reactExports.useRef(Boolean(f)&&!(null==(o=window.MotionHandoffIsComplete)?void 0:o.call(window,f))&&(null==(a=window.MotionHasOptimisedAnimation)?void 0:a.call(window,f)));return useIsomorphicLayoutEffect(()=>{p&&(m.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),x.current&&p.animationState&&p.animationState.animateChanges())}),reactExports.useEffect(()=>{p&&(!x.current&&p.animationState&&p.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var e;null==(e=window.MotionHandoffMarkAsComplete)||e.call(window,f)}),x.current=!1),p.enteringChildren=void 0)}),p}function createProjectionNode$1(e,t,r,n){const{layoutId:i,layout:o,drag:a,dragConstraints:s,layoutScroll:c,layoutRoot:l,layoutCrossfade:u}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:getClosestProjectingNode(e.parent)),e.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:Boolean(a)||s&&isRefObject(s),visualElement:e,animationType:"string"==typeof o?o:"both",initialPromotionConfig:n,crossfade:u,layoutScroll:c,layoutRoot:l})}function getClosestProjectingNode(e){if(e)return!1!==e.options.allowProjection?e.projection:getClosestProjectingNode(e.parent)}function createMotionComponent(e,{forwardMotionProps:t=!1}={},r,n){r&&loadFeatures(r);const i=isSVGComponent(e)?useSVGVisualState:useHTMLVisualState;function o(r,o){let a;const s={...reactExports.useContext(MotionConfigContext),...r,layoutId:useLayoutId(r)},{isStatic:c}=s,l=useCreateMotionContext(r),u=i(r,c);if(!c&&isBrowser){useStrictMode();const t=getProjectionFunctionality(s);a=t.MeasureLayout,l.visualElement=useVisualElement(e,u,s,n,t.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:l,children:[a&&l.visualElement?jsxRuntimeExports.jsx(a,{visualElement:l.visualElement,...s}):null,useRender(e,r,useMotionRef(u,l.visualElement,o),u,c,t)]})}o.displayName=`motion.${"string"==typeof e?e:`create(${e.displayName??e.name??""})`}`;const a=reactExports.forwardRef(o);return a[motionComponentSymbol]=e,a}function useLayoutId({layoutId:e}){const t=reactExports.useContext(LayoutGroupContext).id;return t&&void 0!==e?t+"-"+e:e}function useStrictMode(e,t){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(e){const{drag:t,layout:r}=featureDefinitions;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:(null==t?void 0:t.isEnabled(e))||(null==r?void 0:r.isEnabled(e))?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function createMotionProxy(e,t){if("undefined"==typeof Proxy)return createMotionComponent;const r=new Map,n=(r,n)=>createMotionComponent(r,n,e,t);return new Proxy((e,t)=>n(e,t),{get:(i,o)=>"create"===o?n:(r.has(o)||r.set(o,createMotionComponent(o,void 0,e,t)),r.get(o))})}function convertBoundingBoxToBox({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function convertBoxToBoundingBox({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function transformBoxPoints(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function isIdentityScale(e){return void 0===e||1===e}function hasScale({scale:e,scaleX:t,scaleY:r}){return!isIdentityScale(e)||!isIdentityScale(t)||!isIdentityScale(r)}function hasTransform(e){return hasScale(e)||has2DTranslate(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function has2DTranslate(e){return is2DTranslate(e.x)||is2DTranslate(e.y)}function is2DTranslate(e){return e&&"0%"!==e}function scalePoint(e,t,r){return r+t*(e-r)}function applyPointDelta(e,t,r,n,i){return void 0!==i&&(e=scalePoint(e,i,n)),scalePoint(e,r,n)+t}function applyAxisDelta(e,t=0,r=1,n,i){e.min=applyPointDelta(e.min,t,r,n,i),e.max=applyPointDelta(e.max,t,r,n,i)}function applyBoxDelta(e,{x:t,y:r}){applyAxisDelta(e.x,t.translate,t.scale,t.originPoint),applyAxisDelta(e.y,r.translate,r.scale,r.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(e,t,r,n=!1){const i=r.length;if(!i)return;let o,a;t.x=t.y=1;for(let s=0;s<i;s++){o=r[s],a=o.projectionDelta;const{visualElement:i}=o.options;i&&i.props.style&&"contents"===i.props.style.display||(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&transformBox(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,applyBoxDelta(e,a)),n&&hasTransform(o.latestValues)&&transformBox(e,o.latestValues))}t.x<TREE_SCALE_SNAP_MAX&&t.x>TREE_SCALE_SNAP_MIN&&(t.x=1),t.y<TREE_SCALE_SNAP_MAX&&t.y>TREE_SCALE_SNAP_MIN&&(t.y=1)}function translateAxis(e,t){e.min=e.min+t,e.max=e.max+t}function transformAxis(e,t,r,n,i=.5){applyAxisDelta(e,t,r,mixNumber$1(e.min,e.max,i),n)}function transformBox(e,t){transformAxis(e.x,t.x,t.scaleX,t.scale,t.originX),transformAxis(e.y,t.y,t.scaleY,t.scale,t.originY)}function measureViewportBox(e,t){return convertBoundingBoxToBox(transformBoxPoints(e.getBoundingClientRect(),t))}function measurePageBox(e,t,r){const n=measureViewportBox(e,r),{scroll:i}=t;return i&&(translateAxis(n.x,i.offset.x),translateAxis(n.y,i.offset.y)),n}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()}),prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,isBrowser)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>prefersReducedMotion.current=e.matches;e.addEventListener("change",t),t()}else prefersReducedMotion.current=!1}const visualElementStore=new WeakMap;function updateMotionValuesFromProps(e,t,r){for(const n in t){const i=t[n],o=r[n];if(isMotionValue(i))e.addValue(n,i);else if(isMotionValue(o))e.addValue(n,motionValue(i,{owner:e}));else if(o!==i)if(e.hasValue(n)){const t=e.getValue(n);!0===t.liveStyle?t.jump(i):t.hasAnimated||t.set(i)}else{const t=e.getStaticValue(n);e.addValue(n,motionValue(void 0!==t?t:i,{owner:e}))}}for(const n in r)void 0===t[n]&&e.removeValue(n);return t}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:n,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=time.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,frame.render(this.render,!1,!0))};const{latestValues:s,renderState:c}=o;this.latestValues=s,this.baseTarget={...s},this.initialValues=t.initial?{...s}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=n,this.options=a,this.blockInitialAnimation=Boolean(i),this.isControllingVariants=isControllingVariants(t),this.isVariantNode=isVariantNode(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:l,...u}=this.scrapeMotionValuesFromProps(t,{},this);for(const d in u){const e=u[d];void 0!==s[d]&&isMotionValue(e)&&e.set(s[d])}}mount(e){var t;this.current=e,visualElementStore.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||prefersReducedMotion.current),null==(t=this.parent)||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),null==(e=this.parent)||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=transformProps.has(e);r&&this.onBindTransform&&this.onBindTransform();const n=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&frame.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{n(),i&&i(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in featureDefinitions){const t=featureDefinitions[e];if(!t)continue;const{isEnabled:r,Feature:n}=t;if(!this.features[e]&&n&&r(this.props)&&(this.features[e]=new n(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<propEventHandlers.length;r++){const t=propEventHandlers[r];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const n=e["on"+t];n&&(this.propEventSubscriptions[t]=this.on(t,n))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return void 0===r&&void 0!==t&&(r=motionValue(null===t?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return null!=r&&("string"==typeof r&&(isNumericalString(r)||isZeroValueString(r))?r=parseFloat(r):!findValueType(r)&&complex.test(t)&&(r=getAnimatableNone(e,t)),this.setBaseTarget(e,isMotionValue(r)?r.get():r)),isMotionValue(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props;let n;if("string"==typeof r||"object"==typeof r){const i=resolveVariantFromProps(this.props,r,null==(t=this.presenceContext)?void 0:t.custom);i&&(n=i[e])}if(r&&void 0!==n)return n;const i=this.getBaseTargetFromProps(this.props,e);return void 0===i||isMotionValue(i)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:i}on(e,t){return this.events[e]||(this.events[e]=new SubscriptionManager),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){microtask.render(this.render)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;isMotionValue(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function renderHTML(e,{style:t,vars:r},n,i){const o=e.style;let a;for(a in t)o[a]=t[a];for(a in null==i||i.applyProjectionStyles(o,n),r)o.setProperty(a,r[a])}function getComputedStyle$1(e){return window.getComputedStyle(e)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(e,t){var r;if(transformProps.has(t))return(null==(r=this.projection)?void 0:r.isProjecting)?defaultTransformValue(t):readTransformValue(e,t);{const r=getComputedStyle$1(e),n=(isCSSVariableName(t)?r.getPropertyValue(t):r[t])||0;return"string"==typeof n?n.trim():n}}measureInstanceViewportBox(e,{transformPagePoint:t}){return measureViewportBox(e,t)}build(e,t,r){buildHTMLStyles(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return scrapeMotionValuesFromProps$1(e,t,r)}}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(e,t,r,n){renderHTML(e,t,void 0,n);for(const i in t.attrs)e.setAttribute(camelCaseAttributes.has(i)?i:camelToDash(i),t.attrs[i])}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(transformProps.has(t)){const e=getDefaultValueType(t);return e&&e.default||0}return t=camelCaseAttributes.has(t)?t:camelToDash(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return scrapeMotionValuesFromProps(e,t,r)}build(e,t,r){buildSVGAttrs(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,n){renderSVG(e,t,r,n)}mount(e){this.isSVGTag=isSVGTag(e.tagName),super.mount(e)}}const createDomVisualElement=(e,t)=>isSVGComponent(e)?new SVGVisualElement(t):new HTMLVisualElement(t,{allowProjection:e!==reactExports.Fragment});function resolveVariant(e,t,r){const n=e.getProps();return resolveVariantFromProps(n,t,void 0!==r?r:n.custom,e)}const isKeyframesTarget=e=>Array.isArray(e);function setMotionValue(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,motionValue(r))}function resolveFinalValueInKeyframes(e){return isKeyframesTarget(e)?e[e.length-1]||0:e}function setTarget(e,t){const r=resolveVariant(e,t);let{transitionEnd:n={},transition:i={},...o}=r||{};o={...o,...n};for(const a in o){setMotionValue(e,a,resolveFinalValueInKeyframes(o[a]))}}function isWillChangeMotionValue(e){return Boolean(isMotionValue(e)&&e.add)}function addValueToWillChange(e,t){const r=e.getValue("willChange");if(isWillChangeMotionValue(r))return r.add(t);if(!r&&MotionGlobalConfig.WillChange){const r=new MotionGlobalConfig.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function getOptimisedAppearId(e){return e.props[optimizedAppearDataAttribute]}const isNotNull=e=>null!==e;function getFinalKeyframe(e,{repeat:t,repeatType:r="loop"},n){const i=e.filter(isNotNull);return i[t&&"loop"!==r&&t%2==1?0:i.length-1]}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=e=>({type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(e,{keyframes:t})=>t.length>2?keyframesTransition:transformProps.has(e)?e.startsWith("scale")?criticallyDampedSpring(t[1]):underDampedSpring:ease;function isTransitionDefined({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:o,repeatType:a,repeatDelay:s,from:c,elapsed:l,...u}){return!!Object.keys(u).length}const animateMotionValue=(e,t,r,n={},i,o)=>a=>{const s=getValueTransition(n,e)||{},c=s.delay||n.delay||0;let{elapsed:l=0}=n;l-=secondsToMilliseconds(c);const u={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...s,delay:-l,onUpdate:e=>{t.set(e),s.onUpdate&&s.onUpdate(e)},onComplete:()=>{a(),s.onComplete&&s.onComplete()},name:e,motionValue:t,element:o?void 0:i};isTransitionDefined(s)||Object.assign(u,getDefaultTransition(e,u)),u.duration&&(u.duration=secondsToMilliseconds(u.duration)),u.repeatDelay&&(u.repeatDelay=secondsToMilliseconds(u.repeatDelay)),void 0!==u.from&&(u.keyframes[0]=u.from);let d=!1;if((!1===u.type||0===u.duration&&!u.repeatDelay)&&(makeAnimationInstant(u),0===u.delay&&(d=!0)),(MotionGlobalConfig.instantAnimations||MotionGlobalConfig.skipAnimations)&&(d=!0,makeAnimationInstant(u),u.delay=0),u.allowFlatten=!s.type&&!s.ease,d&&!o&&void 0!==t.get()){const e=getFinalKeyframe(u.keyframes,s);if(void 0!==e)return void frame.update(()=>{u.onUpdate(e),u.onComplete()})}return s.isSync?new JSAnimation(u):new AsyncMotionValueAnimation(u)};function shouldBlockAnimation({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&!0!==t[r];return t[r]=!1,n}function animateTarget(e,t,{delay:r=0,transitionOverride:n,type:i}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:a,...s}=t;n&&(o=n);const c=[],l=i&&e.animationState&&e.animationState.getState()[i];for(const u in s){const t=e.getValue(u,e.latestValues[u]??null),n=s[u];if(void 0===n||l&&shouldBlockAnimation(l,u))continue;const i={delay:r,...getValueTransition(o||{},u)},a=t.get();if(void 0!==a&&!t.isAnimating&&!Array.isArray(n)&&n===a&&!i.velocity)continue;let d=!1;if(window.MotionHandoffAnimation){const t=getOptimisedAppearId(e);if(t){const e=window.MotionHandoffAnimation(t,u,frame);null!==e&&(i.startTime=e,d=!0)}}addValueToWillChange(e,u),t.start(animateMotionValue(u,t,n,e.shouldReduceMotion&&positionalKeys.has(u)?{type:!1}:i,e,d));const p=t.animation;p&&c.push(p)}return a&&Promise.all(c).then(()=>{frame.update(()=>{a&&setTarget(e,a)})}),c}function calcChildStagger(e,t,r,n=0,i=1){const o=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),a=e.size,s=(a-1)*n;return"function"==typeof r?r(o,a):1===i?o*n:s-o*n}function animateVariant(e,t,r={}){var n;const i=resolveVariant(e,t,"exit"===r.type?null==(n=e.presenceContext)?void 0:n.custom:void 0);let{transition:o=e.getDefaultTransition()||{}}=i||{};r.transitionOverride&&(o=r.transitionOverride);const a=i?()=>Promise.all(animateTarget(e,i,r)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?(n=0)=>{const{delayChildren:i=0,staggerChildren:a,staggerDirection:s}=o;return animateChildren(e,t,n,i,a,s,r)}:()=>Promise.resolve(),{when:c}=o;if(c){const[e,t]="beforeChildren"===c?[a,s]:[s,a];return e().then(()=>t())}return Promise.all([a(),s(r.delay)])}function animateChildren(e,t,r=0,n=0,i=0,o=1,a){const s=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),s.push(animateVariant(c,t,{...a,delay:r+("function"==typeof n?0:n)+calcChildStagger(e.variantChildren,c,n,i,o)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(s)}function animateVisualElement(e,t,r={}){let n;if(e.notify("AnimationStart",t),Array.isArray(t)){const i=t.map(t=>animateVariant(e,t,r));n=Promise.all(i)}else if("string"==typeof t)n=animateVariant(e,t,r);else{const i="function"==typeof t?resolveVariant(e,t,r.custom):t;n=Promise.all(animateTarget(e,i,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function shallowCompare(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const numVariantProps=variantProps.length;function getVariantContext(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&getVariantContext(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let r=0;r<numVariantProps;r++){const n=variantProps[r],i=e.props[n];(isVariantLabel(i)||!1===i)&&(t[n]=i)}return t}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(e){return t=>Promise.all(t.map(({animation:t,options:r})=>animateVisualElement(e,t,r)))}function createAnimationState(e){let t=animateList(e),r=createState(),n=!0;const i=t=>(r,n)=>{var i;const o=resolveVariant(e,n,"exit"===t?null==(i=e.presenceContext)?void 0:i.custom:void 0);if(o){const{transition:e,transitionEnd:t,...n}=o;r={...r,...n,...t}}return r};function o(o){const{props:a}=e,s=getVariantContext(e.parent)||{},c=[],l=new Set;let u={},d=1/0;for(let t=0;t<numAnimationTypes;t++){const p=reversePriorityOrder[t],h=r[p],m=void 0!==a[p]?a[p]:s[p],f=isVariantLabel(m),x=p===o?h.isActive:null;!1===x&&(d=t);let g=m===s[p]&&m!==a[p]&&f;if(g&&n&&e.manuallyAnimateOnMount&&(g=!1),h.protectedKeys={...u},!h.isActive&&null===x||!m&&!h.prevProp||isAnimationControls(m)||"boolean"==typeof m)continue;const y=checkVariantsDidChange(h.prevProp,m);let b=y||p===o&&h.isActive&&!g&&f||t>d&&f,v=!1;const E=Array.isArray(m)?m:[m];let w=E.reduce(i(p),{});!1===x&&(w={});const{prevResolvedValues:S={}}=h,j={...S,...w},A=t=>{b=!0,l.has(t)&&(v=!0,l.delete(t)),h.needsAnimating[t]=!0;const r=e.getValue(t);r&&(r.liveStyle=!1)};for(const e in j){const t=w[e],r=S[e];if(u.hasOwnProperty(e))continue;let n=!1;n=isKeyframesTarget(t)&&isKeyframesTarget(r)?!shallowCompare(t,r):t!==r,n?null!=t?A(e):l.add(e):void 0!==t&&l.has(e)?A(e):h.protectedKeys[e]=!0}h.prevProp=m,h.prevResolvedValues=w,h.isActive&&(u={...u,...w}),n&&e.blockInitialAnimation&&(b=!1);const T=g&&y;b&&(!T||v)&&c.push(...E.map(t=>{const r={type:p};if("string"==typeof t&&n&&!T&&e.manuallyAnimateOnMount&&e.parent){const{parent:n}=e,i=resolveVariant(n,t);if(n.enteringChildren&&i){const{delayChildren:t}=i.transition||{};r.delay=calcChildStagger(n.enteringChildren,e,t)}}return{animation:t,options:r}}))}if(l.size){const t={};if("boolean"!=typeof a.initial){const r=resolveVariant(e,Array.isArray(a.initial)?a.initial[0]:a.initial);r&&r.transition&&(t.transition=r.transition)}l.forEach(r=>{const n=e.getBaseTarget(r),i=e.getValue(r);i&&(i.liveStyle=!0),t[r]=n??null}),c.push({animation:t})}let p=Boolean(c.length);return!n||!1!==a.initial&&a.initial!==a.animate||e.manuallyAnimateOnMount||(p=!1),n=!1,p?t(c):Promise.resolve()}return{animateChanges:o,setActive:function(t,n){var i;if(r[t].isActive===n)return Promise.resolve();null==(i=e.variantChildren)||i.forEach(e=>{var r;return null==(r=e.animationState)?void 0:r.setActive(t,n)}),r[t].isActive=n;const a=o(t);for(const e in r)r[e].protectedKeys={};return a},setAnimateFunction:function(r){t=r(e)},getState:()=>r,reset:()=>{r=createState()}}}function checkVariantsDidChange(e,t){return"string"==typeof t?t!==e:!!Array.isArray(t)&&!shallowCompare(t,e)}function createTypeState(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(e){this.isMounted=!1,this.node=e}update(){}}class AnimationFeature extends Feature{constructor(e){super(e),e.animationState||(e.animationState=createAnimationState(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();isAnimationControls(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null==(e=this.unmountControls)||e.call(this)}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const n=this.node.animationState.setActive("exit",!e);t&&!e&&n.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function addDomEvent(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function extractEventInfo(e){return{point:{x:e.pageX,y:e.pageY}}}const addPointerInfo=e=>t=>isPrimaryPointer(t)&&e(t,extractEventInfo(t));function addPointerEvent(e,t,r,n){return addDomEvent(e,t,addPointerInfo(r),n)}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(e){return e.max-e.min}function isNear(e,t,r){return Math.abs(e-t)<=r}function calcAxisDelta(e,t,r,n=.5){e.origin=n,e.originPoint=mixNumber$1(t.min,t.max,e.origin),e.scale=calcLength(r)/calcLength(t),e.translate=mixNumber$1(r.min,r.max,e.origin)-e.originPoint,(e.scale>=SCALE_MIN&&e.scale<=SCALE_MAX||isNaN(e.scale))&&(e.scale=1),(e.translate>=TRANSLATE_MIN&&e.translate<=TRANSLATE_MAX||isNaN(e.translate))&&(e.translate=0)}function calcBoxDelta(e,t,r,n){calcAxisDelta(e.x,t.x,r.x,n?n.originX:void 0),calcAxisDelta(e.y,t.y,r.y,n?n.originY:void 0)}function calcRelativeAxis(e,t,r){e.min=r.min+t.min,e.max=e.min+calcLength(t)}function calcRelativeBox(e,t,r){calcRelativeAxis(e.x,t.x,r.x),calcRelativeAxis(e.y,t.y,r.y)}function calcRelativeAxisPosition(e,t,r){e.min=t.min-r.min,e.max=e.min+calcLength(t)}function calcRelativePosition(e,t,r){calcRelativeAxisPosition(e.x,t.x,r.x),calcRelativeAxisPosition(e.y,t.y,r.y)}function eachAxis(e){return[e("x"),e("y")]}const getContextWindow=({current:e})=>e?e.ownerDocument.defaultView:null,distance=(e,t)=>Math.abs(e-t);function distance2D(e,t){const r=distance(e.x,t.x),n=distance(e.y,t.y);return Math.sqrt(r**2+n**2)}class PanSession{constructor(e,t,{transformPagePoint:r,contextWindow:n=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=getPanInfo(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,r=distance2D(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!r)return;const{point:n}=e,{timestamp:i}=frameData;this.history.push({...n,timestamp:i});const{onStart:o,onMove:a}=this.handlers;t||(o&&o(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=transformPoint(t,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:r,onSessionEnd:n,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const o=getPanInfo("pointercancel"===e.type?this.lastMoveEventInfo:transformPoint(t,this.transformPagePoint),this.history);this.startEvent&&r&&r(e,o),n&&n(e,o)},!isPrimaryPointer(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=n||window;const a=transformPoint(extractEventInfo(e),this.transformPagePoint),{point:s}=a,{timestamp:c}=frameData;this.history=[{...s,timestamp:c}];const{onSessionStart:l}=t;l&&l(e,getPanInfo(a,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(e,t){return t?{point:t(e.point)}:e}function subtractPoint(e,t){return{x:e.x-t.x,y:e.y-t.y}}function getPanInfo({point:e},t){return{point:e,delta:subtractPoint(e,lastDevicePoint(t)),offset:subtractPoint(e,startDevicePoint(t)),velocity:getVelocity(t,.1)}}function startDevicePoint(e){return e[0]}function lastDevicePoint(e){return e[e.length-1]}function getVelocity(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const i=lastDevicePoint(e);for(;r>=0&&(n=e[r],!(i.timestamp-n.timestamp>secondsToMilliseconds(t)));)r--;if(!n)return{x:0,y:0};const o=millisecondsToSeconds(i.timestamp-n.timestamp);if(0===o)return{x:0,y:0};const a={x:(i.x-n.x)/o,y:(i.y-n.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function applyConstraints(e,{min:t,max:r},n){return void 0!==t&&e<t?e=n?mixNumber$1(t,e,n.min):Math.max(e,t):void 0!==r&&e>r&&(e=n?mixNumber$1(r,e,n.max):Math.min(e,r)),e}function calcRelativeAxisConstraints(e,t,r){return{min:void 0!==t?e.min+t:void 0,max:void 0!==r?e.max+r-(e.max-e.min):void 0}}function calcRelativeConstraints(e,{top:t,left:r,bottom:n,right:i}){return{x:calcRelativeAxisConstraints(e.x,r,i),y:calcRelativeAxisConstraints(e.y,t,n)}}function calcViewportAxisConstraints(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function calcViewportConstraints(e,t){return{x:calcViewportAxisConstraints(e.x,t.x),y:calcViewportAxisConstraints(e.y,t.y)}}function calcOrigin(e,t){let r=.5;const n=calcLength(e),i=calcLength(t);return i>n?r=progress(t.min,t.max-n,e.min):n>i&&(r=progress(e.min,e.max-i,t.min)),clamp(0,1,r)}function rebaseAxisConstraints(e,t){const r={};return void 0!==t.min&&(r.min=t.min-e.min),void 0!==t.max&&(r.max=t.max-e.min),r}const defaultElastic=.35;function resolveDragElastic(e=defaultElastic){return!1===e?e=0:!0===e&&(e=defaultElastic),{x:resolveAxisElastic(e,"left","right"),y:resolveAxisElastic(e,"top","bottom")}}function resolveAxisElastic(e,t,r){return{min:resolvePointElastic(e,t),max:resolvePointElastic(e,r)}}function resolvePointElastic(e,t){return"number"==typeof e?e:e[t]||0}const elementDragControls=new WeakMap;class VisualElementDragControls{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:i}=this.getProps();this.panSession=new PanSession(e,{onSessionStart:e=>{const{dragSnapToOrigin:r}=this.getProps();r?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(extractEventInfo(e).point)},onStart:(e,t)=>{const{drag:r,dragPropagation:n,onDragStart:i}=this.getProps();if(r&&!n&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(r),!this.openDragLock))return;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(e=>{let t=this.getAxisMotionValue(e).get()||0;if(percent.test(t)){const{projection:r}=this.visualElement;if(r&&r.layout){const n=r.layout.layoutBox[e];if(n){t=calcLength(n)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),i&&frame.postRender(()=>i(e,t)),addValueToWillChange(this.visualElement,"transform");const{animationState:o}=this.visualElement;o&&o.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:r,dragDirectionLock:n,onDirectionLock:i,onDrag:o}=this.getProps();if(!r&&!this.openDragLock)return;const{offset:a}=t;if(n&&null===this.currentDirection)return this.currentDirection=getCurrentDirection(a),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),o&&o(e,t)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>eachAxis(e=>{var t;return"paused"===this.getAnimationState(e)&&(null==(t=this.getAxisMotionValue(e).animation)?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:i,distanceThreshold:r,contextWindow:getContextWindow(this.visualElement)})}stop(e,t){const r=e||this.latestPointerEvent,n=t||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!n||!r)return;const{velocity:o}=n;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&frame.postRender(()=>a(r,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:n}=this.getProps();if(!r||!shouldDrag(e,n,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=applyConstraints(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null==(e=this.visualElement.projection)?void 0:e.layout,i=this.constraints;t&&isRefObject(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!n)&&calcRelativeConstraints(n.layoutBox,t),this.elastic=resolveDragElastic(r),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=rebaseAxisConstraints(n.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!isRefObject(e))return!1;const r=e.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const i=measurePageBox(r,n.root,this.visualElement.getTransformPagePoint());let o=calcViewportConstraints(n.layout.layoutBox,i);if(t){const e=t(convertBoxToBoundingBox(o));this.hasMutatedConstraints=!!e,e&&(o=convertBoundingBoxToBox(e))}return o}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:n,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),s=this.constraints||{},c=eachAxis(a=>{if(!shouldDrag(a,t,this.currentDirection))return;let c=s&&s[a]||{};o&&(c={min:0,max:0});const l=n?200:1e6,u=n?40:1e7,d={type:"inertia",velocity:r?e[a]:0,bounceStiffness:l,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...i,...c};return this.startAxisValueAnimation(a,d)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return addValueToWillChange(this.visualElement,e),r.start(animateMotionValue(e,r,0,t,this.visualElement,!1))}stopAnimation(){eachAxis(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){eachAxis(e=>{var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.pause()})}getAnimationState(e){var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),n=r[t];return n||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){eachAxis(t=>{const{drag:r}=this.getProps();if(!shouldDrag(t,r,this.currentDirection))return;const{projection:n}=this.visualElement,i=this.getAxisMotionValue(t);if(n&&n.layout){const{min:r,max:o}=n.layout.layoutBox[t];i.set(e[t]-mixNumber$1(r,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!isRefObject(t)||!r||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};eachAxis(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const r=t.get();n[e]=calcOrigin({min:r,max:r},this.constraints[e])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),eachAxis(t=>{if(!shouldDrag(t,e,null))return;const r=this.getAxisMotionValue(t),{min:i,max:o}=this.constraints[t];r.set(mixNumber$1(i,o,n[t]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const e=addPointerEvent(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:r=!0}=this.getProps();t&&r&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();isRefObject(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,n=r.addEventListener("measure",t);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),frame.read(t);const i=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),o=r.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(eachAxis(t=>{const r=this.getAxisMotionValue(t);r&&(this.originPoint[t]+=e[t].translate,r.set(r.get()+e[t].translate))}),this.visualElement.render())});return()=>{i(),e(),n(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:n=!1,dragConstraints:i=!1,dragElastic:o=defaultElastic,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:n,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function shouldDrag(e,t,r){return!(!0!==t&&t!==e||null!==r&&r!==e)}function getCurrentDirection(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class DragGesture extends Feature{constructor(e){super(e),this.removeGroupControls=noop$2,this.removeListeners=noop$2,this.controls=new VisualElementDragControls(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$2}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=e=>(t,r)=>{e&&frame.postRender(()=>e(t,r))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$2}onPointerDown(e){this.session=new PanSession(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:n}=this.node.getProps();return{onSessionStart:asyncHandler(e),onStart:asyncHandler(t),onMove:r,onEnd:(e,t)=>{delete this.session,n&&frame.postRender(()=>n(e,t))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const correctBorderRadius={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!px.test(e))return e;e=parseFloat(e)}return`${pixelsToPercent(e,t.target.x)}% ${pixelsToPercent(e,t.target.y)}%`}},correctBoxShadow={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,i=complex.parse(e);if(i.length>5)return n;const o=complex.createTransformer(e),a="number"!=typeof i[0]?1:0,s=r.x.scale*t.x,c=r.y.scale*t.y;i[0+a]/=s,i[1+a]/=c;const l=mixNumber$1(s,c,.5);return"number"==typeof i[2+a]&&(i[2+a]/=l),"number"==typeof i[3+a]&&(i[3+a]/=l),o(i)}};let hasTakenAnySnapshot=!1;class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:n}=this.props,{projection:i}=e;addScaleCorrector(defaultScaleCorrectors),i&&(t.group&&t.group.add(i),r&&r.register&&n&&r.register(i),hasTakenAnySnapshot&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:n,isPresent:i}=this.props,{projection:o}=r;return o?(o.isPresent=i,hasTakenAnySnapshot=!0,n||e.layoutDependency!==t||void 0===t||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||frame.postRender(()=>{const e=o.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),microtask.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:n}=e;hasTakenAnySnapshot=!0,n&&(n.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(n),r&&r.deregister&&r.deregister(n))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function MeasureLayout(e){const[t,r]=usePresence(),n=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...e,layoutGroup:n,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:t,safeToRemove:r})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function animateSingleValue(e,t,r){const n=isMotionValue(e)?e:motionValue(e);return n.start(animateMotionValue("",n,t,r)),n.animation}const compareByDepth=(e,t)=>e.depth-t.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(e){addUniqueItem(this.children,e),this.isDirty=!0}remove(e){removeItem(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(e)}}function delay(e,t){const r=time.now(),n=({timestamp:i})=>{const o=i-r;o>=t&&(cancelFrame(n),e(o-t))};return frame.setup(n,!0),()=>cancelFrame(n)}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=e=>"string"==typeof e?parseFloat(e):e,isPx=e=>"number"==typeof e||px.test(e);function mixValues(e,t,r,n,i,o){i?(e.opacity=mixNumber$1(0,r.opacity??1,easeCrossfadeIn(n)),e.opacityExit=mixNumber$1(t.opacity??1,0,easeCrossfadeOut(n))):o&&(e.opacity=mixNumber$1(t.opacity??1,r.opacity??1,n));for(let a=0;a<numBorders;a++){const i=`border${borders[a]}Radius`;let o=getRadius(t,i),s=getRadius(r,i);if(void 0===o&&void 0===s)continue;o||(o=0),s||(s=0);0===o||0===s||isPx(o)===isPx(s)?(e[i]=Math.max(mixNumber$1(asNumber(o),asNumber(s),n),0),(percent.test(s)||percent.test(o))&&(e[i]+="%")):e[i]=s}(t.rotate||r.rotate)&&(e.rotate=mixNumber$1(t.rotate||0,r.rotate||0,n))}function getRadius(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$2);function compress(e,t,r){return n=>n<e?0:n>t?1:r(progress(e,t,n))}function copyAxisInto(e,t){e.min=t.min,e.max=t.max}function copyBoxInto(e,t){copyAxisInto(e.x,t.x),copyAxisInto(e.y,t.y)}function copyAxisDeltaInto(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function removePointDelta(e,t,r,n,i){return e=scalePoint(e-=t,1/r,n),void 0!==i&&(e=scalePoint(e,1/i,n)),e}function removeAxisDelta(e,t=0,r=1,n=.5,i,o=e,a=e){if(percent.test(t)){t=parseFloat(t);t=mixNumber$1(a.min,a.max,t/100)-a.min}if("number"!=typeof t)return;let s=mixNumber$1(o.min,o.max,n);e===o&&(s-=t),e.min=removePointDelta(e.min,t,r,s,i),e.max=removePointDelta(e.max,t,r,s,i)}function removeAxisTransforms(e,t,[r,n,i],o,a){removeAxisDelta(e,t[r],t[n],t[i],t.scale,o,a)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(e,t,r,n){removeAxisTransforms(e.x,t,xKeys,r?r.x:void 0,n?n.x:void 0),removeAxisTransforms(e.y,t,yKeys,r?r.y:void 0,n?n.y:void 0)}function isAxisDeltaZero(e){return 0===e.translate&&1===e.scale}function isDeltaZero(e){return isAxisDeltaZero(e.x)&&isAxisDeltaZero(e.y)}function axisEquals(e,t){return e.min===t.min&&e.max===t.max}function boxEquals(e,t){return axisEquals(e.x,t.x)&&axisEquals(e.y,t.y)}function axisEqualsRounded(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function boxEqualsRounded(e,t){return axisEqualsRounded(e.x,t.x)&&axisEqualsRounded(e.y,t.y)}function aspectRatio(e){return calcLength(e.x)/calcLength(e.y)}function axisDeltaEquals(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class NodeStack{constructor(){this.members=[]}add(e){addUniqueItem(this.members,e),e.scheduleRender()}remove(e){if(removeItem(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let r;for(let n=t;n>=0;n--){const e=this.members[n];if(!1!==e.isPresent){r=e;break}}return!!r&&(this.promote(r),!0)}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:n}=e.options;!1===n&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(e,t,r){let n="";const i=e.x.translate/t.x,o=e.y.translate/t.y,a=(null==r?void 0:r.z)||0;if((i||o||a)&&(n=`translate3d(${i}px, ${o}px, ${a}px) `),1===t.x&&1===t.y||(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:e,rotate:t,rotateX:i,rotateY:o,skewX:a,skewY:s}=r;e&&(n=`perspective(${e}px) ${n}`),t&&(n+=`rotate(${t}deg) `),i&&(n+=`rotateX(${i}deg) `),o&&(n+=`rotateY(${o}deg) `),a&&(n+=`skewX(${a}deg) `),s&&(n+=`skewY(${s}deg) `)}const s=e.x.scale*t.x,c=e.y.scale*t.y;return 1===s&&1===c||(n+=`scale(${s}, ${c})`),n||"none"}const transformAxes=["","X","Y","Z"],animationTarget=1e3;let id=0;function resetDistortingTransform(e,t,r,n){const{latestValues:i}=t;i[e]&&(r[e]=i[e],t.setStaticValue(e,0),n&&(n[e]=0))}function cancelTreeOptimisedTransformAnimations(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=getOptimisedAppearId(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:t,layoutId:n}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",frame,!(t||n))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(n)}function createProjectionNode({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(e={},r=(null==t?void 0:t())){this.id=id++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=r?r.root||r:this,this.path=r?[...r.path,r]:[],this.parent=r,this.depth=r?r.depth+1:0;for(let t=0;t<this.path.length;t++)this.path[t].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new SubscriptionManager),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){const r=this.eventHandlers.get(e);r&&r.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t){if(this.instance)return;this.isSVG=isSVGElement(t)&&!isSVGSVGElement(t),this.instance=t;const{layoutId:r,layout:n,visualElement:i}=this.options;if(i&&!i.current&&i.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(n||r)&&(this.isLayoutDirty=!0),e){let r,n=0;const i=()=>this.root.updateBlockedByResize=!1;frame.read(()=>{n=window.innerWidth}),e(t,()=>{const e=window.innerWidth;e!==n&&(n=e,this.root.updateBlockedByResize=!0,r&&r(),r=delay(i,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation)))})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&i&&(r||n)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:r,layout:n})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const o=this.options.transition||i.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:a,onLayoutAnimationComplete:s}=i.getProps(),c=!this.targetLayout||!boxEqualsRounded(this.targetLayout,n),l=!t&&r;if(this.options.layoutRoot||this.resumeFrom||l||t&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const t={...getValueTransition(o,"layout"),onPlay:a,onComplete:s};(i.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t),this.setAnimationOrigin(e,l)}else t||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=n})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const e=this.path[i];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:r}=this.options;if(void 0===t&&!r)return;const n=this.getTransformTemplate();this.prevTransformTemplateValue=n?n(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(clearMeasurements);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(clearIsLayoutDirty);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate)):this.nodes.forEach(clearIsLayoutDirty),this.clearAllSnapshots();const e=time.now();frameData.delta=clamp(0,1e3/60,e-frameData.timestamp),frameData.timestamp=e,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||calcLength(this.snapshot.measuredBox.x)||calcLength(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let r=0;r<this.path.length;r++){this.path[r].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=n(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!i)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!isDeltaZero(this.projectionDelta),r=this.getTransformTemplate(),n=r?r(this.latestValues,""):void 0,o=n!==this.prevTransformTemplateValue;e&&this.instance&&(t||hasTransform(this.latestValues)||o)&&(i(this.instance,n),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){const t=this.measurePageBox();let r=this.removeElementScroll(t);return e&&(r=this.removeTransform(r)),roundBox(r),{animationId:this.root.animationId,measuredBox:t,layoutBox:r,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return createBox();const r=t.measureViewportBox();if(!((null==(e=this.scroll)?void 0:e.wasRoot)||this.path.some(checkNodeWasScrollRoot))){const{scroll:e}=this.root;e&&(translateAxis(r.x,e.offset.x),translateAxis(r.y,e.offset.y))}return r}removeElementScroll(e){var t;const r=createBox();if(copyBoxInto(r,e),null==(t=this.scroll)?void 0:t.wasRoot)return r;for(let n=0;n<this.path.length;n++){const t=this.path[n],{scroll:i,options:o}=t;t!==this.root&&i&&o.layoutScroll&&(i.wasRoot&&copyBoxInto(r,e),translateAxis(r.x,i.offset.x),translateAxis(r.y,i.offset.y))}return r}applyTransform(e,t=!1){const r=createBox();copyBoxInto(r,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&transformBox(r,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),hasTransform(e.latestValues)&&transformBox(r,e.latestValues)}return hasTransform(this.latestValues)&&transformBox(r,this.latestValues),r}removeTransform(e){const t=createBox();copyBoxInto(t,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];if(!e.instance)continue;if(!hasTransform(e.latestValues))continue;hasScale(e.latestValues)&&e.updateSnapshot();const n=createBox();copyBoxInto(n,e.measurePageBox()),removeBoxTransforms(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,n)}return hasTransform(this.latestValues)&&removeBoxTransforms(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var t;const r=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=r.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=r.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=r.isSharedProjectionDirty);const n=Boolean(this.resumingFrom)||this!==r;if(!(e||n&&this.isSharedProjectionDirty||this.isProjectionDirty||(null==(t=this.parent)?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:i,layoutId:o}=this.options;if(this.layout&&(i||o)){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if((this.relativeTarget||this.targetDelta)&&(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,e.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(this.parent&&!hasScale(this.parent.latestValues)&&!has2DTranslate(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),r=Boolean(this.resumingFrom)||this!==t;let n=!0;if((this.isProjectionDirty||(null==(e=this.parent)?void 0:e.isProjectionDirty))&&(n=!1),r&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(n=!1),n)return;const{layout:i,layoutId:o}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!i&&!o)return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const a=this.treeScale.x,s=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,r),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms=createBox());const{target:c}=t;c?(this.projectionDelta&&this.prevProjectionDelta?(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),calcBoxDelta(this.projectionDelta,this.layoutCorrected,c,this.latestValues),this.treeScale.x===a&&this.treeScale.y===s&&axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)&&axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",c))):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){var t;if(null==(t=this.options.visualElement)||t.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(e,t=!1){const r=this.snapshot,n=r?r.latestValues:{},i={...this.latestValues},o=createDelta();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const a=createBox(),s=(r?r.source:void 0)!==(this.layout?this.layout.source:void 0),c=this.getStack(),l=!c||c.members.length<=1,u=Boolean(s&&!l&&!0===this.options.crossfade&&!this.path.some(hasOpacityCrossfade));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const r=t/1e3;mixAxisDelta(o.x,e.x,r),mixAxisDelta(o.y,e.y,r),this.setTargetDelta(o),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(a,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,a,r),d&&boxEquals(this.relativeTarget,d)&&(this.isProjectionDirty=!1),d||(d=createBox()),copyBoxInto(d,this.relativeTarget)),s&&(this.animationValues=i,mixValues(i,n,this.latestValues,r,u,l)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=r},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){var t,r,n;this.notifyListeners("animationStart"),null==(t=this.currentAnimation)||t.stop(),null==(n=null==(r=this.resumingFrom)?void 0:r.currentAnimation)||n.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=motionValue(0)),this.currentAnimation=animateSingleValue(this.motionValue,[0,1e3],{...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:r,layout:n,latestValues:i}=e;if(t&&r&&n){if(this!==e&&this.layout&&n&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,n.layoutBox)){r=this.target||createBox();const t=calcLength(this.layout.layoutBox.x);r.x.min=e.target.x.min,r.x.max=r.x.min+t;const n=calcLength(this.layout.layoutBox.y);r.y.min=e.target.y.min,r.y.max=r.y.min+n}copyBoxInto(t,r),transformBox(t,i),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new NodeStack);this.sharedNodes.get(e).add(t);const r=t.options.initialPromotionConfig;t.promote({transition:r?r.transition:void 0,preserveFollowOpacity:r&&r.shouldPreserveFollowOpacity?r.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null==(e=this.getStack())?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null==(e=this.getStack())?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:r}={}){const n=this.getStack();n&&n.promote(this,r),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:r}=e;if((r.z||r.rotate||r.rotateX||r.rotateY||r.rotateZ||r.skewX||r.skewY)&&(t=!0),!t)return;const n={};r.z&&resetDistortingTransform("z",e,n,this.animationValues);for(let i=0;i<transformAxes.length;i++)resetDistortingTransform(`rotate${transformAxes[i]}`,e,n,this.animationValues),resetDistortingTransform(`skew${transformAxes[i]}`,e,n,this.animationValues);e.render();for(const i in n)e.setStaticValue(i,n[i]),this.animationValues&&(this.animationValues[i]=n[i]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const r=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=resolveMotionValue(null==t?void 0:t.pointerEvents)||"",void(e.transform=r?r(this.latestValues,""):"none");const n=this.getLead();if(!this.projectionDelta||!this.layout||!n.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=resolveMotionValue(null==t?void 0:t.pointerEvents)||""),void(this.hasProjected&&!hasTransform(this.latestValues)&&(e.transform=r?r({},""):"none",this.hasProjected=!1));e.visibility="";const i=n.animationValues||n.latestValues;this.applyTransformsToTarget();let o=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,i);r&&(o=r(i,o)),e.transform=o;const{x:a,y:s}=this.projectionDelta;e.transformOrigin=`${100*a.origin}% ${100*s.origin}% 0`,n.animationValues?e.opacity=n===this?i.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:e.opacity=n===this?void 0!==i.opacity?i.opacity:"":void 0!==i.opacityExit?i.opacityExit:0;for(const c in scaleCorrectors){if(void 0===i[c])continue;const{correct:t,applyTo:r,isCSSVariable:a}=scaleCorrectors[c],s="none"===o?i[c]:t(i[c],n);if(r){const t=r.length;for(let n=0;n<t;n++)e[r[n]]=s}else a?this.options.visualElement.renderState.vars[c]=s:e[c]=s}this.options.layoutId&&(e.pointerEvents=n===this?resolveMotionValue(null==t?void 0:t.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null==(t=e.currentAnimation)?void 0:t.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(e){e.updateLayout()}function notifyLayoutUpdate(e){var t;const r=(null==(t=e.resumeFrom)?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:n}=e.layout,{animationType:i}=e.options,o=r.source!==e.layout.source;"size"===i?eachAxis(e=>{const n=o?r.measuredBox[e]:r.layoutBox[e],i=calcLength(n);n.min=t[e].min,n.max=n.min+i}):shouldAnimatePositionOnly(i,r.layoutBox,t)&&eachAxis(n=>{const i=o?r.measuredBox[n]:r.layoutBox[n],a=calcLength(t[n]);i.max=i.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[n].max=e.relativeTarget[n].min+a)});const a=createDelta();calcBoxDelta(a,t,r.layoutBox);const s=createDelta();o?calcBoxDelta(s,e.applyTransform(n,!0),r.measuredBox):calcBoxDelta(s,t,r.layoutBox);const c=!isDeltaZero(a);let l=!1;if(!e.resumeFrom){const n=e.getClosestProjectingParent();if(n&&!n.resumeFrom){const{snapshot:i,layout:o}=n;if(i&&o){const a=createBox();calcRelativePosition(a,r.layoutBox,i.layoutBox);const s=createBox();calcRelativePosition(s,t,o.layoutBox),boxEqualsRounded(a,s)||(l=!0),n.options.layoutRoot&&(e.relativeTarget=s,e.relativeTargetOrigin=a,e.relativeParent=n)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:r,delta:s,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:l})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function propagateDirtyNodes(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function cleanDirtyNodes(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function clearSnapshot(e){e.clearSnapshot()}function clearMeasurements(e){e.clearMeasurements()}function clearIsLayoutDirty(e){e.isLayoutDirty=!1}function resetTransformStyle(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function finishAnimation(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function resolveTargetDelta(e){e.resolveTargetDelta()}function calcProjection(e){e.calcProjection()}function resetSkewAndRotation(e){e.resetSkewAndRotation()}function removeLeadSnapshots(e){e.removeLeadSnapshot()}function mixAxisDelta(e,t,r){e.translate=mixNumber$1(t.translate,0,r),e.scale=mixNumber$1(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function mixAxis(e,t,r,n){e.min=mixNumber$1(t.min,r.min,n),e.max=mixNumber$1(t.max,r.max,n)}function mixBox(e,t,r,n){mixAxis(e.x,t.x,r.x,n),mixAxis(e.y,t.y,r.y,n)}function hasOpacityCrossfade(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$2;function roundAxis(e){e.min=roundPoint(e.min),e.max=roundPoint(e.max)}function roundBox(e){roundAxis(e.x),roundAxis(e.y)}function shouldAnimatePositionOnly(e,t,r){return"position"===e||"preserve-aspect"===e&&!isNear(aspectRatio(t),aspectRatio(r),.2)}function checkNodeWasScrollRoot(e){var t;return e!==e.root&&(null==(t=e.scroll)?void 0:t.wasRoot)}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(e,t)=>addDomEvent(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const e=new DocumentProjectionNode({});e.mount(window),e.setOptions({layoutScroll:!0}),rootProjectionNode.current=e}return rootProjectionNode.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout:MeasureLayout}};function handleHoverEvent(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover","Start"===r);const i=n["onHover"+r];i&&frame.postRender(()=>i(t,extractEventInfo(t)))}class HoverGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=hover(e,(e,t)=>(handleHoverEvent(this.node,t,"Start"),e=>handleHoverEvent(this.node,e,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(e3){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap","Start"===r);const i=n["onTap"+("End"===r?"":r)];i&&frame.postRender(()=>i(t,extractEventInfo(t)))}class PressGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=press(e,(e,t)=>(handlePressEvent(this.node,t,"Start"),(e,{success:t})=>handlePressEvent(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=e=>{const t=observerCallbacks.get(e.target);t&&t(e)},fireAllObserverCallbacks=e=>{e.forEach(fireObserverCallback)};function initIntersectionObserver({root:e,...t}){const r=e||document;observers.has(r)||observers.set(r,{});const n=observers.get(r),i=JSON.stringify(t);return n[i]||(n[i]=new IntersectionObserver(fireAllObserverCallbacks,{root:e,...t})),n[i]}function observeIntersection(e,t,r){const n=initIntersectionObserver(t);return observerCallbacks.set(e,r),n.observe(e),()=>{observerCallbacks.delete(e),n.unobserve(e)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:n="some",once:i}=e,o={root:t?t.current:void 0,rootMargin:r,threshold:"number"==typeof n?n:thresholdNames[n]};return observeIntersection(this.node.current,o,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,i&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:r,onViewportLeave:n}=this.node.getProps(),o=t?r:n;o&&o(e)})}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(e,t))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout:MeasureLayout}},featureBundle={...animations,...gestureAnimations,...drag,...layout},motion=createMotionProxy(featureBundle,createDomVisualElement),DashboardNew=({provider:e,address:t})=>{const[r,n]=reactExports.useState("0"),[i,o]=reactExports.useState(0),[a,s]=reactExports.useState(0),[c,l]=reactExports.useState(0),[u,d]=reactExports.useState(null),[p,h]=reactExports.useState(!0),[m,f]=reactExports.useState(null),x=reactExports.useMemo(()=>{const e=Number(r),t=.95*e;return((e-t)/t*100).toFixed(1)},[r]);reactExports.useMemo(()=>a>0?"+3":"0",[a]),reactExports.useMemo(()=>c>0?"-0.8":"0",[c]),reactExports.useEffect(()=>{(async()=>{try{h(!0),f(null);const{token:r,verifier:i}=await getContracts(e),[a,c,u]=await Promise.all([r.balanceOf(t),i.getActionCount(),e.getFeeData()]),p=formatUnits(a,18);n(p);const m=Number(c);o(m);let x=0,g=0n;const y=10;for(let e=0;e<m;e+=y){const t=[];for(let n=e;n<Math.min(e+y,m);n++)t.push(i.actions(n));const r=await Promise.all(t);for(const e of r)e.verified&&(x++,g+=BigInt(e.reward??0n))}s(x),l(Number(g)/1e18*.1);const b=await e.getNetwork(),v=await e.getBlockNumber();d({name:"moonbeam"===b.name?"Moonbase Alpha":b.name,blockNumber:v,gasPrice:formatUnits(u.gasPrice||0n,"gwei")}),zt.success("Dashboard data loaded successfully")}catch(r){f("Failed to load dashboard data. Please check your connection."),zt.error("Failed to load dashboard data. Please check your connection.")}finally{h(!1)}})()},[e,t]);const g=reactExports.useMemo(()=>{const e=Number(r);return[{name:"Jan",tokens:Math.max(0,.1*e)},{name:"Feb",tokens:Math.max(0,.25*e)},{name:"Mar",tokens:Math.max(0,.45*e)},{name:"Apr",tokens:Math.max(0,.7*e)},{name:"May",tokens:Math.max(0,.85*e)},{name:"Jun",tokens:e}]},[r]);return p?jsxRuntimeExports.jsx("div",{className:"container-responsive",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"loading-skeleton h-8 w-64 mx-auto mb-2"}),jsxRuntimeExports.jsx("div",{className:"loading-skeleton h-4 w-96 mx-auto"})]}),jsxRuntimeExports.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[1,2,3].map(e=>jsxRuntimeExports.jsx("div",{className:"card",children:jsxRuntimeExports.jsx("div",{className:"loading-skeleton h-24 w-full"})},e))}),jsxRuntimeExports.jsx("div",{className:"card",children:jsxRuntimeExports.jsx("div",{className:"loading-skeleton h-80 w-full"})}),jsxRuntimeExports.jsx("div",{className:"card",children:jsxRuntimeExports.jsx("div",{className:"loading-skeleton h-32 w-full"})})]})}):m?jsxRuntimeExports.jsx("div",{className:"container-responsive",children:jsxRuntimeExports.jsxs("div",{className:"max-w-2xl mx-auto text-center py-12",children:[jsxRuntimeExports.jsx("div",{className:"text-6xl mb-4",children:"âš ï¸"}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Connection Error"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6",children:m}),jsxRuntimeExports.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-primary btn-lg",children:"ðŸ”„ Retry Connection"})]})}):jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-cyan-50 to-green-50",children:jsxRuntimeExports.jsx("div",{className:"container-responsive py-12",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-6xl mx-auto space-y-8",children:[jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"text-center mb-12",children:[jsxRuntimeExports.jsx(motion.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"inline-block mb-4",children:jsxRuntimeExports.jsx(Leaf,{className:"w-16 h-16 text-emerald-500"})}),jsxRuntimeExports.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-emerald-600 to-cyan-600 bg-clip-text text-transparent mb-4",children:"Green Credits Dashboard"}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"ðŸŒ¿ Track your environmental impact and token growth"})]}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"grid md:grid-cols-3 gap-6",children:jsxRuntimeExports.jsxs(motion.div,{whileHover:{scale:1.02,y:-5},transition:{type:"spring",stiffness:300},className:"card hover:shadow-xl transition-all duration-300 bg-gradient-to-br from-white to-emerald-50/50 border-emerald-200/50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[jsxRuntimeExports.jsx(motion.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},className:"p-3 bg-emerald-100 rounded-full",children:jsxRuntimeExports.jsx(Leaf,{className:"w-8 h-8 text-emerald-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"GCT Balance"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:"Green Credit Tokens"})]})]}),jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-emerald-600 mb-2",children:Number(r).toLocaleString(void 0,{maximumFractionDigits:4})}),jsxRuntimeExports.jsxs("div",{className:"text-sm font-medium flex items-center gap-1 "+(x.startsWith("-")?"text-red-500":"text-emerald-600"),children:[jsxRuntimeExports.jsx(TrendingUp,{className:"w-4 h-4"}),x.startsWith("-")?x:`+${x}`,"% vs last month"]})]})}),jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsxs("div",{className:"card-header",children:[jsxRuntimeExports.jsx("h2",{className:"card-title",children:"ðŸ“Š Token Growth & Activity"}),jsxRuntimeExports.jsx("p",{className:"card-description",children:"Your GCT balance growth over time"})]}),jsxRuntimeExports.jsx("div",{className:"h-80",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(LineChart,{data:g,margin:{top:5,right:30,left:20,bottom:5},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"name",stroke:"#6b7280",fontSize:12,tickLine:!1}),jsxRuntimeExports.jsx(YAxis,{stroke:"#6b7280",fontSize:12,tickLine:!1,tickFormatter:e=>`${e.toFixed(1)}`}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},labelStyle:{color:"#374151",fontWeight:"bold"}}),jsxRuntimeExports.jsx(Line,{type:"monotone",dataKey:"tokens",stroke:"#16a34a",strokeWidth:3,dot:{fill:"#16a34a",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#16a34a",strokeWidth:2}})]})})})]}),jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsxs("div",{className:"card-header",children:[jsxRuntimeExports.jsx("h2",{className:"card-title",children:"ðŸ”— Network Status"}),jsxRuntimeExports.jsx("p",{className:"card-description",children:"Your connection to the Polkadot ecosystem"})]}),u&&jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-r from-primary-bg to-info-bg border border-primary rounded-lg p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"text-4xl",children:"ðŸŒ™"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-xl font-semibold text-gray-900",children:[u.name," Network"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-success rounded-full animate-pulse"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-success",children:"Connected & Syncing"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white/50 rounded-lg p-4",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Latest Block"}),jsxRuntimeExports.jsxs("div",{className:"text-lg font-mono font-semibold text-gray-900",children:["#",u.blockNumber.toLocaleString()]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white/50 rounded-lg p-4",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Gas Price"}),jsxRuntimeExports.jsxs("div",{className:"text-lg font-mono font-semibold text-gray-900",children:[Number(u.gasPrice).toFixed(1)," gwei"]})]})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-sm mt-4 leading-relaxed",children:"Your impact is transparently recorded on the Polkadot ecosystem, ensuring trust and immutability. Every action, verification, and transaction is permanently stored on-chain."})]})]}),jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsxs("div",{className:"card-header",children:[jsxRuntimeExports.jsx("h2",{className:"card-title",children:"ðŸŽ¯ Quick Actions"}),jsxRuntimeExports.jsx("p",{className:"card-description",children:"Jump into your favorite activities"})]}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>window.location.hash="#/submit",className:"group p-6 bg-gradient-to-br from-success-bg to-success/10 hover:from-success/20 hover:to-success/20 border border-success/20 rounded-xl transition-all duration-200 hover:shadow-lg hover:scale-105",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-4xl mb-3 group-hover:scale-110 transition-transform",children:"ðŸŒ±"}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Submit Action"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Share your impact"})]})}),jsxRuntimeExports.jsx("button",{onClick:()=>window.location.hash="#/actions",className:"group p-6 bg-gradient-to-br from-primary-bg to-primary/10 hover:from-primary/20 hover:to-primary/20 border border-primary/20 rounded-xl transition-all duration-200 hover:shadow-lg hover:scale-105",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-4xl mb-3 group-hover:scale-110 transition-transform",children:"ðŸ“‹"}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"View Actions"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Track your history"})]})}),jsxRuntimeExports.jsx("button",{onClick:()=>window.location.hash="#/donate",className:"group p-6 bg-gradient-to-br from-warning-bg to-warning/10 hover:from-warning/20 hover:to-warning/20 border border-warning/20 rounded-xl transition-all duration-200 hover:shadow-lg hover:scale-105",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-4xl mb-3 group-hover:scale-110 transition-transform",children:"ðŸ’š"}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Make Donation"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Support causes"})]})}),jsxRuntimeExports.jsx("button",{onClick:()=>window.location.hash="#/leaderboard",className:"group p-6 bg-gradient-to-br from-secondary-bg to-secondary/10 hover:from-secondary/20 hover:to-secondary/20 border border-secondary/20 rounded-xl transition-all duration-200 hover:shadow-lg hover:scale-105",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-4xl mb-3 group-hover:scale-110 transition-transform",children:"ðŸ†"}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Leaderboard"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"See top contributors"})]})})]})]})]})})})},typeofs=["string","number","bigint","symbol"],objectTypeNames=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function is(e){if(null===e)return"null";if(void 0===e)return"undefined";if(!0===e||!1===e)return"boolean";const t=typeof e;if(typeofs.includes(t))return t;if("function"===t)return"Function";if(Array.isArray(e))return"Array";if(isBuffer$1(e))return"Buffer";const r=getObjectType(e);return r||"Object"}function isBuffer$1(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function getObjectType(e){const t=Object.prototype.toString.call(e).slice(8,-1);if(objectTypeNames.includes(t))return t}class Type{constructor(e,t,r){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=r}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}Type.uint=new Type(0,"uint",!0),Type.negint=new Type(1,"negint",!0),Type.bytes=new Type(2,"bytes",!0),Type.string=new Type(3,"string",!0),Type.array=new Type(4,"array",!1),Type.map=new Type(5,"map",!1),Type.tag=new Type(6,"tag",!1),Type.float=new Type(7,"float",!0),Type.false=new Type(7,"false",!0),Type.true=new Type(7,"true",!0),Type.null=new Type(7,"null",!0),Type.undefined=new Type(7,"undefined",!0),Type.break=new Type(7,"break",!0);class Token{constructor(e,t,r){this.type=e,this.value=t,this.encodedLength=r,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const useBuffer=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"==typeof globalThis.Buffer.isBuffer,textDecoder$1=new TextDecoder,textEncoder$2=new TextEncoder;function isBuffer(e){return useBuffer&&globalThis.Buffer.isBuffer(e)}function asU8A(e){return e instanceof Uint8Array?isBuffer(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}const toString$2=useBuffer?(e,t,r)=>r-t>64?globalThis.Buffer.from(e.subarray(t,r)).toString("utf8"):utf8Slice(e,t,r):(e,t,r)=>r-t>64?textDecoder$1.decode(e.subarray(t,r)):utf8Slice(e,t,r),fromString$1=useBuffer?e=>e.length>64?globalThis.Buffer.from(e):utf8ToBytes(e):e=>e.length>64?textEncoder$2.encode(e):utf8ToBytes(e),fromArray=e=>Uint8Array.from(e),slice=useBuffer?(e,t,r)=>isBuffer(e)?new Uint8Array(e.subarray(t,r)):e.slice(t,r):(e,t,r)=>e.slice(t,r),concat$1=useBuffer?(e,t)=>(e=e.map(e=>e instanceof Uint8Array?e:globalThis.Buffer.from(e)),asU8A(globalThis.Buffer.concat(e,t))):(e,t)=>{const r=new Uint8Array(t);let n=0;for(let i of e)n+i.length>r.length&&(i=i.subarray(0,r.length-n)),r.set(i,n),n+=i.length;return r},alloc$1=useBuffer?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function compare(e,t){if(isBuffer(e)&&isBuffer(t))return e.compare(t);for(let r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}function utf8ToBytes(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t[r++]=i:i<2048?(t[r++]=i>>6|192,t[r++]=63&i|128):55296==(64512&i)&&n+1<e.length&&56320==(64512&e.charCodeAt(n+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n)),t[r++]=i>>18|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=63&i|128):(t[r++]=i>>12|224,t[r++]=i>>6&63|128,t[r++]=63&i|128)}return t}function utf8Slice(e,t,r){const n=[];for(;t<r;){const i=e[t];let o=null,a=i>239?4:i>223?3:i>191?2:1;if(t+a<=r){let r,n,s,c;switch(a){case 1:i<128&&(o=i);break;case 2:r=e[t+1],128==(192&r)&&(c=(31&i)<<6|63&r,c>127&&(o=c));break;case 3:r=e[t+1],n=e[t+2],128==(192&r)&&128==(192&n)&&(c=(15&i)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:r=e[t+1],n=e[t+2],s=e[t+3],128==(192&r)&&128==(192&n)&&128==(192&s)&&(c=(15&i)<<18|(63&r)<<12|(63&n)<<6|63&s,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),t+=a}return decodeCodePointsArray(n)}const MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(e){const t=e.length;if(t<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=MAX_ARGUMENTS_LENGTH));return r}const defaultChunkSize=256;class Bl{constructor(e=defaultChunkSize){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const r=t.length-(this.maxCursor-this.cursor)-1;t.set(e,r)}else{if(t){const e=t.length-(this.maxCursor-this.cursor)-1;e<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,e),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=alloc$1(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,null===this._initReuseChunk&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(1===this.chunks.length){const r=this.chunks[0];e&&this.cursor>r.length/2?(t=this.cursor===r.length?r:r.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=slice(r,0,this.cursor)}else t=concat$1(this.chunks,this.cursor);return e&&this.reset(),t}}const decodeErrPrefix="CBOR decode error:",encodeErrPrefix="CBOR encode error:";function assertEnoughData(e,t,r){if(e.length-t<r)throw new Error(`${decodeErrPrefix} not enough data for type`)}const uintBoundaries=[24,256,65536,4294967296,BigInt("18446744073709551616")];function readUint8(e,t,r){assertEnoughData(e,t,1);const n=e[t];if(!0===r.strict&&n<uintBoundaries[0])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return n}function readUint16(e,t,r){assertEnoughData(e,t,2);const n=e[t]<<8|e[t+1];if(!0===r.strict&&n<uintBoundaries[1])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return n}function readUint32(e,t,r){assertEnoughData(e,t,4);const n=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(!0===r.strict&&n<uintBoundaries[2])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return n}function readUint64(e,t,r){assertEnoughData(e,t,8);const n=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],i=16777216*e[t+4]+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],o=(BigInt(n)<<BigInt(32))+BigInt(i);if(!0===r.strict&&o<uintBoundaries[3])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(!0===r.allowBigInt)return o;throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`)}function decodeUint8(e,t,r,n){return new Token(Type.uint,readUint8(e,t+1,n),2)}function decodeUint16(e,t,r,n){return new Token(Type.uint,readUint16(e,t+1,n),3)}function decodeUint32(e,t,r,n){return new Token(Type.uint,readUint32(e,t+1,n),5)}function decodeUint64(e,t,r,n){return new Token(Type.uint,readUint64(e,t+1,n),9)}function encodeUint(e,t){return encodeUintValue(e,0,t.value)}function encodeUintValue(e,t,r){if(r<uintBoundaries[0]){const n=Number(r);e.push([t|n])}else if(r<uintBoundaries[1]){const n=Number(r);e.push([24|t,n])}else if(r<uintBoundaries[2]){const n=Number(r);e.push([25|t,n>>>8,255&n])}else if(r<uintBoundaries[3]){const n=Number(r);e.push([26|t,n>>>24&255,n>>>16&255,n>>>8&255,255&n])}else{const n=BigInt(r);if(!(n<uintBoundaries[4]))throw new Error(`${decodeErrPrefix} encountered BigInt larger than allowable range`);{const r=[27|t,0,0,0,0,0,0,0];let i=Number(n&BigInt(4294967295)),o=Number(n>>BigInt(32)&BigInt(4294967295));r[8]=255&i,i>>=8,r[7]=255&i,i>>=8,r[6]=255&i,i>>=8,r[5]=255&i,r[4]=255&o,o>>=8,r[3]=255&o,o>>=8,r[2]=255&o,o>>=8,r[1]=255&o,e.push(r)}}}function decodeNegint8(e,t,r,n){return new Token(Type.negint,-1-readUint8(e,t+1,n),2)}function decodeNegint16(e,t,r,n){return new Token(Type.negint,-1-readUint16(e,t+1,n),3)}function decodeNegint32(e,t,r,n){return new Token(Type.negint,-1-readUint32(e,t+1,n),5)}encodeUint.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)},encodeUintValue.encodedSize=function(e){return e<uintBoundaries[0]?1:e<uintBoundaries[1]?2:e<uintBoundaries[2]?3:e<uintBoundaries[3]?5:9},encodeUint.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};const neg1b=BigInt(-1),pos1b=BigInt(1);function decodeNegint64(e,t,r,n){const i=readUint64(e,t+1,n);if("bigint"!=typeof i){const e=-1-i;if(e>=Number.MIN_SAFE_INTEGER)return new Token(Type.negint,e,9)}if(!0!==n.allowBigInt)throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`);return new Token(Type.negint,neg1b-BigInt(i),9)}function encodeNegint(e,t){const r=t.value,n="bigint"==typeof r?r*neg1b-pos1b:-1*r-1;encodeUintValue(e,t.type.majorEncoded,n)}function toToken$3(e,t,r,n){assertEnoughData(e,t,r+n);const i=slice(e,t+r,t+r+n);return new Token(Type.bytes,i,r+n)}function decodeBytesCompact(e,t,r,n){return toToken$3(e,t,1,r)}function decodeBytes8(e,t,r,n){return toToken$3(e,t,2,readUint8(e,t+1,n))}function decodeBytes16(e,t,r,n){return toToken$3(e,t,3,readUint16(e,t+1,n))}function decodeBytes32(e,t,r,n){return toToken$3(e,t,5,readUint32(e,t+1,n))}function decodeBytes64(e,t,r,n){const i=readUint64(e,t+1,n);if("bigint"==typeof i)throw new Error(`${decodeErrPrefix} 64-bit integer bytes lengths not supported`);return toToken$3(e,t,9,i)}function tokenBytes(e){return void 0===e.encodedBytes&&(e.encodedBytes=e.type===Type.string?fromString$1(e.value):e.value),e.encodedBytes}function encodeBytes(e,t){const r=tokenBytes(t);encodeUintValue(e,t.type.majorEncoded,r.length),e.push(r)}function compareBytes(e,t){return e.length<t.length?-1:e.length>t.length?1:compare(e,t)}function toToken$2(e,t,r,n,i){const o=r+n;assertEnoughData(e,t,o);const a=new Token(Type.string,toString$2(e,t+r,t+o),o);return!0===i.retainStringBytes&&(a.byteValue=slice(e,t+r,t+o)),a}function decodeStringCompact(e,t,r,n){return toToken$2(e,t,1,r,n)}function decodeString8(e,t,r,n){return toToken$2(e,t,2,readUint8(e,t+1,n),n)}function decodeString16(e,t,r,n){return toToken$2(e,t,3,readUint16(e,t+1,n),n)}function decodeString32(e,t,r,n){return toToken$2(e,t,5,readUint32(e,t+1,n),n)}function decodeString64(e,t,r,n){const i=readUint64(e,t+1,n);if("bigint"==typeof i)throw new Error(`${decodeErrPrefix} 64-bit integer string lengths not supported`);return toToken$2(e,t,9,i,n)}encodeNegint.encodedSize=function(e){const t=e.value,r="bigint"==typeof t?t*neg1b-pos1b:-1*t-1;return r<uintBoundaries[0]?1:r<uintBoundaries[1]?2:r<uintBoundaries[2]?3:r<uintBoundaries[3]?5:9},encodeNegint.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0},encodeBytes.encodedSize=function(e){const t=tokenBytes(e);return encodeUintValue.encodedSize(t.length)+t.length},encodeBytes.compareTokens=function(e,t){return compareBytes(tokenBytes(e),tokenBytes(t))};const encodeString=encodeBytes;function toToken$1(e,t,r,n){return new Token(Type.array,n,r)}function decodeArrayCompact(e,t,r,n){return toToken$1(e,t,1,r)}function decodeArray8(e,t,r,n){return toToken$1(e,t,2,readUint8(e,t+1,n))}function decodeArray16(e,t,r,n){return toToken$1(e,t,3,readUint16(e,t+1,n))}function decodeArray32(e,t,r,n){return toToken$1(e,t,5,readUint32(e,t+1,n))}function decodeArray64(e,t,r,n){const i=readUint64(e,t+1,n);if("bigint"==typeof i)throw new Error(`${decodeErrPrefix} 64-bit integer array lengths not supported`);return toToken$1(e,t,9,i)}function decodeArrayIndefinite(e,t,r,n){if(!1===n.allowIndefinite)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken$1(e,t,1,1/0)}function encodeArray(e,t){encodeUintValue(e,Type.array.majorEncoded,t.value)}function toToken(e,t,r,n){return new Token(Type.map,n,r)}function decodeMapCompact(e,t,r,n){return toToken(e,t,1,r)}function decodeMap8(e,t,r,n){return toToken(e,t,2,readUint8(e,t+1,n))}function decodeMap16(e,t,r,n){return toToken(e,t,3,readUint16(e,t+1,n))}function decodeMap32(e,t,r,n){return toToken(e,t,5,readUint32(e,t+1,n))}function decodeMap64(e,t,r,n){const i=readUint64(e,t+1,n);if("bigint"==typeof i)throw new Error(`${decodeErrPrefix} 64-bit integer map lengths not supported`);return toToken(e,t,9,i)}function decodeMapIndefinite(e,t,r,n){if(!1===n.allowIndefinite)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken(e,t,1,1/0)}function encodeMap(e,t){encodeUintValue(e,Type.map.majorEncoded,t.value)}function decodeTagCompact(e,t,r,n){return new Token(Type.tag,r,1)}function decodeTag8(e,t,r,n){return new Token(Type.tag,readUint8(e,t+1,n),2)}function decodeTag16(e,t,r,n){return new Token(Type.tag,readUint16(e,t+1,n),3)}function decodeTag32(e,t,r,n){return new Token(Type.tag,readUint32(e,t+1,n),5)}function decodeTag64(e,t,r,n){return new Token(Type.tag,readUint64(e,t+1,n),9)}function encodeTag(e,t){encodeUintValue(e,Type.tag.majorEncoded,t.value)}encodeArray.compareTokens=encodeUint.compareTokens,encodeArray.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)},encodeMap.compareTokens=encodeUint.compareTokens,encodeMap.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)},encodeTag.compareTokens=encodeUint.compareTokens,encodeTag.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};const MINOR_FALSE=20,MINOR_TRUE=21,MINOR_NULL=22,MINOR_UNDEFINED=23;function decodeUndefined(e,t,r,n){if(!1===n.allowUndefined)throw new Error(`${decodeErrPrefix} undefined values are not supported`);return!0===n.coerceUndefinedToNull?new Token(Type.null,null,1):new Token(Type.undefined,void 0,1)}function decodeBreak(e,t,r,n){if(!1===n.allowIndefinite)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return new Token(Type.break,void 0,1)}function createToken(e,t,r){if(r){if(!1===r.allowNaN&&Number.isNaN(e))throw new Error(`${decodeErrPrefix} NaN values are not supported`);if(!1===r.allowInfinity&&(e===1/0||e===-1/0))throw new Error(`${decodeErrPrefix} Infinity values are not supported`)}return new Token(Type.float,e,t)}function decodeFloat16(e,t,r,n){return createToken(readFloat16(e,t+1),3,n)}function decodeFloat32(e,t,r,n){return createToken(readFloat32(e,t+1),5,n)}function decodeFloat64(e,t,r,n){return createToken(readFloat64(e,t+1),9,n)}function encodeFloat(e,t,r){const n=t.value;if(!1===n)e.push([Type.float.majorEncoded|MINOR_FALSE]);else if(!0===n)e.push([Type.float.majorEncoded|MINOR_TRUE]);else if(null===n)e.push([Type.float.majorEncoded|MINOR_NULL]);else if(void 0===n)e.push([Type.float.majorEncoded|MINOR_UNDEFINED]);else{let t,i=!1;r&&!0===r.float64||(encodeFloat16(n),t=readFloat16(ui8a,1),n===t||Number.isNaN(n)?(ui8a[0]=249,e.push(ui8a.slice(0,3)),i=!0):(encodeFloat32(n),t=readFloat32(ui8a,1),n===t&&(ui8a[0]=250,e.push(ui8a.slice(0,5)),i=!0))),i||(encodeFloat64(n),t=readFloat64(ui8a,1),ui8a[0]=251,e.push(ui8a.slice(0,9)))}}encodeFloat.encodedSize=function(e,t){const r=e.value;if(!1===r||!0===r||null==r)return 1;if(!t||!0!==t.float64){encodeFloat16(r);let e=readFloat16(ui8a,1);if(r===e||Number.isNaN(r))return 3;if(encodeFloat32(r),e=readFloat32(ui8a,1),r===e)return 5}return 9};const buffer=new ArrayBuffer(9),dataView=new DataView(buffer,1),ui8a=new Uint8Array(buffer,0);function encodeFloat16(e){if(e===1/0)dataView.setUint16(0,31744,!1);else if(e===-1/0)dataView.setUint16(0,64512,!1);else if(Number.isNaN(e))dataView.setUint16(0,32256,!1);else{dataView.setFloat32(0,e);const t=dataView.getUint32(0),r=(2139095040&t)>>23,n=8388607&t;if(255===r)dataView.setUint16(0,31744,!1);else if(0===r)dataView.setUint16(0,(2147483648&e)>>16|n>>13,!1);else{const e=r-127;e<-24?dataView.setUint16(0,0):e<-14?dataView.setUint16(0,(2147483648&t)>>16|1<<24+e,!1):dataView.setUint16(0,(2147483648&t)>>16|e+15<<10|n>>13,!1)}}}function readFloat16(e,t){if(e.length-t<2)throw new Error(`${decodeErrPrefix} not enough data for float16`);const r=(e[t]<<8)+e[t+1];if(31744===r)return 1/0;if(64512===r)return-1/0;if(32256===r)return NaN;const n=r>>10&31,i=1023&r;let o;return o=0===n?i*2**-24:31!==n?(i+1024)*2**(n-25):0===i?1/0:NaN,32768&r?-o:o}function encodeFloat32(e){dataView.setFloat32(0,e,!1)}function readFloat32(e,t){if(e.length-t<4)throw new Error(`${decodeErrPrefix} not enough data for float32`);const r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,4).getFloat32(0,!1)}function encodeFloat64(e){dataView.setFloat64(0,e,!1)}function readFloat64(e,t){if(e.length-t<8)throw new Error(`${decodeErrPrefix} not enough data for float64`);const r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,8).getFloat64(0,!1)}function invalidMinor(e,t,r){throw new Error(`${decodeErrPrefix} encountered invalid minor (${r}) for major ${e[t]>>>5}`)}function errorer(e){return()=>{throw new Error(`${decodeErrPrefix} ${e}`)}}encodeFloat.compareTokens=encodeUint.compareTokens;const jump=[];for(let b=0;b<=23;b++)jump[b]=invalidMinor;jump[24]=decodeUint8,jump[25]=decodeUint16,jump[26]=decodeUint32,jump[27]=decodeUint64,jump[28]=invalidMinor,jump[29]=invalidMinor,jump[30]=invalidMinor,jump[31]=invalidMinor;for(let b=32;b<=55;b++)jump[b]=invalidMinor;jump[56]=decodeNegint8,jump[57]=decodeNegint16,jump[58]=decodeNegint32,jump[59]=decodeNegint64,jump[60]=invalidMinor,jump[61]=invalidMinor,jump[62]=invalidMinor,jump[63]=invalidMinor;for(let b=64;b<=87;b++)jump[b]=decodeBytesCompact;jump[88]=decodeBytes8,jump[89]=decodeBytes16,jump[90]=decodeBytes32,jump[91]=decodeBytes64,jump[92]=invalidMinor,jump[93]=invalidMinor,jump[94]=invalidMinor,jump[95]=errorer("indefinite length bytes/strings are not supported");for(let b=96;b<=119;b++)jump[b]=decodeStringCompact;jump[120]=decodeString8,jump[121]=decodeString16,jump[122]=decodeString32,jump[123]=decodeString64,jump[124]=invalidMinor,jump[125]=invalidMinor,jump[126]=invalidMinor,jump[127]=errorer("indefinite length bytes/strings are not supported");for(let b=128;b<=151;b++)jump[b]=decodeArrayCompact;jump[152]=decodeArray8,jump[153]=decodeArray16,jump[154]=decodeArray32,jump[155]=decodeArray64,jump[156]=invalidMinor,jump[157]=invalidMinor,jump[158]=invalidMinor,jump[159]=decodeArrayIndefinite;for(let b=160;b<=183;b++)jump[b]=decodeMapCompact;jump[184]=decodeMap8,jump[185]=decodeMap16,jump[186]=decodeMap32,jump[187]=decodeMap64,jump[188]=invalidMinor,jump[189]=invalidMinor,jump[190]=invalidMinor,jump[191]=decodeMapIndefinite;for(let b=192;b<=215;b++)jump[b]=decodeTagCompact;jump[216]=decodeTag8,jump[217]=decodeTag16,jump[218]=decodeTag32,jump[219]=decodeTag64,jump[220]=invalidMinor,jump[221]=invalidMinor,jump[222]=invalidMinor,jump[223]=invalidMinor;for(let b=224;b<=243;b++)jump[b]=errorer("simple values are not supported");jump[244]=invalidMinor,jump[245]=invalidMinor,jump[246]=invalidMinor,jump[247]=decodeUndefined,jump[248]=errorer("simple values are not supported"),jump[249]=decodeFloat16,jump[250]=decodeFloat32,jump[251]=decodeFloat64,jump[252]=invalidMinor,jump[253]=invalidMinor,jump[254]=invalidMinor,jump[255]=decodeBreak;const quick=[];for(let b=0;b<24;b++)quick[b]=new Token(Type.uint,b,1);for(let b=-1;b>=-24;b--)quick[31-b]=new Token(Type.negint,b,1);function quickEncodeToken(e){switch(e.type){case Type.false:return fromArray([244]);case Type.true:return fromArray([245]);case Type.null:return fromArray([246]);case Type.bytes:return e.value.length?void 0:fromArray([64]);case Type.string:return""===e.value?fromArray([96]):void 0;case Type.array:return 0===e.value?fromArray([128]):void 0;case Type.map:return 0===e.value?fromArray([160]):void 0;case Type.uint:return e.value<24?fromArray([Number(e.value)]):void 0;case Type.negint:if(e.value>=-24)return fromArray([31-Number(e.value)])}}quick[64]=new Token(Type.bytes,new Uint8Array(0),1),quick[96]=new Token(Type.string,"",1),quick[128]=new Token(Type.array,0,1),quick[160]=new Token(Type.map,0,1),quick[244]=new Token(Type.false,!1,1),quick[245]=new Token(Type.true,!0,1),quick[246]=new Token(Type.null,null,1);const defaultEncodeOptions$2={float64:!1,mapSorter:mapSorter$1,quickEncodeToken:quickEncodeToken};function makeCborEncoders(){const e=[];return e[Type.uint.major]=encodeUint,e[Type.negint.major]=encodeNegint,e[Type.bytes.major]=encodeBytes,e[Type.string.major]=encodeString,e[Type.array.major]=encodeArray,e[Type.map.major]=encodeMap,e[Type.tag.major]=encodeTag,e[Type.float.major]=encodeFloat,e}const cborEncoders$1=makeCborEncoders(),buf=new Bl;class Ref{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do{if(t.obj===e)return!0}while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${encodeErrPrefix} object contains circular references`);return new Ref(t,e)}}const simpleTokens={null:new Token(Type.null,null),undefined:new Token(Type.undefined,void 0),true:new Token(Type.true,!0),false:new Token(Type.false,!1),emptyArray:new Token(Type.array,0),emptyMap:new Token(Type.map,0)},typeEncoders={number:(e,t,r,n)=>Number.isInteger(e)&&Number.isSafeInteger(e)?new Token(e>=0?Type.uint:Type.negint,e):new Token(Type.float,e),bigint:(e,t,r,n)=>e>=BigInt(0)?new Token(Type.uint,e):new Token(Type.negint,e),Uint8Array:(e,t,r,n)=>new Token(Type.bytes,e),string:(e,t,r,n)=>new Token(Type.string,e),boolean:(e,t,r,n)=>e?simpleTokens.true:simpleTokens.false,null:(e,t,r,n)=>simpleTokens.null,undefined:(e,t,r,n)=>simpleTokens.undefined,ArrayBuffer:(e,t,r,n)=>new Token(Type.bytes,new Uint8Array(e)),DataView:(e,t,r,n)=>new Token(Type.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),Array(e,t,r,n){if(!e.length)return!0===r.addBreakTokens?[simpleTokens.emptyArray,new Token(Type.break)]:simpleTokens.emptyArray;n=Ref.createCheck(n,e);const i=[];let o=0;for(const a of e)i[o++]=objectToTokens(a,r,n);return r.addBreakTokens?[new Token(Type.array,e.length),i,new Token(Type.break)]:[new Token(Type.array,e.length),i]},Object(e,t,r,n){const i="Object"!==t,o=i?e.keys():Object.keys(e),a=i?e.size:o.length;if(!a)return!0===r.addBreakTokens?[simpleTokens.emptyMap,new Token(Type.break)]:simpleTokens.emptyMap;n=Ref.createCheck(n,e);const s=[];let c=0;for(const l of o)s[c++]=[objectToTokens(l,r,n),objectToTokens(i?e.get(l):e[l],r,n)];return sortMapEntries(s,r),r.addBreakTokens?[new Token(Type.map,a),s,new Token(Type.break)]:[new Token(Type.map,a),s]}};typeEncoders.Map=typeEncoders.Object,typeEncoders.Buffer=typeEncoders.Uint8Array;for(const b of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))typeEncoders[`${b}Array`]=typeEncoders.DataView;function objectToTokens(e,t={},r){const n=is(e),i=t&&t.typeEncoders&&t.typeEncoders[n]||typeEncoders[n];if("function"==typeof i){const o=i(e,n,t,r);if(null!=o)return o}const o=typeEncoders[n];if(!o)throw new Error(`${encodeErrPrefix} unsupported type: ${n}`);return o(e,n,t,r)}function sortMapEntries(e,t){t.mapSorter&&e.sort(t.mapSorter)}function mapSorter$1(e,t){const r=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(t[0])?t[0][0]:t[0];if(r.type!==n.type)return r.type.compare(n.type);const i=r.type.major,o=cborEncoders$1[i].compareTokens(r,n);return o}function tokensToEncoded(e,t,r,n){if(Array.isArray(t))for(const i of t)tokensToEncoded(e,i,r,n);else r[t.type.major](e,t,n)}function encodeCustom(e,t,r){const n=objectToTokens(e,r);if(!Array.isArray(n)&&r.quickEncodeToken){const e=r.quickEncodeToken(n);if(e)return e;const i=t[n.type.major];if(i.encodedSize){const e=i.encodedSize(n,r),t=new Bl(e);if(i(t,n,r),1!==t.chunks.length)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return asU8A(t.chunks[0])}}return buf.reset(),tokensToEncoded(buf,n,t,r),buf.toBytes(!0)}function encode$m(e,t){return t=Object.assign({},defaultEncodeOptions$2,t),encodeCustom(e,cborEncoders$1,t)}const defaultDecodeOptions={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Tokeniser{constructor(e,t={}){this._pos=0,this.data=e,this.options=t}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const e=this.data[this._pos];let t=quick[e];if(void 0===t){const r=jump[e];if(!r)throw new Error(`${decodeErrPrefix} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const n=31&e;t=r(this.data,this._pos,n,this.options)}return this._pos+=t.encodedLength,t}}const DONE=Symbol.for("DONE"),BREAK=Symbol.for("BREAK");function tokenToArray(e,t,r){const n=[];for(let i=0;i<e.value;i++){const o=tokensToObject(t,r);if(o===BREAK){if(e.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed array`)}if(o===DONE)throw new Error(`${decodeErrPrefix} found array but not enough entries (got ${i}, expected ${e.value})`);n[i]=o}return n}function tokenToMap(e,t,r){const n=!0===r.useMaps,i=n?void 0:{},o=n?new Map:void 0;for(let a=0;a<e.value;a++){const s=tokensToObject(t,r);if(s===BREAK){if(e.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed map`)}if(s===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${a} [no key], expected ${e.value})`);if(!0!==n&&"string"!=typeof s)throw new Error(`${decodeErrPrefix} non-string keys not supported (got ${typeof s})`);if(!0===r.rejectDuplicateMapKeys&&(n&&o.has(s)||!n&&s in i))throw new Error(`${decodeErrPrefix} found repeat map key "${s}"`);const c=tokensToObject(t,r);if(c===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${a} [no value], expected ${e.value})`);n?o.set(s,c):i[s]=c}return n?o:i}function tokensToObject(e,t){if(e.done())return DONE;const r=e.next();if(r.type===Type.break)return BREAK;if(r.type.terminal)return r.value;if(r.type===Type.array)return tokenToArray(r,e,t);if(r.type===Type.map)return tokenToMap(r,e,t);if(r.type===Type.tag){if(t.tags&&"function"==typeof t.tags[r.value]){const n=tokensToObject(e,t);return t.tags[r.value](n)}throw new Error(`${decodeErrPrefix} tag not supported (${r.value})`)}throw new Error("unsupported")}function decodeFirst(e,t){if(!(e instanceof Uint8Array))throw new Error(`${decodeErrPrefix} data to decode must be a Uint8Array`);const r=(t=Object.assign({},defaultDecodeOptions,t)).tokenizer||new Tokeniser(e,t),n=tokensToObject(r,t);if(n===DONE)throw new Error(`${decodeErrPrefix} did not find any content to decode`);if(n===BREAK)throw new Error(`${decodeErrPrefix} got unexpected break`);return[n,e.subarray(r.pos())]}function decode$o(e,t){const[r,n]=decodeFirst(e,t);if(n.length>0)throw new Error(`${decodeErrPrefix} too many terminals, data makes no sense`);return r}const empty$1=new Uint8Array(0);function fromHex(e){const t=e.match(/../g);return null!=t?new Uint8Array(t.map(e=>parseInt(e,16))):empty$1}function equals$3(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function coerce(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function fromString(e){return(new TextEncoder).encode(e)}function toString$1(e){return(new TextDecoder).decode(e)}function base(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),a=o.charCodeAt(0);if(255!==r[a])throw new TypeError(o+" is ambiguous");r[a]=i}var s=e.length,c=e.charAt(0),l=Math.log(s)/Math.log(256),u=Math.log(256)/Math.log(s);function d(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var o=(e.length-t)*l+1>>>0,a=new Uint8Array(o);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var d=0,p=o-1;(0!==u||d<i)&&-1!==p;p--,d++)u+=s*a[p]>>>0,a[p]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");i=d,t++}if(" "!==e[t]){for(var h=o-i;h!==o&&0===a[h];)h++;for(var m=new Uint8Array(n+(o-h)),f=n;h!==o;)m[f++]=a[h++];return m}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,o=t.length;i!==o&&0===t[i];)i++,r++;for(var a=(o-i)*u+1>>>0,l=new Uint8Array(a);i!==o;){for(var d=t[i],p=0,h=a-1;(0!==d||p<n)&&-1!==h;h--,p++)d+=256*l[h]>>>0,l[h]=d%s>>>0,d=d/s>>>0;if(0!==d)throw new Error("Non-zero carry");n=p,i++}for(var m=a-n;m!==a&&0===l[m];)m++;for(var f=c.repeat(r);m<a;++m)f+=e.charAt(l[m]);return f},decodeUnsafe:d,decode:function(e){var r=d(e);if(r)return r;throw new Error(`Non-${t} character`)}}}var src=base,_brrp__multiformats_scope_baseX=src;class Encoder{constructor(e,t,r){__publicField(this,"name"),__publicField(this,"prefix"),__publicField(this,"baseEncode"),this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder{constructor(e,t,r){__publicField(this,"name"),__publicField(this,"prefix"),__publicField(this,"baseDecode"),__publicField(this,"prefixCodePoint"),this.name=e,this.prefix=t;const n=t.codePointAt(0);if(void 0===n)throw new Error("Invalid prefix character");this.prefixCodePoint=n,this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return or$2(this,e)}}class ComposedDecoder{constructor(e){__publicField(this,"decoders"),this.decoders=e}or(e){return or$2(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(null!=r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function or$2(e,t){return new ComposedDecoder({...e.decoders??{[e.prefix]:e},...t.decoders??{[t.prefix]:t}})}class Codec{constructor(e,t,r,n){__publicField(this,"name"),__publicField(this,"prefix"),__publicField(this,"baseEncode"),__publicField(this,"baseDecode"),__publicField(this,"encoder"),__publicField(this,"decoder"),this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new Encoder(e,t,r),this.decoder=new Decoder(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}function from$6({name:e,prefix:t,encode:r,decode:n}){return new Codec(e,t,r,n)}function baseX({name:e,prefix:t,alphabet:r}){const{encode:n,decode:i}=_brrp__multiformats_scope_baseX(r,e);return from$6({prefix:t,name:e,encode:n,decode:e=>coerce(i(e))})}function decode$n(e,t,r,n){let i=e.length;for(;"="===e[i-1];)--i;const o=new Uint8Array(i*r/8|0);let a=0,s=0,c=0;for(let l=0;l<i;++l){const i=t[e[l]];if(void 0===i)throw new SyntaxError(`Non-${n} character`);s=s<<r|i,a+=r,a>=8&&(a-=8,o[c++]=255&s>>a)}if(a>=r||255&s<<8-a)throw new SyntaxError("Unexpected end of data");return o}function encode$l(e,t,r){const n="="===t[t.length-1],i=(1<<r)-1;let o="",a=0,s=0;for(let c=0;c<e.length;++c)for(s=s<<8|e[c],a+=8;a>r;)a-=r,o+=t[i&s>>a];if(0!==a&&(o+=t[i&s<<r-a]),n)for(;o.length*r&7;)o+="=";return o}function createAlphabetIdx(e){const t={};for(let r=0;r<e.length;++r)t[e[r]]=r;return t}function rfc4648({name:e,prefix:t,bitsPerChar:r,alphabet:n}){const i=createAlphabetIdx(n);return from$6({prefix:t,name:e,encode:e=>encode$l(e,n,r),decode:t=>decode$n(t,i,r,e)})}const base32=rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const base36=baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});const base58btc=baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var encode_1$1=encode$k,MSB$3=128,MSBALL$2=-128,INT$2=Math.pow(2,31);function encode$k(e,t,r){t=t||[];for(var n=r=r||0;e>=INT$2;)t[r++]=255&e|MSB$3,e/=128;for(;e&MSBALL$2;)t[r++]=255&e|MSB$3,e>>>=7;return t[r]=0|e,encode$k.bytes=r-n+1,t}var decode$m=read$5,MSB$1$1=128,REST$1$1=127;function read$5(e,t){var r,n=0,i=0,o=t=t||0,a=e.length;do{if(o>=a)throw read$5.bytes=0,new RangeError("Could not decode varint");r=e[o++],n+=i<28?(r&REST$1$1)<<i:(r&REST$1$1)*Math.pow(2,i),i+=7}while(r>=MSB$1$1);return read$5.bytes=o-t,n}var N1$1=Math.pow(2,7),N2$1=Math.pow(2,14),N3$1=Math.pow(2,21),N4$1=Math.pow(2,28),N5$1=Math.pow(2,35),N6$1=Math.pow(2,42),N7$1=Math.pow(2,49),N8$1=Math.pow(2,56),N9$1=Math.pow(2,63),length$1=function(e){return e<N1$1?1:e<N2$1?2:e<N3$1?3:e<N4$1?4:e<N5$1?5:e<N6$1?6:e<N7$1?7:e<N8$1?8:e<N9$1?9:10},varint$2={encode:encode_1$1,decode:decode$m,encodingLength:length$1},_brrp_varint=varint$2;function decode$l(e,t=0){return[_brrp_varint.decode(e,t),_brrp_varint.decode.bytes]}function encodeTo(e,t,r=0){return _brrp_varint.encode(e,t,r),t}function encodingLength(e){return _brrp_varint.encodingLength(e)}function create$7(e,t){const r=t.byteLength,n=encodingLength(e),i=n+encodingLength(r),o=new Uint8Array(i+r);return encodeTo(e,o,0),encodeTo(r,o,n),o.set(t,i),new Digest$1(e,r,t,o)}function decode$k(e){const t=coerce(e),[r,n]=decode$l(t),[i,o]=decode$l(t.subarray(n)),a=t.subarray(n+o);if(a.byteLength!==i)throw new Error("Incorrect length");return new Digest$1(r,i,a,t)}function equals$2(e,t){if(e===t)return!0;{const r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&equals$3(e.bytes,r.bytes)}}let Digest$1=class{constructor(e,t,r,n){__publicField(this,"code"),__publicField(this,"size"),__publicField(this,"digest"),__publicField(this,"bytes"),this.code=e,this.size=t,this.digest=r,this.bytes=n}};function format$4(e,t){const{bytes:r,version:n}=e;return 0===n?toStringV0(r,baseCache(e),t??base58btc.encoder):toStringV1(r,baseCache(e),t??base32.encoder)}const cache$2=new WeakMap;function baseCache(e){const t=cache$2.get(e);if(null==t){const t=new Map;return cache$2.set(e,t),t}return t}class CID{constructor(e,t,r,n){__publicField(this,"code"),__publicField(this,"version"),__publicField(this,"multihash"),__publicField(this,"bytes"),__publicField(this,"/"),__publicField(this,_a,"CID"),this.code=t,this.version=e,this.multihash=r,this.bytes=n,this["/"]=n}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==DAG_PB_CODE$1)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,r=create$7(e,t);return CID.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return CID.equals(this,e)}static equals(e,t){const r=t;return null!=r&&e.code===r.code&&e.version===r.version&&equals$2(e.multihash,r.multihash)}toString(e){return format$4(this,e)}toJSON(){return{"/":format$4(this)}}link(){return this}[(_a=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(e){if(null==e)return null;const t=e;if(t instanceof CID)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){const{version:e,code:r,multihash:n,bytes:i}=t;return new CID(e,r,n,i??encodeCID(e,r,n.bytes))}if(!0===t[cidSymbol]){const{version:e,multihash:r,code:n}=t,i=decode$k(r);return CID.create(e,n,i)}return null}static create(e,t,r){if("number"!=typeof t)throw new Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==DAG_PB_CODE$1)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$1}) block encoding`);return new CID(e,t,r,r.bytes);case 1:{const n=encodeCID(e,t,r.bytes);return new CID(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return CID.create(0,DAG_PB_CODE$1,e)}static createV1(e,t){return CID.create(1,e,t)}static decode(e){const[t,r]=CID.decodeFirst(e);if(0!==r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=CID.inspectBytes(e),r=t.size-t.multihashSize,n=coerce(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=n.subarray(t.multihashSize-t.digestSize),o=new Digest$1(t.multihashCode,t.digestSize,i,n);return[0===t.version?CID.createV0(o):CID.createV1(t.codec,o),e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,n]=decode$l(e.subarray(t));return t+=n,r};let n=r(),i=DAG_PB_CODE$1;if(18===n?(n=0,t=0):i=r(),0!==n&&1!==n)throw new RangeError(`Invalid CID version ${n}`);const o=t,a=r(),s=r(),c=t+s;return{version:n,codec:i,multihashCode:a,digestSize:s,multihashSize:c-o,size:c}}static parse(e,t){const[r,n]=parseCIDtoBytes(e,t),i=CID.decode(n);if(0===i.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return baseCache(i).set(r,e),i}}function parseCIDtoBytes(e,t){switch(e[0]){case"Q":{const r=t??base58btc;return[base58btc.prefix,r.decode(`${base58btc.prefix}${e}`)]}case base58btc.prefix:{const r=t??base58btc;return[base58btc.prefix,r.decode(e)]}case base32.prefix:{const r=t??base32;return[base32.prefix,r.decode(e)]}case base36.prefix:{const r=t??base36;return[base36.prefix,r.decode(e)]}default:if(null==t)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}function toStringV0(e,t,r){const{prefix:n}=r;if(n!==base58btc.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=t.get(n);if(null==i){const i=r.encode(e).slice(1);return t.set(n,i),i}return i}function toStringV1(e,t,r){const{prefix:n}=r,i=t.get(n);if(null==i){const i=r.encode(e);return t.set(n,i),i}return i}const DAG_PB_CODE$1=112,SHA_256_CODE=18;function encodeCID(e,t,r){const n=encodingLength(e),i=n+encodingLength(t),o=new Uint8Array(i+r.byteLength);return encodeTo(e,o,0),encodeTo(t,o,n),o.set(r,i),o}const cidSymbol=Symbol.for("@ipld/js-cid/CID"),CID_CBOR_TAG=42;function toByteView$2(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}function cidEncoder$1(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const t=CID.asCID(e);if(!t)return null;const r=new Uint8Array(t.bytes.byteLength+1);return r.set(t.bytes,1),[new Token(Type.tag,CID_CBOR_TAG),new Token(Type.bytes,r)]}function undefinedEncoder$1(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder$1(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}function mapEncoder(e){for(const t of e.keys())if("string"!=typeof t||0===t.length)throw new Error("Non-string Map keys are not supported by the IPLD Data Model and cannot be encoded");return null}const _encodeOptions={float64:!0,typeEncoders:{Map:mapEncoder,Object:cidEncoder$1,undefined:undefinedEncoder$1,number:numberEncoder$1}};function cidDecoder(e){if(0!==e[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID.decode(e.subarray(1))}_encodeOptions.typeEncoders;const _decodeOptions={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};_decodeOptions.tags[CID_CBOR_TAG]=cidDecoder,_decodeOptions.tags.slice();const name$6="dag-cbor",code$9=113,encode$j=e=>encode$m(e,_encodeOptions),decode$j=e=>decode$o(toByteView$2(e),_decodeOptions),encoder=new TextEncoder,decoder=new TextDecoder,encode$i=e=>encoder.encode(e),decode$i=e=>decoder.decode(e),DAG_PB_CODE=112;function createLegacy(e){return CID.create(0,DAG_PB_CODE,e)}function create$6(e,t){return CID.create(1,e,t)}function isLink(e){if(null==e)return!1;const t=e;if(null!=t["/"]&&t["/"]===t.bytes)return!0;return e.asCID===e}function parse$2(e,t){return CID.parse(e,t)}const code$8=0,name$5="identity",encode$h=coerce;function digest$1(e,t){if(null!=(null==t?void 0:t.truncate)&&t.truncate!==e.byteLength){if(t.truncate<0||t.truncate>e.byteLength)throw new Error(`Invalid truncate option, must be less than or equal to ${e.byteLength}`);e=e.subarray(0,t.truncate)}return create$7(code$8,encode$h(e))}const identity={code:code$8,name:name$5,encode:encode$h,digest:digest$1},DEFAULT_MIN_DIGEST_LENGTH=20;function from$5({name:e,code:t,encode:r,minDigestLength:n,maxDigestLength:i}){return new Hasher(e,t,r,n,i)}class Hasher{constructor(e,t,r,n,i){__publicField(this,"name"),__publicField(this,"code"),__publicField(this,"encode"),__publicField(this,"minDigestLength"),__publicField(this,"maxDigestLength"),this.name=e,this.code=t,this.encode=r,this.minDigestLength=n??DEFAULT_MIN_DIGEST_LENGTH,this.maxDigestLength=i}digest(e,t){if(null!=(null==t?void 0:t.truncate)){if(t.truncate<this.minDigestLength)throw new Error(`Invalid truncate option, must be greater than or equal to ${this.minDigestLength}`);if(null!=this.maxDigestLength&&t.truncate>this.maxDigestLength)throw new Error(`Invalid truncate option, must be less than or equal to ${this.maxDigestLength}`)}if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?createDigest(r,this.code,null==t?void 0:t.truncate):r.then(e=>createDigest(e,this.code,null==t?void 0:t.truncate))}throw Error("Unknown type, must be binary type")}}function createDigest(e,t,r){if(null!=r&&r!==e.byteLength){if(r>e.byteLength)throw new Error(`Invalid truncate option, must be less than or equal to ${e.byteLength}`);e=e.subarray(0,r)}return create$7(t,e)}const DID_PREFIX="did:",DID_PREFIX_SIZE=DID_PREFIX.length,DID_KEY_PREFIX="did:key:",DID_KEY_PREFIX_SIZE=DID_KEY_PREFIX.length,ED25519=237,RSA=4613,P256=4608,P384=4609,P521=4610,SECP256K1=231,BLS12381G1$1=234,BLS12381G2$1=235,DID_CORE=3357,METHOD_OFFSET=encodingLength(DID_CORE),parse$1=e=>{if(e.startsWith(DID_PREFIX)){if(e.startsWith(DID_KEY_PREFIX)){const t=base58btc.decode(e.slice(DID_KEY_PREFIX_SIZE));return decode$h(t)}{const t=encode$i(e.slice(DID_PREFIX_SIZE)),r=new Uint8Array(t.byteLength+METHOD_OFFSET);return encodeTo(DID_CORE,r),r.set(t,METHOD_OFFSET),new DID$1(r)}}throw new RangeError(`Invalid DID "${e}", must start with 'did:'`)},format$3=e=>e.did(),from$4=e=>e instanceof DID$1?e:e instanceof Uint8Array?decode$h(e):parse$1("string"==typeof e?e:e.did()),decode$h=e=>{const[t]=decode$l(e),{buffer:r,byteOffset:n,byteLength:i}=e;switch(t){case P256:if(e.length>35)throw new RangeError("Only p256-pub compressed is supported.");case ED25519:case RSA:case P384:case P521:case BLS12381G1$1:case BLS12381G2$1:case SECP256K1:return new DIDKey(r,n,i);case DID_CORE:return new DID$1(r,n,i);default:throw new RangeError(`Unsupported DID encoding, unknown multicode 0x${t.toString(16)}.`)}};let DID$1=class extends Uint8Array{did(){const e=new Uint8Array(this.buffer,this.byteOffset+METHOD_OFFSET);return`did:${decode$i(e)}`}toJSON(){return this.did()}};class DIDKey extends DID$1{did(){return`did:key:${base58btc.encode(this)}`}}const name$4="raw",code$7=85;function encode$g(e){return coerce(e)}function decode$g(e){return coerce(e)}const raw=Object.freeze(Object.defineProperty({__proto__:null,code:code$7,decode:decode$g,encode:encode$g,name:name$4},Symbol.toStringTag,{value:"Module"})),base64$2=rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const base64url=rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});const NON_STANDARD=53248,ES256K=53479,BLS12381G1=53482,BLS12381G2=53483,EdDSA=53485,ES256=13636096,ES384=13636097,ES512=13636098,RS256=13636101,EIP191=53649,codeName=e=>{switch(e){case ES256K:return"ES256K";case BLS12381G1:return"BLS12381G1";case BLS12381G2:return"BLS12381G2";case EdDSA:return"EdDSA";case ES256:return"ES256";case ES384:return"ES384";case ES512:return"ES512";case RS256:return"RS256";case EIP191:return"EIP191";default:throw new RangeError(`Unknown signature algorithm code 0x${e.toString(16)}`)}},nameCode=e=>{switch(e){case"ES256K":return ES256K;case"BLS12381G1":return BLS12381G1;case"BLS12381G2":return BLS12381G2;case"EdDSA":return EdDSA;case"ES256":return ES256;case"ES384":return ES384;case"ES512":return ES512;case"RS256":return RS256;case"EIP191":return EIP191;default:return NON_STANDARD}};class Signature extends Uint8Array{get code(){const[e]=decode$l(this);return Object.defineProperties(this,{code:{value:e}}),e}get size(){const e=size$1(this);return Object.defineProperties(this,{size:{value:e}}),e}get algorithm(){const e=algorithm(this);return Object.defineProperties(this,{algorithm:{value:e}}),e}get raw(){const{buffer:e,byteOffset:t,size:r,code:n}=this,i=encodingLength(n),o=encodingLength(r),a=new Uint8Array(e,t+i+o,r);return Object.defineProperties(this,{raw:{value:a}}),a}async verify(e,t){try{if(!0===await e.verify(t,this))return{ok:{}};throw new Error("Invalid signature")}catch(r){return{error:r}}}toJSON(){return toJSON$1(this)}}const algorithm=e=>{const{code:t,raw:r,buffer:n,byteOffset:i}=e;if(t===NON_STANDARD){const e=r.byteLength+encodingLength(t)+encodingLength(r.byteLength),o=new Uint8Array(n,i+e);return decode$i(o)}return codeName(t)},size$1=e=>{const t=encodingLength(e.code),[r]=decode$l(new Uint8Array(e.buffer,e.byteOffset+t));return r},create$5=(e,t)=>{codeName(e);const r=encodingLength(e),n=encodingLength(t.byteLength),i=new Signature(r+n+t.byteLength);return encodeTo(e,i),encodeTo(t.byteLength,i,r),i.set(t,r+n),Object.defineProperties(i,{code:{value:e},size:{value:t.byteLength}}),i},createNamed=(e,t)=>{const r=nameCode(e);return r===NON_STANDARD?createNonStandard(e,t):create$5(r,t)},createNonStandard=(e,t)=>{const r=NON_STANDARD,n=encodingLength(r),i=encodingLength(t.byteLength),o=encode$i(e),a=new Signature(n+i+t.byteLength+o.byteLength);return encodeTo(r,a),encodeTo(t.byteLength,a,n),a.set(t,n+i),a.set(o,n+i+t.byteLength),a},view$4=e=>new Signature(e.buffer,e.byteOffset,e.byteLength),decode$f=e=>{if(!(e instanceof Uint8Array))throw new TypeError(`Can only decode Uint8Array into a Signature, instead got ${JSON.stringify(e)}`);const t=view$4(e),{code:r,algorithm:n,raw:i}=t;return t},encode$f=e=>decode$f(e),toJSON$1=e=>({"/":{bytes:base64$2.baseEncode(e)}}),readPayload=e=>readPayloadWith(e,{readPrincipal:readPrincipal,readProof:readProof}),readJWTPayload=e=>readPayloadWith(e,{readPrincipal:readStringPrincipal,readProof:readStringProof}),readPayloadWith=(e,{readPrincipal:t,readProof:r})=>({iss:t(e.iss,"iss"),aud:t(e.aud,"aud"),att:readCapabilities(e.att,"att"),prf:readOptionalArray(e.prf,r,"prf")||[],exp:readNullable(e.exp===1/0?null:e.exp,readInt$1,"exp"),nbf:readOptional(e.nbf,readInt$1,"nbf"),fct:readOptionalArray(e.fct,readFact,"fct")||[],nnc:readOptional(e.nnc,readString,"nnc")}),readSignature=e=>{if(e instanceof Uint8Array)return decode$f(e);throw new TypeError(`Can only decode Uint8Array into a Signature, instead got ${JSON.stringify(e)}`)},readInt$1=(e,t)=>Number.isInteger(e)?e:ParseError.throw(`Expected ${t} to be integer, instead got ${JSON.stringify(e)}`),readCapability=(e,t)=>readStruct(e,asCapability,t),readCapabilities=(e,t)=>readArray(e,readCapability,t),asCapability=e=>({...e,can:readAbility(e.can),with:readResource(e.with)}),readAbility=e=>"string"!=typeof e?ParseError.throw(`Capability has invalid 'can: ${JSON.stringify(e)}', value must be a string`):e.slice(1,-1).includes("/")?e.toLocaleLowerCase():"*"===e?e:ParseError.throw(`Capability has invalid 'can: "${e}"', value must have at least one path segment`),readResource=e=>"string"!=typeof e?ParseError.throw(`Capability has invalid 'with: ${JSON.stringify(e)}', value must be a string`):parseURL(e)||ParseError.throw(`Capability has invalid 'with: "${e}"', value must be a valid URI string`),parseURL=e=>{try{return new URL(e),e}catch(t){return null}},readArray=(e,t,r)=>Array.isArray(e)?e.map((e,n)=>t(e,`${r}[${n}]`)):ParseError.throw(`${r} must be an array`),readOptionalArray=(e,t,r)=>void 0===e?e:readArray(e,t,r),readStruct=(e,t,r)=>null!=e&&"object"==typeof e?t(e):ParseError.throw(`${r} must be of type object, instead got ${e}`),readFact=(e,t)=>readStruct(e,Object,t),readProof=(e,t)=>isLink(e)?e:fail$1(`Expected ${t} to be IPLD link, instead got ${JSON.stringify(e)}`),readStringProof=(e,t)=>parseProof(readString(e,t)),parseProof=e=>{try{return parse$2(e)}catch(t){return create$6(code$7,identity.digest(encode$i(e)))}},readPrincipal=(e,t)=>decode$h(readBytes$1(e,t)),readStringPrincipal=(e,t)=>parse$1(readString(e,t)),readOptional=(e,t,r="Field")=>void 0!==e?t(e,r):void 0,readNullable=(e,t,r)=>null===e?null:t(e,r),readString=(e,t="Field")=>"string"==typeof e?e:fail$1(`${t} has invalid value ${e}`),readBytes$1=(e,t)=>e instanceof Uint8Array?e:fail$1(`Expected ${t} to be Uint8Array, instead got ${JSON.stringify(e)}`),readVersion=(e,t)=>/\d+\.\d+\.\d+/.test(e)?e:ParseError.throw(`Invalid version '${t}: ${JSON.stringify(e)}'`),readLiteral=(e,t,r)=>e===t?t:ParseError.throw(`Expected ${r} to be a ${JSON.stringify(t)} instead got ${JSON.stringify(e)}`);class ParseError extends TypeError{get name(){return"ParseError"}static throw(e){throw new this(e)}}const fail$1=e=>ParseError.throw(e);class JSONEncoder extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){const t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===Type.array&&(t.elements++,1!==t.elements&&e.push([44])),t.type===Type.map&&(t.elements++,1!==t.elements&&(t.elements%2==1?e.push([44]):e.push([58]))))}[Type.uint.major](e,t){this.prefix(e);const r=String(t.value),n=[];for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);e.push(n)}[Type.negint.major](e,t){this[Type.uint.major](e,t)}[Type.bytes.major](e,t){throw new Error(`${encodeErrPrefix} unsupported type: Uint8Array`)}[Type.string.major](e,t){this.prefix(e);const r=fromString$1(JSON.stringify(t.value));e.push(r.length>32?asU8A(r):r)}[Type.array.major](e,t){this.prefix(e),this.inRecursive.push({type:Type.array,elements:0}),e.push([91])}[Type.map.major](e,t){this.prefix(e),this.inRecursive.push({type:Type.map,elements:0}),e.push([123])}[Type.tag.major](e,t){}[Type.float.major](e,t){if("break"===t.type.name){const t=this.inRecursive.pop();if(t){if(t.type===Type.array)e.push([93]);else{if(t.type!==Type.map)throw new Error("Unexpected recursive type; this should not happen!");e.push([125])}return}throw new Error("Unexpected break; this should not happen!")}if(void 0===t.value)throw new Error(`${encodeErrPrefix} unsupported type: undefined`);if(this.prefix(e),"true"===t.type.name)return void e.push([116,114,117,101]);if("false"===t.type.name)return void e.push([102,97,108,115,101]);if("null"===t.type.name)return void e.push([110,117,108,108]);const r=String(t.value),n=[];let i=!1;for(let o=0;o<r.length;o++)n[o]=r.charCodeAt(o),i||46!==n[o]&&101!==n[o]&&69!==n[o]||(i=!0);i||(n.push(46),n.push(48)),e.push(n)}}function mapSorter(e,t){if(Array.isArray(e[0])||Array.isArray(t[0]))throw new Error(`${encodeErrPrefix} complex map keys are not supported`);const r=e[0],n=t[0];if(r.type!==Type.string||n.type!==Type.string)throw new Error(`${encodeErrPrefix} non-string map keys are not supported`);if(r<n)return-1;if(r>n)return 1;throw new Error(`${encodeErrPrefix} unexpected duplicate map keys, this is not supported`)}const defaultEncodeOptions$1={addBreakTokens:!0,mapSorter:mapSorter};function encode$e(e,t){return t=Object.assign({},defaultEncodeOptions$1,t),encodeCustom(e,new JSONEncoder,t)}class Tokenizer{constructor(e,t={}){this._pos=0,this.data=e,this.options=t,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;32===e||9===e||13===e||10===e;)e=this.data[++this._pos]}expect(e){if(this.data.length-this._pos<e.length)throw new Error(`${decodeErrPrefix} unexpected end of input at position ${this._pos}`);for(let t=0;t<e.length;t++)if(this.data[this._pos++]!==e[t])throw new Error(`${decodeErrPrefix} unexpected token at position ${this._pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){const e=this._pos;let t=!1,r=!1;const n=e=>{for(;!this.done();){const t=this.ch();if(!e.includes(t))break;this._pos++}};if(45===this.ch()&&(t=!0,this._pos++),48===this.ch()){if(this._pos++,46!==this.ch())return new Token(Type.uint,0,this._pos-e);this._pos++,r=!0}if(n([48,49,50,51,52,53,54,55,56,57]),t&&this._pos===e+1)throw new Error(`${decodeErrPrefix} unexpected token at position ${this._pos}`);if(!this.done()&&46===this.ch()){if(r)throw new Error(`${decodeErrPrefix} unexpected token at position ${this._pos}`);r=!0,this._pos++,n([48,49,50,51,52,53,54,55,56,57])}this.done()||101!==this.ch()&&69!==this.ch()||(r=!0,this._pos++,this.done()||43!==this.ch()&&45!==this.ch()||this._pos++,n([48,49,50,51,52,53,54,55,56,57]));const i=String.fromCharCode.apply(null,this.data.subarray(e,this._pos)),o=parseFloat(i);return r?new Token(Type.float,o,this._pos-e):!0!==this.options.allowBigInt||Number.isSafeInteger(o)?new Token(o>=0?Type.uint:Type.negint,o,this._pos-e):new Token(o>=0?Type.uint:Type.negint,BigInt(i),this._pos-e)}parseString(){if(34!==this.ch())throw new Error(`${decodeErrPrefix} unexpected character at position ${this._pos}; this shouldn't happen`);this._pos++;for(let i=this._pos,o=0;i<this.data.length&&o<65536;i++,o++){const e=this.data[i];if(92===e||e<32||e>=128)break;if(34===e){const e=String.fromCharCode.apply(null,this.data.subarray(this._pos,i));return this._pos=i+1,new Token(Type.string,e,o)}}const e=this._pos,t=[],r=()=>{if(this._pos+4>=this.data.length)throw new Error(`${decodeErrPrefix} unexpected end of unicode escape sequence at position ${this._pos}`);let e=0;for(let t=0;t<4;t++){let t=this.ch();if(t>=48&&t<=57)t-=48;else if(t>=97&&t<=102)t=t-97+10;else{if(!(t>=65&&t<=70))throw new Error(`${decodeErrPrefix} unexpected unicode escape character at position ${this._pos}`);t=t-65+10}e=16*e+t,this._pos++}return e},n=()=>{const e=this.ch();let r,n,i,o,a=null,s=e>239?4:e>223?3:e>191?2:1;if(this._pos+s>this.data.length)throw new Error(`${decodeErrPrefix} unexpected unicode sequence at position ${this._pos}`);switch(s){case 1:e<128&&(a=e);break;case 2:r=this.data[this._pos+1],128==(192&r)&&(o=(31&e)<<6|63&r,o>127&&(a=o));break;case 3:r=this.data[this._pos+1],n=this.data[this._pos+2],128==(192&r)&&128==(192&n)&&(o=(15&e)<<12|(63&r)<<6|63&n,o>2047&&(o<55296||o>57343)&&(a=o));break;case 4:r=this.data[this._pos+1],n=this.data[this._pos+2],i=this.data[this._pos+3],128==(192&r)&&128==(192&n)&&128==(192&i)&&(o=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&i,o>65535&&o<1114112&&(a=o))}null===a?(a=65533,s=1):a>65535&&(a-=65536,t.push(a>>>10&1023|55296),a=56320|1023&a),t.push(a),this._pos+=s};for(;!this.done();){const i=this.ch();let o;switch(i){case 92:if(this._pos++,this.done())throw new Error(`${decodeErrPrefix} unexpected string termination at position ${this._pos}`);switch(o=this.ch(),this._pos++,o){case 34:case 39:case 92:case 47:t.push(o);break;case 98:t.push(8);break;case 116:t.push(9);break;case 110:t.push(10);break;case 102:t.push(12);break;case 114:t.push(13);break;case 117:t.push(r());break;default:throw new Error(`${decodeErrPrefix} unexpected string escape character at position ${this._pos}`)}break;case 34:return this._pos++,new Token(Type.string,decodeCodePointsArray(t),this._pos-e);default:if(i<32)throw new Error(`${decodeErrPrefix} invalid control character at position ${this._pos}`);i<128?(t.push(i),this._pos++):n()}}throw new Error(`${decodeErrPrefix} unexpected end of string at position ${this._pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new Token(Type.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new Token(Type.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new Token(Type.null,null,4);case 102:return this.expect([102,97,108,115,101]),new Token(Type.false,!1,5);case 116:return this.expect([116,114,117,101]),new Token(Type.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${decodeErrPrefix} unexpected character at position ${this._pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":if(this.modeStack.pop(),93===this.ch())return this._pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);if(44!==this.ch())throw new Error(`${decodeErrPrefix} unexpected character at position ${this._pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue();case"array-start":return this.modeStack.pop(),93===this.ch()?(this._pos++,this.skipWhitespace(),new Token(Type.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(125===this.ch())return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);if(44!==this.ch())throw new Error(`${decodeErrPrefix} unexpected character at position ${this._pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),125===this.ch())return this._pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);const e=this.parseString();if(this.skipWhitespace(),58!==this.ch())throw new Error(`${decodeErrPrefix} unexpected character at position ${this._pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${decodeErrPrefix} unexpected parse state at position ${this._pos}; this shouldn't happen`)}}}function decode$e(e,t){return decode$o(e,t=Object.assign({tokenizer:new Tokenizer(e,t)},t))}function toByteView$1(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}function cidEncoder(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const t=CID.asCID(e);if(!t)return null;const r=t.toString();return[new Token(Type.map,1/0,1),new Token(Type.string,"/",1),new Token(Type.string,r,r.length),new Token(Type.break,void 0,1)]}function bytesEncoder(e){const t=base64$2.encode(e).slice(1);return[new Token(Type.map,1/0,1),new Token(Type.string,"/",1),new Token(Type.map,1/0,1),new Token(Type.string,"bytes",5),new Token(Type.string,t,t.length),new Token(Type.break,void 0,1),new Token(Type.break,void 0,1)]}function taBytesEncoder(e){return bytesEncoder(new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function abBytesEncoder(e){return bytesEncoder(new Uint8Array(e))}function undefinedEncoder(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions={typeEncoders:{Object:cidEncoder,Buffer:bytesEncoder,Uint8Array:bytesEncoder,Int8Array:taBytesEncoder,Uint16Array:taBytesEncoder,Int16Array:taBytesEncoder,Uint32Array:taBytesEncoder,Int32Array:taBytesEncoder,Float32Array:taBytesEncoder,Float64Array:taBytesEncoder,Uint8ClampedArray:taBytesEncoder,BigInt64Array:taBytesEncoder,BigUint64Array:taBytesEncoder,DataView:taBytesEncoder,ArrayBuffer:abBytesEncoder,undefined:undefinedEncoder,number:numberEncoder}};class DagJsonTokenizer extends Tokenizer{constructor(e,t){super(e,t),this.tokenBuffer=[]}done(){return 0===this.tokenBuffer.length&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const e=this._next();if(e.type===Type.map){const e=this._next();if(e.type===Type.string&&"/"===e.value){const e=this._next();if(e.type===Type.string){if(this._next().type!==Type.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(e),new Token(Type.tag,42,0)}if(e.type===Type.map){const e=this._next();if(e.type===Type.string&&"bytes"===e.value){const e=this._next();if(e.type===Type.string){for(let e=0;e<2;e++){if(this._next().type!==Type.break)throw new Error("Invalid encoded Bytes form")}const t=base64$2.decode(`m${e.value}`);return new Token(Type.bytes,t,e.value.length)}this.tokenBuffer.push(e)}this.tokenBuffer.push(e)}this.tokenBuffer.push(e)}this.tokenBuffer.push(e)}return e}}const decodeOptions={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};decodeOptions.tags[42]=CID.parse;const encode$d=e=>encode$e(e,encodeOptions),decode$d=e=>{const t=toByteView$1(e);return decode$e(t,Object.assign(decodeOptions,{tokenizer:new DagJsonTokenizer(t,decodeOptions)}))};new TextDecoder,new TextEncoder;const format$2=e=>`${formatHeader(e.v,e.s.algorithm)}.${formatPayload(e)}.${formatSignature(e.s)}`,formatSignPayload=(e,t,r)=>`${formatHeader(t,r)}.${formatPayload(e)}`,formatHeader=(e,t)=>base64url.baseEncode(encodeHeader$1(e,t)),formatPayload=e=>base64url.baseEncode(encodePayload(e)),formatSignature=e=>base64url.baseEncode(e.raw),encodeHeader$1=(e,t)=>encode$d({alg:t,ucv:e,typ:"JWT"}),encodePayload=e=>encode$d({iss:format$3(e.iss),aud:format$3(e.aud),att:e.att,exp:e.exp,prf:e.prf.map(encodeProof),...e.fct.length>0&&{fct:e.fct},...e.nnc&&{nnc:e.nnc},...e.nbf&&{nbf:e.nbf}}),encodeProof=e=>e.toString(),toJSON=e=>JSON.parse(decode$i(encode$d(e)));let View$1=class{constructor(e){this.model=e}get version(){return this.model.v}get issuer(){return from$4(this.model.iss)}get audience(){return from$4(this.model.aud)}get capabilities(){return this.model.att}get expiration(){const{exp:e}=this.model;return null===e?1/0:e}get notBefore(){return this.model.nbf}get nonce(){return this.model.nnc}get facts(){return this.model.fct}get proofs(){return this.model.prf}get signature(){return this.model.s}get jwt(){return this.model.jwt}get s(){return this.model.s}get v(){return this.model.v}get iss(){return this.model.iss}get aud(){return this.model.aud}get att(){return this.model.att}get exp(){return this.model.exp}get nbf(){return this.model.nbf}get nnc(){return this.model.nnc}get fct(){return this.model.fct}get prf(){return this.model.prf}toJSON(){const{v:e,iss:t,aud:r,s:n,att:i,prf:o,exp:a,fct:s,nnc:c,nbf:l}=this.model;return{iss:t,aud:r,v:e,s:n,exp:a,...toJSON({att:i,prf:o,...s.length>0&&{fct:s}}),...null!=c&&{nnc:c},...l&&{nbf:l}}}};const code$6=code$9,from$3=e=>new CBORView(e),encode$c=e=>{const{fct:t,nnc:r,nbf:n,...i}=readPayload(e);return encode$j({...t.length>0&&{fct:t},...null!=r&&{nnc:r},...n&&{nbf:n},...i,v:readVersion(e.v,"v"),s:encodeSignature(e.s,"s")})},encodeSignature=(e,t)=>{try{return encode$f(e)}catch(r){throw new Error(`Expected signature ${t}, instead got ${JSON.stringify(e)}`,{cause:r})}},decode$c=e=>{const t=decode$j(e);return new CBORView({...readPayload(t),v:readVersion(t.v,"v"),s:readSignature(t.s)})};class CBORView extends View$1{get code(){return code$6}format(){return format$2(this.model)}encode(){return encode$c(this.model)}}const parse=e=>{const t=e.split("."),[r,n,i]=3===t.length?t:fail$1(`Can't parse UCAN: ${e}: Expected JWT format: 3 dot-separated base64url-encoded values.`),{ucv:o,alg:a}=parseHeader(r);return{...parsePayload(n),v:o,s:createNamed(a,base64url.baseDecode(i))}},parseHeader=e=>{const{ucv:t,alg:r,typ:n}=decode$d(base64url.baseDecode(e));return{typ:readLiteral(n,"JWT","typ"),ucv:readVersion(t,"ucv"),alg:readString(r,"alg")}},parsePayload=e=>{const t=decode$d(base64url.baseDecode(e));return readJWTPayload(t)},decode$b=e=>{const t=decode$i(e);return new JWTView({...parse(t),jwt:t})},encode$b=({jwt:e})=>encode$i(e),format$1=({jwt:e})=>e;class JWTView extends View$1{constructor(e){super(e),this.model=e}get code(){return code$7}format(){return format$1(this.model)}encode(){return encode$b(this.model)}}function sha(e){return async t=>new Uint8Array(await crypto.subtle.digest(e,t))}const sha256=from$5({name:"sha2-256",code:18,encode:sha("SHA-256")}),VERSION="0.9.1",defaultHasher=sha256,decode$a=e=>{try{return decode$c(e)}catch(t){return decode$b(e)}},write$3=async(e,{hasher:t=defaultHasher}={})=>{const[r,n]=e.jwt?[code$7,encode$b(e)]:[code$6,encode$c(e)];return{bytes:n,cid:create$6(r,await t.digest(n)),data:e}},issue$1=async({issuer:e,audience:t,capabilities:r,lifetimeInSeconds:n=30,expiration:i=now()+n,notBefore:o,facts:a=[],proofs:s=[],nonce:c})=>{const l=VERSION,u=readPayload({iss:parse$1(e.did()),aud:parse$1(t.did()),att:r,fct:a,exp:i,nbf:o,prf:s,nnc:c}),d=encodeSignaturePayload(u,l,e.signatureAlgorithm);return from$3({...u,v:l,s:await e.sign(d)})},encodeSignaturePayload=(e,t,r)=>encode$i(formatSignPayload(e,t,r)),now=()=>Math.floor(Date.now()/1e3),contentType$7="application/vnd.ipld.dag-cbor",prepare$1=(e,t)=>{if(t.has(e))throw new TypeError("Can not encode circular structure");if(void 0===e&&0===t.size)return null;if(null===e)return null;if("symbol"==typeof e&&0===t.size)return null;if(isLink(e))return e;if(ArrayBuffer.isView(e))return e;if(Array.isArray(e)){t.add(e);const r=[];for(const n of e)r.push(void 0===n||"symbol"==typeof n?null:prepare$1(n,t));return r}if("function"==typeof e.toJSON){t.add(e);const r=e.toJSON();return prepare$1(r,t)}if("object"==typeof e){t.add(e);const r={};for(const[n,i]of Object.entries(e))void 0!==i&&"symbol"!=typeof i&&(r[n]=prepare$1(i,new Set(t)));return r}return e},encode$a=e=>encode$j(prepare$1(e,new Set)),link$2=async(e,{hasher:t=sha256}={})=>create$6(code$9,await t.digest(e)),write$2=async(e,t)=>{const r=encode$a(e);return{cid:await link$2(r,t),bytes:r}},CBOR=Object.freeze(Object.defineProperty({__proto__:null,code:code$9,contentType:contentType$7,decode:decode$j,encode:encode$a,link:link$2,name:name$6,write:write$2},Symbol.toStringTag,{value:"Module"})),iterate=function*(e){e&&"object"==typeof e&&"iterateIPLDBlocks"in e&&"function"==typeof e.iterateIPLDBlocks&&(yield*e.iterateIPLDBlocks())},createStore=(e=[])=>{const t=new Map;return addEveryInto(e,t),t},EMBED_CODE=identity.code,get$8=(e,t,r)=>{if(e.multihash.code===EMBED_CODE)return{cid:e,bytes:e.multihash.digest};const n=t.get(`${e}`);return n||r},notFound=e=>{throw new Error(`Block for the ${e} is not found`)},writeInto=async(e,t,r={})=>{const n=r.codec||CBOR,i=r.hasher||sha256,o=n.encode(e),a=await i.digest(o),s=create$6(n.code,a);return t.set(s.toString(),{bytes:o,cid:s}),{bytes:o,cid:s,data:e}},addInto=({cid:e,bytes:t},r)=>(r.set(e.toString(),{bytes:t,cid:e}),{bytes:t,cid:e}),addEveryInto=(e,t)=>{for(const r of e)addInto(r,t)};var encode_1=encode$9,MSB$2=128,MSBALL$1=-128,INT$1=Math.pow(2,31);function encode$9(e,t,r){if(Number.MAX_SAFE_INTEGER&&e>Number.MAX_SAFE_INTEGER)throw encode$9.bytes=0,new RangeError("Could not encode varint");t=t||[];for(var n=r=r||0;e>=INT$1;)t[r++]=255&e|MSB$2,e/=128;for(;e&MSBALL$1;)t[r++]=255&e|MSB$2,e>>>=7;return t[r]=0|e,encode$9.bytes=r-n+1,t}var decode$9=read$4,MSB$1=128,REST$1=127;function read$4(e,t){var r,n=0,i=0,o=t=t||0,a=e.length;do{if(o>=a||i>49)throw read$4.bytes=0,new RangeError("Could not decode varint");r=e[o++],n+=i<28?(r&REST$1)<<i:(r&REST$1)*Math.pow(2,i),i+=7}while(r>=MSB$1);return read$4.bytes=o-t,n}var N1=Math.pow(2,7),N2=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length=function(e){return e<N1?1:e<N2?2:e<N3?3:e<N4?4:e<N5?5:e<N6?6:e<N7?7:e<N8?8:e<N9?9:10},varint={encode:encode_1,decode:decode$9,encodingLength:length};const varint$1=getDefaultExportFromCjs(varint),CIDV0_BYTES$1={SHA2_256:18,LENGTH:32,DAG_PB:112},V2_HEADER_LENGTH=40;function decodeVarint$1(e,t){if(!e.length)throw new Error("Unexpected end of data");const r=varint$1.decode(e);return t.seek(varint$1.decode.bytes),r}function decodeV2Header(e){const t=new DataView(e.buffer,e.byteOffset,e.byteLength);let r=0;return{version:2,characteristics:[t.getBigUint64(r,!0),t.getBigUint64(r+=8,!0)],dataOffset:Number(t.getBigUint64(r+=8,!0)),dataSize:Number(t.getBigUint64(r+=8,!0)),indexOffset:Number(t.getBigUint64(r+=8,!0))}}function getMultihashLength$1(e){varint$1.decode(e);const t=varint$1.decode.bytes,r=varint$1.decode(e.subarray(varint$1.decode.bytes));return t+varint$1.decode.bytes+r}const Kinds={Null:e=>null===e?e:void 0,Int:e=>Number.isInteger(e)?e:void 0,Float:e=>"number"==typeof e&&Number.isFinite(e)?e:void 0,String:e=>"string"==typeof e?e:void 0,Bool:e=>"boolean"==typeof e?e:void 0,Bytes:e=>e instanceof Uint8Array?e:void 0,Link:e=>null!==e&&"object"==typeof e&&e.asCID===e?e:void 0,List:e=>Array.isArray(e)?e:void 0,Map:e=>null===e||"object"!=typeof e||e.asCID===e||Array.isArray(e)||e instanceof Uint8Array?void 0:e},Types={"CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)":Kinds.Link,"CarV1HeaderOrV2Pragma > roots (anon)":e=>{if(void 0!==Kinds.List(e)){for(let t=0;t<e.length;t++){let r=e[t];if(r=Types["CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)"](r),void 0===r)return;if(r!==e[t]){const r=e.slice(0,t);for(let n=t;n<e.length;n++){let t=e[n];if(t=Types["CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)"](t),void 0===t)return;r.push(t)}return r}}return e}},Int:Kinds.Int,CarV1HeaderOrV2Pragma:e=>{if(void 0===Kinds.Map(e))return;const t=Object.entries(e);let r=e,n=1;for(let i=0;i<t.length;i++){const[o,a]=t[i];switch(o){case"roots":{const n=Types["CarV1HeaderOrV2Pragma > roots (anon)"](e[o]);if(void 0===n)return;if(n!==a||r!==e){if(r===e){r={};for(let e=0;e<i;e++)r[t[e][0]]=t[e][1]}r.roots=n}}break;case"version":{n--;const s=Types.Int(e[o]);if(void 0===s)return;if(s!==a||r!==e){if(r===e){r={};for(let e=0;e<i;e++)r[t[e][0]]=t[e][1]}r.version=s}}break;default:return}}return n>0?void 0:r}},Reprs={"CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)":Kinds.Link,"CarV1HeaderOrV2Pragma > roots (anon)":e=>{if(void 0!==Kinds.List(e)){for(let t=0;t<e.length;t++){let r=e[t];if(r=Reprs["CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)"](r),void 0===r)return;if(r!==e[t]){const r=e.slice(0,t);for(let n=t;n<e.length;n++){let t=e[n];if(t=Reprs["CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)"](t),void 0===t)return;r.push(t)}return r}}return e}},Int:Kinds.Int,CarV1HeaderOrV2Pragma:e=>{if(void 0===Kinds.Map(e))return;const t=Object.entries(e);let r=e,n=1;for(let i=0;i<t.length;i++){const[o,a]=t[i];switch(o){case"roots":{const n=Reprs["CarV1HeaderOrV2Pragma > roots (anon)"](a);if(void 0===n)return;if(n!==a||r!==e){if(r===e){r={};for(let e=0;e<i;e++)r[t[e][0]]=t[e][1]}r.roots=n}}break;case"version":{n--;const o=Reprs.Int(a);if(void 0===o)return;if(o!==a||r!==e){if(r===e){r={};for(let e=0;e<i;e++)r[t[e][0]]=t[e][1]}r.version=o}}break;default:return}}return n>0?void 0:r}},CarV1HeaderOrV2Pragma={toTyped:Types.CarV1HeaderOrV2Pragma,toRepresentation:Reprs.CarV1HeaderOrV2Pragma};function readHeader$1(e,t){const r=decodeVarint$1(e.upTo(8),e);if(0===r)throw new Error("Invalid CAR header (zero length)");const n=e.exactly(r,!0),i=decode$j(n);if(void 0===CarV1HeaderOrV2Pragma.toTyped(i))throw new Error("Invalid CAR header format");if(1!==i.version&&2!==i.version||void 0!==t&&i.version!==t)throw new Error(`Invalid CAR version: ${i.version}${void 0!==t?` (expected ${t})`:""}`);if(1===i.version){if(!Array.isArray(i.roots))throw new Error("Invalid CAR header format");return i}if(void 0!==i.roots)throw new Error("Invalid CAR header format");const o=decodeV2Header(e.exactly(V2_HEADER_LENGTH,!0));e.seek(o.dataOffset-e.pos);const a=readHeader$1(e,1);return Object.assign(a,o)}function readCid(e){const t=e.exactly(2,!1);if(t[0]===CIDV0_BYTES$1.SHA2_256&&t[1]===CIDV0_BYTES$1.LENGTH){const t=decode$k(e.exactly(34,!0));return CID.create(0,CIDV0_BYTES$1.DAG_PB,t)}const r=decodeVarint$1(e.upTo(8),e);if(1!==r)throw new Error(`Unexpected CID version (${r})`);const n=decodeVarint$1(e.upTo(8),e),i=decode$k(e.exactly(getMultihashLength$1(e.upTo(8)),!0));return CID.create(r,n,i)}function readBlockHead(e){const t=e.pos;let r=decodeVarint$1(e.upTo(8),e);if(0===r)throw new Error("Invalid CAR section (zero length)");r+=e.pos-t;return{cid:readCid(e),length:r,blockLength:r-Number(e.pos-t)}}function fromBytes$1(e){let t=bytesReader$1(e);const r=readHeader$1(t);if(2===r.version){const e=t.pos-r.dataOffset;t=limitReader(t,r.dataSize-e)}const n=[];for(;t.upTo(8).length>0;){const{cid:e,blockLength:r}=readBlockHead(t);n.push({cid:e,bytes:t.exactly(r,!0)})}return{header:r,blocks:n}}function bytesReader$1(e){let t=0;return{upTo:r=>e.subarray(t,t+Math.min(r,e.length-t)),exactly(r,n=!1){if(r>e.length-t)throw new Error("Unexpected end of data");const i=e.subarray(t,t+r);return n&&(t+=r),i},seek(e){t+=e},get pos(){return t}}}function limitReader(e,t){let r=0;return{upTo(n){let i=e.upTo(n);return i.length+r>t&&(i=i.subarray(0,t-r)),i},exactly(n,i=!1){const o=e.exactly(n,i);if(o.length+r>t)throw new Error("Unexpected end of data");return i&&(r+=n),o},seek(t){r+=t,e.seek(t)},get pos(){return e.pos}}}class CarBufferReader{constructor(e,t){this._header=e,this._blocks=t,this._cids=void 0}get version(){return this._header.version}getRoots(){return this._header.roots}has(e){return this._blocks.some(t=>t.cid.equals(e))}get(e){return this._blocks.find(t=>t.cid.equals(e))}blocks(){return this._blocks}cids(){return this._cids||(this._cids=this._blocks.map(e=>e.cid)),this._cids}static fromBytes(e){if(!(e instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");const{header:t,blocks:r}=fromBytes$1(e);return new CarBufferReader(t,r)}}const cborEncoders=makeCborEncoders(),defaultEncodeOptions={float64:!1,quickEncodeToken:quickEncodeToken};function tokensToLength(e,t=cborEncoders,r=defaultEncodeOptions){if(Array.isArray(e)){let n=0;for(const i of e)n+=tokensToLength(i,t,r);return n}{const n=t[e.type.major];if(void 0===n.encodedSize||"function"!=typeof n.encodedSize)throw new Error(`Encoder for ${e.type.name} does not have an encodedSize()`);return n.encodedSize(e,r)}}class CarBufferWriter{constructor(e,t){this.bytes=e,this.byteOffset=t,this.roots=[],this.headerSize=t}addRoot(e,t){return addRoot(this,e,t),this}write(e){return addBlock(this,e),this}close(e){return close$1(this,e)}}const addRoot=(e,t,r={})=>{const{resize:n=!1}=r,{bytes:i,headerSize:o,byteOffset:a,roots:s}=e;e.roots.push(t);const c=headerLength(e);if(c>o){if(!(c-o+a<i.byteLength))throw s.pop(),new RangeError(`Buffer has no capacity for a new root ${t}`);if(!n)throw s.pop(),new RangeError(`Header of size ${o} has no capacity for new root ${t}.\n  However there is a space in the buffer and you could call addRoot(root, { resize: root }) to resize header to make a space for this root.`);resizeHeader(e,c)}},blockLength=({cid:e,bytes:t})=>{const r=e.bytes.byteLength+t.byteLength;return varint$1.encodingLength(r)+r},addBlock=(e,{cid:t,bytes:r})=>{const n=t.bytes.byteLength+r.byteLength,i=varint$1.encode(n);if(e.byteOffset+i.length+n>e.bytes.byteLength)throw new RangeError("Buffer has no capacity for this block");writeBytes$1(e,i),writeBytes$1(e,t.bytes),writeBytes$1(e,r)},close$1=(e,t={})=>{const{resize:r=!1}=t,{roots:n,bytes:i,byteOffset:o,headerSize:a}=e,s=encode$j({version:1,roots:n}),c=varint$1.encode(s.length),l=c.length+s.byteLength;if(0===a-l)return writeHeader(e,c,s),i.subarray(0,o);if(r)return resizeHeader(e,l),writeHeader(e,c,s),i.subarray(0,e.byteOffset);throw new RangeError("Header size was overestimated.\nYou can use close({ resize: true }) to resize header")},resizeHeader=(e,t)=>{const{bytes:r,headerSize:n}=e;r.set(r.subarray(n,e.byteOffset),t),e.byteOffset+=t-n,e.headerSize=t},writeBytes$1=(e,t)=>{e.bytes.set(t,e.byteOffset),e.byteOffset+=t.length},writeHeader=({bytes:e},t,r)=>{e.set(t),e.set(r,t.length)},headerPreludeTokens=[new Token(Type.map,2),new Token(Type.string,"version"),new Token(Type.uint,1),new Token(Type.string,"roots")],CID_TAG=new Token(Type.tag,42),calculateHeaderLength=e=>{const t=[...headerPreludeTokens];t.push(new Token(Type.array,e.length));for(const n of e)t.push(CID_TAG),t.push(new Token(Type.bytes,{length:n+1}));const r=tokensToLength(t);return varint$1.encodingLength(r)+r},headerLength=({roots:e})=>calculateHeaderLength(e.map(e=>e.bytes.byteLength)),createWriter$1=(e,t={})=>{const{roots:r=[],byteOffset:n=0,byteLength:i=e.byteLength,headerSize:o=headerLength({roots:r})}=t,a=new Uint8Array(e,n,i),s=new CarBufferWriter(a,o);for(const c of r)s.addRoot(c);return s},contentType$6="application/vnd.ipld.car",name$3="CAR",code$5=514;let Writer$2=class{constructor(e=[],t=0){this.written=new Set,this.blocks=e,this.byteLength=t}write(...e){for(const t of e){const e=t.cid.toString(base32);this.written.has(e)||(this.blocks.push(t),this.byteLength+=blockLength(t),this.written.add(e))}return this}flush(...e){const t=[];for(const i of e.reverse()){const e=i.cid.toString(base32);this.written.has(e)||(this.blocks.unshift(i),this.byteLength+=blockLength({cid:i.cid,bytes:i.bytes}),this.written.add(e)),t.unshift(i.cid)}this.byteLength+=headerLength({roots:t});const r=new ArrayBuffer(this.byteLength),n=createWriter$1(r,{roots:t});for(const i of this.blocks)n.write(i);return n.close()}};const createWriter=()=>new Writer$2,encode$8=({roots:e=[],blocks:t})=>{const r=new Writer$2;return t&&r.write(...t.values()),r.flush(...e)},decode$8=e=>{const t=CarBufferReader.fromBytes(e),r=[],n=new Map;for(const i of t.getRoots()){const e=t.get(i);e&&r.push(e)}for(const i of t.blocks())n.set(i.cid.toString(),i);return{roots:r,blocks:n}},link$1=async(e,{hasher:t=sha256}={})=>create$6(code$5,await t.digest(e)),write$1=async(e,t)=>{const r=encode$8(e);return{bytes:r,cid:await link$1(r,t)}},car=Object.freeze(Object.defineProperty({__proto__:null,code:code$5,contentType:contentType$6,createWriter:createWriter,decode:decode$8,encode:encode$8,link:link$1,name:name$3,write:write$1},Symbol.toStringTag,{value:"Module"})),ok=e=>{if(null==e)throw new TypeError(`ok(${e}) is not allowed, consider ok({}) instead`);return{ok:e}},error$1=e=>{if(null==e)throw new TypeError(`error(${e}) is not allowed, consider passing an error instead`);return{error:e}},panic=e=>{throw new Failure(e)},fail=e=>({error:new Failure(e)});class Failure extends Error{describe(){return this.toString()}get message(){return this.describe()}toJSON(){const{name:e,message:t,stack:r}=this;return{name:e,message:t,stack:r}}}class API{constructor(e){this.settings=e}toString(){return`new ${this.constructor.name}()`}readWith(e,t){throw new Error("Abstract method readWith must be implemented by subclass")}read(e){return this.readWith(e,this.settings)}is(e){var t;return!(null==(t=this.read(e))?void 0:t.error)}from(e){const t=this.read(e);if(t.error)throw t.error;return t.ok}optional(){return optional$1(this)}nullable(){return nullable(this)}array(){return array(this)}or(e){return or$1(this,e)}and(e){return and$2(this,e)}refine(e){return refine(this,e)}brand(e){return this}default(e){const t=this.from(e);if(void 0===t)throw new Error("Value of type undefined is not a valid default");return new Default({reader:this,value:t})}}class Unknown extends API{read(e){return{ok:e}}toString(){return"unknown()"}}const unknown=()=>new Unknown;class Nullable extends API{readWith(e,t){const r=t.read(e);return r.error?null===e?{ok:null}:{error:new UnionError({causes:[r.error,typeError({expect:"null",actual:e}).error]})}:r}toString(){return`${this.settings}.nullable()`}}const nullable=e=>new Nullable(e);class Optional extends API{optional(){return this}readWith(e,t){const r=t.read(e);return r.error&&void 0===e?{ok:void 0}:r}toString(){return`${this.settings}.optional()`}}class Default extends API{optional(){return this}readWith(e,{reader:t,value:r}){if(void 0===e)return{ok:r};{const n=t.read(e);return n.error||void 0!==n.ok?n:{ok:r}}}toString(){return`${this.settings.reader}.default(${JSON.stringify(this.settings.value)})`}get value(){return this.settings.value}}const optional$1=e=>new Optional(e);class ArrayOf extends API{readWith(e,t){if(!Array.isArray(e))return typeError({expect:"array",actual:e});const r=[];for(const[n,i]of e.entries()){const e=t.read(i);if(e.error)return memberError({at:n,cause:e.error});r.push(e.ok)}return{ok:r}}get element(){return this.settings}toString(){return`array(${this.element})`}}const array=e=>new ArrayOf(e);class Tuple extends API{readWith(e,t){if(!Array.isArray(e))return typeError({expect:"array",actual:e});if(e.length!==this.shape.length)return error(`Array must contain exactly ${this.shape.length} elements`);const r=[];for(const[n,i]of t.entries()){const t=i.read(e[n]);if(t.error)return memberError({at:n,cause:t.error});r[n]=t.ok}return{ok:r}}get shape(){return this.settings}toString(){return`tuple([${this.shape.map(e=>e.toString()).join(", ")}])`}}const tuple=e=>new Tuple(e);class Dictionary extends API{readWith(e,{key:t,value:r}){if("object"!=typeof e||null===e||Array.isArray(e))return typeError({expect:"dictionary",actual:e});const n={};for(const[i,o]of Object.entries(e)){const e=t.read(i);if(e.error)return memberError({at:i,cause:e.error});const a=r.read(o);if(a.error)return memberError({at:i,cause:a.error});void 0!==a.ok&&(n[e.ok]=a.ok)}return{ok:n}}get key(){return this.settings.key}get value(){return this.settings.value}partial(){const{key:e,value:t}=this.settings;return new Dictionary({key:e,value:optional$1(t)})}toString(){return`dictionary(${this.settings})`}}const dictionary=({value:e,key:t})=>new Dictionary({value:e,key:t||string()});class Union extends API{readWith(e,t){const r=[];for(const n of t){const t=n.read(e);if(!t.error)return t;r.push(t.error)}return{error:new UnionError({causes:r})}}get variants(){return this.settings}toString(){return`union([${this.variants.map(e=>e.toString()).join(", ")}])`}}const union=e=>new Union(e),or$1=(e,t)=>union([e,t]);class Intersection extends API{readWith(e,t){const r=[];for(const n of t){const t=n.read(e);t.error&&r.push(t.error)}return r.length>0?{error:new IntersectionError({causes:r})}:{ok:e}}toString(){return`intersection([${this.settings.map(e=>e.toString()).join(",")}])`}}const intersection$1=e=>new Intersection(e),and$2=(e,t)=>intersection$1([e,t]);let Boolean$1=class extends API{readWith(e){switch(e){case!0:case!1:return{ok:e};default:return typeError({expect:"boolean",actual:e})}}toString(){return"boolean()"}};const anyBoolean=new Boolean$1,boolean=()=>anyBoolean;class UnknownNumber extends API{greaterThan(e){return this.refine(greaterThan(e))}lessThan(e){return this.refine(lessThan(e))}refine(e){return new RefinedNumber({base:this,schema:e})}}class AnyNumber extends UnknownNumber{readWith(e){return"number"==typeof e?{ok:e}:typeError({expect:"number",actual:e})}toString(){return"number()"}}const anyNumber=new AnyNumber,number=()=>anyNumber;class RefinedNumber extends UnknownNumber{readWith(e,{base:t,schema:r}){const n=t.read(e);return n.error?n:r.read(n.ok)}toString(){return`${this.settings.base}.refine(${this.settings.schema})`}}class LessThan extends API{readWith(e,t){return e<t?{ok:e}:error(`Expected ${e} < ${t}`)}toString(){return`lessThan(${this.settings})`}}const lessThan=e=>new LessThan(e);class GreaterThan extends API{readWith(e,t){return e>t?{ok:e}:error(`Expected ${e} > ${t}`)}toString(){return`greaterThan(${this.settings})`}}const greaterThan=e=>new GreaterThan(e),Integer={read:e=>Number.isInteger(e)?{ok:e}:typeError({expect:"integer",actual:e}),toString:()=>"Integer"},anyInteger=anyNumber.refine(Integer),integer=()=>anyInteger,Float={read:e=>Number.isFinite(e)?{ok:e}:typeError({expect:"Float",actual:e}),toString:()=>"Float"};anyNumber.refine(Float);class UnknownString extends API{refine(e){return new RefinedString({base:this,schema:e})}startsWith(e){return this.refine(startsWith(e))}endsWith(e){return this.refine(endsWith(e))}toString(){return"string()"}}class RefinedString extends UnknownString{readWith(e,{base:t,schema:r}){const n=t.read(e);return n.error?n:r.read(n.ok)}toString(){return`${this.settings.base}.refine(${this.settings.schema})`}}class AnyString extends UnknownString{readWith(e){return"string"==typeof e?{ok:e}:typeError({expect:"string",actual:e})}}const anyString=new AnyString,string=()=>anyString;class BytesSchema extends API{readWith(e){return e instanceof Uint8Array?{ok:e}:typeError({expect:"Uint8Array",actual:e})}}const Bytes=new BytesSchema,bytes=()=>Bytes;class StartsWith extends API{readWith(e,t){return e.startsWith(t)?{ok:e}:error(`Expect string to start with "${t}" instead got "${e}"`)}get prefix(){return this.settings}toString(){return`startsWith("${this.prefix}")`}}const startsWith=e=>new StartsWith(e);class EndsWith extends API{readWith(e,t){return e.endsWith(t)?{ok:e}:error(`Expect string to end with "${t}" instead got "${e}"`)}get suffix(){return this.settings}toString(){return`endsWith("${this.suffix}")`}}const endsWith=e=>new EndsWith(e);class Refine extends API{readWith(e,{base:t,schema:r}){const n=t.read(e);return n.error?n:r.read(n.ok)}toString(){return`${this.settings.base}.refine(${this.settings.schema})`}}const refine=(e,t)=>new Refine({base:e,schema:t});class Literal extends API{readWith(e,t){return e!==t?{error:new LiteralError({expect:t,actual:e})}:{ok:t}}get value(){return this.settings}default(e=this.value){return super.default(e)}toString(){return`literal(${toString(this.value)})`}}const literal=e=>new Literal(e);class Struct extends API{readWith(e,t){if("object"!=typeof e||null===e||Array.isArray(e))return typeError({expect:"object",actual:e});const r=e,n={},i=Object.entries(t);for(const[o,a]of i){const e=a.read(r[o]);if(e.error)return memberError({at:o,cause:e.error});void 0!==e.ok&&(n[o]=e.ok)}return{ok:n}}partial(){return new Struct(Object.fromEntries(Object.entries(this.shape).map(([e,t])=>[e,optional$1(t)])))}get shape(){return this.settings}toString(){return["struct({ ",...Object.entries(this.shape).map(([e,t])=>`${e}: ${t}`).join(", ")," })"].join("")}create(e){return this.from(e||{})}extend(e){return new Struct({...this.shape,...e})}}const struct=e=>{const t={},r=Object.entries(e);for(const[n,i]of r)switch(typeof i){case"number":case"string":case"boolean":t[n]=literal(i);break;case"object":t[n]=null===i?literal(null):i;break;default:throw new Error(`Invalid struct field "${n}", expected schema or literal, instead got ${typeof i}`)}return new Struct(t)};class Variant extends API{readWith(e,t){if("object"!=typeof e||null===e||Array.isArray(e))return typeError({expect:"object",actual:e});const r=Object.keys(e),[n]=1===r.length?r:[],i=n?t[n]:void 0;if(i){const t=i.read(e[n]);return t.error?memberError({at:n,cause:t.error}):{ok:{[n]:t.ok}}}if(t._){const r=t._.read(e);return r.error?r:{ok:{_:r.ok}}}return error(n?`Expected an object with one of the these keys: ${Object.keys(t).sort().join(", ")} instead got object with key ${n}`:"Expected an object with a single key instead got object with keys "+r.sort().join(", "))}match(e,t){const r=this.read(e);if(r.error){if(void 0!==t)return[null,t];throw r.error}{const[e]=Object.keys(r.ok);return[e,r.ok[e]]}}create(e){return this.from(e)}}const variant=e=>new Variant(e),error=e=>({error:new SchemaError(e)});class SchemaError extends Failure{get name(){return"SchemaError"}describe(){return this.name}}let TypeError$1=class extends SchemaError{constructor({expect:e,actual:t}){super(),this.expect=e,this.actual=t}get name(){return"TypeError"}describe(){return`Expected value of type ${this.expect} instead got ${toString(this.actual)}`}};const typeError=e=>({error:new TypeError$1(e)}),toString=e=>{const t=typeof e;switch(t){case"boolean":case"string":return JSON.stringify(e);case"bigint":return`${e}n`;case"number":case"symbol":case"undefined":return String(e);case"object":return null===e?"null":Array.isArray(e)?"array":Symbol.toStringTag in e?e[Symbol.toStringTag]:"object";default:return t}};class LiteralError extends SchemaError{constructor({expect:e,actual:t}){super(),this.expect=e,this.actual=t}get name(){return"LiteralError"}describe(){return`Expected literal ${toString(this.expect)} instead got ${toString(this.actual)}`}}class ElementError extends SchemaError{constructor({at:e,cause:t}){super(),this.at=e,this.cause=t}get name(){return"ElementError"}describe(){return[`Array contains invalid element at ${this.at}:`,li$1(this.cause.message)].join("\n")}}class FieldError extends SchemaError{constructor({at:e,cause:t}){super(),this.at=e,this.cause=t}get name(){return"FieldError"}describe(){return[`Object contains invalid field "${this.at}":`,li$1(this.cause.message)].join("\n")}}const memberError=({at:e,cause:t})=>"string"==typeof e?{error:new FieldError({at:e,cause:t})}:{error:new ElementError({at:e,cause:t})};class UnionError extends SchemaError{constructor({causes:e}){super(),this.causes=e}get name(){return"UnionError"}describe(){const{causes:e}=this;return["Value does not match any type of the union:",...e.map(e=>li$1(e.message))].join("\n")}}class IntersectionError extends SchemaError{constructor({causes:e}){super(),this.causes=e}get name(){return"IntersectionError"}describe(){const{causes:e}=this;return["Value does not match following types of the intersection:",...e.map(e=>li$1(e.message))].join("\n")}}const indent$1=(e,t="  ")=>`${t}${e.split("\n").join(`\n${t}`)}`,li$1=e=>indent$1(`- ${e}`);class URISchema extends API{readWith(e,{protocol:t}={}){if("string"!=typeof e&&!(e instanceof URL))return error("Expected URI but got "+(null===e?"null":typeof e));try{const r=new URL(String(e));return null!=t&&r.protocol!==t?error(`Expected ${t} URI instead got ${r.href}`):{ok:r.href}}catch(r){return error("Invalid URI")}}}const schema$3=new URISchema({}),uri=()=>schema$3,read$3=e=>schema$3.read(e),match$4=e=>new URISchema(e),from$2=e=>schema$3.from(e),URI=Object.freeze(Object.defineProperty({__proto__:null,from:from$2,match:match$4,read:read$3,uri:uri},Symbol.toStringTag,{value:"Module"}));class LinkSchema extends API{readWith(e,{code:t,multihash:r={},version:n}){if(null==e)return error(`Expected link but got ${e} instead`);if(isLink(e)){if(null!=t&&e.code!==t)return error(`Expected link to be CID with 0x${t.toString(16)} codec`);if(null!=r.code&&e.multihash.code!==r.code)return error(`Expected link to be CID with 0x${r.code.toString(16)} hashing algorithm`);if(null!=n&&e.version!==n)return error(`Expected link to be CID version ${n} instead of ${e.version}`);const[i,o]=null!=r.digest?[base32.baseEncode(r.digest),base32.baseEncode(e.multihash.digest)]:["",""];return i!==o?error(`Expected link with "${i}" hash digest instead of "${o}"`):{ok:e}}return error(`Expected link to be a CID instead of ${e}`)}}const schema$2=new LinkSchema({}),link=()=>schema$2,match$3=(e={})=>new LinkSchema(e),read$2=e=>schema$2.read(e),optional=()=>schema$2.optional(),Link=Object.freeze(Object.defineProperty({__proto__:null,create:create$6,createLegacy:createLegacy,isLink:isLink,link:link,match:match$3,optional:optional,parse:parse$2,read:read$2,schema:schema$2},Symbol.toStringTag,{value:"Module"}));class PrincipalSchema extends API{readWith(e,t){if(!(e instanceof Uint8Array))return typeError({expect:"Uint8Array",actual:e});let r;try{r=decode$h(e)}catch(i){return error(`Unable to decode bytes as DID: ${i}`)}const n=t?`did:${t}:`:"did:";return r.did().startsWith(n)?{ok:r}:error(`Expected a ${n} but got "${r.did()}" instead`)}}const match$2=(e={})=>new PrincipalSchema(e.method);class DIDSchema extends API{readWith(e,t){const r=t?`did:${t}:`:"did:";return e.startsWith(r)?{ok:e}:error(`Expected a ${r} but got "${e}" instead`)}}const schema$1=string().refine(new DIDSchema),did=()=>schema$1,read$1=e=>schema$1.read(e),match$1=(e={})=>string().refine(new DIDSchema(e.method)),from$1=e=>match$1({}).from(e);class DIDBytesSchema extends API{readWith(e,t){if(!(e instanceof Uint8Array))return typeError({expect:"Uint8Array",actual:e});let r;try{r=decode$h(e).did()}catch(i){return error(`Unable to parse bytes as did: ${i}`)}const n=t?`did:${t}:`:"did:";return r.startsWith(n)?{ok:r}:error(`Expected a ${n} but got "${r}" instead`)}}const schemaBytes=new DIDBytesSchema,didBytes=()=>schemaBytes,readBytes=e=>schemaBytes.read(e),matchBytes=(e={})=>new DIDBytesSchema(e.method),fromBytes=e=>matchBytes({}).from(e),DID=Object.freeze(Object.defineProperty({__proto__:null,did:did,didBytes:didBytes,from:from$1,fromBytes:fromBytes,match:match$1,matchBytes:matchBytes,read:read$1,readBytes:readBytes},Symbol.toStringTag,{value:"Module"})),schema=string(),match=e=>e?schema.refine(new Match$1(e.pattern)):schema;let Match$1=class extends API{readWith(e,t){return t.test(e)?{ok:e}:error(`Expected to match ${t} but got "${e}" instead`)}};const isDelegation=e=>!isLink(e);class Delegation{constructor(e,t=new Map){this.root=e,this.blocks=t,Object.defineProperties(this,{blocks:{enumerable:!1}})}get attachedLinks(){const e=new Set,t=this.data;for(const r of t.capabilities){const t=getLinksFromObject(r);for(const r of t)e.add(`${r}`)}for(const r of t.facts)if(isLink(r))e.add(`${r}`);else{const t=Object.values(r).filter(e=>isLink(e));for(const r of t)e.add(`${r}`)}return e}get version(){return this.data.version}get signature(){return this.data.signature}get cid(){return this.root.cid}link(){return this.root.cid}get asCID(){return this.cid}get bytes(){return this.root.bytes}get data(){const e=decode$7(this.root);return Object.defineProperties(this,{data:{value:e,enumerable:!1}}),e}attach(e){if(!this.attachedLinks.has(`${e.cid.link()}`))throw new Error(`given block with ${e.cid} is not an attached link`);this.blocks.set(`${e.cid}`,e)}export(){return exportDAG(this.root,this.blocks,this.attachedLinks)}archive(){return archive(this)}iterateIPLDBlocks(){return exportDAG(this.root,this.blocks,this.attachedLinks)}get proofs(){return proofs(this)}get issuer(){return this.data.issuer}get audience(){return this.data.audience}get capabilities(){return this.data.capabilities}get expiration(){return this.data.expiration}get notBefore(){return this.data.notBefore}get nonce(){return this.data.nonce}get facts(){return this.data.facts}iterate(){return it(this)}delegate(){return this}buildIPLDView(){return this}toJSON(){return{...this.data.toJSON(),"/":this.cid.toString(),prf:this.proofs.map(e=>isDelegation(e)?e:{"/":e.toString()})}}}const archive=async e=>{try{const t=new Map;for(const i of e.iterateIPLDBlocks())t.set(`${i.cid}`,i);const r=await write$2({[`ucan@${e.version}`]:e.root.cid});t.set(`${r.cid}`,r);const n=encode$8({roots:[r],blocks:t});return ok(n)}catch(t){return error$1(t)}},it=function*(e){for(const t of e.proofs)isDelegation(t)&&(yield*it(t),yield t)},decodeCache=new WeakMap,decode$7=({bytes:e})=>{const t=decodeCache.get(e);if(!t){const t=decode$a(e);return decodeCache.set(e,t),t}return t},delegate=async({issuer:e,audience:t,proofs:r=[],attachedBlocks:n=new Map,...i},o)=>{const a=[],s=new Map;for(const p of r)if(isDelegation(p)){a.push(p.cid);for(const e of p.export())s.set(e.cid.toString(),e)}else a.push(p);const c=await issue$1({...i,issuer:e,audience:t,proofs:a}),{cid:l,bytes:u}=await write$3(c,o);decodeCache.set(l,c);const d=new Delegation({cid:l,bytes:u},s);Object.defineProperties(d,{proofs:{value:r}});for(const p of n.values())d.attach(p);return d},exportDAG=function*(e,t,r){for(const n of decode$7(e).proofs){const e=t.get(`${n}`);e&&(yield*exportSubDAG(e,t))}for(const n of r.values()){const e=t.get(n);e&&(yield e)}yield e},exportSubDAG=function*(e,t){for(const r of decode$7(e).proofs){const e=t.get(`${r}`);e&&(yield*exportSubDAG(e,t))}yield e},create$4=({root:e,blocks:t})=>new Delegation(e,t),view$3=({root:e,blocks:t},r)=>{const n=get$8(e,t,null);return null==n?void 0!==r?r:notFound(e):create$4({root:n,blocks:t})},proofs=e=>{const t=[],{root:r,blocks:n}=e;for(const i of decode$7(r).proofs){const e=n.get(i.toString());t.push(e?create$4({root:e,blocks:n}):i)}return Object.defineProperty(e,"proofs",{value:t}),t};function getLinksFromObject(e){const t=[];return function e(r){for(const n in r){const i=r[n];isLink(i)?t.push(i):i&&"object"==typeof i&&e(i)}}(e),t}const invoke=e=>new IssuedInvocation(e),create$3=({root:e,blocks:t})=>new Invocation(e,t),view$2=({root:e,blocks:t},r)=>{const n=get$8(e,t,null);return null==n?void 0!==r?r:notFound(e):create$3({root:n,blocks:t})};class IssuedInvocation{constructor({issuer:e,audience:t,capability:r,proofs:n=[],expiration:i,lifetimeInSeconds:o,notBefore:a,nonce:s,facts:c=[],attachedBlocks:l}){this.issuer=e,this.audience=t,this.proofs=n,this.capabilities=[r],this.expiration=i,this.lifetimeInSeconds=o,this.notBefore=a,this.nonce=s,this.facts=c,this.attachedBlocks=l||new Map}attach(e){this.attachedBlocks.set(`${e.cid}`,e)}delegate(){return delegate(this)}buildIPLDView(){return delegate(this)}async execute(e){const[t]=await e.execute(this);return t}}class Invocation extends Delegation{}const view$1=({root:e,blocks:t},r)=>{const n=get$8(e,t,null);if(null==n)return void 0!==r?r:notFound(e);const i=decode$j(n.bytes);return new Receipt({root:{...n,data:i},store:t})};class Receipt{constructor({root:e,store:t,ran:r,issuer:n,signature:i,proofs:o}){this.store=t,this.root=e,this._ran=r,this._fx=void 0,this._signature=i,this._proofs=o,this._issuer=n}get ran(){const e=this._ran;if(e)return e;{const e=view$2({root:this.root.data.ocm.ran,blocks:this.store},this.root.data.ocm.ran);return this._ran=e,e}}get proofs(){const e=this._proofs;if(e)return e;{const{store:e,root:t}=this,{prf:r}=t.data.ocm,n=[];if(r)for(const i of r){const t=view$3({root:i,blocks:e},i);n.push(t)}return this._proofs=n,n}}link(){return this.root.cid}get meta(){return this.root.data.ocm.meta}get issuer(){const e=this._issuer;if(e)return e;{const{iss:e}=this.root.data.ocm;if(e){const t=parse$1(e);return this._issuer=t,t}}}get out(){return this.root.data.ocm.out}get fx(){let e=this._fx;if(!e){const{store:t}=this,{fork:r,join:n}=this.root.data.ocm.fx;e={fork:r.map(e=>view$2({root:e,blocks:t},e))},n&&(e.join=view$2({root:n,blocks:t},n)),this._fx=e}return e}get signature(){const e=this._signature;if(e)return e;{const e=view$4(this.root.data.sig);return this._signature=e,e}}verifySignature(e){return this.signature.verify(e,encode$a(this.root.data.ocm))}buildIPLDView(){return this}*iterateIPLDBlocks(){const{ran:e,fx:t,proofs:r,root:n}=this;yield*iterate(e);for(const i of t.fork)yield*iterate(i);t.join&&(yield*iterate(t.join));for(const i of r)yield*iterate(i);yield n}}class ReceptBuilder{constructor({issuer:e,result:t,ran:r,fx:n=NOFX,proofs:i=[],meta:o={}}){this.issuer=e,this.result=t,this.ran=r,this.fx=n,this.proofs=i,this.meta=o}async buildIPLDView({hasher:e=sha256,codec:t=CBOR}={}){const r=createStore();addEveryInto(iterate(this.ran),r);const n=[];for(const l of this.proofs)addEveryInto(iterate(l),r),n.push(l.link());const i={fork:[]};for(const l of this.fx.fork)addEveryInto(iterate(l),r),i.fork.push(l.link());this.fx.join&&(addEveryInto(iterate(this.fx.join),r),i.join=this.fx.join.link());const o={ran:this.ran.link(),out:this.result,fx:i,meta:this.meta,iss:this.issuer.did(),prf:n},a=await this.issuer.sign(encode$a(o)),s={ocm:o,sig:a},c=await writeInto(s,r,{hasher:e,codec:t});return new Receipt({root:c,store:r,signature:a,proofs:this.proofs,ran:this.ran})}}const NOFX=Object.freeze({fork:Object.freeze([])}),issue=e=>new ReceptBuilder(e).buildIPLDView(),MessageSchema=variant({"ucanto/message@7.0.0":struct({execute:match$3().array().optional(),delegate:dictionary({key:string(),value:match$3()}).array().optional()})}),build=({invocations:e,receipts:t})=>new MessageBuilder({invocations:e,receipts:t}).buildIPLDView(),view=({root:e,store:t},r)=>{const n=get$8(e,t,null);if(null===n)return void 0!==r?r:notFound(e);const i=decode$j(n.bytes),[o,a]=MessageSchema.match(i,r);return"ucanto/message@7.0.0"===o?new Message({root:{...n,data:i},store:t}):a};class MessageBuilder{constructor({invocations:e,receipts:t}){this.invocations=e,this.receipts=t}async buildIPLDView(e){const t=new Map,{invocations:r,...n}=await writeInvocations(this.invocations||[],t),{receipts:i,...o}=await writeReceipts(this.receipts||[],t),a=await writeInto({"ucanto/message@7.0.0":{...n,...o}},t,e);return new Message({root:a,store:t},{receipts:i,invocations:r})}}const writeInvocations=async(e,t)=>{const r=[],n=[];for(const i of e){const e=await i.buildIPLDView();n.push(e.link()),r.push(e);for(const r of e.iterateIPLDBlocks())t.set(`${r.cid}`,r)}return{invocations:r,...n.length>0?{execute:n}:{}}},writeReceipts=async(e,t)=>{if(0===e.length)return{};const r=new Map,n={};for(const[i,o]of e.entries()){const e=await o.buildIPLDView();for(const r of e.iterateIPLDBlocks())t.set(`${r.cid}`,r);const a=`${e.ran.link()}`;a in n?r.set(`${a}@${i}`,e):(n[a]=e.root.cid,r.set(a,e))}return{receipts:r,report:n}};class Message{constructor({root:e,store:t},{invocations:r,receipts:n}={}){this.root=e,this.store=t,this._invocations=r,this._receipts=n}*iterateIPLDBlocks(){for(const e of this.invocations)yield*e.iterateIPLDBlocks();for(const e of this.receipts.values())yield*e.iterateIPLDBlocks();yield this.root}get(e,t){const r=(this.root.data["ucanto/message@7.0.0"].report||{})[`${e}`];return r?view$1({root:r,blocks:this.store}):void 0!==t?t:panic(`Message does not include receipt for ${e}`)}get invocationLinks(){return this.root.data["ucanto/message@7.0.0"].execute||[]}get invocations(){let e=this._invocations;return e||(e=this.invocationLinks.map(e=>view$2({root:e,blocks:this.store}))),e}get receipts(){let e=this._receipts;if(!e){e=new Map;const t=this.root.data["ucanto/message@7.0.0"].report||{};for(const[r,n]of Object.entries(t)){const t=view$1({root:n,blocks:this.store});e.set(`${t.ran.link()}`,t)}}return e}}const connect=e=>new Connection(e);class Connection{constructor(e){this.id=e.id,this.options=e,this.codec=e.codec,this.channel=e.channel,this.hasher=e.hasher||sha256}async execute(...e){return execute(e,this)}}const execute=async(e,t)=>{const r=await build({invocations:e}),n=await t.codec.encode(r,t),i=await t.channel.request(n);try{const e=await t.codec.decode(i);return r.invocationLinks.map(t=>e.get(t))}catch(o){const{message:e,name:n="Error",...i}=o,a=[];for await(const s of r.invocationLinks){const r=await issue({ran:s,result:{error:{...i,name:n,message:e}},issuer:{did:()=>t.id.did(),sign:()=>createNonStandard("",new Uint8Array)}});a.push(r)}return a}},contentType$5=contentType$6,HEADERS$2=Object.freeze({"content-type":contentType$5,accept:contentType$5}),encode$7=(e,t)=>{const r=new Map;for(const i of e.iterateIPLDBlocks())r.set(`${i.cid}`,i);const n=encode$8({roots:[e.root],blocks:r});return{headers:(null==t?void 0:t.headers)||{...HEADERS$2},body:n}},decode$6=async({headers:e,body:t})=>{const{roots:r,blocks:n}=decode$8(t);return view({root:r[0].cid,store:n})},request$1=Object.freeze(Object.defineProperty({__proto__:null,codec:car,contentType:contentType$5,decode:decode$6,encode:encode$7},Symbol.toStringTag,{value:"Module"})),contentType$4=contentType$6,HEADERS$1=Object.freeze({"content-type":contentType$4}),encode$6=(e,t)=>{const r=new Map;for(const i of e.iterateIPLDBlocks())r.set(`${i.cid}`,i);const n=encode$8({roots:[e.root],blocks:r});return{headers:{...HEADERS$1},body:n}},decode$5=async({headers:e,body:t})=>{const{roots:r,blocks:n}=decode$8(t);return view({root:r[0].cid,store:n})},response$1=Object.freeze(Object.defineProperty({__proto__:null,codec:car,contentType:contentType$4,decode:decode$5,encode:encode$6},Symbol.toStringTag,{value:"Module"})),inbound=e=>new Inbound(e);class Inbound{accept({headers:e}){const t=e["content-type"]||e["Content-Type"],r=this.decoders[t];if(!r)return{error:{status:415,message:"The server cannot process the request because the payload format is not supported. Please check the content-type header and try again with a supported media type.",headers:{accept:Object.keys(this.decoders).join(", ")}}};const n=parseAcceptHeader(e.accept||e.Accept||"*/*");for(const{category:i,type:o}of n)for(const e of this.encoders){if(!("*"!==i&&i!==e.category||"*"!==o&&o!==e.type))return{ok:{...e,decoder:r}}}return{error:{status:406,message:"The requested resource cannot be served in the requested content type. Please specify a supported content type using the Accept header.",headers:{accept:formatAcceptHeader(Object.values(this.encoders))}}}}constructor({decoders:e={},encoders:t={}}){if(this.decoders=e,0===Object.keys(e).length)throw new Error("At least one decoder MUST be provided");if(this.encoders=Object.entries(t).map(([e,t])=>({...parseMediaType(e),encoder:t})).sort((e,t)=>t.preference-e.preference),0===this.encoders.length)throw new Error("At least one encoder MUST be provided")}}const outbound$1=e=>new Outbound(e);class Outbound{constructor({decoders:e={},encoders:t={}}){if(this.decoders=e,0===Object.keys(e).length)throw new Error("At least one decoder MUST be provided");if(this.encoders=Object.entries(t).map(([e,t])=>({...parseMediaType(e),encoder:t})).sort((e,t)=>t.preference-e.preference),this.acceptType=formatAcceptHeader(this.encoders),0===this.encoders.length)throw new Error("At least one encoder MUST be provided");this.encoder=this.encoders[0].encoder}encode(e){return this.encoder.encode(e,{accept:this.acceptType})}decode(e){const{headers:t}=e,r=t["content-type"]||t["Content-Type"],n=this.decoders[r]||this.decoders["*/*"];switch(e.status){case 415:case 406:throw Object.assign(new RangeError((new TextDecoder).decode(e.body)),{status:e.status,headers:e.headers})}if(!n)throw Object.assign(TypeError(`Can not decode response with content-type '${r}' because no matching transport decoder is configured.`),{error:!0});return n.decode(e)}}const parseMediaType=e=>{const[t="*/*",r=""]=e.trim().split(";"),[n="*",i="*"]=t.split("/"),o=new URLSearchParams(r),a=parseFloat(o.get("q")||"0");return{category:n,type:i,preference:isNaN(a)?0:a}},formatMediaType=({category:e,type:t,preference:r})=>`${e}/${t}${r?`;q=${r}`:""}`,parseAcceptHeader=e=>e.split(",").map(parseMediaType).sort((e,t)=>t.preference-e.preference),formatAcceptHeader=e=>e.map(formatMediaType).join(", "),contentType$3=contentType$6;inbound({decoders:{[contentType$5]:request$1},encoders:{[contentType$4]:response$1}});const outbound=outbound$1({encoders:{[contentType$5]:request$1},decoders:{[contentType$4]:response$1}}),open$1=({url:e,method:t="POST",fetch:r,headers:n})=>{if(!r){if(void 0===globalThis.fetch)throw new TypeError("ucanto HTTP transport got undefined `fetch`. Try passing in a `fetch` implementation explicitly.");r=globalThis.fetch.bind(globalThis)}return new Channel({url:e,method:t,fetch:r,headers:n})};class Channel{constructor({url:e,fetch:t,method:r,headers:n}){this.fetch=t,this.method=r,this.url=e,this.headers=n}async request({headers:e,body:t}){const r=await this.fetch(this.url.href,{headers:{...this.headers,...e},body:t,method:this.method}),n=r.ok?await r.arrayBuffer():HTTPError.throw(`HTTP Request failed. ${this.method} ${this.url.href} â†’ ${r.status}`,r);return{headers:r.headers.entries?Object.fromEntries(r.headers.entries()):{},body:new Uint8Array(n)}}}class HTTPError extends Error{static throw(e,t){throw new this(e,t)}constructor(e,{url:t,status:r=500,statusText:n="Server error"}){super(e),this.name="HTTPError",this.url=t,this.status=r,this.statusText=n}}const the=e=>e,entries=e=>Object.entries(e),combine=([e,...t])=>{const r=e.map(e=>[e]);for(const n of t){const e=r.splice(0);for(const t of n)for(const n of e)r.push([...n,t])}return r},intersection=(e,t)=>{const[r,n]=e.length<t.length?[new Set(e),new Set(t)]:[new Set(t),new Set(e)];for(const i of r)n.has(i)||r.delete(i);return[...r]};class EscalatedCapability extends Failure{constructor(e,t,r){super(),this.claimed=e,this.delegated=t,this.cause=r,this.name=the("EscalatedCapability")}describe(){return`Constraint violation: ${this.cause.message}`}}class DelegationError extends Failure{constructor(e,t){super(),this.name=the("InvalidClaim"),this.causes=e,this.context=t}describe(){return[`Can not derive ${this.context} from delegated capabilities:`,...this.causes.map(e=>li(e.message))].join("\n")}get cause(){if(1!==this.causes.length)return this;{const[e]=this.causes,t="InvalidClaim"===e.name?e.cause:e;return Object.defineProperties(this,{cause:{value:t}}),t}}}class MalformedCapability extends Failure{constructor(e,t){super(),this.name=the("MalformedCapability"),this.capability=e,this.cause=t}describe(){return[`Encountered malformed '${this.capability.can}' capability: ${format(this.capability)}`,li(this.cause.message)].join("\n")}}class UnknownCapability extends Failure{constructor(e){super(),this.name=the("UnknownCapability"),this.capability=e}describe(){return`Encountered unknown capability: ${format(this.capability)}`}}const format=(e,t)=>JSON.stringify(e,(e,t)=>isLink(t)?t.toString():t,t),indent=(e,t="  ")=>`${t}${e.split("\n").join(`\n${t}`)}`,li=e=>indent(`- ${e}`),capability=({derives:e=defaultDerives,nb:t=defaultNBSchema,...r})=>new Capability({derives:e,nb:t,...r}),defaultNBSchema=struct({}),or=(e,t)=>new Or(e,t),and$1=(...e)=>new And(e),derive=({from:e,to:t,derives:r})=>new Derive(e,t,r);class View{match(e){return{error:new UnknownCapability(e.capability)}}select(e){return select(this,e)}derive({derives:e,to:t}){return derive({derives:e,to:t,from:this})}}class Unit extends View{or(e){return or(this,e)}and(e){return and$1(this,e)}}class Capability extends Unit{constructor(e){super(),this.descriptor=e,this.schema=struct({can:literal(e.can),with:e.with,nb:e.nb})}create(e){const{descriptor:t,can:r}=this;t.nb;const n=e.nb||{},i=t.with.read(e.with);if(i.error)throw Object.assign(new Error(`Invalid 'with' - ${i.error.message}`),{cause:i});const o=t.nb.read(n);if(o.error)throw Object.assign(new Error(`Invalid 'nb' - ${o.error.message}`),{cause:o});return createCapability({can:r,with:i.ok,nb:o.ok})}invoke({with:e,nb:t,...r}){return invoke({...r,capability:this.create({with:e,nb:t})})}async delegate({nb:e={},with:t,...r}){const{descriptor:n,can:i}=this;n.nb;const o=n.with.read(t);if(o.error)throw Object.assign(new Error(`Invalid 'with' - ${o.error.message}`),{cause:o});const a=n.nb.partial().read(e);if(a.error)throw Object.assign(new Error(`Invalid 'nb' - ${a.error.message}`),{cause:a});return delegate({capabilities:[createCapability({can:i,with:o.ok,nb:a.ok})],...r})}get can(){return this.descriptor.can}match(e){const t=parseCapability(this.descriptor,e);return t.error?t:{ok:new Match(e,t.ok,this.descriptor)}}toString(){return JSON.stringify({can:this.descriptor.can})}}const createCapability=({can:e,with:t,nb:r})=>({can:e,with:t,...isEmpty(r)?{}:{nb:r}}),isEmpty=e=>{for(const t in e)return!1;return!0};class Or extends Unit{constructor(e,t){super(),this.left=e,this.right=t}match(e){const t=this.left.match(e);if(t.error){const r=this.right.match(e);return r.error?"MalformedCapability"===r.error.name?r:t:r}return t}toString(){return`${this.left.toString()}|${this.right.toString()}`}}class And extends View{constructor(e){super(),this.selectors=e}match(e){const t=[];for(const r of this.selectors){const n=r.match(e);if(n.error)return n;t.push(n.ok)}return{ok:new AndMatch(t)}}select(e){return selectGroup(this,e)}and(e){return new And([...this.selectors,e])}toString(){return`[${this.selectors.map(String).join(", ")}]`}}class Derive extends Unit{constructor(e,t,r){super(),this.from=e,this.to=t,this.derives=r}create(e){return this.to.create(e)}invoke(e){return this.to.invoke(e)}delegate(e){return this.to.delegate(e)}get can(){return this.to.can}match(e){const t=this.to.match(e);return t.error?t:{ok:new DerivedMatch(t.ok,this.from,this.derives)}}toString(){return this.to.toString()}}class Match{constructor(e,t,r){this.source=[e],this.value=t,this.descriptor=r}get can(){return this.value.can}get proofs(){const e=[this.source[0].delegation];return Object.defineProperties(this,{proofs:{value:e}}),e}prune(e){return e.canIssue(this.value,this.source[0].delegation.issuer.did())?null:this}select(e){const t=[],r=[],n=[];for(const i of e){const e=resolveCapability(this.descriptor,this.value,i);if(e.ok){const t=this.descriptor.derives(this.value,e.ok);t.error?r.push(new DelegationError([new EscalatedCapability(this.value,e.ok,t.error)],this)):n.push(new Match(i,e.ok,this.descriptor))}else if("UnknownCapability"===e.error.name)t.push(e.error.capability);else r.push(new DelegationError([e.error],this))}return{matches:n,unknown:t,errors:r}}toString(){const{nb:e}=this.value;return JSON.stringify({can:this.descriptor.can,with:this.value.with,nb:e&&Object.keys(e).length>0?e:void 0})}}class DerivedMatch{constructor(e,t,r){this.selected=e,this.from=t,this.derives=r}get can(){return this.value.can}get source(){return this.selected.source}get proofs(){const e=[];for(const{delegation:t}of this.selected.source)e.push(t);return Object.defineProperties(this,{proofs:{value:e}}),e}get value(){return this.selected.value}prune(e){const t=this.selected.prune(e);return t?new DerivedMatch(t,this.from,this.derives):null}select(e){const{derives:t,selected:r,from:n}=this,{value:i}=r,o=r.select(e),a=n.select(e),s=[],c=[];for(const l of a.matches){const e=t(i,l.value);e.error?c.push(new DelegationError([new EscalatedCapability(i,l.value,e.error)],this)):s.push(l)}return{unknown:intersection(o.unknown,a.unknown),errors:[...c,...o.errors,...a.errors.map(e=>new DelegationError([e],this))],matches:[...o.matches.map(e=>new DerivedMatch(e,n,t)),...s]}}toString(){return this.selected.toString()}}class AndMatch{constructor(e){this.matches=e}get selectors(){return this.matches}get source(){const e=[];for(const t of this.matches)e.push(...t.source);return Object.defineProperties(this,{source:{value:e}}),e}prune(e){const t=[];for(const r of this.matches){const n=r.prune(e);n&&t.push(n)}return 0===t.length?null:new AndMatch(t)}get proofs(){const e=[];for(const{delegation:t}of this.source)e.push(t);return Object.defineProperties(this,{proofs:{value:e}}),e}get value(){const e=[];for(const t of this.matches)e.push(t.value);return Object.defineProperties(this,{value:{value:e}}),e}select(e){return selectGroup(this,e)}toString(){return`[${this.matches.map(e=>e.toString()).join(", ")}]`}}const resolveAbility=(e,t,r)=>{switch(e){case t:case"*":return t;default:return e.endsWith("/*")&&t.startsWith(e.slice(0,-1))?t:r}},resolveResource=(e,t,r)=>{switch(e){case t:case"ucan:*":return t;default:return r}},parseCapability=(e,t)=>{const{delegation:r}=t,n=t.capability;if(e.can!==n.can)return{error:new UnknownCapability(n)};const i=e.with.read(n.with);if(i.error)return{error:new MalformedCapability(n,i.error)};const o=e.nb.read(n.nb||{});return o.error?{error:new MalformedCapability(n,o.error)}:{ok:new CapabilityView(e.can,i.ok,o.ok,r)}},resolveCapability=(e,t,{capability:r,delegation:n})=>{const i=resolveAbility(r.can,t.can,null);if(null==i)return{error:new UnknownCapability(r)};const o=resolveResource(r.with,t.with,r.with),a=e.with.read(o);if(a.error)return{error:new MalformedCapability(r,a.error)};const s=e.nb.read({...t.nb,...r.nb});return s.error?{error:new MalformedCapability(r,s.error)}:{ok:new CapabilityView(i,a.ok,s.ok,n)}};class CapabilityView{constructor(e,t,r,n){this.can=e,this.with=t,this.delegation=n,this.nb=r}}const select=(e,t)=>{const r=[],n=[],i=[];for(const o of t){const t=e.match(o);if(t.error)if("UnknownCapability"===t.error.name)r.push(t.error.capability);else i.push(new DelegationError([t.error],t.error.capability));else n.push(t.ok)}return{matches:n,errors:i,unknown:r}},selectGroup=(e,t)=>{let r;const n=[],i=[];for(const o of e.selectors){const a=o.select(t);r=r?intersection(r,a.unknown):a.unknown;for(const t of a.errors)i.push(new DelegationError([t],e));n.push(a.matches)}return{unknown:r||[],errors:i,matches:combine(n).map(e=>new AndMatch(e))}},defaultDerives=(e,t)=>{if(t.with.endsWith("*")){if(!e.with.startsWith(t.with.slice(0,-1)))return error(`Resource ${e.with} does not match delegated ${t.with} `)}else if(t.with!==e.with)return error(`Resource ${e.with} is not contained by ${t.with}`);const r=t.nb||{},n=e.nb||{},i=entries(r);for(const[o,a]of i)if(n[o]!=a)return error(`${String(o)}: ${n[o]} violates ${a}`);return{ok:!0}},ProviderDID$3=match$1({method:"web"}),SpaceDID=match$1({method:"key"}),AccountDID=match$1({method:"mailto"}),Await=struct({"ucan/await":tuple([string(),match$3()])});function equalWith(e,t){return e.with===t.with?ok({}):fail(`Can not derive ${e.can} with ${e.with} from ${t.with}`)}function equal(e,t,r){return void 0===t||"*"===t||String(e)===String(t)?ok({}):fail(`Constraint violation: ${e} violates imposed ${r} constraint ${t}`)}function containedWithin(e,t,r){return e.every(e=>t.includes(e))?ok({}):fail(`Constraint violation: ${e} violates imposed ${r} constraint ${t} because it contains items not in the constraint`)}const equalLink=(e,t)=>e.with!==t.with?fail(`Expected 'with: "${t.with}"' instead got '${e.with}'`):t.nb.link&&`${t.nb.link}`!=`${e.nb.link}`?fail(`Link ${e.nb.link?`${e.nb.link}`:""} violates imposed ${t.nb.link} constraint.`):ok({}),toDigestBytes=e=>"multihash"in e?e.multihash.bytes:e.digest,equalLinkOrDigestContent=(e,t)=>{if(t.nb.content){const r=toDigestBytes(t.nb.content);if(!e.nb.content)return fail(`Constraint violation: undefined violates imposed content constraint ${base58btc.encode(r)}`);const n=toDigestBytes(e.nb.content);if(!equals$3(n,r))return fail(`Constraint violation: ${base58btc.encode(n)} violates imposed content constraint ${base58btc.encode(r)}`)}return ok({})},equalBlob=(e,t)=>e.with!==t.with?fail(`Expected 'with: "${t.with}"' instead got '${e.with}'`):t.nb.blob.digest&&!equals$3(t.nb.blob.digest,e.nb.blob.digest)?fail(`Link ${e.nb.blob.digest?`${e.nb.blob.digest}`:""} violates imposed ${t.nb.blob.digest} constraint.`):void 0!==e.nb.blob.size&&void 0!==t.nb.blob.size&&e.nb.blob.size>t.nb.blob.size?fail(`Size constraint violation: ${e.nb.blob.size} > ${t.nb.blob.size}`):ok({}),equalBody=(e,t)=>e.with!==t.with?fail(`Expected 'with: "${t.with}"' instead got '${e.with}'`):t.nb.body.digest&&!equals$3(t.nb.body.digest,e.nb.body.digest)?fail(`Link ${e.nb.body.digest?`${e.nb.body.digest}`:""} violates imposed ${t.nb.body.digest} constraint.`):void 0!==e.nb.body.size&&void 0!==t.nb.body.size&&e.nb.body.size!==t.nb.body.size?fail(`Size constraint violation: ${e.nb.body.size} !== ${t.nb.body.size}`):ok({}),checkLink=(e,t,r)=>equal(String(e),void 0===t?void 0:String(t),r),and=e=>e.error?e:void 0,code$4=514,CARLink$1=match$3({code:code$4,version:1}),store$1=capability({can:"store/*",with:SpaceDID,derives:equalWith}),add$5=capability({can:"store/add",with:SpaceDID,nb:struct({link:CARLink$1,size:integer(),origin:optional()}),derives:(e,t)=>{const r=equalLink(e,t);return r.error?r:void 0!==e.nb.size&&void 0!==t.nb.size&&e.nb.size>t.nb.size?fail(`Size constraint violation: ${e.nb.size} > ${t.nb.size}`):ok({})}}),get$7=capability({can:"store/get",with:SpaceDID,nb:struct({link:CARLink$1.optional()}),derives:equalLink}),remove$3=capability({can:"store/remove",with:SpaceDID,nb:struct({link:CARLink$1}),derives:equalLink}),list$4=capability({can:"store/list",with:SpaceDID,nb:struct({cursor:string().optional(),size:integer().optional(),pre:boolean().optional()}),derives:(e,t)=>e.with!==t.with?fail(`Expected 'with: "${t.with}"' instead got '${e.with}'`):ok({})});add$5.or(remove$3).or(list$4);const upload$1=capability({can:"upload/*",with:SpaceDID,derives:equalWith}),CARLink=match$3({code:code$5,version:1}),add$4=capability({can:"upload/add",with:SpaceDID,nb:struct({root:Link,shards:CARLink.array().optional()}),derives:(e,t)=>and(equalWith(e,t))||and(equal(e.nb.root,t.nb.root,"root"))||and(equal(e.nb.shards,t.nb.shards,"shards"))||ok({})}),get$6=capability({can:"upload/get",with:SpaceDID,nb:struct({root:optional()}),derives:(e,t)=>{const r=equalWith(e,t);return r.error?r:t.nb.root?equal(e.nb.root,t.nb.root,"root"):r}}),remove$2=capability({can:"upload/remove",with:SpaceDID,nb:struct({root:Link}),derives:(e,t)=>and(equalWith(e,t))||and(equal(e.nb.root,t.nb.root,"root"))||ok({})}),list$3=capability({can:"upload/list",with:SpaceDID,nb:struct({cursor:string().optional(),size:integer().optional(),pre:boolean().optional()})});add$4.or(remove$2).or(list$3);const top=capability({can:"*",with:or$1(match$1(),literal("ucan:*")),derives:equalWith}),space=capability({can:"space/*",with:SpaceDID,derives:equalWith}),info=add$5.or(list$4).or(remove$3).or(add$4).or(list$3).or(remove$2).derive({to:capability({can:"space/info",with:SpaceDID}),derives:equalWith});capability({can:"space/allocate",with:SpaceDID,nb:struct({size:integer()}),derives:(e,t)=>{const r=equalWith(e,t);return r.ok?e.nb.size<=t.nb.size?ok({}):fail(`Claimed size ${e.nb.size} escalates delegated size ${t.nb.size}`):r}}),capability({can:"space/content/serve/*",with:SpaceDID,derives:equalWith}),capability({can:"space/content/serve/egress/record",with:SpaceDID,nb:struct({resource:match$3(),bytes:integer().greaterThan(0),servedAt:integer().greaterThan(-1)}),derives:equalWith}),capability({can:"space/content/decrypt",with:SpaceDID,nb:struct({resource:match$3()}),derives:(e,t)=>e.with!==t.with?fail(`Can not derive ${e.can} with ${e.with} from ${t.with}`):e.nb.resource.toString()!==t.nb.resource.toString()?fail(`Can not derive ${e.can} resource ${e.nb.resource} from ${t.nb.resource}`):ok({})});const EncryptionSetup=capability({can:"space/encryption/setup",with:SpaceDID,nb:struct({location:string().optional(),keyring:string().optional()}),derives:(e,t)=>e.with!==t.with?fail(`Can not derive ${e.can} with ${e.with} from ${t.with}`):e.nb.location!==t.nb.location?fail(`Can not derive ${e.can} location ${e.nb.location} from ${t.nb.location}`):e.nb.keyring!==t.nb.keyring?fail(`Can not derive ${e.can} keyring ${e.nb.keyring} from ${t.nb.keyring}`):ok({})}),EncryptionKeyDecrypt=capability({can:"space/encryption/key/decrypt",with:SpaceDID,nb:struct({key:bytes()}),derives:(e,t)=>e.with!==t.with?fail(`Can not derive ${e.can} with ${e.with} from ${t.with}`):e.nb.key!==t.nb.key?fail(`Can not derive ${e.can} key ${e.nb.key} from ${t.nb.key}`):ok({})}),UCANLink=match$3({version:1});capability({can:"ucan/*",with:match$1(),derives:equalWith}),capability({can:"ucan/revoke",with:match$1(),nb:struct({ucan:UCANLink,proof:UCANLink.array().optional()}),derives:(e,t)=>and(equalWith(e,t))??and(checkLink(e.nb.ucan,t.nb.ucan,"nb.ucan"))??equal((e.nb.proof??[]).join("/"),(t.nb.proof??[]).join("/"),"nb.proof")});const conclude=capability({can:"ucan/conclude",with:match$1(),nb:struct({receipt:match$3()}),derives:(e,t)=>and(equalWith(e,t))||and(checkLink(e.nb.receipt,t.nb.receipt,"nb.receipt"))||ok({})}),attest=capability({can:"ucan/attest",with:match$1(),nb:struct({proof:match$3({version:1})}),derives:(e,t)=>and(equalWith(e,t))??checkLink(e.nb.proof,t.nb.proof,"nb.proof")}),Account=match$1({method:"mailto"}),CapabilityRequest=struct({can:string()}),AuthorizationRequest=struct({iss:Account.optional(),att:CapabilityRequest.array()}),access=capability({can:"access/*",with:match$4({protocol:"did:"})}),authorize=capability({can:"access/authorize",with:match$1({method:"key"}),nb:AuthorizationRequest,derives:(e,t)=>and(equalWith(e,t))||and(equal(e.nb.iss,t.nb.iss,"iss"))||and(subsetCapabilities(e.nb.att,t.nb.att))||ok({})});function subsetsNbDelegations(e,t){const r=setDifference(delegatedCids(e),new Set(delegatedCids(t)));return r.size>0?fail(`unauthorized nb.delegations ${[...r].join(", ")}`):ok({})}capability({can:"access/confirm",with:DID,nb:struct({cause:match$3({version:1}),iss:Account,aud:match$1(),att:CapabilityRequest.array()}),derives:(e,t)=>and(equalWith(e,t))||and(equal(e.nb.iss,t.nb.iss,"iss"))||and(equal(e.nb.aud,t.nb.aud,"aud"))||and(subsetCapabilities(e.nb.att,t.nb.att))||and(checkLink(e.nb.cause,t.nb.cause,"nb.cause"))||ok({})}),capability({can:"access/claim",with:match$1({method:"key"}).or(match$1({method:"mailto"}))}),capability({can:"access/delegate",with:SpaceDID,nb:struct({delegations:dictionary({value:match$3()})}),derives:(e,t)=>and(equalWith(e,t))||and(subsetsNbDelegations(e,t))||ok({})});const subsetCapabilities=(e,t)=>{const r=new Set(t.map(e=>e.can));if(r.has("*"))return ok({});const n=setDifference(e.map(e=>e.can),r);return n.size>0?fail(`unauthorized nb.att.can ${[...n].join(", ")}`):ok({})};function*delegatedCids(e){for(const t of Object.values(e.nb.delegations||{}))yield t.toString()}function setDifference(e,t){const r=new Set;for(const n of e)t.has(n)||r.add(n);return r}var AppName,AppName2;function equals$1(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function alloc(e=0){return new Uint8Array(e)}function allocUnsafe(e=0){return new Uint8Array(e)}function asUint8Array(e){return e}function concat(e,t){null==t&&(t=e.reduce((e,t)=>e+t.length,0));const r=allocUnsafe(t);let n=0;for(const i of e)r.set(i,n),n+=i.length;return asUint8Array(r)}AppName2=AppName||(AppName={}),AppName2.BskyBackups="bsky-backups",AppName2.TGMiniapp="tg-miniapp",AppName2.Console="console",baseX({prefix:"9",name:"base10",alphabet:"0123456789"}),rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});const alphabet=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),alphabetBytesToChars=alphabet.reduce((e,t,r)=>(e[r]=t,e),[]),alphabetCharsToBytes=alphabet.reduce((e,t,r)=>{const n=t.codePointAt(0);if(null==n)throw new Error(`Invalid character: ${t}`);return e[n]=r,e},[]);function encode$5(e){return e.reduce((e,t)=>e+=alphabetBytesToChars[t],"")}function decode$4(e){const t=[];for(const r of e){const e=r.codePointAt(0);if(null==e)throw new Error(`Invalid character: ${r}`);const n=alphabetCharsToBytes[e];if(null==n)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}from$6({prefix:"ðŸš€",name:"base256emoji",encode:encode$5,decode:decode$4}),rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),from$6({prefix:"\0",name:"identity",encode:e=>toString$1(e),decode:e=>fromString(e)}),new TextEncoder,new TextDecoder;
/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */
const _0n=BigInt(0),_1n=BigInt(1),_2n=BigInt(2),_8n=BigInt(8),CU_O=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),CURVE=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:CU_O,n:CU_O,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")}),POW_2_256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),SQRT_M1=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742");const SQRT_AD_MINUS_ONE=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),INVSQRT_A_MINUS_D=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),ONE_MINUS_D_SQ=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),D_MINUS_ONE_SQ=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class ExtendedPoint{constructor(e,t,r,n){this.x=e,this.y=t,this.z=r,this.t=n}static fromAffine(e){if(!(e instanceof Point))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return e.equals(Point.ZERO)?ExtendedPoint.ZERO:new ExtendedPoint(e.x,e.y,_1n,mod(e.x*e.y))}static toAffineBatch(e){const t=invertBatch(e.map(e=>e.z));return e.map((e,r)=>e.toAffine(t[r]))}static normalizeZ(e){return this.toAffineBatch(e).map(this.fromAffine)}equals(e){assertExtPoint(e);const{x:t,y:r,z:n}=this,{x:i,y:o,z:a}=e,s=mod(t*a),c=mod(i*n),l=mod(r*a),u=mod(o*n);return s===c&&l===u}negate(){return new ExtendedPoint(mod(-this.x),this.y,this.z,mod(-this.t))}double(){const{x:e,y:t,z:r}=this,{a:n}=CURVE,i=mod,o=i(e*e),a=i(t*t),s=i(_2n*i(r*r)),c=i(n*o),l=e+t,u=i(i(l*l)-o-a),d=c+a,p=d-s,h=c-a,m=i(u*p),f=i(d*h),x=i(u*h),g=i(p*d);return new ExtendedPoint(m,f,g,x)}add(e){const{x:t,y:r,z:n,t:i}=this;assertExtPoint(e);const{x:o,y:a,z:s,t:c}=e,{a:l,d:u}=CURVE,d=mod,p=d(t*o),h=d(r*a),m=d(i*u*c),f=d(n*s),x=d((t+r)*(o+a)-p-h),g=d(f-m),y=d(f+m),b=d(h-l*p),v=d(x*g),E=d(y*b),w=d(x*b),S=d(g*y);return new ExtendedPoint(v,E,S,w)}subtract(e){return this.add(e.negate())}precomputeWindow(e){const t=1+256/e,r=[];let n=this,i=n;for(let o=0;o<t;o++){i=n,r.push(i);for(let t=1;t<2**(e-1);t++)i=i.add(n),r.push(i);n=i.double()}return r}wNAF(e,t){!t&&this.equals(ExtendedPoint.BASE)&&(t=Point.BASE);const r=t&&t._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=t&&pointPrecomputes.get(t);n||(n=this.precomputeWindow(r),t&&1!==r&&(n=ExtendedPoint.normalizeZ(n),pointPrecomputes.set(t,n)));let i=ExtendedPoint.ZERO,o=ExtendedPoint.BASE;const a=1+256/r,s=2**(r-1),c=BigInt(2**r-1),l=2**r,u=BigInt(r);for(let d=0;d<a;d++){const t=d*s;let r=Number(e&c);e>>=u,r>s&&(r-=l,e+=_1n);const a=t,p=t+Math.abs(r)-1,h=d%2!=0,m=r<0;0===r?o=o.add(constTimeNegate(h,n[a])):i=i.add(constTimeNegate(m,n[p]))}return ExtendedPoint.normalizeZ([i,o])[0]}multiply(e,t){return this.wNAF(normalizeScalar(e,CURVE.l),t)}multiplyUnsafe(e){let t=normalizeScalar(e,CURVE.l,!1);const r=ExtendedPoint.BASE,n=ExtendedPoint.ZERO;if(t===_0n)return n;if(this.equals(n)||t===_1n)return this;if(this.equals(r))return this.wNAF(t);let i=n,o=this;for(;t>_0n;)t&_1n&&(i=i.add(o)),o=o.double(),t>>=_1n;return i}isSmallOrder(){return this.multiplyUnsafe(CURVE.h).equals(ExtendedPoint.ZERO)}isTorsionFree(){let e=this.multiplyUnsafe(CURVE.l/_2n).double();return CURVE.l%_2n&&(e=e.add(this)),e.equals(ExtendedPoint.ZERO)}toAffine(e){const{x:t,y:r,z:n}=this,i=this.equals(ExtendedPoint.ZERO);null==e&&(e=i?_8n:invert(n));const o=mod(t*e),a=mod(r*e),s=mod(n*e);if(i)return Point.ZERO;if(s!==_1n)throw new Error("invZ was invalid");return new Point(o,a)}fromRistrettoBytes(){legacyRist()}toRistrettoBytes(){legacyRist()}fromRistrettoHash(){legacyRist()}}function constTimeNegate(e,t){const r=t.negate();return e?r:t}function assertExtPoint(e){if(!(e instanceof ExtendedPoint))throw new TypeError("ExtendedPoint expected")}function assertRstPoint(e){if(!(e instanceof RistrettoPoint))throw new TypeError("RistrettoPoint expected")}function legacyRist(){throw new Error("Legacy method: switch to RistrettoPoint")}ExtendedPoint.BASE=new ExtendedPoint(CURVE.Gx,CURVE.Gy,_1n,mod(CURVE.Gx*CURVE.Gy)),ExtendedPoint.ZERO=new ExtendedPoint(_0n,_1n,_1n,_0n);class RistrettoPoint{constructor(e){this.ep=e}static calcElligatorRistrettoMap(e){const{d:t}=CURVE,r=mod(SQRT_M1*e*e),n=mod((r+_1n)*ONE_MINUS_D_SQ);let i=BigInt(-1);const o=mod((i-t*r)*mod(r+t));let{isValid:a,value:s}=uvRatio(n,o),c=mod(s*e);edIsNegative(c)||(c=mod(-c)),a||(s=c),a||(i=r);const l=mod(i*(r-_1n)*D_MINUS_ONE_SQ-o),u=s*s,d=mod((s+s)*o),p=mod(l*SQRT_AD_MINUS_ONE),h=mod(_1n-u),m=mod(_1n+u);return new ExtendedPoint(mod(d*m),mod(h*p),mod(p*m),mod(d*h))}static hashToCurve(e){const t=bytes255ToNumberLE((e=ensureBytes(e,64)).slice(0,32)),r=this.calcElligatorRistrettoMap(t),n=bytes255ToNumberLE(e.slice(32,64)),i=this.calcElligatorRistrettoMap(n);return new RistrettoPoint(r.add(i))}static fromHex(e){e=ensureBytes(e,32);const{a:t,d:r}=CURVE,n="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",i=bytes255ToNumberLE(e);if(!equalBytes(numberTo32BytesLE(i),e)||edIsNegative(i))throw new Error(n);const o=mod(i*i),a=mod(_1n+t*o),s=mod(_1n-t*o),c=mod(a*a),l=mod(s*s),u=mod(t*r*c-l),{isValid:d,value:p}=invertSqrt(mod(u*l)),h=mod(p*s),m=mod(p*h*u);let f=mod((i+i)*h);edIsNegative(f)&&(f=mod(-f));const x=mod(a*m),g=mod(f*x);if(!d||edIsNegative(g)||x===_0n)throw new Error(n);return new RistrettoPoint(new ExtendedPoint(f,x,_1n,g))}toRawBytes(){let{x:e,y:t,z:r,t:n}=this.ep;const i=mod(mod(r+t)*mod(r-t)),o=mod(e*t),a=mod(o*o),{value:s}=invertSqrt(mod(i*a)),c=mod(s*i),l=mod(s*o),u=mod(c*l*n);let d;if(edIsNegative(n*u)){let r=mod(t*SQRT_M1),n=mod(e*SQRT_M1);e=r,t=n,d=mod(c*INVSQRT_A_MINUS_D)}else d=l;edIsNegative(e*u)&&(t=mod(-t));let p=mod((r-t)*d);return edIsNegative(p)&&(p=mod(-p)),numberTo32BytesLE(p)}toHex(){return bytesToHex(this.toRawBytes())}toString(){return this.toHex()}equals(e){assertRstPoint(e);const t=this.ep,r=e.ep,n=mod(t.x*r.y)===mod(t.y*r.x),i=mod(t.y*r.y)===mod(t.x*r.x);return n||i}add(e){return assertRstPoint(e),new RistrettoPoint(this.ep.add(e.ep))}subtract(e){return assertRstPoint(e),new RistrettoPoint(this.ep.subtract(e.ep))}multiply(e){return new RistrettoPoint(this.ep.multiply(e))}multiplyUnsafe(e){return new RistrettoPoint(this.ep.multiplyUnsafe(e))}}RistrettoPoint.BASE=new RistrettoPoint(ExtendedPoint.BASE),RistrettoPoint.ZERO=new RistrettoPoint(ExtendedPoint.ZERO);const pointPrecomputes=new WeakMap;class Point{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,pointPrecomputes.delete(this)}static fromHex(e,t=!0){const{d:r,P:n}=CURVE,i=(e=ensureBytes(e,32)).slice();i[31]=-129&e[31];const o=bytesToNumberLE(i);if(t&&o>=n)throw new Error("Expected 0 < hex < P");if(!t&&o>=POW_2_256)throw new Error("Expected 0 < hex < 2**256");const a=mod(o*o),s=mod(a-_1n),c=mod(r*a+_1n);let{isValid:l,value:u}=uvRatio(s,c);if(!l)throw new Error("Point.fromHex: invalid y coordinate");const d=(u&_1n)===_1n;return!!(128&e[31])!==d&&(u=mod(-u)),new Point(u,o)}static async fromPrivateKey(e){return(await getExtendedPublicKey(e)).point}toRawBytes(){const e=numberTo32BytesLE(this.y);return e[31]|=this.x&_1n?128:0,e}toHex(){return bytesToHex(this.toRawBytes())}toX25519(){const{y:e}=this;return numberTo32BytesLE(mod((_1n+e)*invert(_1n-e)))}isTorsionFree(){return ExtendedPoint.fromAffine(this).isTorsionFree()}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new Point(mod(-this.x),this.y)}add(e){return ExtendedPoint.fromAffine(this).add(ExtendedPoint.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return ExtendedPoint.fromAffine(this).multiply(e,this).toAffine()}}function isBytes(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function abytes(e){if(!isBytes(e))throw new Error("Uint8Array expected")}function concatBytes(...e){if(e.every(abytes),1===e.length)return e[0];const t=e.reduce((e,t)=>e+t.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const t=e[n];r.set(t,i),i+=t.length}return r}Point.BASE=new Point(CURVE.Gx,CURVE.Gy),Point.ZERO=new Point(_0n,_1n);const hexes=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function bytesToHex(e){abytes(e);let t="";for(let r=0;r<e.length;r++)t+=hexes[e[r]];return t}const asciis={_0:48,_9:57,A:65,F:70,a:97,f:102};function asciiToBase16(e){return e>=asciis._0&&e<=asciis._9?e-asciis._0:e>=asciis.A&&e<=asciis.F?e-(asciis.A-10):e>=asciis.a&&e<=asciis.f?e-(asciis.a-10):void 0}function hexToBytes(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){const t=asciiToBase16(e.charCodeAt(o)),r=asciiToBase16(e.charCodeAt(o+1));if(void 0===t||void 0===r){const t=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+o)}n[i]=16*t+r}return n}function numberTo32BytesBE(e){return hexToBytes(e.toString(16).padStart(64,"0"))}function numberTo32BytesLE(e){return numberTo32BytesBE(e).reverse()}function edIsNegative(e){return(mod(e)&_1n)===_1n}function bytesToNumberLE(e){return abytes(e),BigInt("0x"+bytesToHex(Uint8Array.from(e).reverse()))}const MAX_255B=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function bytes255ToNumberLE(e){return mod(bytesToNumberLE(e)&MAX_255B)}function mod(e,t=CURVE.P){const r=e%t;return r>=_0n?r:t+r}function invert(e,t=CURVE.P){if(e===_0n||t<=_0n)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=mod(e,t),n=t,i=_0n,o=_1n;for(;r!==_0n;){const e=n%r,t=i-o*(n/r);n=r,r=e,i=o,o=t}if(n!==_1n)throw new Error("invert: does not exist");return mod(i,t)}function invertBatch(e,t=CURVE.P){const r=new Array(e.length),n=invert(e.reduce((e,n,i)=>n===_0n?e:(r[i]=e,mod(e*n,t)),_1n),t);return e.reduceRight((e,n,i)=>n===_0n?e:(r[i]=mod(e*r[i],t),mod(e*n,t)),n),r}function pow2(e,t){const{P:r}=CURVE;let n=e;for(;t-- >_0n;)n*=n,n%=r;return n}function pow_2_252_3(e){const{P:t}=CURVE,r=BigInt(5),n=BigInt(10),i=BigInt(20),o=BigInt(40),a=BigInt(80),s=e*e%t*e%t,c=pow2(s,_2n)*s%t,l=pow2(c,_1n)*e%t,u=pow2(l,r)*l%t,d=pow2(u,n)*u%t,p=pow2(d,i)*d%t,h=pow2(p,o)*p%t,m=pow2(h,a)*h%t,f=pow2(m,a)*h%t,x=pow2(f,n)*u%t;return{pow_p_5_8:pow2(x,_2n)*e%t,b2:s}}function uvRatio(e,t){const r=mod(t*t*t),n=mod(r*r*t);let i=mod(e*r*pow_2_252_3(e*n).pow_p_5_8);const o=mod(t*i*i),a=i,s=mod(i*SQRT_M1),c=o===e,l=o===mod(-e),u=o===mod(-e*SQRT_M1);return c&&(i=a),(l||u)&&(i=s),edIsNegative(i)&&(i=mod(-i)),{isValid:c||l,value:i}}function invertSqrt(e){return uvRatio(_1n,e)}function modlLE(e){return mod(bytesToNumberLE(e),CURVE.l)}function equalBytes(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function ensureBytes(e,t){const r=isBytes(e)?Uint8Array.from(e):hexToBytes(e);if("number"==typeof t&&r.length!==t)throw new Error(`Expected ${t} bytes`);return r}function normalizeScalar(e,t,r=!0){if(!t)throw new TypeError("Specify max value");if("number"==typeof e&&Number.isSafeInteger(e)&&(e=BigInt(e)),"bigint"==typeof e&&e<t)if(r){if(_0n<e)return e}else if(_0n<=e)return e;throw new TypeError("Expected valid scalar: 0 < scalar < max")}function adjustBytes25519(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function checkPrivateKey(e){if(32!==(e="bigint"==typeof e||"number"==typeof e?numberTo32BytesBE(normalizeScalar(e,POW_2_256)):ensureBytes(e)).length)throw new Error("Expected 32 bytes");return e}function getKeyFromHash(e){const t=adjustBytes25519(e.slice(0,32)),r=e.slice(32,64),n=modlLE(t),i=Point.BASE.multiply(n),o=i.toRawBytes();return{head:t,prefix:r,scalar:n,point:i,pointBytes:o}}let _sha512Sync;async function getExtendedPublicKey(e){return getKeyFromHash(await utils.sha512(checkPrivateKey(e)))}Point.BASE._setWindowSize(8);const crypto$1={node:nodeCrypto,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},utils={bytesToHex:bytesToHex,hexToBytes:hexToBytes,concatBytes:concatBytes,getExtendedPublicKey:getExtendedPublicKey,mod:mod,invert:invert,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:e=>{if((e=ensureBytes(e)).length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return mod(bytesToNumberLE(e),CURVE.l-_1n)+_1n},randomBytes:(e=32)=>{if(crypto$1.web)return crypto$1.web.getRandomValues(new Uint8Array(e));if(crypto$1.node){const{randomBytes:t}=crypto$1.node;return new Uint8Array(t(e).buffer)}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>utils.randomBytes(32),sha512:async(...e)=>{const t=concatBytes(...e);if(crypto$1.web){const e=await crypto$1.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}if(crypto$1.node)return Uint8Array.from(crypto$1.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")},precompute(e=8,t=Point.BASE){const r=t.equals(Point.BASE)?t:new Point(t.x,t.y);return r._setWindowSize(e),r.multiply(_2n),r},sha512Sync:void 0};Object.defineProperties(utils,{sha512Sync:{configurable:!1,get:()=>_sha512Sync,set(e){_sha512Sync||(_sha512Sync=e)}}});const Provider$1=match$1({method:"web"}),add$3=capability({can:"provider/add",with:AccountDID,nb:struct({provider:Provider$1,consumer:SpaceDID}),derives:(e,t)=>and(equalWith(e,t))||and(equal(e.nb.provider,t.nb.provider,"provider"))||and(equal(e.nb.consumer,t.nb.consumer,"consumer"))||ok({})});match$1({method:"key"});const linkOrDigest=()=>match$3().or(struct({digest:bytes()})),assert=capability({can:"assert/*",with:match$4({protocol:"did:"})}),location=capability({can:"assert/location",with:match$4({protocol:"did:"}),nb:struct({content:linkOrDigest(),location:array(URI),range:struct({offset:integer(),length:integer().optional()}).optional(),space:match$2().optional()}),derives:(e,t)=>{var r,n,i,o;return and(equalWith(e,t))||and(equalLinkOrDigestContent(e,t))||and(equal(e.nb.location,t.nb.location,"location"))||and(equal(null==(r=e.nb.range)?void 0:r.offset,null==(n=t.nb.range)?void 0:n.offset,"offset"))||and(equal(null==(i=e.nb.range)?void 0:i.length,null==(o=t.nb.range)?void 0:o.length,"length"))||and(equal(e.nb.space,t.nb.space,"space"))||ok({})}}),inclusion=capability({can:"assert/inclusion",with:match$4({protocol:"did:"}),nb:struct({content:linkOrDigest(),includes:match$3({version:1}),proof:match$3({version:1}).optional()})}),index$1=capability({can:"assert/index",with:match$4({protocol:"did:"}),nb:struct({content:linkOrDigest(),index:match$3({version:1})}),derives:(e,t)=>and(equalWith(e,t))||and(equal(e.nb.content,t.nb.content,"content"))||and(equal(e.nb.index,t.nb.index,"index"))||ok({})}),partition=capability({can:"assert/partition",with:match$4({protocol:"did:"}),nb:struct({content:linkOrDigest(),blocks:match$3({version:1}).optional(),parts:array(match$3({version:1}))})}),relation=capability({can:"assert/relation",with:match$4({protocol:"did:"}),nb:struct({content:linkOrDigest(),children:array(match$3()),parts:array(struct({content:match$3({version:1}),includes:struct({content:match$3({version:1}),parts:array(match$3({version:1})).optional()}).optional()}))})}),equals=capability({can:"assert/equals",with:match$4({protocol:"did:"}),nb:struct({content:linkOrDigest(),equals:match$3()}),derives:(e,t)=>and(equalWith(e,t))||and(equalLinkOrDigestContent(e,t))||and(equal(e.nb.equals,t.nb.equals,"equals"))||ok({})}),multiaddr=bytes(),claim=capability({can:"claim/*",with:match$4({protocol:"did:"})}),cache$1=capability({can:"claim/cache",with:match$4({protocol:"did:"}),nb:struct({claim:match$3({version:1}),provider:struct({addresses:array(multiaddr)})}),derives:(e,t)=>and(equalWith(e,t))||and(equal(e.nb.claim,t.nb.claim,"claim"))||and(equalProviderAddresses(e,t))||ok({})}),equalProviderAddresses=(e,t)=>{var r,n,i,o;if(null==(n=null==(r=t.nb)?void 0:r.provider)?void 0:n.addresses){const r=t.nb.provider.addresses,n=(null==(o=null==(i=e.nb)?void 0:i.provider)?void 0:o.addresses)??[];if(n.length!==r.length)return fail(`Constraint violation: ${n.length} provider addresses violates imposed constraint ${r.length} provider addresses`);for(let e=0;e<r.length;e++){const t=r[e];if(!n.some(e=>equals$3(t,e)))return fail(`Constraint violation: provider address ${e} is not an allowed provider address`)}}return ok({})},ProviderDID$2=match$1({method:"web"}),has=capability({can:"consumer/has",with:ProviderDID$2,nb:struct({consumer:SpaceDID}),derives:(e,t)=>and(equalWith(e,t))||and(equal(e.nb.consumer,t.nb.consumer,"consumer"))||ok({})}),get$5=capability({can:"consumer/get",with:ProviderDID$2,nb:struct({consumer:SpaceDID}),derives:(e,t)=>and(equalWith(e,t))||and(equal(e.nb.consumer,t.nb.consumer,"consumer"))||ok({})}),ProviderDID$1=match$1({method:"web"}),get$4=capability({can:"customer/get",with:ProviderDID$1,nb:struct({customer:AccountDID}),derives:(e,t)=>and(equalWith(e,t))||and(equal(e.nb.customer,t.nb.customer,"customer"))||ok({})});capability({can:"console/*",with:match$1(),derives:equalWith}),capability({can:"console/log",with:match$1(),nb:struct({value:unknown()}),derives:equalWith}),capability({can:"console/error",with:match$1(),nb:struct({error:unknown()}),derives:equalWith});const Provider=DID,add$2=capability({can:"rate-limit/add",with:Provider,nb:struct({subject:string(),rate:number()}),derives:(e,t)=>and(equalWith(e,t))||and(equal(e.nb.subject,t.nb.subject,"subject"))||and(equal(e.nb.rate,t.nb.rate,"rate"))||ok({})}),remove$1=capability({can:"rate-limit/remove",with:Provider,nb:struct({id:string()}),derives:(e,t)=>and(equalWith(e,t))||and(equal(e.nb.id,t.nb.id,"id"))||ok({})}),list$2=capability({can:"rate-limit/list",with:Provider,nb:struct({subject:string()}),derives:(e,t)=>and(equalWith(e,t))||and(equal(e.nb.subject,t.nb.subject,"subject"))||ok({})}),admin=capability({can:"admin/*",with:ProviderDID$3,derives:equalWith}),upload={inspect:capability({can:"admin/upload/inspect",with:ProviderDID$3,nb:struct({root:Link}),derives:(e,t)=>and(equalWith(e,t))||and(equal(e.nb.root,t.nb.root,"root"))||ok({})})},store={inspect:capability({can:"admin/store/inspect",with:ProviderDID$3,nb:struct({link:Link}),derives:(e,t)=>and(equalWith(e,t))||and(equal(e.nb.link,t.nb.link,"link"))||ok({})})},ProviderDID=match$1({method:"web"}),get$3=capability({can:"subscription/get",with:ProviderDID,nb:struct({subscription:string()}),derives:(e,t)=>and(equalWith(e,t))||and(equal(e.nb.subscription,t.nb.subscription,"consumer"))||ok({})}),list$1=capability({can:"subscription/list",with:AccountDID,derives:equalWith}),FR32_SHA2_256_TRUNC254_PADDED_BINARY_TREE=4113,RAW_CODE=85,PieceLink=match$3({code:RAW_CODE,version:1,multihash:{code:FR32_SHA2_256_TRUNC254_PADDED_BINARY_TREE}});capability({can:"filecoin/*",with:match$1(),derives:equalWith});const filecoinOffer=capability({can:"filecoin/offer",with:match$1(),nb:struct({content:match$3(),piece:PieceLink}),derives:(e,t)=>and(equalWith(e,t))||and(checkLink(e.nb.content,t.nb.content,"nb.content"))||and(checkLink(e.nb.piece,t.nb.piece,"nb.piece"))||ok({})}),filecoinSubmit=capability({can:"filecoin/submit",with:match$1(),nb:struct({content:match$3(),piece:PieceLink}),derives:(e,t)=>and(equalWith(e,t))||and(checkLink(e.nb.content,t.nb.content,"nb.content"))||and(checkLink(e.nb.piece,t.nb.piece,"nb.piece"))||ok({})}),filecoinAccept=capability({can:"filecoin/accept",with:match$1(),nb:struct({content:match$3(),piece:PieceLink}),derives:(e,t)=>and(equalWith(e,t))||and(checkLink(e.nb.content,t.nb.content,"nb.content"))||and(checkLink(e.nb.piece,t.nb.piece,"nb.piece"))||ok({})}),filecoinInfo=capability({can:"filecoin/info",with:match$1(),nb:struct({piece:PieceLink}),derives:(e,t)=>and(equalWith(e,t))||and(checkLink(e.nb.piece,t.nb.piece,"nb.piece"))||ok({})}),pieceOffer=capability({can:"piece/offer",with:match$1(),nb:struct({piece:PieceLink,group:match()}),derives:(e,t)=>and(equalWith(e,t))||and(checkLink(e.nb.piece,t.nb.piece,"nb.piece"))||and(equal(e.nb.group,t.nb.group,"nb.group"))||ok({})}),pieceAccept=capability({can:"piece/accept",with:match$1(),nb:struct({piece:PieceLink,group:match()}),derives:(e,t)=>and(equalWith(e,t))||and(checkLink(e.nb.piece,t.nb.piece,"nb.piece"))||and(equal(e.nb.group,t.nb.group,"nb.group"))||ok({})}),aggregateOffer=capability({can:"aggregate/offer",with:match$1(),nb:struct({aggregate:PieceLink,pieces:match$3({version:1})}),derives:(e,t)=>and(equalWith(e,t))||and(checkLink(e.nb.aggregate,t.nb.aggregate,"nb.aggregate"))||and(checkLink(e.nb.pieces,t.nb.pieces,"nb.pieces"))||ok({})}),aggregateAccept=capability({can:"aggregate/accept",with:match$1(),nb:struct({aggregate:PieceLink,pieces:match$3()}),derives:(e,t)=>and(equalWith(e,t))||and(checkLink(e.nb.aggregate,t.nb.aggregate,"nb.aggregate"))||and(checkLink(e.nb.pieces,t.nb.pieces,"nb.pieces"))||ok({})}),dealInfo=capability({can:"deal/info",with:match$1(),nb:struct({piece:PieceLink}),derives:(e,t)=>and(equalWith(e,t))||and(checkLink(e.nb.piece,t.nb.piece,"nb.piece"))||ok({})}),index=capability({can:"space/index/*",with:SpaceDID,derives:equalWith}),add$1=capability({can:"space/index/add",with:SpaceDID,nb:struct({index:match$3({code:code$5,version:1}),content:match$3().optional()}),derives:(e,t)=>and(equalWith(e,t))||and(equal(e.nb.index,t.nb.index,"index"))||ok({})}),get$2=capability({can:"plan/get",with:AccountDID,derives:(e,t)=>and(equalWith(e,t))||ok({})}),set=capability({can:"plan/set",with:AccountDID,nb:struct({product:DID}),derives:(e,t)=>and(equalWith(e,t))||and(equal(e.nb.product,t.nb.product,"product"))||ok({})}),createAdminSession=capability({can:"plan/create-admin-session",with:AccountDID,nb:struct({returnURL:string()}),derives:(e,t)=>and(equalWith(e,t))||and(equal(e.nb.returnURL,t.nb.returnURL,"returnURL"))||ok({})});capability({can:"plan/create-checkout-session",with:AccountDID,nb:struct({planID:DID,redirectAfterCompletion:boolean().optional(),successURL:string().optional(),cancelURL:string().optional(),freeTrial:boolean().optional()}),derives:(e,t)=>and(equalWith(e,t))||and(equal(e.nb.planID,t.nb.planID,"planID"))||and(equal(e.nb.successURL,t.nb.successURL,"successURL"))||and(equal(e.nb.cancelURL,t.nb.cancelURL,"cancelURL"))||and(equal(e.nb.freeTrial,t.nb.freeTrial,"freeTrial"))||ok({})});const usage=capability({can:"usage/*",with:SpaceDID,derives:equalWith}),report=capability({can:"usage/report",with:SpaceDID,nb:struct({period:struct({from:integer().greaterThan(-1),to:integer().greaterThan(-1)})}),derives:(e,t)=>{var r,n,i,o;return and(equalWith(e,t))||and(equal(null==(r=e.nb.period)?void 0:r.from,null==(n=t.nb.period)?void 0:n.from,"period.from"))||and(equal(null==(i=e.nb.period)?void 0:i.to,null==(o=t.nb.period)?void 0:o.to,"period.to"))||ok({})}}),blob$2=capability({can:"space/blob/*",with:SpaceDID,derives:equalWith}),content=struct({digest:bytes(),size:integer()}),add=capability({can:"space/blob/add",with:SpaceDID,nb:struct({blob:content}),derives:equalBlob}),remove=capability({can:"space/blob/remove",with:SpaceDID,nb:struct({digest:bytes()}),derives:(e,t)=>e.with!==t.with?fail(`Expected 'with: "${t.with}"' instead got '${e.with}'`):t.nb.digest&&!equals$3(t.nb.digest,e.nb.digest)?fail(`Link ${e.nb.digest?`${e.nb.digest}`:""} violates imposed ${t.nb.digest} constraint.`):ok({})}),list=capability({can:"space/blob/list",with:SpaceDID,nb:struct({cursor:string().optional(),size:integer().optional()}),derives:(e,t)=>e.with!==t.with?fail(`Expected 'with: "${t.with}"' instead got '${e.with}'`):ok({})}),get$1=capability({can:"space/blob/get/0/1",with:SpaceDID,nb:struct({digest:bytes()}),derives:(e,t)=>e.with!==t.with?fail(`Expected 'with: "${t.with}"' instead got '${e.with}'`):t.nb.digest&&!equals$3(t.nb.digest,e.nb.digest)?fail(`Link ${e.nb.digest?`${e.nb.digest}`:""} violates imposed ${t.nb.digest} constraint.`):ok({})}),replicate=capability({can:"space/blob/replicate",with:SpaceDID,nb:struct({blob:content,replicas:integer().greaterThan(0),site:match$3({version:1})}),derives:(e,t)=>and(equalWith(e,t))||and(equalBlob(e,t))||and(equal(e.nb.replicas,t.nb.replicas,"replicas"))||and(checkLink(e.nb.site,t.nb.site,"site"))||ok({})}),blob$1=capability({can:"blob/*",with:match$1(),derives:equalWith}),allocate$1=capability({can:"blob/allocate",with:match$1(),nb:struct({blob:content,cause:match$3({version:1}),space:match$2({method:"key"})}),derives:(e,t)=>{var r,n;return and(equalWith(e,t))||and(equalBlob(e,t))||and(checkLink(e.nb.cause,t.nb.cause,"cause"))||and(equal(null==(r=e.nb.space)?void 0:r.did(),null==(n=t.nb.space)?void 0:n.did(),"space"))||ok({})}}),accept$1=capability({can:"blob/accept",with:match$1(),nb:struct({blob:content,space:match$2({method:"key"}),_put:Await}),derives:(e,t)=>{var r,n;return and(equalWith(e,t))||and(equalBlob(e,t))||and(equal(null==(r=e.nb.space)?void 0:r.did(),null==(n=t.nb.space)?void 0:n.did(),"space"))||ok({})}}),blob=capability({can:"web3.storage/blob/*",with:SpaceDID,derives:equalWith}),allocate=capability({can:"web3.storage/blob/allocate",with:match$1(),nb:struct({blob:content,cause:Link,space:SpaceDID}),derives:(e,t)=>and(equalWith(e,t))||and(equalBlob(e,t))||and(checkLink(e.nb.cause,t.nb.cause,"cause"))||and(equal(e.nb.space,t.nb.space,"space"))||ok({})}),accept=capability({can:"web3.storage/blob/accept",with:match$1(),nb:struct({blob:content,ttl:integer().optional(),space:SpaceDID,_put:Await}),derives:(e,t)=>and(equalWith(e,t))||and(equalBlob(e,t))||and(equal(e.nb.ttl,t.nb.ttl,"ttl"))||and(equal(e.nb.space,t.nb.space,"space"))||ok({})}),put=capability({can:"http/put",with:SpaceDID,nb:struct({body:content,url:string().or(Await),headers:dictionary({value:string()}).or(Await)}),derives:(e,t)=>and(equalWith(e,t))||and(equalBody(e,t))||and(equal(e.nb.url,t.nb,"url"))||and(equal(e.nb.headers,t.nb,"headers"))||ok({})});capability({can:"account/usage/*",with:AccountDID,derives:equalWith});const get=capability({can:"account/usage/get",with:AccountDID,nb:struct({spaces:SpaceDID.array().optional(),period:struct({from:integer().greaterThan(-1),to:integer().greaterThan(-1)}).optional()}),derives:(e,t)=>{var r,n,i,o;return and(equalWith(e,t))||and(void 0===t.nb.spaces?ok({}):void 0===e.nb.spaces?fail(`Constraint violation: violates imposed spaces constraint ${t.nb.spaces} because it asks for all spaces`):containedWithin(e.nb.spaces,t.nb.spaces,"spaces"))||and(equal(null==(r=e.nb.period)?void 0:r.from,null==(n=t.nb.period)?void 0:n.from,"period.from"))||and(equal(null==(i=e.nb.period)?void 0:i.to,null==(o=t.nb.period)?void 0:o.to,"period.to"))||ok({})}}),abilitiesAsStrings=[top.can,assert.can,equals.can,inclusion.can,index$1.can,location.can,partition.can,relation.can,claim.can,cache$1.can,add$3.can,space.can,info.can,EncryptionSetup.can,EncryptionKeyDecrypt.can,upload$1.can,add$4.can,get$6.can,remove$2.can,list$3.can,store$1.can,add$5.can,get$7.can,remove$3.can,list$4.can,access.can,authorize.can,attest.can,conclude.can,get$4.can,has.can,get$5.can,get$3.can,list$1.can,add$2.can,remove$1.can,list$2.can,filecoinOffer.can,filecoinSubmit.can,filecoinAccept.can,filecoinInfo.can,pieceOffer.can,pieceAccept.can,aggregateOffer.can,aggregateAccept.can,dealInfo.can,admin.can,upload.inspect.can,store.inspect.can,get$2.can,set.can,createAdminSession.can,usage.can,report.can,blob$1.can,allocate$1.can,accept$1.can,blob$2.can,add.can,remove.can,list.can,blob.can,allocate.can,accept.can,put.can,index.can,add$1.can,get.can];match$1({method:"web"});const PRINCIPAL=parse$1("did:web:up.storacha.network");PRINCIPAL.did();const BITS_PER_BYTE=8,FRS_PER_QUAD=4;BigInt(FRS_PER_QUAD);const IN_BITS_FR=254,OUT_BITS_FR=256,IN_BYTES_PER_QUAD=FRS_PER_QUAD*IN_BITS_FR/BITS_PER_BYTE,OUT_BYTES_PER_QUAD=FRS_PER_QUAD*OUT_BITS_FR/BITS_PER_BYTE;BigInt(IN_BYTES_PER_QUAD),BigInt(OUT_BYTES_PER_QUAD);const NODE_SIZE=OUT_BYTES_PER_QUAD/FRS_PER_QUAD,EXPANDED_BYTES_PER_NODE=BigInt(NODE_SIZE),from=e=>{if(e instanceof Uint8Array){if(e.length>NODE_SIZE)return e.subarray(0,NODE_SIZE);if(e.length==NODE_SIZE)return e}const t=new Uint8Array(NODE_SIZE);return t.set([...e]),t},empty=()=>EMPTY$2,EMPTY$2=from(new Uint8Array(NODE_SIZE).fill(0));Object.freeze(EMPTY$2.buffer);const name$2="sha2-256",code$3=18,size=32,prefix=new Uint8Array([18,32]);class Digest{constructor(e){this.code=code$3,this.name=name$2,this.bytes=e,this.size=size,this.digest=e.subarray(2)}}const digest=e=>{const t=new Uint8Array(prefix.length+size);return t.set(prefix,0),t.set(sha256$1(e),prefix.length),new Digest(t)},code$2=code$3,SHA256=Object.freeze(Object.defineProperty({__proto__:null,code:code$2,digest:digest,name:name$2,size:size},Symbol.toStringTag,{value:"Module"}));function truncatedHash(e,t={}){const r=t.hasher||SHA256,{digest:n}=r.digest(e);return truncate(n)}const computeNode=(e,t,r)=>{const n=new Uint8Array(e.length+t.length);return n.set(e,0),n.set(t,e.length),truncatedHash(n,r)};function truncate(e){return e[NODE_SIZE-1]&=63,e}const MAX_LEVEL=64;class ZeroComm{constructor(){this.bytes=new Uint8Array(MAX_LEVEL*NODE_SIZE),this.bytes.set(empty(),0),this.node=empty(),this.length=NODE_SIZE}slice(e,t){for(;this.length<t;)this.node=computeNode(this.node,this.node),this.bytes.set(this.node,this.length),this.length+=NODE_SIZE;return this.bytes.subarray(e,t)}}new ZeroComm;const fromHeight=e=>fromWidth(2n**BigInt(e)),fromWidth=e=>e*EXPANDED_BYTES_PER_NODE,MAX_HEIGHT$1=255;fromHeight(MAX_HEIGHT$1),BigInt(IN_BITS_FR),BigInt(OUT_BITS_FR);const MAX_HEIGHT=255;fromHeight(MAX_HEIGHT),BigInt(IN_BITS_FR),BigInt(OUT_BITS_FR),new TextEncoder,new TextDecoder;const contentType$2="application/cbor",HEADERS=Object.freeze({"content-type":contentType$2}),encode$4=(e,t)=>{const r=[];for(const i of e.receipts.values()){const e=i.out;e.ok?r.push(e.ok):r.push({...e.error,error:!0})}const n=encode$a(r);return{headers:HEADERS,body:n}},response=Object.freeze(Object.defineProperty({__proto__:null,contentType:contentType$2,encode:encode$4},Symbol.toStringTag,{value:"Module"})),contentType$1="application/car",decode$3=async({body:e})=>{const{roots:t,blocks:r}=decode$8(e),n=[];for(const{cid:i}of t){const e=view$2({root:i,blocks:r});n.push(e)}return await build({invocations:n})},request=Object.freeze(Object.defineProperty({__proto__:null,contentType:contentType$1,decode:decode$3},Symbol.toStringTag,{value:"Module"})),{contentType:contentType}=request;inbound({decoders:{[contentType]:request,[contentType$3]:request$1},encoders:{"*/*;q=0.1":response,[contentType$3]:response$1}});const services={STOREFRONT:{url:new URL("https://up.storacha.network"),principal:parse$1("did:web:up.storacha.network")},AGGREGATOR:{url:new URL("https://aggregator.web3.storage"),principal:parse$1("did:web:web3.storage")},DEALER:{url:new URL("https://dealer.web3.storage"),principal:parse$1("did:web:web3.storage")},DEAL_TRACKER:{url:new URL("https://tracker.web3.storage"),principal:parse$1("did:web:web3.storage")}};connect({id:services.STOREFRONT.principal,codec:outbound,channel:open$1({url:services.STOREFRONT.url,method:"POST"})}),connect({id:services.AGGREGATOR.principal,codec:outbound,channel:open$1({url:services.AGGREGATOR.url,method:"POST"})}),connect({id:services.DEALER.principal,codec:outbound,channel:open$1({url:services.DEALER.url,method:"POST"})}),connect({id:services.DEAL_TRACKER.principal,codec:outbound,channel:open$1({url:services.DEAL_TRACKER.url,method:"POST"})});var retry={};function RetryOperation(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var retry_operation=RetryOperation;RetryOperation.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},RetryOperation.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},RetryOperation.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(void 0===r){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1)}var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r),this._options.unref&&this._timer.unref(),!0},RetryOperation.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},RetryOperation.prototype.try=function(e){this.attempt(e)},RetryOperation.prototype.start=function(e){this.attempt(e)},RetryOperation.prototype.start=RetryOperation.prototype.try,RetryOperation.prototype.errors=function(){return this._errors},RetryOperation.prototype.attempts=function(){return this._attempts},RetryOperation.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],o=i.message,a=(e[o]||0)+1;e[o]=a,a>=r&&(t=i,r=a)}return t},function(e){var t=retry_operation;e.operation=function(r){var n=e.timeouts(r);return new t(n,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},e.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in e)t[r]=e[r];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],i=0;i<t.retries;i++)n.push(this.createTimeout(i,t));return e&&e.forever&&!n.length&&n.push(this.createTimeout(i,t)),n.sort(function(e,t){return e-t}),n},e.createTimeout=function(e,t){var r=t.randomize?Math.random()+1:1,n=Math.round(r*Math.max(t.minTimeout,1)*Math.pow(t.factor,e));return n=Math.min(n,t.maxTimeout)},e.wrap=function(t,r,n){if(r instanceof Array&&(n=r,r=null),!n)for(var i in n=[],t)"function"==typeof t[i]&&n.push(i);for(var o=0;o<n.length;o++){var a=n[o],s=t[a];t[a]=function(n){var i=e.operation(r),o=Array.prototype.slice.call(arguments,1),a=o.pop();o.push(function(e){i.retry(e)||(e&&(arguments[0]=i.mainError()),a.apply(this,arguments))}),i.attempt(function(){n.apply(t,o)})}.bind(t,s),t[a].options=r}}}(retry);const serviceURL=new URL("https://up.storacha.network"),servicePrincipal=parse$1("did:web:up.storacha.network");connect({id:servicePrincipal,codec:outbound,channel:open$1({url:serviceURL,method:"POST"})}),add.can,get$1.can,list.can,remove.can,replicate.can,add$1.can,add$4.can,get$6.can,list$3.can,remove$2.can;const textDecoder=new TextDecoder;function decodeVarint(e,t){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(t>=e.length)throw new Error("protobuf: unexpected end of data");const i=e[t++];if(r+=n<28?(127&i)<<n:(127&i)*2**n,i<128)break}return[r,t]}function decodeBytes(e,t){let r;[r,t]=decodeVarint(e,t);const n=t+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(t,n),n]}function decodeKey(e,t){let r;return[r,t]=decodeVarint(e,t),[7&r,r>>3,t]}function decodeLink(e){const t={},r=e.length;let n=0;for(;n<r;){let r,i;if([r,i,n]=decodeKey(e,n),1===i){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(2!==r)throw new Error(`protobuf: (PBLink) wrong wireType (${r}) for Hash`);if(void 0!==t.Name)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[t.Hash,n]=decodeBytes(e,n)}else if(2===i){if(void 0!==t.Name)throw new Error("protobuf: (PBLink) duplicate Name section");if(2!==r)throw new Error(`protobuf: (PBLink) wrong wireType (${r}) for Name`);if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let i;[i,n]=decodeBytes(e,n),t.Name=textDecoder.decode(i)}else{if(3!==i)throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${i}`);if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(0!==r)throw new Error(`protobuf: (PBLink) wrong wireType (${r}) for Tsize`);[t.Tsize,n]=decodeVarint(e,n)}}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return t}function decodeNode(e){const t=e.length;let r,n,i=0,o=!1;for(;i<t;){let t,a;if([t,a,i]=decodeKey(e,i),2!==t)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${t}`);if(1===a){if(n)throw new Error("protobuf: (PBNode) duplicate Data section");[n,i]=decodeBytes(e,i),r&&(o=!0)}else{if(2!==a)throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${a}`);{if(o)throw new Error("protobuf: (PBNode) duplicate Links section");let t;r||(r=[]),[t,i]=decodeBytes(e,i),r.push(decodeLink(t))}}}if(i>t)throw new Error("protobuf: (PBNode) unexpected end of data");const a={};return n&&(a.Data=n),a.Links=r||[],a}const textEncoder$1=new TextEncoder,maxInt32=2**32,maxUInt32=2**31;function encodeLink$1(e,t){let r=t.length;if("number"==typeof e.Tsize){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");r=encodeVarint(t,r,e.Tsize)-1,t[r]=24}if("string"==typeof e.Name){const n=textEncoder$1.encode(e.Name);r-=n.length,t.set(n,r),r=encodeVarint(t,r,n.length)-1,t[r]=18}return e.Hash&&(r-=e.Hash.length,t.set(e.Hash,r),r=encodeVarint(t,r,e.Hash.length)-1,t[r]=10),t.length-r}function encodeNode(e){const t=sizeNode(e),r=new Uint8Array(t);let n=t;if(e.Data&&(n-=e.Data.length,r.set(e.Data,n),n=encodeVarint(r,n,e.Data.length)-1,r[n]=10),e.Links)for(let i=e.Links.length-1;i>=0;i--){const t=encodeLink$1(e.Links[i],r.subarray(0,n));n-=t,n=encodeVarint(r,n,t)-1,r[n]=18}return r}function sizeLink(e){let t=0;if(e.Hash){const r=e.Hash.length;t+=1+r+sov(r)}if("string"==typeof e.Name){const r=textEncoder$1.encode(e.Name).length;t+=1+r+sov(r)}return"number"==typeof e.Tsize&&(t+=1+sov(e.Tsize)),t}function sizeNode(e){let t=0;if(e.Data){const r=e.Data.length;t+=1+r+sov(r)}if(e.Links)for(const r of e.Links){const e=sizeLink(r);t+=1+e+sov(e)}return t}function encodeVarint(e,t,r){const n=t-=sov(r);for(;r>=maxUInt32;)e[t++]=127&r|128,r/=128;for(;r>=128;)e[t++]=127&r|128,r>>>=7;return e[t]=r,n}function sov(e){return e%2==0&&e++,Math.floor((len64(e)+6)/7)}function len64(e){let t=0;return e>=maxInt32&&(e=Math.floor(e/maxInt32),t=32),e>=65536&&(e>>>=16,t+=16),e>=256&&(e>>>=8,t+=8),t+len8tab[e]}const len8tab=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],pbNodeProperties=["Data","Links"],pbLinkProperties=["Hash","Name","Tsize"],textEncoder=new TextEncoder;function linkComparator(e,t){if(e===t)return 0;const r=e.Name?textEncoder.encode(e.Name):[],n=t.Name?textEncoder.encode(t.Name):[];let i=r.length,o=n.length;for(let a=0,s=Math.min(i,o);a<s;++a)if(r[a]!==n[a]){i=r[a],o=n[a];break}return i<o?-1:o<i?1:0}function hasOnlyProperties(e,t){return!Object.keys(e).some(e=>!t.includes(e))}function asLink(e){if("object"==typeof e.asCID){const t=CID.asCID(e);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if("object"!=typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const t={};if(e.Hash){let r=CID.asCID(e.Hash);try{r||("string"==typeof e.Hash?r=CID.parse(e.Hash):e.Hash instanceof Uint8Array&&(r=CID.decode(e.Hash)))}catch(e3){throw new TypeError(`Invalid DAG-PB form: ${e3.message}`)}r&&(t.Hash=r)}if(!t.Hash)throw new TypeError("Invalid DAG-PB form");return"string"==typeof e.Name&&(t.Name=e.Name),"number"==typeof e.Tsize&&(t.Tsize=e.Tsize),t}function prepare(e){if((e instanceof Uint8Array||"string"==typeof e)&&(e={Data:e}),"object"!=typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const t={};if(void 0!==e.Data)if("string"==typeof e.Data)t.Data=textEncoder.encode(e.Data);else{if(!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form");t.Data=e.Data}if(void 0!==e.Links){if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form");t.Links=e.Links.map(asLink),t.Links.sort(linkComparator)}else t.Links=[];return t}function validate(e){if(!e||"object"!=typeof e||Array.isArray(e)||e instanceof Uint8Array||e["/"]&&e["/"]===e.bytes)throw new TypeError("Invalid DAG-PB form");if(!hasOnlyProperties(e,pbNodeProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(void 0!==e.Data&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let t=0;t<e.Links.length;t++){const r=e.Links[t];if(!r||"object"!=typeof r||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!hasOnlyProperties(r,pbLinkProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(void 0===r.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(null==r.Hash||!r.Hash["/"]||r.Hash["/"]!==r.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(void 0!==r.Name&&"string"!=typeof r.Name)throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(void 0!==r.Tsize){if("number"!=typeof r.Tsize||r.Tsize%1!=0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(r.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(t>0&&-1===linkComparator(r,e.Links[t-1]))throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function toByteView(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}const code$1=112;function encode$3(e){validate(e);const t={};return e.Links&&(t.Links=e.Links.map(e=>{const t={};return e.Hash&&(t.Hash=e.Hash.bytes),void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t})),e.Data&&(t.Data=e.Data),encodeNode(t)}function decode$2(e){const t=decodeNode(toByteView(e)),r={};return t.Data&&(r.Data=t.Data),t.Links&&(r.Links=t.Links.map(e=>{const t={};try{t.Hash=CID.decode(e.Hash)}catch{}if(!t.Hash)throw new Error("Invalid Hash field found in link, expected CID");return void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t})),r}var indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(e,t){for(var r=new Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(i,a){r[n]=function(e){if(o)if(o=!1,e)a(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];i.apply(null,t)}};try{e.apply(t||null,r)}catch(s){o&&(o=!1,a(s))}})}var base64$1={};!function(e){var t=base64$1;t.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var r=new Array(64),n=new Array(123),i=0;i<64;)n[r[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;t.encode=function(e,t,n){for(var i,o=null,a=[],s=0,c=0;t<n;){var l=e[t++];switch(c){case 0:a[s++]=r[l>>2],i=(3&l)<<4,c=1;break;case 1:a[s++]=r[i|l>>4],i=(15&l)<<2,c=2;break;case 2:a[s++]=r[i|l>>6],a[s++]=r[63&l],c=0}s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),s=0)}return c&&(a[s++]=r[i],a[s++]=61,1===c&&(a[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,a.slice(0,s))),o.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var o="invalid encoding";t.decode=function(e,t,r){for(var i,a=r,s=0,c=0;c<e.length;){var l=e.charCodeAt(c++);if(61===l&&s>1)break;if(void 0===(l=n[l]))throw Error(o);switch(s){case 0:i=l,s=1;break;case 1:t[r++]=i<<2|(48&l)>>4,i=l,s=2;break;case 2:t[r++]=(15&i)<<4|(60&l)>>2,i=l,s=3;break;case 3:t[r++]=(3&i)<<6|l,s=0}}if(1===s)throw Error(o);return r-a},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}();var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},EventEmitter.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},EventEmitter.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this};var float=factory(factory);function factory(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3]}function o(e,n,i){t[0]=e,n[i]=r[3],n[i+1]=r[2],n[i+2]=r[1],n[i+3]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function s(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?i:o,e.writeFloatBE=n?o:i,e.readFloatLE=n?a:s,e.readFloatBE=n?s:a}():function(){function t(e,t,r,n){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,r,n)}}function r(e,t,r){var n=e(t,r),i=2*(n>>31)+1,o=n>>>23&255,a=8388607&n;return 255===o?a?NaN:i*(1/0):0===o?1401298464324817e-60*i*a:i*Math.pow(2,o-150)*(a+8388608)}e.writeFloatLE=t.bind(null,writeUintLE),e.writeFloatBE=t.bind(null,writeUintBE),e.readFloatLE=r.bind(null,readUintLE),e.readFloatBE=r.bind(null,readUintBE)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3],n[i+4]=r[4],n[i+5]=r[5],n[i+6]=r[6],n[i+7]=r[7]}function o(e,n,i){t[0]=e,n[i]=r[7],n[i+1]=r[6],n[i+2]=r[5],n[i+3]=r[4],n[i+4]=r[3],n[i+5]=r[2],n[i+6]=r[1],n[i+7]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function s(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?i:o,e.writeDoubleBE=n?o:i,e.readDoubleLE=n?a:s,e.readDoubleBE=n?s:a}():function(){function t(e,t,r,n,i,o){var a=n<0?1:0;if(a&&(n=-n),0===n)e(0,i,o+t),e(1/n>0?0:2147483648,i,o+r);else if(isNaN(n))e(0,i,o+t),e(2146959360,i,o+r);else if(n>17976931348623157e292)e(0,i,o+t),e((a<<31|2146435072)>>>0,i,o+r);else{var s;if(n<22250738585072014e-324)e((s=n/5e-324)>>>0,i,o+t),e((a<<31|s/4294967296)>>>0,i,o+r);else{var c=Math.floor(Math.log(n)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(s=n*Math.pow(2,-c))>>>0,i,o+t),e((a<<31|c+1023<<20|1048576*s&1048575)>>>0,i,o+r)}}}function r(e,t,r,n,i){var o=e(n,i+t),a=e(n,i+r),s=2*(a>>31)+1,c=a>>>20&2047,l=4294967296*(1048575&a)+o;return 2047===c?l?NaN:s*(1/0):0===c?5e-324*s*l:s*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,writeUintLE,0,4),e.writeDoubleBE=t.bind(null,writeUintBE,4,0),e.readDoubleLE=r.bind(null,readUintLE,0,4),e.readDoubleBE=r.bind(null,readUintBE,4,0)}(),e}function writeUintLE(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function writeUintBE(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e3){}return null}var utf8$3={},utf82;utf82=utf8$3,utf82.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},utf82.read=function(e,t,r){if(r-t<1)return"";for(var n,i=null,o=[],a=0;t<r;)(n=e[t++])<128?o[a++]=n:n>191&&n<224?o[a++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[a++]=55296+(n>>10),o[a++]=56320+(1023&n)):o[a++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),a=0);return i?(a&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a))},utf82.write=function(e,t,r){for(var n,i,o=r,a=0;a<e.length;++a)(n=e.charCodeAt(a))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(i=e.charCodeAt(a+1)))?(n=65536+((1023&n)<<10)+(1023&i),++a,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-o};var pool_1=pool,longbits,hasRequiredLongbits,hasRequiredMinimal;function pool(e,t,r){var n=r||8192,i=n>>>1,o=null,a=n;return function(r){if(r<1||r>i)return e(r);a+r>n&&(o=e(n),a=0);var s=t.call(o,a,a+=r);return 7&a&&(a=1+(7|a)),s}}function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=t;var e=requireMinimal();function t(e,t){this.lo=e>>>0,this.hi=t>>>0}var r=t.zero=new t(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var n=t.zeroHash="\0\0\0\0\0\0\0\0";t.fromNumber=function(e){if(0===e)return r;var n=e<0;n&&(e=-e);var i=e>>>0,o=(e-i)/4294967296>>>0;return n&&(o=~o>>>0,i=~i>>>0,++i>4294967295&&(i=0,++o>4294967295&&(o=0))),new t(i,o)},t.from=function(n){if("number"==typeof n)return t.fromNumber(n);if(e.isString(n)){if(!e.Long)return t.fromNumber(parseInt(n,10));n=e.Long.fromString(n)}return n.low||n.high?new t(n.low>>>0,n.high>>>0):r},t.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},t.prototype.toLong=function(t){return e.Long?new e.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var i=String.prototype.charCodeAt;return t.fromHash=function(e){return e===n?r:new t((i.call(e,0)|i.call(e,1)<<8|i.call(e,2)<<16|i.call(e,3)<<24)>>>0,(i.call(e,4)|i.call(e,5)<<8|i.call(e,6)<<16|i.call(e,7)<<24)>>>0)},t.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},t.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},t.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},t.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10},longbits}function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(){var e=minimal$1;function t(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)void 0!==e[n[i]]&&r||(e[n[i]]=t[n[i]]);return e}function r(e){function r(e,n){if(!(this instanceof r))return new r(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,r):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&t(this,n)}return r.prototype=Object.create(Error.prototype,{constructor:{value:r,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),r}e.asPromise=aspromise,e.base64=base64$1,e.EventEmitter=eventemitter,e.float=float,e.inquire=inquire_1,e.utf8=utf8$3,e.pool=pool_1,e.LongBits=requireLongbits(),e.isNode=Boolean(void 0!==commonjsGlobal&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),e.global=e.isNode&&commonjsGlobal||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||commonjsGlobal,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},e.isString=function(e){return"string"==typeof e||e instanceof String},e.isObject=function(e){return e&&"object"==typeof e},e.isset=e.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},e.Buffer=function(){try{var t=e.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(e3){return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(t){return"number"==typeof t?e.Buffer?e._Buffer_allocUnsafe(t):new e.Array(t):e.Buffer?e._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},e.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(t){return t?e.LongBits.from(t).toHash():e.LongBits.zeroHash},e.longFromHash=function(t,r){var n=e.LongBits.fromHash(t);return e.Long?e.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))},e.merge=t,e.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},e.newError=r,e.ProtocolError=r("ProtocolError"),e.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},e.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var t=e.Buffer;t?(e._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,r){return new t(e,r)},e._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):e._Buffer_from=e._Buffer_allocUnsafe=null}}()),minimal$1}var writer=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$2=util$4.utf8;function Op(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function noop$1(){}function State$1(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer$1(){this.len=0,this.head=new Op(noop$1,0,0),this.tail=this.head,this.states=null}var create$2=function(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};function writeByte(e,t,r){t[r]=255&e}function writeVarint32(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e}function VarintOp(e,t){this.len=e,this.next=void 0,this.val=t}function writeVarint64(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function writeFixed32(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}Writer$1.create=create$2(),Writer$1.alloc=function(e){return new util$4.Array(e)},util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray)),Writer$1.prototype._push=function(e,t,r){return this.tail=this.tail.next=new Op(e,t,r),this.len+=t,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer$1.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},Writer$1.prototype.int32=function(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)},Writer$1.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},Writer$1.prototype.uint64=function(e){var t=LongBits$1.from(e);return this._push(writeVarint64,t.length(),t)},Writer$1.prototype.int64=Writer$1.prototype.uint64,Writer$1.prototype.sint64=function(e){var t=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,t.length(),t)},Writer$1.prototype.bool=function(e){return this._push(writeByte,1,e?1:0)},Writer$1.prototype.fixed32=function(e){return this._push(writeFixed32,4,e>>>0)},Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32,Writer$1.prototype.fixed64=function(e){var t=LongBits$1.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)},Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64,Writer$1.prototype.float=function(e){return this._push(util$4.float.writeFloatLE,4,e)},Writer$1.prototype.double=function(e){return this._push(util$4.float.writeDoubleLE,8,e)};var writeBytes=util$4.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};Writer$1.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(writeByte,1,0);if(util$4.isString(e)){var r=Writer$1.alloc(t=base64.length(e));base64.decode(e,r,0),e=r}return this.uint32(t)._push(writeBytes,t,e)},Writer$1.prototype.string=function(e){var t=utf8$2.length(e);return t?this.uint32(t)._push(utf8$2.write,t,e):this._push(writeByte,1,0)},Writer$1.prototype.fork=function(){return this.states=new State$1(this),this.head=this.tail=new Op(noop$1,0,0),this.len=0,this},Writer$1.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$1,0,0),this.len=0),this},Writer$1.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},Writer$1.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},Writer$1._configure=function(e){BufferWriter$1=e,Writer$1.create=create$2(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer.call(this)}function writeStringBuffer(e,t,r){e.length<40?util$3.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&"set"===util$3.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},BufferWriter.prototype.bytes=function(e){util$3.isString(e)&&(e=util$3._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(BufferWriter.writeBytesBuffer,t,e),this},BufferWriter.prototype.string=function(e){var t=util$3.Buffer.byteLength(e);return this.uint32(t),t&&this._push(writeStringBuffer,t,e),this},BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2.LongBits,utf8$1=util$2.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader$1(e){this.buf=e,this.pos=0,this.len=e.length}var create_array="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")},create$1=function(){return util$2.Buffer?function(e){return(Reader$1.create=function(e){return util$2.Buffer.isBuffer(e)?new BufferReader$1(e):create_array(e)})(e)}:create_array};function readLongVarint(){var e=new LongBits(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.create=create$1(),Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice,Reader$1.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return e}}(),Reader$1.prototype.int32=function(){return 0|this.uint32()},Reader$1.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)},Reader$1.prototype.bool=function(){return 0!==this.uint32()},Reader$1.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader$1.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader$1.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},Reader$1.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},Reader$1.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw indexOutOfRange(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(t,r);if(t===r){var n=util$2.Buffer;return n?n.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,t,r)},Reader$1.prototype.string=function(){var e=this.bytes();return utf8$1.read(e,0,e.length)},Reader$1.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this},Reader$1.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},Reader$1._configure=function(e){BufferReader$1=e,Reader$1.create=create$1(),BufferReader$1._configure();var t=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[t](!1)},uint64:function(){return readLongVarint.call(this)[t](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[t](!1)},fixed64:function(){return readFixed64.call(this)[t](!0)},sfixed64:function(){return readFixed64.call(this)[t](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=requireMinimal();function BufferReader(e){Reader.call(this,e)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)},BufferReader.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},BufferReader._configure();var rpc={},service=Service,util=requireMinimal();function Service(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function e(t,r,n,i,o){if(!i)throw TypeError("request must be specified");var a=this;if(!o)return util.asPromise(e,a,t,r,n,i);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(e,r){if(e)return a.emit("error",e,t),o(e);if(null!==r){if(!(r instanceof n))try{r=n[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(i){return a.emit("error",i,t),o(i)}return a.emit("data",r,t),o(null,r)}a.end(!0)})}catch(s){return a.emit("error",s,t),void setTimeout(function(){o(s)},0)}else setTimeout(function(){o(Error("already ended"))},0)},Service.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},rpc.Service=service;var roots={};!function(e){var t=indexMinimal;function r(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader)}t.build="minimal",t.Writer=writer,t.BufferWriter=writer_buffer,t.Reader=reader,t.BufferReader=reader_buffer,t.util=requireMinimal(),t.rpc=rpc,t.roots=roots,t.configure=r,r()}();var minimal=indexMinimal;const $protobuf=getDefaultExportFromCjs(minimal),$Reader=$protobuf.Reader,$Writer=$protobuf.Writer,$util=$protobuf.util,$root=$protobuf.roots.unixfs||($protobuf.roots.unixfs={}),Data=$root.Data=(()=>{function e(e){if(this.blocksizes=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.Type=0,e.prototype.Data=$util.newBuffer([]),e.prototype.filesize=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.blocksizes=$util.emptyArray,e.prototype.hashType=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.fanout=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.mode=0,e.prototype.mtime=null,e.encode=function(e,t){if(t||(t=$Writer.create()),t.uint32(8).int32(e.Type),null!=e.Data&&Object.hasOwnProperty.call(e,"Data")&&t.uint32(18).bytes(e.Data),null!=e.filesize&&Object.hasOwnProperty.call(e,"filesize")&&t.uint32(24).uint64(e.filesize),null!=e.blocksizes&&e.blocksizes.length)for(var r=0;r<e.blocksizes.length;++r)t.uint32(32).uint64(e.blocksizes[r]);return null!=e.hashType&&Object.hasOwnProperty.call(e,"hashType")&&t.uint32(40).uint64(e.hashType),null!=e.fanout&&Object.hasOwnProperty.call(e,"fanout")&&t.uint32(48).uint64(e.fanout),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(56).uint32(e.mode),null!=e.mtime&&Object.hasOwnProperty.call(e,"mtime")&&$root.UnixTime.encode(e.mtime,t.uint32(66).fork()).ldelim(),t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.Data;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.Type=e.int32();break;case 2:n.Data=e.bytes();break;case 3:n.filesize=e.uint64();break;case 4:if(n.blocksizes&&n.blocksizes.length||(n.blocksizes=[]),2==(7&i))for(var o=e.uint32()+e.pos;e.pos<o;)n.blocksizes.push(e.uint64());else n.blocksizes.push(e.uint64());break;case 5:n.hashType=e.uint64();break;case 6:n.fanout=e.uint64();break;case 7:n.mode=e.uint32();break;case 8:n.mtime=$root.UnixTime.decode(e,e.uint32());break;default:e.skipType(7&i)}}if(!n.hasOwnProperty("Type"))throw $util.ProtocolError("missing required 'Type'",{instance:n});return n},e.fromObject=function(e){if(e instanceof $root.Data)return e;var t=new $root.Data;switch(e.Type){case"Raw":case 0:t.Type=0;break;case"Directory":case 1:t.Type=1;break;case"File":case 2:t.Type=2;break;case"Metadata":case 3:t.Type=3;break;case"Symlink":case 4:t.Type=4;break;case"HAMTShard":case 5:t.Type=5}if(null!=e.Data&&("string"==typeof e.Data?$util.base64.decode(e.Data,t.Data=$util.newBuffer($util.base64.length(e.Data)),0):e.Data.length&&(t.Data=e.Data)),null!=e.filesize&&($util.Long?(t.filesize=$util.Long.fromValue(e.filesize)).unsigned=!0:"string"==typeof e.filesize?t.filesize=parseInt(e.filesize,10):"number"==typeof e.filesize?t.filesize=e.filesize:"object"==typeof e.filesize&&(t.filesize=new $util.LongBits(e.filesize.low>>>0,e.filesize.high>>>0).toNumber(!0))),e.blocksizes){if(!Array.isArray(e.blocksizes))throw TypeError(".Data.blocksizes: array expected");t.blocksizes=[];for(var r=0;r<e.blocksizes.length;++r)$util.Long?(t.blocksizes[r]=$util.Long.fromValue(e.blocksizes[r])).unsigned=!0:"string"==typeof e.blocksizes[r]?t.blocksizes[r]=parseInt(e.blocksizes[r],10):"number"==typeof e.blocksizes[r]?t.blocksizes[r]=e.blocksizes[r]:"object"==typeof e.blocksizes[r]&&(t.blocksizes[r]=new $util.LongBits(e.blocksizes[r].low>>>0,e.blocksizes[r].high>>>0).toNumber(!0))}if(null!=e.hashType&&($util.Long?(t.hashType=$util.Long.fromValue(e.hashType)).unsigned=!0:"string"==typeof e.hashType?t.hashType=parseInt(e.hashType,10):"number"==typeof e.hashType?t.hashType=e.hashType:"object"==typeof e.hashType&&(t.hashType=new $util.LongBits(e.hashType.low>>>0,e.hashType.high>>>0).toNumber(!0))),null!=e.fanout&&($util.Long?(t.fanout=$util.Long.fromValue(e.fanout)).unsigned=!0:"string"==typeof e.fanout?t.fanout=parseInt(e.fanout,10):"number"==typeof e.fanout?t.fanout=e.fanout:"object"==typeof e.fanout&&(t.fanout=new $util.LongBits(e.fanout.low>>>0,e.fanout.high>>>0).toNumber(!0))),null!=e.mode&&(t.mode=e.mode>>>0),null!=e.mtime){if("object"!=typeof e.mtime)throw TypeError(".Data.mtime: object expected");t.mtime=$root.UnixTime.fromObject(e.mtime)}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.blocksizes=[]),t.defaults){if(r.Type=t.enums===String?"Raw":0,t.bytes===String?r.Data="":(r.Data=[],t.bytes!==Array&&(r.Data=$util.newBuffer(r.Data))),$util.Long){var n=new $util.Long(0,0,!0);r.filesize=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.filesize=t.longs===String?"0":0;if($util.Long){n=new $util.Long(0,0,!0);r.hashType=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.hashType=t.longs===String?"0":0;if($util.Long){n=new $util.Long(0,0,!0);r.fanout=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.fanout=t.longs===String?"0":0;r.mode=0,r.mtime=null}if(null!=e.Type&&e.hasOwnProperty("Type")&&(r.Type=t.enums===String?$root.Data.DataType[e.Type]:e.Type),null!=e.Data&&e.hasOwnProperty("Data")&&(r.Data=t.bytes===String?$util.base64.encode(e.Data,0,e.Data.length):t.bytes===Array?Array.prototype.slice.call(e.Data):e.Data),null!=e.filesize&&e.hasOwnProperty("filesize")&&("number"==typeof e.filesize?r.filesize=t.longs===String?String(e.filesize):e.filesize:r.filesize=t.longs===String?$util.Long.prototype.toString.call(e.filesize):t.longs===Number?new $util.LongBits(e.filesize.low>>>0,e.filesize.high>>>0).toNumber(!0):e.filesize),e.blocksizes&&e.blocksizes.length){r.blocksizes=[];for(var i=0;i<e.blocksizes.length;++i)"number"==typeof e.blocksizes[i]?r.blocksizes[i]=t.longs===String?String(e.blocksizes[i]):e.blocksizes[i]:r.blocksizes[i]=t.longs===String?$util.Long.prototype.toString.call(e.blocksizes[i]):t.longs===Number?new $util.LongBits(e.blocksizes[i].low>>>0,e.blocksizes[i].high>>>0).toNumber(!0):e.blocksizes[i]}return null!=e.hashType&&e.hasOwnProperty("hashType")&&("number"==typeof e.hashType?r.hashType=t.longs===String?String(e.hashType):e.hashType:r.hashType=t.longs===String?$util.Long.prototype.toString.call(e.hashType):t.longs===Number?new $util.LongBits(e.hashType.low>>>0,e.hashType.high>>>0).toNumber(!0):e.hashType),null!=e.fanout&&e.hasOwnProperty("fanout")&&("number"==typeof e.fanout?r.fanout=t.longs===String?String(e.fanout):e.fanout:r.fanout=t.longs===String?$util.Long.prototype.toString.call(e.fanout):t.longs===Number?new $util.LongBits(e.fanout.low>>>0,e.fanout.high>>>0).toNumber(!0):e.fanout),null!=e.mode&&e.hasOwnProperty("mode")&&(r.mode=e.mode),null!=e.mtime&&e.hasOwnProperty("mtime")&&(r.mtime=$root.UnixTime.toObject(e.mtime,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e.DataType=function(){const e={},t=Object.create(e);return t[e[0]="Raw"]=0,t[e[1]="Directory"]=1,t[e[2]="File"]=2,t[e[3]="Metadata"]=3,t[e[4]="Symlink"]=4,t[e[5]="HAMTShard"]=5,t}(),e})();$root.UnixTime=(()=>{function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.Seconds=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.FractionalNanoseconds=0,e.encode=function(e,t){return t||(t=$Writer.create()),t.uint32(8).int64(e.Seconds),null!=e.FractionalNanoseconds&&Object.hasOwnProperty.call(e,"FractionalNanoseconds")&&t.uint32(21).fixed32(e.FractionalNanoseconds),t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.UnixTime;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.Seconds=e.int64();break;case 2:n.FractionalNanoseconds=e.fixed32();break;default:e.skipType(7&i)}}if(!n.hasOwnProperty("Seconds"))throw $util.ProtocolError("missing required 'Seconds'",{instance:n});return n},e.fromObject=function(e){if(e instanceof $root.UnixTime)return e;var t=new $root.UnixTime;return null!=e.Seconds&&($util.Long?(t.Seconds=$util.Long.fromValue(e.Seconds)).unsigned=!1:"string"==typeof e.Seconds?t.Seconds=parseInt(e.Seconds,10):"number"==typeof e.Seconds?t.Seconds=e.Seconds:"object"==typeof e.Seconds&&(t.Seconds=new $util.LongBits(e.Seconds.low>>>0,e.Seconds.high>>>0).toNumber())),null!=e.FractionalNanoseconds&&(t.FractionalNanoseconds=e.FractionalNanoseconds>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if($util.Long){var n=new $util.Long(0,0,!1);r.Seconds=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.Seconds=t.longs===String?"0":0;r.FractionalNanoseconds=0}return null!=e.Seconds&&e.hasOwnProperty("Seconds")&&("number"==typeof e.Seconds?r.Seconds=t.longs===String?String(e.Seconds):e.Seconds:r.Seconds=t.longs===String?$util.Long.prototype.toString.call(e.Seconds):t.longs===Number?new $util.LongBits(e.Seconds.low>>>0,e.Seconds.high>>>0).toNumber():e.Seconds),null!=e.FractionalNanoseconds&&e.hasOwnProperty("FractionalNanoseconds")&&(r.FractionalNanoseconds=e.FractionalNanoseconds),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e})(),$root.Metadata=(()=>{function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.MimeType="",e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.MimeType&&Object.hasOwnProperty.call(e,"MimeType")&&t.uint32(10).string(e.MimeType),t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.Metadata;e.pos<r;){var i=e.uint32();if(i>>>3==1)n.MimeType=e.string();else e.skipType(7&i)}return n},e.fromObject=function(e){if(e instanceof $root.Metadata)return e;var t=new $root.Metadata;return null!=e.MimeType&&(t.MimeType=String(e.MimeType)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.MimeType=""),null!=e.MimeType&&e.hasOwnProperty("MimeType")&&(r.MimeType=e.MimeType),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e})();const NodeType=Data.DataType,EMPTY$1=Object.freeze([]),EMPTY_BUFFER=new Uint8Array(0),BLANK=Object.freeze({}),DEFAULT_FILE_MODE=parseInt("0644",8),DEFAULT_DIRECTORY_MODE=parseInt("0755",8),code=code$1,name$1="UnixFS",encodePB=(e,t)=>(Object(globalThis).debug,encode$3(prepare({Data:Data.encode(e).finish(),Links:t}))),createRaw=e=>({type:NodeType.Raw,content:e}),createEmptyFile=e=>createSimpleFile(EMPTY_BUFFER,e),createSimpleFile=(e,t)=>({type:NodeType.File,layout:"simple",content:e,metadata:decodeMetadata(t)}),createFileChunk=e=>({type:NodeType.File,layout:"simple",content:e}),createAdvancedFile=(e,t)=>({type:NodeType.File,layout:"advanced",parts:e,metadata:decodeMetadata(t)}),createFileShard=e=>({type:NodeType.File,layout:"advanced",parts:e}),createComplexFile=(e,t,r)=>({type:NodeType.File,layout:"complex",content:e,parts:t,metadata:decodeMetadata(r)}),createFlatDirectory=(e,t)=>({type:NodeType.Directory,metadata:decodeMetadata(t),entries:e}),createShardedDirectory=(e,t,r,n,i=BLANK)=>({type:NodeType.HAMTShard,bitfield:t,fanout:readFanout(r),hashType:readInt(n),entries:e,metadata:decodeMetadata(i)}),createDirectoryShard=(e,t,r,n)=>({type:NodeType.HAMTShard,bitfield:t,fanout:readFanout(r),hashType:readInt(n),entries:e}),encodeRaw=e=>encodePB({Type:NodeType.Raw,Data:e.byteLength>0?e:void 0,filesize:e.byteLength,blocksizes:EMPTY$1},[]),encodeFile=(e,t=!1)=>{const r=t?BLANK:Object(e).metadata;switch(e.layout){case"simple":return encodeSimpleFile(e.content,r);case"advanced":return encodeAdvancedFile(e.parts,r);case"complex":return encodeComplexFile(e.content,e.parts,r);default:throw new TypeError(`File with unknown layout "${Object(e).layout}" was passed`)}},encodeFileChunk=e=>encodeSimpleFile(e,BLANK),encodeFileShard=e=>encodePB({Type:NodeType.File,blocksizes:e.map(contentByteLength),filesize:cumulativeContentByteLength(e)},e.map(encodeLink)),encodeAdvancedFile=(e,t=BLANK)=>encodePB({Type:NodeType.File,blocksizes:e.map(contentByteLength),filesize:cumulativeContentByteLength(e),...encodeMetadata(t)},e.map(encodeLink)),encodeLink=e=>({Name:"",Tsize:e.dagByteLength,Hash:e.cid}),encodeSimpleFile=(e,t=BLANK)=>encodePB({Type:NodeType.File,Data:e.byteLength>0?e:void 0,filesize:e.byteLength,blocksizes:[],...encodeMetadata(t)},[]),encodeComplexFile=(e,t,r=BLANK)=>encodePB({Type:NodeType.File,Data:e,filesize:e.byteLength+cumulativeContentByteLength(t),blocksizes:t.map(contentByteLength)},t.map(encodeLink)),encodeDirectory=e=>encodePB({Type:e.type,...encodeDirectoryMetadata(e.metadata||BLANK)},e.entries.map(encodeNamedLink)),encodeHAMTShard=({bitfield:e,fanout:t,hashType:r,entries:n,metadata:i=BLANK})=>encodePB({Type:NodeType.HAMTShard,Data:e.byteLength>0?e:void 0,fanout:readFanout(t),hashType:readInt(r),...encodeDirectoryMetadata(i)},n.map(encodeNamedLink)),readFanout=e=>{if(Math.log2(e)%1==0)return e;throw new TypeError(`Expected hamt size to be a power of two instead got ${e}`)},readInt=e=>{if(Number.isInteger(e))return e;throw new TypeError(`Expected an integer value instead got ${e}`)},createSymlink=(e,t=BLANK)=>({type:NodeType.Symlink,content:e,metadata:decodeMetadata(t)}),encodeSymlink=(e,t=!1)=>{const r=t?BLANK:Object(e).metadata;return encodePB({Type:NodeType.Symlink,Data:e.content,...encodeMetadata(r||BLANK)},[])},encode$2=(e,t=!0)=>{switch(e.type){case NodeType.Raw:return encodeRaw(e.content);case NodeType.File:return encodeFile(e);case NodeType.Directory:return encodeDirectory(e);case NodeType.HAMTShard:return encodeHAMTShard(e);case NodeType.Symlink:return encodeSymlink(e);default:throw new Error(`Unknown node type ${Object(e).type}`)}},decode$1=e=>{const t=decode$2(e),r=Data.decode(t.Data),{Type:n,Data:i,mtime:o,mode:a,blocksizes:s,...c}=Data.toObject(r,{defaults:!1,arrays:!0,longs:Number,objects:!1}),l={...a&&{mode:a},...decodeMtime(o)},u=t.Links;switch(r.Type){case NodeType.Raw:return createRaw(i);case NodeType.File:return 0===u.length?new SimpleFileView(i,l):0===i.byteLength?new AdvancedFileView(decodeFileLinks(c.blocksizes,u),l):new ComplexFileView(i,decodeFileLinks(c.blocksizes,u),l);case NodeType.Directory:return createFlatDirectory(decodeDirectoryLinks(u),l);case NodeType.HAMTShard:return createShardedDirectory(decodeDirectoryLinks(u),i||EMPTY_BUFFER,c.fanout,c.hashType,l);case NodeType.Symlink:return createSymlink(i,l);default:throw new TypeError(`Unsupported node type ${r.Type}`)}},decodeMtime=e=>null==e?void 0:{mtime:{secs:e.Seconds,nsecs:e.FractionalNanoseconds||0}},decodeFileLinks=(e,t)=>{const r=[],n=e.length;for(;0<n;)r.push({cid:t[0].Hash,dagByteLength:t[0].Tsize||0,contentByteLength:e[0]});return r},decodeDirectoryLinks=e=>e.map(e=>({cid:e.Hash,name:e.Name||"",dagByteLength:e.Tsize||0})),cumulativeContentByteLength=e=>e.reduce((e,t)=>e+t.contentByteLength,0),cumulativeDagByteLength=(e,t)=>t.reduce((e,t)=>e+t.dagByteLength,e.byteLength),contentByteLength=e=>e.contentByteLength,encodeNamedLink=({name:e,dagByteLength:t,cid:r})=>({Name:e,Tsize:t,Hash:r}),encodeDirectoryMetadata=e=>encodeMetadata(e,DEFAULT_DIRECTORY_MODE),encodeMetadata=({mode:e,mtime:t},r=DEFAULT_FILE_MODE)=>({mode:null!=e?encodeMode(e,r):void 0,mtime:null!=t?encodeMTime(t):void 0}),decodeMetadata=e=>null==e?BLANK:{...null==e.mode?void 0:{mode:decodeMode(e.mode)},...null==e.mtime?void 0:{mtime:e.mtime}},encodeMTime=e=>null==e?void 0:0!==e.nsecs?{Seconds:e.secs,FractionalNanoseconds:e.nsecs}:{Seconds:e.secs},encodeMode=(e,t)=>{const r=null==e?void 0:decodeMode(e);return r===t||null==r?void 0:r},decodeMode=e=>4095&e|4294963200&e,matchFile=({content:e=EMPTY_BUFFER,parts:t=EMPTY$1,metadata:r=BLANK,...n})=>0===t.length?new SimpleFileView(e,r):0===e.byteLength?new AdvancedFileView(t,r):new ComplexFileView(e,t,r);class SimpleFileView{constructor(e,t){this.content=e,this.metadata=t,this.layout="simple",this.type=NodeType.File}get filesize(){return this.content.byteLength}encode(){return encodeSimpleFile(this.content,this.metadata)}}class AdvancedFileView{constructor(e,t){this.parts=e,this.metadata=t}get layout(){return"advanced"}get type(){return NodeType.File}get fileSize(){return cumulativeContentByteLength(this.parts)}get blockSizes(){return this.parts.map(contentByteLength)}encode(){return encodeAdvancedFile(this.parts,this.metadata)}}class ComplexFileView{constructor(e,t,r){this.content=e,this.parts=t,this.metadata=r}get layout(){return"complex"}get type(){return NodeType.File}get fileSize(){return this.content.byteLength+cumulativeContentByteLength(this.parts)}get blockSizes(){return this.parts.map(contentByteLength)}encode(){return encodeComplexFile(this.content,this.parts,this.metadata)}}const filesize=e=>{switch(e.type){case NodeType.Raw:case NodeType.Symlink:return e.content.byteLength;case NodeType.File:switch(e.layout){case"simple":return e.content.byteLength;case"advanced":return cumulativeContentByteLength(e.parts);case"complex":return e.content.byteLength+cumulativeContentByteLength(e.parts)}default:return 0}},UnixFS=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_DIRECTORY_MODE:DEFAULT_DIRECTORY_MODE,DEFAULT_FILE_MODE:DEFAULT_FILE_MODE,NodeType:NodeType,code:code,createAdvancedFile:createAdvancedFile,createComplexFile:createComplexFile,createDirectoryShard:createDirectoryShard,createEmptyFile:createEmptyFile,createFileChunk:createFileChunk,createFileShard:createFileShard,createFlatDirectory:createFlatDirectory,createRaw:createRaw,createShardedDirectory:createShardedDirectory,createSimpleFile:createSimpleFile,createSymlink:createSymlink,cumulativeContentByteLength:cumulativeContentByteLength,cumulativeDagByteLength:cumulativeDagByteLength,decode:decode$1,decodeMetadata:decodeMetadata,encode:encode$2,encodeAdvancedFile:encodeAdvancedFile,encodeComplexFile:encodeComplexFile,encodeDirectory:encodeDirectory,encodeDirectoryMetadata:encodeDirectoryMetadata,encodeFile:encodeFile,encodeFileChunk:encodeFileChunk,encodeFileShard:encodeFileShard,encodeHAMTShard:encodeHAMTShard,encodeLink:encodeLink,encodeMetadata:encodeMetadata,encodeMode:encodeMode,encodeRaw:encodeRaw,encodeSimpleFile:encodeSimpleFile,encodeSymlink:encodeSymlink,filesize:filesize,matchFile:matchFile,name:name$1},Symbol.toStringTag,{value:"Module"}));function Indexed(){}Object.defineProperties(Indexed,{prototype:{value:new Proxy(Object.prototype,{get:(e,t,r)=>"symbol"==typeof t?Reflect.get(e,t,r):r.get(t)})}});const name="fixed",context={maxChunkSize:262144},type="Stateless",withMaxChunkSize=e=>({type:"Stateless",context:{maxChunkSize:e},name:name,cut:cut}),cut=({maxChunkSize:e},{byteLength:t},r)=>{const n=t/e|0,i=new Array(n).fill(e),o=r?t-n*e:0;return o>0&&i.push(o),i},FixedSize=Object.freeze(Object.defineProperty({__proto__:null,context:context,cut:cut,name:name,type:type,withMaxChunkSize:withMaxChunkSize},Symbol.toStringTag,{value:"Module"}));class Node{constructor(e,t,r){this.id=e,this.children=t,this.metadata=r}}const withWidth=e=>({open:()=>open({width:e}),write:write,close:close}),defaults$1={width:174},open=({width:e}=defaults$1)=>({width:e,head:null,leafIndex:[],nodeIndex:[],lastID:0}),write=(e,t)=>{if(0===t.length)return{layout:e,nodes:EMPTY,leaves:EMPTY};{let{lastID:r}=e;const[n,i]=e.head?[null,(t.unshift(e.head),t)]:1===t.length&&0===e.leafIndex.length?[t[0],EMPTY]:[null,t];if(0===i.length)return{layout:{...e,head:n},nodes:EMPTY,leaves:EMPTY};{const t=[...e.leafIndex],o=[];for(const e of i){const n={id:++r,content:e};o.push(n),t.push(n.id)}return t.length>e.width?flush({...e,leafIndex:t,head:n,lastID:r},o):{layout:{...e,head:n,leafIndex:t,lastID:r},leaves:o,nodes:EMPTY}}}},flush=(e,t=EMPTY,r=[],n=!1)=>{let{lastID:i}=e;const o=e.nodeIndex.map(e=>[...e]),a=[...e.leafIndex],{width:s}=e;for(;a.length>s||a.length>0&&n;){grow(o,1);const e=new Node(++i,a.splice(0,s));o[0].push(e.id),r.push(e)}let c=0;for(;c<o.length;){const e=o[c];for(c++;e.length>s||e.length>0&&n&&c<o.length;){const t=new Node(++i,e.splice(0,s));grow(o,c+1),o[c].push(t.id),r.push(t)}}return{layout:{...e,lastID:i,leafIndex:a,nodeIndex:o},leaves:t,nodes:r}},close=(e,t)=>{const r=e;if(e.head)return{root:{id:1,content:e.head,metadata:t},leaves:EMPTY,nodes:EMPTY};if(0===e.leafIndex.length)return{root:{id:1,metadata:t},leaves:EMPTY,nodes:EMPTY};{const{nodes:e,layout:n}=flush(r,EMPTY,[],!0),{nodeIndex:i}=n,o=i[i.length-1];if(1===o.length){const t=e[e.length-1];return e.length=e.length-1,{root:t,nodes:e,leaves:EMPTY}}return{root:new Node(n.lastID+1,o,t),nodes:e,leaves:EMPTY}}},grow=(e,t)=>{for(;e.length<t;)e.push([]);return e},EMPTY=[],defaults=()=>({chunker:FixedSize,fileChunkEncoder:UnixFSLeaf,smallFileEncoder:UnixFSLeaf,fileEncoder:UnixFS,fileLayout:withWidth(174),hasher:sha256,linker:{createLink:CID.createV1}}),configure$1=e=>({...defaults(),...e}),UnixFSLeaf={code:code,name:name$1,encode:encodeFileChunk};var murmurHash3js={exports:{}};!function(e,t){!function(r,n){var i={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function o(e){if(!Array.isArray(e)&&!ArrayBuffer.isView(e))return!1;for(var t=0;t<e.length;t++)if(!Number.isInteger(e[t])||e[t]<0||e[t]>255)return!1;return!0}function a(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function s(e,t){return e<<t|e>>>32-t}function c(e){return e=a(e^=e>>>16,2246822507),e=a(e^=e>>>13,3266489909),e^=e>>>16}function l(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]+t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]+t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]+t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]+t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function u(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]*t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]*t[3],r[1]+=r[2]>>>16,r[2]&=65535,r[2]+=e[3]*t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]*t[3],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[2]*t[2],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[3]*t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function d(e,t){return 32===(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function p(e,t){return 0===(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function h(e,t){return[e[0]^t[0],e[1]^t[1]]}function m(e){return e=h(e,[0,e[0]>>>1]),e=h(e=u(e,[4283543511,3981806797]),[0,e[0]>>>1]),e=h(e=u(e,[3301882366,444984403]),[0,e[0]>>>1])}i.x86.hash32=function(e,t){if(i.inputValidation&&!o(e))return n;t=t||0;for(var r=e.length%4,l=e.length-r,u=t,d=0,p=3432918353,h=461845907,m=0;m<l;m+=4)d=a(d=e[m]|e[m+1]<<8|e[m+2]<<16|e[m+3]<<24,p),d=a(d=s(d,15),h),u=a(u=s(u^=d,13),5)+3864292196;switch(d=0,r){case 3:d^=e[m+2]<<16;case 2:d^=e[m+1]<<8;case 1:d=a(d^=e[m],p),u^=d=a(d=s(d,15),h)}return(u=c(u^=e.length))>>>0},i.x86.hash128=function(e,t){if(i.inputValidation&&!o(e))return n;t=t||0;for(var r=e.length%16,l=e.length-r,u=t,d=t,p=t,h=t,m=0,f=0,x=0,g=0,y=597399067,b=2869860233,v=951274213,E=2716044179,w=0;w<l;w+=16)m=e[w]|e[w+1]<<8|e[w+2]<<16|e[w+3]<<24,f=e[w+4]|e[w+5]<<8|e[w+6]<<16|e[w+7]<<24,x=e[w+8]|e[w+9]<<8|e[w+10]<<16|e[w+11]<<24,g=e[w+12]|e[w+13]<<8|e[w+14]<<16|e[w+15]<<24,m=s(m=a(m,y),15),u=s(u^=m=a(m,b),19),u=a(u+=d,5)+1444728091,f=s(f=a(f,b),16),d=s(d^=f=a(f,v),17),d=a(d+=p,5)+197830471,x=s(x=a(x,v),17),p=s(p^=x=a(x,E),15),p=a(p+=h,5)+2530024501,g=s(g=a(g,E),18),h=s(h^=g=a(g,y),13),h=a(h+=u,5)+850148119;switch(m=0,f=0,x=0,g=0,r){case 15:g^=e[w+14]<<16;case 14:g^=e[w+13]<<8;case 13:g=a(g^=e[w+12],E),h^=g=a(g=s(g,18),y);case 12:x^=e[w+11]<<24;case 11:x^=e[w+10]<<16;case 10:x^=e[w+9]<<8;case 9:x=a(x^=e[w+8],v),p^=x=a(x=s(x,17),E);case 8:f^=e[w+7]<<24;case 7:f^=e[w+6]<<16;case 6:f^=e[w+5]<<8;case 5:f=a(f^=e[w+4],b),d^=f=a(f=s(f,16),v);case 4:m^=e[w+3]<<24;case 3:m^=e[w+2]<<16;case 2:m^=e[w+1]<<8;case 1:m=a(m^=e[w],y),u^=m=a(m=s(m,15),b)}return u^=e.length,u+=d^=e.length,u+=p^=e.length,d+=u+=h^=e.length,p+=u,h+=u,u=c(u),u+=d=c(d),u+=p=c(p),d+=u+=h=c(h),p+=u,h+=u,("00000000"+(u>>>0).toString(16)).slice(-8)+("00000000"+(d>>>0).toString(16)).slice(-8)+("00000000"+(p>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)},i.x64.hash128=function(e,t){if(i.inputValidation&&!o(e))return n;t=t||0;for(var r=e.length%16,a=e.length-r,s=[0,t],c=[0,t],f=[0,0],x=[0,0],g=[2277735313,289559509],y=[1291169091,658871167],b=0;b<a;b+=16)f=[e[b+4]|e[b+5]<<8|e[b+6]<<16|e[b+7]<<24,e[b]|e[b+1]<<8|e[b+2]<<16|e[b+3]<<24],x=[e[b+12]|e[b+13]<<8|e[b+14]<<16|e[b+15]<<24,e[b+8]|e[b+9]<<8|e[b+10]<<16|e[b+11]<<24],f=d(f=u(f,g),31),s=l(s=d(s=h(s,f=u(f,y)),27),c),s=l(u(s,[0,5]),[0,1390208809]),x=d(x=u(x,y),33),c=l(c=d(c=h(c,x=u(x,g)),31),s),c=l(u(c,[0,5]),[0,944331445]);switch(f=[0,0],x=[0,0],r){case 15:x=h(x,p([0,e[b+14]],48));case 14:x=h(x,p([0,e[b+13]],40));case 13:x=h(x,p([0,e[b+12]],32));case 12:x=h(x,p([0,e[b+11]],24));case 11:x=h(x,p([0,e[b+10]],16));case 10:x=h(x,p([0,e[b+9]],8));case 9:x=u(x=h(x,[0,e[b+8]]),y),c=h(c,x=u(x=d(x,33),g));case 8:f=h(f,p([0,e[b+7]],56));case 7:f=h(f,p([0,e[b+6]],48));case 6:f=h(f,p([0,e[b+5]],40));case 5:f=h(f,p([0,e[b+4]],32));case 4:f=h(f,p([0,e[b+3]],24));case 3:f=h(f,p([0,e[b+2]],16));case 2:f=h(f,p([0,e[b+1]],8));case 1:f=u(f=h(f,[0,e[b]]),g),s=h(s,f=u(f=d(f,31),y))}return s=l(s=h(s,[0,e.length]),c=h(c,[0,e.length])),c=l(c,s),s=l(s=m(s),c=m(c)),c=l(c,s),("00000000"+(s[0]>>>0).toString(16)).slice(-8)+("00000000"+(s[1]>>>0).toString(16)).slice(-8)+("00000000"+(c[0]>>>0).toString(16)).slice(-8)+("00000000"+(c[1]>>>0).toString(16)).slice(-8)},e.exports&&(t=e.exports=i),t.murmurHash3=i}()}(murmurHash3js,murmurHash3js.exports);var murmurHash3jsExports=murmurHash3js.exports,murmurhash3jsRevisited=murmurHash3jsExports;const mur=getDefaultExportFromCjs(murmurhash3jsRevisited);new TextEncoder,mur.x64.hash126;const murmur364=from$5({name:"murmur3-x64-64",code:34,encode:e=>fromHex(mur.x64.hash128(e)).subarray(0,8)});new TextEncoder;const toInt=(e,t,r)=>{let n=t/8|0,i=t%8,o=r,a=0;for(;o>0&&n<e.byteLength;){const t=8-i,r=t<o?t:o;a=(a<<r)+((255>>i&e[n])>>8-i-r),o-=r,n++,i=0}return a},utf8=new TextEncoder,hash64=e=>murmur364.encode(e),configure=({bitWidth:e=8,hash:t=hash64})=>{const r=t(new Uint8Array).byteLength,n={bitWidth:e,hash:t,hashSize:r};return{at:(e,t)=>read(e,t,n),from:e=>utf8.encode(e),size:1/0}},read=(e,t=0,{bitWidth:r=8,hash:n,hashSize:i})=>{const o=8*i;let a=0,s=r,c=r*t;for(;s>0;){const t=c/o|0,r=n(0===t?e:appendByte(e,t)),i=o<=c?c%o:c,l=o-i,u=l<s?l:s;a=(a<<u)+toInt(r,i,u),s-=u,c+=u}return a},appendByte=(e,t)=>{const r=new Uint8Array(e.byteLength+1).fill(t,e.byteLength);return r.set(e),r},bitWidth=8;async function readHeader(e,t){const r=decodeVarint$1(await e.upTo(8),e);if(0===r)throw new Error("Invalid CAR header (zero length)");const n=await e.exactly(r,!0),i=decode$j(n);if(void 0===CarV1HeaderOrV2Pragma.toTyped(i))throw new Error("Invalid CAR header format");if(1!==i.version&&2!==i.version||void 0!==t&&i.version!==t)throw new Error(`Invalid CAR version: ${i.version}${void 0!==t?` (expected ${t})`:""}`);if(1===i.version){if(!Array.isArray(i.roots))throw new Error("Invalid CAR header format");return i}if(void 0!==i.roots)throw new Error("Invalid CAR header format");const o=decodeV2Header(await e.exactly(V2_HEADER_LENGTH,!0));e.seek(o.dataOffset-e.pos);const a=await readHeader(e,1);return Object.assign(a,o)}function bytesReader(e){let t=0;return{upTo:async r=>e.subarray(t,t+Math.min(r,e.length-t)),async exactly(r,n=!1){if(r>e.length-t)throw new Error("Unexpected end of data");const i=e.subarray(t,t+r);return n&&(t+=r),i},seek(e){t+=e},get pos(){return t}}}configure({bitWidth:bitWidth}),configure$1({fileChunkEncoder:raw,smallFileEncoder:raw,chunker:withMaxChunkSize(1048576),fileLayout:withWidth(1024)});const CAR_V1_VERSION=1;function createHeader(e){const t=encode$j({version:CAR_V1_VERSION,roots:e}),r=varint$1.encode(t.length),n=new Uint8Array(r.length+t.length);return n.set(r,0),n.set(t,r.length),n}function createEncoder(e){return{async setRoots(t){const r=createHeader(t);await e.write(r)},async writeBlock(t){const{cid:r,bytes:n}=t;await e.write(new Uint8Array(varint$1.encode(r.bytes.length+n.length))),await e.write(r.bytes),n.length&&await e.write(n)},async close(){await e.end()},version:()=>CAR_V1_VERSION}}function noop(){}function create(){const e=[];let t=null,r=noop,n=!1,i=null,o=noop;const a=()=>(t||(t=new Promise(e=>{r=()=>{t=null,r=noop,e()}})),t),s={write(t){e.push(t);const r=a();return o(),r},async end(){n=!0;const e=a();o(),await e}},c={async next(){const t=e.shift();return t?(0===e.length&&r(),{done:!1,value:t}):n?(r(),{done:!0,value:void 0}):(i||(i=new Promise(e=>{o=()=>(i=null,o=noop,e(c.next()))})),i)}};return{writer:s,iterator:c}}class CarWriter{constructor(e,t){this._encoder=t,this._mutex=t.setRoots(e),this._ended=!1}async put(e){if(!(e.bytes instanceof Uint8Array&&e.cid))throw new TypeError("Can only write {cid, bytes} objects");if(this._ended)throw new Error("Already closed");const t=CID.asCID(e.cid);if(!t)throw new TypeError("Can only write {cid, bytes} objects");return this._mutex=this._mutex.then(()=>this._encoder.writeBlock({cid:t,bytes:e.bytes})),this._mutex}async close(){if(this._ended)throw new Error("Already closed");return await this._mutex,this._ended=!0,this._encoder.close()}version(){return this._encoder.version()}static create(e){e=toRoots(e);const{encoder:t,iterator:r}=encodeWriter();return{writer:new CarWriter(e,t),out:new CarWriterOut(r)}}static createAppender(){const{encoder:e,iterator:t}=encodeWriter();e.setRoots=()=>Promise.resolve();return{writer:new CarWriter([],e),out:new CarWriterOut(t)}}static async updateRootsInBytes(e,t){const r=bytesReader(e);await readHeader(r);const n=createHeader(t);if(Number(r.pos)!==n.length)throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${r.pos} bytes, new header is ${n.length} bytes)`);return e.set(n,0),e}}class CarWriterOut{constructor(e){this._iterator=e}[Symbol.asyncIterator](){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}}function encodeWriter(){const e=create(),{writer:t,iterator:r}=e;return{encoder:createEncoder(t),iterator:r}}function toRoots(e){if(void 0===e)return[];if(!Array.isArray(e)){const t=CID.asCID(e);if(!t)throw new TypeError("roots must be a single CID or an array of CIDs");return[t]}const t=[];for(const r of e){const e=CID.asCID(r);if(!e)throw new TypeError("roots must be a single CID or an array of CIDs");t.push(e)}return t}const NO_ROOTS_HEADER_LENGTH=18;function headerEncodingLength(e){if(!e)return NO_ROOTS_HEADER_LENGTH;const t=encode$j({version:1,roots:[e]}).length;return varint$1.encodingLength(t)+t}function blockHeaderEncodingLength(e){const t=e.cid.bytes.length+e.bytes.length;return varint$1.encodingLength(t)+e.cid.bytes.length}function blockEncodingLength(e){return blockHeaderEncodingLength(e)+e.bytes.length}async function encode$1(e,t){const{writer:r,out:n}=CarWriter.create(t);let i;(async()=>{try{for await(const t of e)await r.put(t)}catch(t){i=t}finally{await r.close()}})();const o=[];for await(const s of n)o.push(s);if(null!=i)throw i;const a=null!=t?[t]:[];return Object.assign(new Blob(o),{version:1,roots:a})}class BlockDeduplicationStream extends TransformStream{constructor(){const e=new Set;super({transform(t,r){const n=t.cid.toString();e.has(n)||(e.add(n),r.enqueue(t))},flush(){e.clear()}})}}const cache=new WeakMap,toBase58String=e=>{let t=cache.get(e.bytes);return t||(t=base58btc.encode(e.bytes),cache.set(e.bytes,t)),t};class DigestMap{constructor(e){__privateAdd(this,_data),__privateSet(this,_data,new Map);for(const[t,r]of e??[])this.set(t,r)}get[Symbol.toStringTag](){return"DigestMap"}clear(){__privateGet(this,_data).clear()}delete(e){const t=toBase58String(e);return __privateGet(this,_data).delete(t)}forEach(e,t){for(const[r,n]of __privateGet(this,_data).values())e.call(t,n,r,this)}get(e){const t=__privateGet(this,_data).get(toBase58String(e));if(t)return t[1]}has(e){return __privateGet(this,_data).has(toBase58String(e))}set(e,t){return __privateGet(this,_data).set(toBase58String(e),[e,t]),this}get size(){return __privateGet(this,_data).size}[Symbol.iterator](){return this.entries()}*entries(){yield*__privateGet(this,_data).values()}*keys(){for(const[e]of __privateGet(this,_data).values())yield e}*values(){for(const[,e]of __privateGet(this,_data).values())yield e}}_data=new WeakMap;const version="index/sharded/dag@0.1";variant({[version]:struct({content:match$3(),shards:array(match$3())})});const symbol=Symbol.for("@achingbrain/uint8arraylist");function findBufAndOffset(e,t){if(null==t||t<0)throw new RangeError("index is out of bounds");let r=0;for(const n of e){const e=r+n.byteLength;if(t<e)return{buf:n,index:t-r};r=e}throw new RangeError("index is out of bounds")}function isUint8ArrayList(e){return Boolean(null==e?void 0:e[symbol])}class Uint8ArrayList{constructor(...e){__publicField(this,"bufs"),__publicField(this,"length"),__publicField(this,_b,!0),this.bufs=[],this.length=0,e.length>0&&this.appendAll(e)}*[(_b=symbol,Symbol.iterator)](){yield*this.bufs}get byteLength(){return this.length}append(...e){this.appendAll(e)}appendAll(e){let t=0;for(const r of e)if(r instanceof Uint8Array)t+=r.byteLength,this.bufs.push(r);else{if(!isUint8ArrayList(r))throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");t+=r.byteLength,this.bufs.push(...r.bufs)}this.length+=t}prepend(...e){this.prependAll(e)}prependAll(e){let t=0;for(const r of e.reverse())if(r instanceof Uint8Array)t+=r.byteLength,this.bufs.unshift(r);else{if(!isUint8ArrayList(r))throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");t+=r.byteLength,this.bufs.unshift(...r.bufs)}this.length+=t}get(e){const t=findBufAndOffset(this.bufs,e);return t.buf[t.index]}set(e,t){const r=findBufAndOffset(this.bufs,e);r.buf[r.index]=t}write(e,t=0){if(e instanceof Uint8Array)for(let r=0;r<e.length;r++)this.set(t+r,e[r]);else{if(!isUint8ArrayList(e))throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList");for(let r=0;r<e.length;r++)this.set(t+r,e.get(r))}}consume(e){if(e=Math.trunc(e),!(Number.isNaN(e)||e<=0)){if(e===this.byteLength)return this.bufs=[],void(this.length=0);for(;this.bufs.length>0;){if(!(e>=this.bufs[0].byteLength)){this.bufs[0]=this.bufs[0].subarray(e),this.length-=e;break}e-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift()}}}slice(e,t){const{bufs:r,length:n}=this._subList(e,t);return concat(r,n)}subarray(e,t){const{bufs:r,length:n}=this._subList(e,t);return 1===r.length?r[0]:concat(r,n)}sublist(e,t){const{bufs:r,length:n}=this._subList(e,t),i=new Uint8ArrayList;return i.length=n,i.bufs=[...r],i}_subList(e,t){if(e=e??0,t=t??this.length,e<0&&(e=this.length+e),t<0&&(t=this.length+t),e<0||t>this.length)throw new RangeError("index is out of bounds");if(e===t)return{bufs:[],length:0};if(0===e&&t===this.length)return{bufs:this.bufs,length:this.length};const r=[];let n=0;for(let i=0;i<this.bufs.length;i++){const o=this.bufs[i],a=n,s=a+o.byteLength;if(n=s,e>=s)continue;const c=e>=a&&e<s,l=t>a&&t<=s;if(c&&l){if(e===a&&t===s){r.push(o);break}const n=e-a;r.push(o.subarray(n,n+(t-e)));break}if(c){if(0===e){r.push(o);continue}r.push(o.subarray(e-a))}else{if(l){if(t===s){r.push(o);break}r.push(o.subarray(0,t-a));break}r.push(o)}}return{bufs:r,length:t-e}}indexOf(e,t=0){if(!(isUint8ArrayList(e)||e instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const r=e instanceof Uint8Array?e:e.subarray();if(t=Number(t??0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),0===e.length)return t>this.length?this.length:t;const n=r.byteLength;if(0===n)throw new TypeError("search must be at least 1 byte long");const i=new Int32Array(256);for(let l=0;l<256;l++)i[l]=-1;for(let l=0;l<n;l++)i[r[l]]=l;const o=i,a=this.byteLength-r.byteLength,s=r.byteLength-1;let c;for(let l=t;l<=a;l+=c){c=0;for(let e=s;e>=0;e--){const t=this.get(l+e);if(r[e]!==t){c=Math.max(1,e-o[t]);break}}if(0===c)return l}return-1}getInt8(e){const t=this.subarray(e,e+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getInt8(0)}setInt8(e,t){const r=allocUnsafe(1);new DataView(r.buffer,r.byteOffset,r.byteLength).setInt8(0,t),this.write(r,e)}getInt16(e,t){const r=this.subarray(e,e+2);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt16(0,t)}setInt16(e,t,r){const n=alloc(2);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt16(0,t,r),this.write(n,e)}getInt32(e,t){const r=this.subarray(e,e+4);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt32(0,t)}setInt32(e,t,r){const n=alloc(4);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt32(0,t,r),this.write(n,e)}getBigInt64(e,t){const r=this.subarray(e,e+8);return new DataView(r.buffer,r.byteOffset,r.byteLength).getBigInt64(0,t)}setBigInt64(e,t,r){const n=alloc(8);new DataView(n.buffer,n.byteOffset,n.byteLength).setBigInt64(0,t,r),this.write(n,e)}getUint8(e){const t=this.subarray(e,e+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0)}setUint8(e,t){const r=allocUnsafe(1);new DataView(r.buffer,r.byteOffset,r.byteLength).setUint8(0,t),this.write(r,e)}getUint16(e,t){const r=this.subarray(e,e+2);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint16(0,t)}setUint16(e,t,r){const n=alloc(2);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint16(0,t,r),this.write(n,e)}getUint32(e,t){const r=this.subarray(e,e+4);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint32(0,t)}setUint32(e,t,r){const n=alloc(4);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,t,r),this.write(n,e)}getBigUint64(e,t){const r=this.subarray(e,e+8);return new DataView(r.buffer,r.byteOffset,r.byteLength).getBigUint64(0,t)}setBigUint64(e,t,r){const n=alloc(8);new DataView(n.buffer,n.byteOffset,n.byteLength).setBigUint64(0,t,r),this.write(n,e)}getFloat32(e,t){const r=this.subarray(e,e+4);return new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat32(0,t)}setFloat32(e,t,r){const n=alloc(4);new DataView(n.buffer,n.byteOffset,n.byteLength).setFloat32(0,t,r),this.write(n,e)}getFloat64(e,t){const r=this.subarray(e,e+8);return new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat64(0,t)}setFloat64(e,t,r){const n=alloc(8);new DataView(n.buffer,n.byteOffset,n.byteLength).setFloat64(0,t,r),this.write(n,e)}equals(e){if(null==e)return!1;if(!(e instanceof Uint8ArrayList))return!1;if(e.bufs.length!==this.bufs.length)return!1;for(let t=0;t<this.bufs.length;t++)if(!equals$1(this.bufs[t],e.bufs[t]))return!1;return!0}static fromUint8Arrays(e,t){const r=new Uint8ArrayList;return r.bufs=e,null==t&&(t=e.reduce((e,t)=>e+t.byteLength,0)),r.length=t,r}}const MSB=128,REST=127,MSBALL=~REST,INT=Math.pow(2,31),encode=e=>{const t=[];let r=0;for(;e>=INT;)t[r++]=255&e|MSB,e/=128;for(;e&MSBALL;)t[r++]=255&e|MSB,e>>>=7;return t[r]=0|e,t},decode=(e,t)=>{let r,n=0,i=0,o=t=t||0;const a=e.length;do{if(o>=a||i>49)throw new RangeError("Could not decode varint");r=e.get(o++),n+=i<28?(r&REST)<<i:(r&REST)*Math.pow(2,i),i+=7}while(r>=MSB);return[n,o-t]},State={ReadHeaderLength:0,ReadHeader:1,ReadBlockLength:2,ReadBlock:3},CIDV0_BYTES={SHA2_256:18,LENGTH:32};class CARReaderStream extends TransformStream{constructor(e,t){const r=new Uint8ArrayList;let n,i=0,o=i,a=8,s=State.ReadHeaderLength;const c=new Promise(e=>{n=e});super({transform(e,t){for(r.append(e);!(r.length<a);)if(s===State.ReadHeaderLength){const[e,t]=decode(r);r.consume(t),o=i,i+=t,s=State.ReadHeader,a=e}else if(s===State.ReadHeader){const e=decode$j(r.slice(0,a));n&&n(e),r.consume(a),o=i,i+=a,s=State.ReadBlockLength,a=8}else if(s===State.ReadBlockLength){const[e,t]=decode(r);r.consume(t),o=i,i+=t,s=State.ReadBlock,a=e}else if(s===State.ReadBlock){const e=o,n=i-o+a;let c;if(o=i,r.get(0)===CIDV0_BYTES.SHA2_256&&r.get(1)===CIDV0_BYTES.LENGTH){c=createLegacy(decode$k(r.subarray(0,34))),r.consume(34),i+=34}else{const[e,t]=decode(r);if(1!==e)throw new Error(`unexpected CID version (${e})`);r.consume(t),i+=t;const[n,o]=decode(r);r.consume(o),i+=o;const a=getMultihashLength(r);c=create$6(n,decode$k(r.subarray(0,a))),r.consume(a),i+=a}const l=a-(i-o),u=r.subarray(0,l);t.enqueue({cid:c,bytes:u,offset:e,length:n,blockOffset:i,blockLength:l}),r.consume(l),o=i,i+=l,s=State.ReadBlockLength,a=8}},flush(e){s!==State.ReadBlockLength&&e.error(new Error("unexpected end of data"))}},e,t??new CountQueuingStrategy({highWaterMark:1})),__privateAdd(this,_headerPromise),__privateSet(this,_headerPromise,c)}getHeader(){return __privateGet(this,_headerPromise)}}_headerPromise=new WeakMap;const getMultihashLength=e=>{const[,t]=decode(e),[r,n]=decode(e,t);return t+n+r},encodeHeader=e=>{const t=encode$j({version:1,roots:e}),r=encode(t.length),n=new Uint8Array(r.length+t.length);return n.set(r,0),n.set(t,r.length),n},encodeBlock=e=>{const t=encode(e.cid.bytes.length+e.bytes.length),r=new Uint8Array(t.length+e.cid.bytes.length+e.bytes.length);return r.set(t),r.set(e.cid.bytes,t.length),r.set(e.bytes,t.length+e.cid.bytes.length),r};class CARWriterStream extends TransformStream{constructor(e=[],t,r){super({start:t=>t.enqueue(encodeHeader(e)),transform:(e,t)=>t.enqueue(encodeBlock(e))},t,r)}}const SHARD_SIZE=133169152;class ShardingStream extends TransformStream{constructor(e={}){const t=e.shardSize??SHARD_SIZE,r=t-headerEncodingLength();let n=[],i=null,o=new DigestMap,a=null,s=0;super({async transform(e,t){null!=i&&null!=a&&(t.enqueue(await encodeCAR(i,a)),i=null,a=null);const c=blockHeaderEncodingLength(e),l=c+e.bytes.length;if(l>r)throw new Error(`block will cause CAR to exceed shard size: ${e.cid}`);n.length&&s+l>r&&(i=n,a=o,n=[],o=new DigestMap,s=0),n.push(e),o.set(e.cid.multihash,[headerEncodingLength()+s+c,e.bytes.length]),s+=l},async flush(r){null!=i&&null!=a&&r.enqueue(await encodeCAR(i,a));const c=n.at(-1);if(null==c)return;const l=e.rootCID??c.cid,u=headerEncodingLength(l);if(u+s>t){const e=u+s-t,i=[];let a=0;for(;a<e;){const e=n[n.length-1];if(n.pop(),o.delete(e.cid.multihash),i.unshift(e),a+=blockEncodingLength(e),n.length<1)throw new Error(`block will cause CAR to exceed shard size: ${e.cid}`)}r.enqueue(await encodeCAR(n,o)),a=0;const c=new DigestMap;for(const t of i){const e=blockHeaderEncodingLength(t);c.set(t.cid.multihash,[u+a+e,t.bytes.length]),a+=e+t.bytes.length}r.enqueue(await encodeCAR(i,c,l))}else{const e=u-headerEncodingLength();for(const t of o.values())t[0]+=e;r.enqueue(await encodeCAR(n,o,l))}}})}}const encodeCAR=async(e,t,r)=>Object.assign(await encode$1(e,r),{slices:t});async function uploadViaProxy(e){const t=new FormData;t.append("file",e,e.name);const r=await fetch("http://localhost:8787/upload",{method:"POST",body:t});if(!r.ok){const e=await r.text().catch(()=>"");throw new Error(`Proxy upload failed: ${r.status} ${r.statusText} ${e}`)}return r.json()}async function stripEXIF(e,t=!0){return t&&e.type.startsWith("image/")?new Promise(t=>{const r=new Image,n=new FileReader;n.onload=n=>{var i;r.onload=()=>{const n=document.createElement("canvas");n.width=r.width,n.height=r.height;const i=n.getContext("2d");i?(i.drawImage(r,0,0),n.toBlob(r=>{if(r){const n=new File([r],e.name,{type:"image/jpeg"});t(n)}else t(e)},"image/jpeg",.9)):t(e)},r.onerror=()=>t(e),r.src=null==(i=n.target)?void 0:i.result},n.onerror=()=>t(e),n.readAsDataURL(e)}):e}async function computePerceptualHash(e){return e.type.startsWith("image/")?new Promise(t=>{const r=new Image,n=new FileReader;n.onload=e=>{var n;r.onload=()=>{const e=document.createElement("canvas");e.width=9,e.height=8;const n=e.getContext("2d");if(!n)return void t("");n.drawImage(r,0,0,9,8);const i=n.getImageData(0,0,9,8).data;let o="";for(let t=0;t<8;t++)for(let e=0;e<8;e++){const r=4*(9*t+e),n=4*(9*t+e+1);o+=(i[r]+i[r+1]+i[r+2])/3>(i[n]+i[n+1]+i[n+2])/3?"1":"0"}const a=parseInt(o,2).toString(16).padStart(16,"0");t(a)},r.onerror=()=>t(""),r.src=null==(n=e.target)?void 0:n.result},n.onerror=()=>t(""),n.readAsDataURL(e)}):""}async function encryptFile(e){const t=await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt"]),r=await crypto.subtle.exportKey("raw",t),n=Array.from(new Uint8Array(r)).map(e=>e.toString(16).padStart(2,"0")).join(""),i=crypto.getRandomValues(new Uint8Array(12)),o=await e.arrayBuffer(),a=await crypto.subtle.encrypt({name:"AES-GCM",iv:i},t,o),s=new Uint8Array(i.length+a.byteLength);s.set(i),s.set(new Uint8Array(a),i.length);return{encryptedFile:new File([s],e.name+".encrypted",{type:"application/octet-stream"}),key:n}}async function uploadProof(e,t={}){const r=!1!==t.stripEXIF,n=t.private||!1,i=await computePerceptualHash(e);let o,a,s=await stripEXIF(e,r);if(n){const{encryptedFile:e,key:t}=await encryptFile(s);s=e,o=t}return a=await uploadViaProxy(s),{...a,pHash:i,encryptionKey:o}}new URL("https://up.storacha.network"),parse$1("did:web:up.storacha.network"),new URL("https://up.storacha.network"),parse$1("did:web:up.storacha.network"),new URL("https://up.storacha.network"),parse$1("did:web:up.storacha.network"),new URL("https://gateway.storacha.network"),parse$1("did:web:w3s.link"),new Set(abilitiesAsStrings);const ConfirmModal=({isOpen:e,onClose:t,onConfirm:r,title:n,children:i,confirmText:o="Confirm",cancelText:a="Cancel",loading:s=!1})=>e?jsxRuntimeExports.jsx("div",{className:"modal-overlay",onClick:t,children:jsxRuntimeExports.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[jsxRuntimeExports.jsx("div",{className:"modal-header",children:jsxRuntimeExports.jsx("h2",{className:"modal-title",children:n})}),jsxRuntimeExports.jsx("div",{className:"modal-body",children:i}),jsxRuntimeExports.jsxs("div",{className:"modal-footer",children:[jsxRuntimeExports.jsx("button",{onClick:t,disabled:s,className:"btn btn-secondary",children:a}),jsxRuntimeExports.jsx("button",{onClick:r,disabled:s,className:"btn btn-primary",children:s?"Processing...":o})]})]})}):null,MAX_MB=8,ActionFormNew=({provider:e})=>{const t=useNavigate(),[r,n]=reactExports.useState(""),[i,o]=reactExports.useState(null),[a,s]=reactExports.useState(!1),[c,l]=reactExports.useState(0),[u,d]=reactExports.useState(!1),[p,h]=reactExports.useState(!1),m=reactExports.useRef(null),[f,x]=reactExports.useState(0),[g,y]=reactExports.useState(""),[b,v]=reactExports.useState(""),[E,w]=reactExports.useState(""),[S,j]=reactExports.useState(""),[A,T]=reactExports.useState(""),[P,$]=reactExports.useState(""),[R,k]=reactExports.useState(null),[C,N]=reactExports.useState(!1),[D,_]=reactExports.useState(null),[O,I]=reactExports.useState(!1),[M,L]=reactExports.useState(""),[B,F]=reactExports.useState(!1),[V,U]=reactExports.useState(""),[z,W]=reactExports.useState(""),H=e=>{e&&e.size>1024*MAX_MB*1024?zt.error(`Max file size ${MAX_MB}MB`):o(e)};return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-cyan-50 to-green-50",children:jsxRuntimeExports.jsx("div",{className:"container-responsive py-12",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-4xl mx-auto space-y-8",children:[jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"text-center mb-12",children:[jsxRuntimeExports.jsx(motion.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"inline-block mb-4",children:jsxRuntimeExports.jsx(Leaf,{className:"w-16 h-16 text-emerald-500"})}),jsxRuntimeExports.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-emerald-600 to-cyan-600 bg-clip-text text-transparent mb-4",children:"Submit Eco-Action"}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"ðŸŒ¿ Share your positive environmental impact and earn Green Credit Tokens"})]}),jsxRuntimeExports.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!r.trim())return zt.error("Description is required");if(i&&i.size>1024*MAX_MB*1024)return zt.error(`Max file size ${MAX_MB}MB`);if(!g.trim())return zt.error("Methodology is required");if(!b.trim())return zt.error("Project label is required");if(!E.trim())return zt.error("Baseline label is required");if(!S.trim()||isNaN(Number(S))||Number(S)<=0)return zt.error("Valid quantity is required (grams CO2e)");s(!0),l(0);try{let e="";if(i){l(10);const{cid:t}=await uploadProof(i,{private:u});e=t,U(e),l(50)}let t="";if(R){const{cid:e}=await uploadProof(R);t=e,W(t)}l(70),s(!1),F(!0)}catch(t){zt.error(t.message??"Upload failed"),s(!1),l(0)}},className:"space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsxs("div",{className:"card-header",children:[jsxRuntimeExports.jsx("h2",{className:"card-title",children:"ðŸ“ Action Details"}),jsxRuntimeExports.jsx("p",{className:"card-description",children:"Describe your environmental action and its impact"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"What did you do?"}),jsxRuntimeExports.jsx("textarea",{className:"input resize-none",rows:4,placeholder:"Describe your eco-friendly action. For example: 'Planted 5 trees in the local park' or 'Organized a neighborhood clean-up event'",value:r,onChange:e=>n(e.target.value),required:!0}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Be specific so others can understand and verify your impact"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsxs("div",{className:"card-header",children:[jsxRuntimeExports.jsx("h2",{className:"card-title",children:"ðŸŒ¿ Carbon Credit Details"}),jsxRuntimeExports.jsx("p",{className:"card-description",children:"Provide technical details for carbon credit calculation"})]}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Type of Credit"}),jsxRuntimeExports.jsxs("select",{className:"input",value:f,onChange:e=>x(Number(e.target.value)),required:!0,children:[jsxRuntimeExports.jsx("option",{value:0,children:"Reduction (cutting emissions)"}),jsxRuntimeExports.jsx("option",{value:1,children:"Removal (taking CO2 out of the air)"}),jsxRuntimeExports.jsx("option",{value:2,children:"Avoidance (preventing future emissions)"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose the type that best matches your action"})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Impact Amount (grams CO2e)"}),jsxRuntimeExports.jsx("input",{className:"input",type:"number",placeholder:"e.g., 500000 (0.5 tons)",value:S,onChange:e=>j(e.target.value),required:!0}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How much CO2 equivalent did you offset? 1 ton = 1,000,000 grams"})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Methodology"}),jsxRuntimeExports.jsx("input",{className:"input",type:"text",placeholder:"e.g., Tree Planting v2.0",value:g,onChange:e=>y(e.target.value),required:!0}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"The standard or method used to calculate your impact"})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Project Name"}),jsxRuntimeExports.jsx("input",{className:"input",type:"text",placeholder:"e.g., Local Park Restoration",value:b,onChange:e=>v(e.target.value),required:!0}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"A unique name for your project"})]}),jsxRuntimeExports.jsxs("div",{className:"form-group md:col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Baseline"}),jsxRuntimeExports.jsx("input",{className:"input",type:"text",placeholder:"e.g., Standard Urban Baseline",value:E,onChange:e=>w(e.target.value),required:!0}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"The reference point for measuring your impact"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsx("div",{className:"card-header",children:jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>N(!C),className:"flex items-center justify-between w-full text-left",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"card-title",children:"âš™ï¸ Advanced Options"}),jsxRuntimeExports.jsx("p",{className:"card-description",children:"Optional technical parameters for detailed carbon accounting"})]}),jsxRuntimeExports.jsx("span",{className:"text-xl",children:C?"â–¼":"â–¶"})]})}),C&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Uncertainty (optional)"}),jsxRuntimeExports.jsx("input",{className:"input",type:"number",placeholder:"e.g., 500 (5%)",value:A,onChange:e=>T(e.target.value)}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Measurement uncertainty in basis points (100 = 1%)"})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Durability (years, for removals)"}),jsxRuntimeExports.jsx("input",{className:"input",type:"number",placeholder:"e.g., 100",value:P,onChange:e=>$(e.target.value)}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How long will the CO2 stay removed?"})]})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Extra Data File (optional)"}),jsxRuntimeExports.jsx("input",{className:"input",type:"file",accept:".json,application/json",onChange:e=>{var t;return k((null==(t=e.target.files)?void 0:t[0])??null)}}),R&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Selected: ",R.name]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"JSON file with additional technical details"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsxs("div",{className:"card-header",children:[jsxRuntimeExports.jsx("h2",{className:"card-title",children:"ðŸ“¸ Proof & Submission"}),jsxRuntimeExports.jsx("p",{className:"card-description",children:"Upload evidence and submit your action for verification"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Photo Proof (optional but recommended)"}),jsxRuntimeExports.jsx("div",{className:"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all duration-200 "+(p?"border-primary bg-primary-bg scale-105":i?"border-success bg-success-bg":"border-gray-300 hover:border-primary hover:bg-primary-bg"),onDragOver:e=>{e.preventDefault(),h(!0)},onDragLeave:e=>{e.preventDefault(),h(!1)},onDrop:e=>{e.preventDefault(),h(!1);const t=e.dataTransfer.files[0];t&&H(t)},onClick:()=>{var e;return null==(e=m.current)?void 0:e.click()},children:i?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"relative inline-block",children:[jsxRuntimeExports.jsx("img",{src:URL.createObjectURL(i),alt:"Preview",className:"max-w-full h-48 object-cover rounded-lg mx-auto shadow-lg"}),jsxRuntimeExports.jsx("div",{className:"absolute top-2 right-2 bg-success text-white rounded-full p-1",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-900",children:i.name}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500",children:[(i.size/1024/1024).toFixed(2)," MB â€¢ Ready to upload"]})]})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"text-6xl text-gray-400",children:"ðŸ“¸"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Drag & drop a photo here, or click to select"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["PNG, JPEG, WebP up to ",MAX_MB,"MB"]})]}),jsxRuntimeExports.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-primary font-medium",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),"Choose File"]})]})}),jsxRuntimeExports.jsx("input",{ref:m,type:"file",accept:"image/png,image/jpeg,image/webp",onChange:e=>{var t;return H((null==(t=e.target.files)?void 0:t[0])??null)},className:"hidden"}),i&&jsxRuntimeExports.jsxs("div",{className:"mt-4 flex items-center gap-3 p-4 bg-gray-50 rounded-lg",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:"private-proof",checked:u,onChange:e=>d(e.target.checked),className:"rounded border-gray-300 text-primary focus:ring-primary"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"private-proof",className:"text-sm font-medium text-gray-700",children:"Keep proof private (encrypted)"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"Only verifiers can access encrypted proofs"})]})]}),a&&c>0&&jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Submitting Action"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-500",children:[c,"%"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:jsxRuntimeExports.jsx("div",{className:"bg-primary h-3 rounded-full transition-all duration-500 ease-out",style:{width:`${c}%`}})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-2",children:c<50?"ðŸ“¤ Uploading proof...":c<70?"âš™ï¸ Processing data...":c<100?"ðŸ”— Submitting to blockchain...":"âœ… Action submitted!"})]})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Gas Estimation"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("button",{type:"button",onClick:async()=>{if(r.trim()&&g.trim()&&b.trim()&&E.trim()&&S.trim()){I(!0);try{const{verifierWithSigner:t}=await getContracts(e,!0),n=(await e.getFeeData()).gasPrice||parseUnits("20","gwei"),i=id$2(g.trim()),o=id$2(b.trim()),a=id$2(E.trim()),s=await t.submitActionV2.estimateGas(r.trim(),V||"",f,i,o,a,S.trim(),A.trim()||"0",P.trim()||"0",z||""),c=s*n;_({gasLimit:s.toString(),gasPrice:formatUnits(n,"gwei"),totalCost:formatEther(c)});const l=await e.getNetwork();L(l.name),zt.success("Gas estimate calculated successfully")}catch(e3){zt.error(e3.message??"Gas estimation failed"),_(null)}finally{I(!1)}}else zt.error("Please fill in all required fields before estimating gas")},disabled:O||a,className:"btn btn-outline flex items-center gap-2",children:[jsxRuntimeExports.jsx(Zap,{className:"w-4 h-4"}),O?"Estimating...":"Estimate Gas Cost"]}),D&&jsxRuntimeExports.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Estimated Transaction Cost"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Gas Limit:"}),jsxRuntimeExports.jsx("span",{className:"ml-2 font-mono",children:D.gasLimit})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Gas Price:"}),jsxRuntimeExports.jsxs("span",{className:"ml-2 font-mono",children:[Number(D.gasPrice).toFixed(2)," gwei"]})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Total Cost:"}),jsxRuntimeExports.jsxs("span",{className:"ml-2 font-mono font-semibold text-blue-900",children:[Number(D.totalCost).toFixed(6)," ETH"]}),M&&jsxRuntimeExports.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["on ",M]})]})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"This is an estimate. Actual costs may vary based on network conditions."})]})]})]}),!B&&jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>t(-1),className:"btn btn-secondary flex-1",children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:a,className:"btn btn-primary btn-lg flex-1",children:a?"ðŸŒ¿ Submitting...":"ðŸš€ Submit Action"})]})]})]})]}),jsxRuntimeExports.jsxs(ConfirmModal,{isOpen:B,onClose:()=>F(!1),onConfirm:async()=>{F(!1),s(!0),l(70);try{const{verifierWithSigner:i}=await getContracts(e,!0),a=id$2(g.trim()),s=id$2(b.trim()),c=id$2(E.trim()),u=await i.submitActionV2(r.trim(),V,f,a,s,c,S.trim(),A.trim()||"0",P.trim()||"0",z);await u.wait(),l(100),n(""),o(null),d(!1),y(""),v(""),w(""),j(""),T(""),$(""),k(null),U(""),W(""),_(null),zt.success("Action submitted!"),t("/actions")}catch(e3){zt.error(e3.message??"Submit failed")}finally{s(!1),l(0)}},title:"Confirm Submission",confirmText:"Submit Action",loading:a,children:[jsxRuntimeExports.jsx("p",{children:"Are you sure you want to submit this eco-action?"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"This will upload your proof to IPFS and submit the action to the blockchain."})]})]})})})};async function resolveEns(e){try{const t=new JsonRpcProvider("https://eth.llamarpc.com");return await t.lookupAddress(e)}catch(t){return null}}const ActionsListNew=({provider:e})=>{const[t,r]=reactExports.useState([]),[n,i]=reactExports.useState(!0),[o,a]=reactExports.useState("all"),s=useLocation(),c=reactExports.useCallback(async()=>{i(!0);try{const{verifier:t}=await getContracts(e),n=await t.actionCount(),i=Number(n>50n?50n:n),o=Number(n)-i,a=[];for(let e=o;e<Number(n);e++){const r=await t.actions(e),n=void 0!==r.proofCid,i=String(r.description);let o="";if(n)o=r.proofCid;else{const e=i.match(/proof:\s*ipfs:\/\/([^\s|]+)/i);o=(null==e?void 0:e[1])||""}const s={id:e,user:r.user,description:i,proof:o,verified:Boolean(r.verified),timestamp:Number(r.timestamp),reward:BigInt(r.reward??0n),status:Number(r.status??0),verifiedAt:Number(r.verifiedAt??0)};if(USE_V2&&void 0!==r.creditType&&(s.creditType=Number(r.creditType),s.methodologyId=r.methodologyId,s.projectId=r.projectId,s.baselineId=r.baselineId,s.quantity=BigInt(r.quantity??0n),s.uncertaintyBps=BigInt(r.uncertaintyBps??0n),s.durabilityYears=BigInt(r.durabilityYears??0n),s.metadataCid=r.metadataCid,s.attestationUID=r.attestationUID),s.verified)try{const r=await t.verifierOfAction(e);if(s.verifier=r,r&&"0x0000000000000000000000000000000000000000"!==r){const e=await resolveEns(r);s.verifierEns=e||void 0}}catch(e3){}a.push(s)}a.reverse(),r(a)}catch(t){}finally{i(!1)}},[e]);reactExports.useEffect(()=>{c()},[c]),reactExports.useEffect(()=>{"/actions"===s.pathname&&c()},[s.pathname,c]);const l=t.filter(e=>{switch(o){case"verified":return e.verified;case"pending":return!e.verified;default:return!0}});return jsxRuntimeExports.jsx("div",{className:"container-responsive",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"ðŸ“‹ Actions List"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"All eco-actions submitted on-chain with verification status"})]}),jsxRuntimeExports.jsx("button",{onClick:c,disabled:n,className:"btn btn-secondary",children:n?"ðŸ”„ Refreshing...":"ðŸ”„ Refresh"})]}),jsxRuntimeExports.jsx("div",{className:"flex-center",children:jsxRuntimeExports.jsx("div",{className:"inline-flex bg-gray-100 rounded-lg p-1",children:[{key:"all",label:"All Actions"},{key:"verified",label:"Verified Only"},{key:"pending",label:"Pending Only"}].map(({key:e,label:t})=>jsxRuntimeExports.jsx("button",{onClick:()=>a(e),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors "+(o===e?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:t},e))})}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:n?jsxRuntimeExports.jsx("div",{className:"space-y-4",children:[...Array(5)].map((e,t)=>jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsxs("div",{className:"flex-between mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"loading-skeleton h-6 w-20"}),jsxRuntimeExports.jsx("div",{className:"loading-skeleton h-6 w-16"}),jsxRuntimeExports.jsx("div",{className:"loading-skeleton h-6 w-12"})]}),jsxRuntimeExports.jsx("div",{className:"loading-skeleton h-4 w-24"})]}),jsxRuntimeExports.jsx("div",{className:"loading-skeleton h-4 w-full mb-3"}),jsxRuntimeExports.jsx("div",{className:"loading-skeleton h-16 w-full mb-3"}),jsxRuntimeExports.jsxs("div",{className:"flex-between",children:[jsxRuntimeExports.jsx("div",{className:"loading-skeleton h-4 w-20"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("div",{className:"loading-skeleton h-4 w-16"}),jsxRuntimeExports.jsx("div",{className:"loading-skeleton h-4 w-20"})]})]})]},t))}):0===l.length?jsxRuntimeExports.jsx("div",{className:"card",children:jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx("div",{className:"text-6xl mb-4",children:"verified"===o?"âœ…":"pending"===o?"â³":"ðŸŒ±"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"verified"===o?"No verified actions yet":"pending"===o?"No pending actions":"No actions yet"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6",children:"verified"===o?"Verified actions will appear here once approved.":"pending"===o?"Pending actions are waiting for verification.":"Be the first to submit an environmental action!"}),"all"===o&&jsxRuntimeExports.jsx("button",{className:"btn btn-primary btn-lg",children:"Submit Your Action"})]})}):jsxRuntimeExports.jsx("div",{className:"space-y-4",children:l.map(e=>{var t,r;const n=void 0===(i=e.creditType)?null:["Reduction","Removal","Avoidance"][i]||"Unknown";var i,o;return jsxRuntimeExports.jsxs("div",{className:"card hover:shadow-md transition-shadow animate-fade-in",children:[jsxRuntimeExports.jsxs("div",{className:"flex-between mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Action #",e.id]}),(o=e,o.verified?2===o.status?jsxRuntimeExports.jsx("span",{className:"status-chip status-verified",children:"ðŸ† Finalized"}):jsxRuntimeExports.jsx("span",{className:"status-chip status-verified",children:"âœ… Verified"}):jsxRuntimeExports.jsx("span",{className:"status-chip status-pending",children:"â³ Pending"})),n&&jsxRuntimeExports.jsx("span",{className:"status-chip status-info",children:n}),e.verified&&e.reward>0n&&jsxRuntimeExports.jsxs("span",{className:"text-sm font-bold text-success bg-success-bg px-2 py-1 rounded",children:["+",(Number(e.reward)/1e18).toFixed(2)," GCT"]})]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500",children:new Date(1e3*e.timestamp).toLocaleString()})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 mb-4 leading-relaxed",children:e.description}),e.verified&&e.verifier&&jsxRuntimeExports.jsxs("div",{className:"bg-info-bg border border-info rounded-lg p-4 mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("div",{className:"text-info text-lg",children:"âœ…"}),jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-info",children:"Verified by"})]}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-700",children:[e.verifierEns?jsxRuntimeExports.jsx("span",{className:"font-mono text-info font-medium",children:e.verifierEns}):jsxRuntimeExports.jsxs("span",{className:"font-mono text-info font-medium",children:[null==(t=e.verifier)?void 0:t.slice(0,8),"...",null==(r=e.verifier)?void 0:r.slice(-6)]}),e.verifiedAt>0&&jsxRuntimeExports.jsxs("span",{className:"text-gray-600 ml-2",children:["on ",new Date(1e3*e.verifiedAt).toLocaleString()]})]})]}),void 0!==e.quantity&&e.quantity>0n&&jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"ðŸ“Š Carbon Credit Details"}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Quantity:"}),jsxRuntimeExports.jsxs("span",{className:"font-medium",children:[Number(e.quantity).toLocaleString()," gCO2e"]})]}),void 0!==e.uncertaintyBps&&e.uncertaintyBps>0n&&jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Uncertainty:"}),jsxRuntimeExports.jsxs("span",{className:"font-medium",children:[Number(e.uncertaintyBps)/100,"%"]})]}),void 0!==e.durabilityYears&&e.durabilityYears>0n&&jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Durability:"}),jsxRuntimeExports.jsxs("span",{className:"font-medium",children:[Number(e.durabilityYears)," years"]})]}),e.methodologyId&&"0x0000000000000000000000000000000000000000000000000000000000000000"!==e.methodologyId&&jsxRuntimeExports.jsxs("div",{className:"flex justify-between md:col-span-2",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Methodology ID:"}),jsxRuntimeExports.jsxs("span",{className:"font-mono text-xs font-medium",children:[e.methodologyId.slice(0,16),"..."]})]}),e.baselineId&&"0x0000000000000000000000000000000000000000000000000000000000000000"!==e.baselineId&&jsxRuntimeExports.jsxs("div",{className:"flex justify-between md:col-span-2",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Baseline ID:"}),jsxRuntimeExports.jsxs("span",{className:"font-mono text-xs font-medium",children:[e.baselineId.slice(0,16),"..."]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-between pt-4 border-t border-gray-200",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-500",children:"By:"}),jsxRuntimeExports.jsxs("span",{className:"font-mono text-sm text-gray-700",children:[e.user.slice(0,8),"...",e.user.slice(-6)]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[e.proof&&jsxRuntimeExports.jsx("a",{className:"text-primary hover:text-primary-hover text-sm font-medium hover:underline",href:`https://w3s.link/ipfs/${e.proof}`,target:"_blank",rel:"noreferrer",children:"ðŸ“Ž View Proof"}),e.metadataCid&&jsxRuntimeExports.jsx("a",{className:"text-primary hover:text-primary-hover text-sm font-medium hover:underline",href:`https://w3s.link/ipfs/${e.metadataCid}`,target:"_blank",rel:"noreferrer",children:"ðŸ“„ Metadata"}),e.attestationUID&&"0x0000000000000000000000000000000000000000000000000000000000000000"!==e.attestationUID&&jsxRuntimeExports.jsx("span",{className:"text-xs text-purple-600 font-medium",title:e.attestationUID,children:"ðŸ” Attested"}),jsxRuntimeExports.jsx("a",{href:`https://moonbase.moonscan.io/address/${e.user}`,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary-hover text-sm font-medium hover:underline",children:"View on MoonScan â†—"})]})]})]},e.id)})})})]})})},AdminVerify=({provider:e})=>{const[t,r]=reactExports.useState(0),[n,i]=reactExports.useState(0),[o,a]=reactExports.useState("10"),[s,c]=reactExports.useState(!1),[l,u]=reactExports.useState(!1),[d,p]=reactExports.useState("0.01"),[h,m]=reactExports.useState("0"),[f,x]=reactExports.useState(""),[g,y]=reactExports.useState(0),[b,v]=reactExports.useState(""),[E,w]=reactExports.useState(""),[S,j]=reactExports.useState(""),[A,T]=reactExports.useState(0),[P,$]=reactExports.useState("0"),[R,k]=reactExports.useState("0"),[C,N]=reactExports.useState("0"),[D,_]=reactExports.useState("0");reactExports.useEffect(()=>{(async()=>{const{verifier:t}=await getContracts(e),n=await t.getActionCount();r(Number(n));const i=await e.getSigner(),o=await i.getAddress(),a=await t.owner();c(o.toLowerCase()===a.toLowerCase());try{const e=await t.challengeWindowSecs();T(Number(e));const r=await t.stakeBalance(o);$(formatEther(r));const n=await t.submitStakeWei();k(formatEther(n));const i=await t.verifyStakeWei();N(formatEther(i));const a=await t.challengeStakeWei();_(formatEther(a))}catch(e3){}})().catch(console.error)},[e]);const O=async t=>{u(!0);try{const{verifierWithSigner:r}=await getContracts(e,!0),i=await r.resolveChallenge(n,g,t,b||"0x0000000000000000000000000000000000000000");await i.wait(),zt.success("Challenge "+(t?"upheld":"dismissed"))}catch(e3){zt.error(e3.message??"Resolve failed")}finally{u(!1)}};return s?jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800",children:"ðŸ” Admin: Verify Actions"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Review and verify eco-actions to reward contributors"}),jsxRuntimeExports.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Phase 2 Configuration"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Challenge Window:"}),jsxRuntimeExports.jsxs("p",{className:"font-medium",children:[Math.round(A/3600),"h"]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Submit Stake:"}),jsxRuntimeExports.jsxs("p",{className:"font-medium",children:[R," GCT"]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Verify Stake:"}),jsxRuntimeExports.jsxs("p",{className:"font-medium",children:[C," GCT"]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Challenge Stake:"}),jsxRuntimeExports.jsxs("p",{className:"font-medium",children:[D," GCT"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-2",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600 text-xs",children:"Your Stake Balance:"}),jsxRuntimeExports.jsxs("p",{className:"font-semibold text-green-600",children:[P," GCT"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid sm:grid-cols-3 gap-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Action ID"}),jsxRuntimeExports.jsx("input",{className:"input",type:"number",min:0,max:Math.max(0,t-1),value:n,onChange:e=>i(Number(e.target.value)),placeholder:"0"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Range: 0 - ",Math.max(0,t-1)]})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Reward Amount"}),jsxRuntimeExports.jsx("input",{className:"input",type:"number",step:"0.01",min:"0",value:o,onChange:e=>a(e.target.value),placeholder:"10.00"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"GCT tokens to award"})]}),jsxRuntimeExports.jsx("div",{className:"flex items-end",children:jsxRuntimeExports.jsx("button",{onClick:async()=>{u(!0);try{const{verifierWithSigner:t}=await getContracts(e,!0),r=parseUnits(o||"0",18),i=await t.verifyAction(n,r);await i.wait(),zt.success("Action verified")}catch(e3){zt.error(e3.message??"Verify failed")}finally{u(!1)}},disabled:l,className:"btn btn-primary w-full",children:l?"ðŸ”„ Verifying...":"âœ… Verify & Reward"})})]}),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"border-t pt-4 mb-6",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold mb-3 text-gray-700",children:"Phase 2: Finalize & Challenge"}),jsxRuntimeExports.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("button",{onClick:async()=>{u(!0);try{const{verifierWithSigner:t}=await getContracts(e,!0),r=await t.finalizeAction(n);await r.wait(),zt.success("Action finalized")}catch(e3){zt.error(e3.message??"Finalize failed")}finally{u(!1)}},disabled:l,className:"btn btn-success w-full mb-3",children:l?"ðŸ”„ Finalizing...":"âœ”ï¸ Finalize Action"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"Mint rewards after challenge window"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{className:"input mb-2",type:"text",value:f,onChange:e=>x(e.target.value),placeholder:"Evidence CID"}),jsxRuntimeExports.jsx("button",{onClick:async()=>{u(!0);try{const{verifierWithSigner:t}=await getContracts(e,!0),r=await t.challengeAction(n,f);await r.wait(),zt.success("Action challenged")}catch(e3){zt.error(e3.message??"Challenge failed")}finally{u(!1)}},disabled:l,className:"btn btn-warning w-full",children:l?"ðŸ”„ Challenging...":"âš ï¸ Challenge Action"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"border-t pt-4 mb-6",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold mb-3 text-gray-700",children:"Resolve Challenge"}),jsxRuntimeExports.jsxs("div",{className:"grid sm:grid-cols-3 gap-3",children:[jsxRuntimeExports.jsx("input",{className:"input",type:"number",min:0,value:g,onChange:e=>y(Number(e.target.value)),placeholder:"Challenge Index"}),jsxRuntimeExports.jsx("input",{className:"input",type:"text",value:b,onChange:e=>v(e.target.value),placeholder:"Slash to address (optional)"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>O(!0),disabled:l,className:"btn btn-danger flex-1",children:"Uphold"}),jsxRuntimeExports.jsx("button",{onClick:()=>O(!1),disabled:l,className:"btn btn-secondary flex-1",children:"Dismiss"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"border-t pt-4 mb-6",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold mb-3 text-gray-700",children:"Stake Management"}),jsxRuntimeExports.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"label text-sm",children:"Deposit Stake"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{className:"input",type:"number",step:"0.01",min:"0",value:d,onChange:e=>p(e.target.value),placeholder:"0.01"}),jsxRuntimeExports.jsx("button",{onClick:async()=>{u(!0);try{const{verifierWithSigner:t,tokenWithSigner:r}=await getContracts(e,!0),n=parseUnits(d||"0",18),i=await r.approve(await t.getAddress(),n);await i.wait();const o=await t.depositStake(n);await o.wait(),zt.success("Stake deposited");const a=await e.getSigner(),s=await a.getAddress(),c=await t.stakeBalance(s);$(formatEther(c))}catch(e3){zt.error(e3.message??"Deposit failed")}finally{u(!1)}},disabled:l,className:"btn btn-primary",children:"Deposit"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"label text-sm",children:"Withdraw Stake"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{className:"input",type:"number",step:"0.01",min:"0",value:h,onChange:e=>m(e.target.value),placeholder:"0.01"}),jsxRuntimeExports.jsx("button",{onClick:async()=>{u(!0);try{const{verifierWithSigner:t}=await getContracts(e,!0),r=parseUnits(h||"0",18),n=await t.withdrawStake(r);await n.wait(),zt.success("Stake withdrawn");const i=await e.getSigner(),o=await i.getAddress(),a=await t.stakeBalance(o);$(formatEther(a))}catch(e3){zt.error(e3.message??"Withdraw failed")}finally{u(!1)}},disabled:l,className:"btn btn-secondary",children:"Withdraw"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"border-t pt-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold mb-3 text-gray-700",children:"Oracle Report"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{className:"input flex-1",type:"text",value:E,onChange:e=>w(e.target.value),placeholder:"Report CID (IPFS)"}),jsxRuntimeExports.jsx("button",{onClick:async()=>{u(!0);try{const{verifierWithSigner:t}=await getContracts(e,!0),r=await t.attachOracleReport(n,E);await r.wait(),zt.success("Oracle report attached")}catch(e3){zt.error(e3.message??"Attach failed")}finally{u(!1)}},disabled:l,className:"btn btn-info",children:l?"ðŸ”„ Attaching...":"ðŸ“Ž Attach"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Attach IPFS CID with audit data (NDVI, LCA, etc.)"})]}),jsxRuntimeExports.jsxs("div",{className:"border-t pt-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold mb-3 text-gray-700",children:"Attestation UID"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{className:"input flex-1",type:"text",value:S,onChange:e=>j(e.target.value),placeholder:"Attestation UID (bytes32 or hex string)"}),jsxRuntimeExports.jsx("button",{onClick:async()=>{u(!0);try{const{verifierWithSigner:t}=await getContracts(e,!0),r=S.startsWith("0x")?S.padEnd(66,"0"):"0x"+S.slice(0,64).padEnd(64,"0"),i=await t.setAttestation(n,r);await i.wait(),zt.success("Attestation UID attached")}catch(e3){zt.error(e3.message??"Set attestation failed")}finally{u(!1)}},disabled:l,className:"btn btn-info",children:l?"ðŸ”„ Setting...":"ðŸ”— Attach UID"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Link to external attestation (e.g., EAS, Sign Protocol)"})]})]})]}):null},AdminRegistry=({provider:e})=>{const[t,r]=reactExports.useState(""),[n,i]=reactExports.useState(""),[o,a]=reactExports.useState(""),[s,c]=reactExports.useState(""),[l,u]=reactExports.useState(!0),[d,p]=reactExports.useState(!1),[h,m]=reactExports.useState(""),[f,x]=reactExports.useState(""),[g,y]=reactExports.useState(""),[b,v]=reactExports.useState(""),[E,w]=reactExports.useState(!0),[S,j]=reactExports.useState(!1);return jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 space-y-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold mb-2 text-gray-800",children:"ðŸ”§ Registry Administration"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Manage methodology and baseline registry entries (owner only)"})]}),jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800",children:"ðŸ“š Methodology Registry"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Upsert methodology entries. The label will be hashed to create the unique ID."}),jsxRuntimeExports.jsxs("form",{onSubmit:async d=>{if(d.preventDefault(),!t.trim()||!n.trim()||!o.trim())return zt.error("All fields are required");p(!0);try{const{methodologyRegistryWithSigner:d}=await getContracts(e,!0);if(!d)return zt.error("Methodology registry not configured");const p=id$2(t.trim()),h=await d.upsert(p,n.trim(),o.trim(),s.trim()||"",l);await h.wait(),zt.success(`Methodology upserted: ${t}`),r(""),i(""),a(""),c(""),u(!0)}catch(h){zt.error(h.message??"Upsert failed")}finally{p(!1)}},className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Methodology Label (for ID generation)"}),jsxRuntimeExports.jsx("input",{className:"input",type:"text",placeholder:"e.g., Cookstove v1.2",value:t,onChange:e=>r(e.target.value),required:!0}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This will be hashed with keccak256 to create the ID"})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Name"}),jsxRuntimeExports.jsx("input",{className:"input",type:"text",placeholder:"e.g., Clean Cookstove Distribution",value:n,onChange:e=>i(e.target.value),required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Version"}),jsxRuntimeExports.jsx("input",{className:"input",type:"text",placeholder:"e.g., v1.2",value:o,onChange:e=>a(e.target.value),required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"IPFS CID (optional)"}),jsxRuntimeExports.jsx("input",{className:"input",type:"text",placeholder:"e.g., bafkreiexample123...",value:s,onChange:e=>c(e.target.value)}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"IPFS content identifier for methodology document"})]}),jsxRuntimeExports.jsx("div",{className:"form-group",children:jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:l,onChange:e=>u(e.target.checked)}),jsxRuntimeExports.jsx("span",{className:"label",children:"Active"})]})}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:d,className:"btn btn-primary w-full",children:d?"â³ Upserting...":"ðŸ’¾ Upsert Methodology"})]})]}),jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800",children:"ðŸ“Š Baseline Registry"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Upsert baseline entries. The label will be hashed to create the unique ID."}),jsxRuntimeExports.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),!h.trim()||!f.trim()||!g.trim())return zt.error("All fields are required");j(!0);try{const{baselineRegistryWithSigner:t}=await getContracts(e,!0);if(!t)return zt.error("Baseline registry not configured");const r=id$2(h.trim()),n=id$2(f.trim()),i=await t.upsert(r,n,g.trim(),b.trim()||"",E);await i.wait(),zt.success(`Baseline upserted: ${h}`),m(""),x(""),y(""),v(""),w(!0)}catch(r){zt.error(r.message??"Upsert failed")}finally{j(!1)}},className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Baseline Label (for ID generation)"}),jsxRuntimeExports.jsx("input",{className:"input",type:"text",placeholder:"e.g., Baseline Kenya 001 v1",value:h,onChange:e=>m(e.target.value),required:!0}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This will be hashed with keccak256 to create the ID"})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Project Label (for project ID generation)"}),jsxRuntimeExports.jsx("input",{className:"input",type:"text",placeholder:"e.g., Project Kenya 001",value:f,onChange:e=>x(e.target.value),required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Version"}),jsxRuntimeExports.jsx("input",{className:"input",type:"text",placeholder:"e.g., v1.0",value:g,onChange:e=>y(e.target.value),required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"IPFS CID (optional)"}),jsxRuntimeExports.jsx("input",{className:"input",type:"text",placeholder:"e.g., bafkreiexample456...",value:b,onChange:e=>v(e.target.value)}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"IPFS content identifier for baseline document"})]}),jsxRuntimeExports.jsx("div",{className:"form-group",children:jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:E,onChange:e=>w(e.target.checked)}),jsxRuntimeExports.jsx("span",{className:"label",children:"Active"})]})}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:S,className:"btn btn-primary w-full",children:S?"â³ Upserting...":"ðŸ’¾ Upsert Baseline"})]})]})]})},AdminReputation=({provider:e})=>{const[t,r]=reactExports.useState(!1),[n,i]=reactExports.useState(!1),[o,a]=reactExports.useState(""),[s,c]=reactExports.useState(""),[l,u]=reactExports.useState("3"),[d,p]=reactExports.useState(""),[h,m]=reactExports.useState(""),[f,x]=reactExports.useState(""),[g,y]=reactExports.useState("increase"),[b,v]=reactExports.useState([]);reactExports.useEffect(()=>{E()},[e]);const E=async()=>{try{const{verifierBadgeSBT:t}=await getContracts(e,!1);if(!t)return;const n=await e.getSigner(),i=await n.getAddress(),o=await t.owner();r(i.toLowerCase()===o.toLowerCase())}catch(t){}},w=async()=>{if(h&&f){i(!0);try{const{verifierBadgeSBTWithSigner:t}=await getContracts(e,!0);if(!t)return void zt.error("VerifierBadgeSBT contract not configured");const r=parseInt(f);if(r<=0)return void zt.error("Amount must be positive");const n="increase"===g?await t.increaseReputation(h,r):await t.decreaseReputation(h,r);zt.loading(("increase"===g?"Increasing":"Decreasing")+" reputation...",{id:"rep"}),await n.wait(),zt.success(`Reputation ${"increase"===g?"increased":"decreased"} successfully!`,{id:"rep"}),m(""),x(""),await S()}catch(t){zt.error((null==t?void 0:t.reason)||(null==t?void 0:t.message)||"Failed to adjust reputation")}finally{i(!1)}}else zt.error("Address and amount are required")},S=async()=>{try{const{verifierBadgeSBT:t,verifier:r}=await getContracts(e,!1);if(!t||!r)return;v([])}catch(t){}};return t?jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold mb-6 text-[var(--primary-green)]",children:"ðŸ‘¤ Verifier Reputation Management"}),jsxRuntimeExports.jsxs("div",{className:"card mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-4",children:"ðŸ… Mint Verifier Badge"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2",children:"Verifier Address"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"0x...",value:o,onChange:e=>a(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2",children:"Token ID"}),jsxRuntimeExports.jsx("input",{type:"number",placeholder:"1",value:s,onChange:e=>c(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2",children:"Badge Level (1-10)"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:"10",value:l,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800"})]}),jsxRuntimeExports.jsx("button",{onClick:async()=>{if(o&&s&&l){i(!0);try{const{verifierBadgeSBTWithSigner:t}=await getContracts(e,!0);if(!t)return void zt.error("VerifierBadgeSBT contract not configured");const r=await t.mint(o,s,parseInt(l));zt.loading("Minting badge...",{id:"mint"}),await r.wait(),zt.success("Badge minted successfully!",{id:"mint"}),a(""),c(""),u("3"),await S()}catch(t){zt.error((null==t?void 0:t.reason)||(null==t?void 0:t.message)||"Failed to mint badge")}finally{i(!1)}}else zt.error("All fields are required")},disabled:n,className:"btn-primary w-full",children:n?"Processing...":"Mint Badge"})]})]}),jsxRuntimeExports.jsxs("div",{className:"card mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-4",children:"ðŸš« Revoke Badge"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2",children:"Token ID"}),jsxRuntimeExports.jsx("input",{type:"number",placeholder:"Token ID to revoke",value:d,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800"})]}),jsxRuntimeExports.jsx("button",{onClick:async()=>{if(d){i(!0);try{const{verifierBadgeSBTWithSigner:t}=await getContracts(e,!0);if(!t)return void zt.error("VerifierBadgeSBT contract not configured");const r=await t.revoke(d);zt.loading("Revoking badge...",{id:"revoke"}),await r.wait(),zt.success("Badge revoked successfully!",{id:"revoke"}),p(""),await S()}catch(t){zt.error((null==t?void 0:t.reason)||(null==t?void 0:t.message)||"Failed to revoke badge")}finally{i(!1)}}else zt.error("Token ID is required")},disabled:n,className:"btn-secondary w-full",children:n?"Processing...":"Revoke Badge"})]})]}),jsxRuntimeExports.jsxs("div",{className:"card mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-4",children:"â­ Adjust Reputation"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2",children:"Verifier Address"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"0x...",value:h,onChange:e=>m(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2",children:"Amount (positive integer)"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",placeholder:"100",value:f,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{y("increase"),w()},disabled:n,className:"btn-primary flex-1",children:n?"Processing...":"âž• Increase"}),jsxRuntimeExports.jsx("button",{onClick:()=>{y("decrease"),w()},disabled:n,className:"btn-secondary flex-1",children:n?"Processing...":"âž– Decrease"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-4",children:"ðŸ” Check Badge & Reputation"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2",children:"Verifier Address"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"0x... (can reuse address from above)",value:h,onChange:e=>m(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800"})]}),jsxRuntimeExports.jsx("button",{onClick:async()=>{if(h)try{const{verifierBadgeSBT:t}=await getContracts(e,!1);if(!t)return void zt.error("VerifierBadgeSBT contract not configured");const r=await t.tokenOfOwner(h),n=await t.reputationOf(h);if(0n===r)zt.error("Address has no badge");else{const e=await t.levelOf(r);zt.success(`Badge: Level ${e}, Reputation: ${n.toString()}`)}}catch(t){zt.error((null==t?void 0:t.message)||"Failed to check badge")}else zt.error("Enter an address to check")},className:"btn-secondary w-full",children:"Check Status"})]})]}),jsxRuntimeExports.jsxs("div",{className:"card mt-6 bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold mb-2",children:"ðŸ’¡ Notes"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-700 dark:text-gray-300",children:[jsxRuntimeExports.jsx("li",{children:"Badges are soulbound (non-transferable) NFTs"}),jsxRuntimeExports.jsx("li",{children:"Each address can only have one badge"}),jsxRuntimeExports.jsx("li",{children:"Reputation scores can be positive or negative"}),jsxRuntimeExports.jsx("li",{children:"Reputation adjustments are logged on-chain for transparency"}),jsxRuntimeExports.jsx("li",{children:"Token IDs must be unique across all badges"})]})]})]}):jsxRuntimeExports.jsx("div",{className:"max-w-4xl mx-auto p-6",children:jsxRuntimeExports.jsx("div",{className:"card bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800",children:jsxRuntimeExports.jsx("p",{className:"text-yellow-800 dark:text-yellow-200",children:"âš ï¸ Only the contract owner can manage verifier badges and reputation."})})})},DonateNew=({provider:e})=>{const[t,r]=reactExports.useState(""),[n,i]=reactExports.useState("5"),[o,a]=reactExports.useState(!1),[s,c]=reactExports.useState(!1),[l,u]=reactExports.useState(!1),[d,p]=reactExports.useState(""),[h,m]=reactExports.useState(""),[f,x]=reactExports.useState("");return jsxRuntimeExports.jsx("div",{className:"container-responsive",children:jsxRuntimeExports.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"ðŸ’š Donate to Causes"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Support environmental initiatives with your GCT tokens"})]}),jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsxs("div",{className:"card-header",children:[jsxRuntimeExports.jsx("h2",{className:"card-title",children:"ðŸŒ How Your Donations Help"}),jsxRuntimeExports.jsx("p",{className:"card-description",children:"See the real impact of donations to verified environmental NGOs"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:[{address:"0x742d35Cc6634C0532925a3b844Bc454e4438f44e",name:"Green Earth Foundation",totalReceived:"1250.5"},{address:"0x8ba1f109551bD432803012645ac136ddd64DBA72",name:"Ocean Cleanup Initiative",totalReceived:"890.2"},{address:"0x1234567890123456789012345678901234567890",name:"Forest Restoration Alliance",totalReceived:"2100.8"}].map(e=>jsxRuntimeExports.jsxs("div",{className:"flex-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900",children:e.name}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 font-mono",children:[e.address.slice(0,8),"...",e.address.slice(-6)]})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsxs("div",{className:"text-lg font-bold text-success",children:[e.totalReceived," GCT"]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500",children:"Total received"})]})]},e.address))})]}),jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsxs("div",{className:"card-header",children:[jsxRuntimeExports.jsx("h2",{className:"card-title",children:"ðŸ’° Make a Donation"}),jsxRuntimeExports.jsx("p",{className:"card-description",children:"Contribute to environmental causes and earn social impact rewards"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"NGO Address"}),jsxRuntimeExports.jsx("input",{className:"input",placeholder:"0x1234...abcd",value:t,onChange:e=>r(e.target.value),required:!0}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Must be an allowlisted NGO address"})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Amount to Donate"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{className:"input pr-16",type:"number",step:"0.01",min:"0",value:n,onChange:e=>i(e.target.value),placeholder:"5.00",required:!0}),jsxRuntimeExports.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm font-medium",children:"GCT"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Green Credit Tokens"})]})]}),jsxRuntimeExports.jsx("div",{className:"bg-info-bg border border-info rounded-lg p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("div",{className:"text-info text-lg",children:"ðŸ’¡"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-info text-sm mb-1",children:"Future Enhancement"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-700",children:"If your wallet supports ERC-2612 permit, donations will be gasless in one click!"})]})]})}),jsxRuntimeExports.jsx("button",{onClick:async()=>{if(!t||!n)return zt.error("Please fill in NGO address and amount");await(async()=>{try{const{tokenWithSigner:r,poolWithSigner:i,pool:o}=await getContracts(e,!0);if(!o||!i)return zt.error("Donation pool not configured");const a=parseUnits(n||"0",18),s=(await e.getFeeData()).gasPrice||parseUnits("20","gwei");x(formatEther(s));const c=await r.approve.estimateGas(await o.getAddress(),a);p(formatEther(c*s));const l=await i.donateTo.estimateGas(t,a);m(formatEther(l*s))}catch(e3){}})(),c(!0)},disabled:o,className:"btn btn-primary btn-full",children:o?"â³ Processing...":"ðŸ’š Start Donation"})]})]}),s&&jsxRuntimeExports.jsx("div",{className:"modal-overlay",children:jsxRuntimeExports.jsxs("div",{className:"modal-content",children:[jsxRuntimeExports.jsx("div",{className:"modal-header",children:jsxRuntimeExports.jsx("h2",{className:"modal-title",children:"ðŸ” Step 1: Approve Token Transfer"})}),jsxRuntimeExports.jsxs("div",{className:"modal-body",children:[jsxRuntimeExports.jsxs("div",{className:"stepper",children:[jsxRuntimeExports.jsxs("div",{className:"step active",children:[jsxRuntimeExports.jsx("div",{className:"step-circle",children:"1"}),jsxRuntimeExports.jsx("div",{className:"step-label",children:"Approve"})]}),jsxRuntimeExports.jsxs("div",{className:"step",children:[jsxRuntimeExports.jsx("div",{className:"step-circle",children:"2"}),jsxRuntimeExports.jsx("div",{className:"step-label",children:"Donate"})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Transaction Details"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Amount:"}),jsxRuntimeExports.jsxs("span",{className:"font-medium",children:[n," GCT"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"To:"}),jsxRuntimeExports.jsxs("span",{className:"font-mono text-xs",children:[t.slice(0,10),"...",t.slice(-8)]})]})]})]}),jsxRuntimeExports.jsxs("p",{className:"text-gray-700 mb-4",children:["Allow the donation pool to spend ",jsxRuntimeExports.jsxs("strong",{children:[n," GCT"]})," tokens on your behalf. This approval is required before making the donation."]}),d&&jsxRuntimeExports.jsxs("div",{className:"bg-warning-bg border border-warning rounded-lg p-4 mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("div",{className:"text-warning text-lg",children:"â›½"}),jsxRuntimeExports.jsx("div",{className:"text-sm font-medium text-warning",children:"Estimated Gas Cost"})]}),jsxRuntimeExports.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[Number(d).toFixed(6)," ETH"]}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600",children:["at ",Number(f).toFixed(1)," gwei gas price"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"modal-footer",children:[jsxRuntimeExports.jsx("button",{onClick:()=>c(!1),className:"btn btn-secondary",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:async()=>{c(!1),a(!0);try{const{tokenWithSigner:t,pool:r}=await getContracts(e,!0);if(!r)return zt.error("Donation pool not configured");const i=parseUnits(n||"0",18),o=await t.approve(await r.getAddress(),i);await o.wait(),zt.success("Approval granted"),u(!0)}catch(e3){zt.error(e3.message??"Approval failed")}finally{a(!1)}},disabled:o,className:"btn btn-primary",children:o?"â³ Approving...":"âœ… Approve & Continue"})]})]})}),l&&jsxRuntimeExports.jsx("div",{className:"modal-overlay",children:jsxRuntimeExports.jsxs("div",{className:"modal-content",children:[jsxRuntimeExports.jsx("div",{className:"modal-header",children:jsxRuntimeExports.jsx("h2",{className:"modal-title",children:"ðŸŽ‰ Step 2: Complete Donation"})}),jsxRuntimeExports.jsxs("div",{className:"modal-body",children:[jsxRuntimeExports.jsxs("div",{className:"stepper",children:[jsxRuntimeExports.jsxs("div",{className:"step completed",children:[jsxRuntimeExports.jsx("div",{className:"step-circle",children:"âœ“"}),jsxRuntimeExports.jsx("div",{className:"step-label",children:"Approved"})]}),jsxRuntimeExports.jsxs("div",{className:"step active",children:[jsxRuntimeExports.jsx("div",{className:"step-circle",children:"2"}),jsxRuntimeExports.jsx("div",{className:"step-label",children:"Donate"})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-success-bg border border-success rounded-lg p-4 mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-success mb-2",children:"Ready to Donate!"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-700",children:"Amount:"}),jsxRuntimeExports.jsxs("span",{className:"font-bold text-success",children:[n," GCT"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-700",children:"Recipient:"}),jsxRuntimeExports.jsxs("span",{className:"font-mono text-xs",children:[t.slice(0,10),"...",t.slice(-8)]})]})]})]}),jsxRuntimeExports.jsxs("p",{className:"text-gray-700 mb-4",children:["Complete your donation of ",jsxRuntimeExports.jsxs("strong",{children:[n," GCT"]})," to support environmental initiatives. Your contribution will make a real difference!"]}),h&&jsxRuntimeExports.jsxs("div",{className:"bg-warning-bg border border-warning rounded-lg p-4 mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("div",{className:"text-warning text-lg",children:"â›½"}),jsxRuntimeExports.jsx("div",{className:"text-sm font-medium text-warning",children:"Estimated Gas Cost"})]}),jsxRuntimeExports.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[Number(h).toFixed(6)," ETH"]}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600",children:["at ",Number(f).toFixed(1)," gwei gas price"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"modal-footer",children:[jsxRuntimeExports.jsx("button",{onClick:()=>u(!1),className:"btn btn-secondary",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:async()=>{u(!1),a(!0);try{const{poolWithSigner:r}=await getContracts(e,!0);if(!r)return zt.error("Donation pool not configured");const i=parseUnits(n||"0",18);if(!(await r.isNGO(t)))return zt.error("NGO address is not allowlisted");const o=await r.donateTo(t,i);await o.wait(),zt.success("Donation sent successfully!")}catch(e3){zt.error(e3.message??"Donation failed")}finally{a(!1)}},disabled:o,className:"btn btn-success",children:o?"â³ Processing...":"ðŸŽ‰ Complete Donation"})]})]})})]})})},LeaderboardNew=({provider:e})=>{const[t,r]=reactExports.useState([]),[n,i]=reactExports.useState(!0),[o,a]=reactExports.useState("all");reactExports.useEffect(()=>{(async()=>{i(!0);const{verifier:t}=await getContracts(e),n=await t.getActionCount(),a=Number(n>100n?100n:n),s=Number(n)-a,c=new Map,l=Date.now()/1e3,u="week"===o?604800:"month"===o?2592e3:1/0;for(let e=s;e<Number(n);e++){const r=await t.actions(e),n=r.user,i=BigInt(r.reward??0n),a=Boolean(r.verified),s=Number(r.timestamp||0);"all"!==o&&l-s>u||a&&c.set(n,(c.get(n)??0n)+i)}const d=Array.from(c.entries()).map(([e,t])=>({user:e,total:t}));d.sort((e,t)=>e.total>t.total?-1:1),r(d.slice(0,10))})().catch(console.error).finally(()=>i(!1))},[e,o]);const s=e=>{switch(e){case 0:return"ðŸ¥‡";case 1:return"ðŸ¥ˆ";case 2:return"ðŸ¥‰";default:return`#${e+1}`}},c=e=>{switch(e){case 0:return"bg-yellow-500";case 1:return"bg-gray-400";case 2:return"bg-amber-600";default:return"bg-gray-300"}};return jsxRuntimeExports.jsx("div",{className:"container-responsive",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"ðŸ† Leaderboard"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Top environmental contributors earning Green Credit Tokens"})]}),jsxRuntimeExports.jsx("div",{className:"flex-center",children:jsxRuntimeExports.jsx("div",{className:"inline-flex bg-gray-100 rounded-lg p-1",children:[{key:"all",label:"All Time"},{key:"month",label:"This Month"},{key:"week",label:"This Week"}].map(({key:e,label:t})=>jsxRuntimeExports.jsx("button",{onClick:()=>a(e),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors "+(o===e?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:t},e))})}),jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsxs("div",{className:"card-header",children:[jsxRuntimeExports.jsx("h2",{className:"card-title",children:"ðŸŒŸ Top Contributors"}),jsxRuntimeExports.jsxs("p",{className:"card-description",children:["all"===o?"All-time":"month"===o?"Monthly":"Weekly"," verified environmental actions"]})]}),n?jsxRuntimeExports.jsx("div",{className:"space-y-4",children:[...Array(5)].map((e,t)=>jsxRuntimeExports.jsxs("div",{className:"flex-between p-4 border border-gray-200 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"loading-skeleton w-10 h-10 rounded-full"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"loading-skeleton h-4 w-24"}),jsxRuntimeExports.jsx("div",{className:"loading-skeleton h-3 w-32"})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-right space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"loading-skeleton h-5 w-16"}),jsxRuntimeExports.jsx("div",{className:"loading-skeleton h-3 w-20"})]})]},t))}):0===t.length?jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx("div",{className:"text-6xl mb-4",children:"ðŸŒ±"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No verified actions yet"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6",children:"Be the first to contribute and earn Green Credit Tokens!"}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary",children:"Start Contributing"})]}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:t.map((e,t)=>{return jsxRuntimeExports.jsxs("div",{className:"flex-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors animate-fade-in",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:`flex-center w-12 h-12 rounded-full font-bold text-white text-lg ${c(t)}`,children:s(t)}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"font-semibold text-gray-900 font-mono",children:[e.user.slice(0,6),"...",e.user.slice(-4)]}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"status-chip status-verified",children:"Verified"}),"Contributor"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsxs("div",{className:"text-2xl font-bold text-success",children:[(r=e.total,(Number(r)/1e18).toLocaleString(void 0,{maximumFractionDigits:4}))," GCT"]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500",children:"Earned tokens"})]})]},e.user);var r})})]}),!n&&t.length>0&&jsxRuntimeExports.jsx("div",{className:"card bg-gradient-to-r from-green-50 to-emerald-50 border-green-200",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Ready to Join the Leaders?"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6",children:"Submit your environmental actions and earn Green Credit Tokens"}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary btn-lg",children:"Submit Your Action"})]})})]})})},MatchingPoolNew=({provider:e})=>{const[t,r]=reactExports.useState(!1),[n,i]=reactExports.useState(!1),[o,a]=reactExports.useState("0"),[s,c]=reactExports.useState(""),[l,u]=reactExports.useState(""),[d,p]=reactExports.useState(""),[h,m]=reactExports.useState("1"),[f,x]=reactExports.useState(null),[g,y]=reactExports.useState(""),[b,v]=reactExports.useState(""),[E,w]=reactExports.useState("1"),[S,j]=reactExports.useState(""),[A,T]=reactExports.useState(""),[P,$]=reactExports.useState("1"),[R,k]=reactExports.useState(""),[C,N]=reactExports.useState("");reactExports.useEffect(()=>{D(),_()},[e]),reactExports.useEffect(()=>{h&&O()},[h]);const D=async()=>{try{const{matchingPool:t}=await getContracts(e,!1);if(!t)return;const n=await e.getSigner(),i=await n.getAddress(),o=await t.owner();r(i.toLowerCase()===o.toLowerCase())}catch(t){}},_=async()=>{try{const{token:t}=await getContracts(e,!1),r=await e.getSigner(),n=await r.getAddress(),i=await t.balanceOf(n);a(formatUnits(i,18))}catch(t){}},O=async()=>{try{const{matchingPool:t}=await getContracts(e,!1);if(!t||!h)return;const r=await t.getRound(h);x({id:r.id.toString(),token:r.token,start:new Date(1e3*Number(r.start)).toLocaleString(),end:new Date(1e3*Number(r.end)).toLocaleString(),matchingBudget:formatUnits(r.matchingBudget,18),active:r.active})}catch(t){x(null)}};return jsxRuntimeExports.jsx("div",{className:"container-responsive",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"ðŸ’° Quadratic Matching Pool"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-lg",children:"Amplify impact through quadratic funding"})]}),jsxRuntimeExports.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsxs("div",{className:"card-header",children:[jsxRuntimeExports.jsx("h2",{className:"card-title",children:"ðŸŽ Make a Donation"}),jsxRuntimeExports.jsx("p",{className:"card-description",children:"Support environmental projects and get matching funds"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-success-bg border border-success rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("div",{className:"text-success text-lg",children:"ðŸ’°"}),jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-success",children:"Your Balance"})]}),jsxRuntimeExports.jsxs("div",{className:"text-2xl font-bold text-success",children:[parseFloat(o).toFixed(2)," GCT"]})]}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Round ID"}),jsxRuntimeExports.jsx("input",{type:"number",placeholder:"1",value:E,onChange:e=>w(e.target.value),className:"input"})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Amount (GCT)"}),jsxRuntimeExports.jsx("input",{type:"number",step:"0.01",placeholder:"100",value:A,onChange:e=>T(e.target.value),className:"input"})]})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Project ID"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g., reforestation_2024",value:S,onChange:e=>j(e.target.value),className:"input"})]}),jsxRuntimeExports.jsx("button",{onClick:async()=>{if(E&&S&&A){i(!0);try{const{matchingPoolWithSigner:t,tokenWithSigner:r}=await getContracts(e,!0);if(!t)return void zt.error("MatchingPool contract not configured");const n=parseUnits(A,18),i=encodeBytes32String(S);zt.loading("Approving tokens...",{id:"donate"});const o=await r.approve(t.target,n);await o.wait(),zt.loading("Donating...",{id:"donate"});const a=await t.donate(E,i,n);await a.wait(),zt.success("Donation successful!",{id:"donate"}),T(""),await _()}catch(t){zt.error((null==t?void 0:t.reason)||(null==t?void 0:t.message)||"Failed to donate")}finally{i(!1)}}else zt.error("All fields are required")},disabled:n,className:"btn btn-primary btn-lg w-full",children:n?"ðŸŒ¿ Processing...":"ðŸš€ Donate & Get Matched"})]})]}),jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsxs("div",{className:"card-header",children:[jsxRuntimeExports.jsx("h2",{className:"card-title",children:"ðŸ“Š Round Information"}),jsxRuntimeExports.jsx("p",{className:"card-description",children:"Check current round status and details"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Round ID"}),jsxRuntimeExports.jsx("input",{type:"number",placeholder:"1",value:h,onChange:e=>m(e.target.value),className:"input"})]}),f?jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 rounded-full "+(f.active?"bg-success":"bg-error")}),jsxRuntimeExports.jsx("span",{className:"text-lg font-semibold "+(f.active?"text-success":"text-error"),children:f.active?"Active Round":"Inactive Round"})]}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-gray-600 mb-1",children:"Start Date"}),jsxRuntimeExports.jsx("div",{className:"font-medium",children:f.start})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-gray-600 mb-1",children:"End Date"}),jsxRuntimeExports.jsx("div",{className:"font-medium",children:f.end})]}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx("div",{className:"text-gray-600 mb-1",children:"Matching Budget"}),jsxRuntimeExports.jsxs("div",{className:"text-2xl font-bold text-success",children:[f.matchingBudget," GCT"]})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-gray-500",children:[jsxRuntimeExports.jsx("div",{className:"text-4xl mb-4",children:"ðŸ”"}),jsxRuntimeExports.jsxs("p",{children:["No round found with ID ",h]})]})]})]})]}),t&&jsxRuntimeExports.jsxs("div",{className:"space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"âš™ï¸ Admin Controls"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Manage quadratic funding rounds"})]}),jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsxs("div",{className:"card-header",children:[jsxRuntimeExports.jsx("h3",{className:"card-title",children:"Create New Round"}),jsxRuntimeExports.jsx("p",{className:"card-description",children:"Set up a new quadratic funding round"})]}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Start Date"}),jsxRuntimeExports.jsx("input",{type:"datetime-local",value:s,onChange:e=>c(e.target.value),className:"input"})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"End Date"}),jsxRuntimeExports.jsx("input",{type:"datetime-local",value:l,onChange:e=>u(e.target.value),className:"input"})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Matching Budget (GCT)"}),jsxRuntimeExports.jsx("input",{type:"number",step:"0.01",placeholder:"1000",value:d,onChange:e=>p(e.target.value),className:"input"})]})]}),jsxRuntimeExports.jsx("button",{onClick:async()=>{if(s&&l&&d){i(!0);try{const{matchingPoolWithSigner:t,token:r}=await getContracts(e,!0);if(!t)return void zt.error("MatchingPool contract not configured");const n=Math.floor(new Date(s).getTime()/1e3),i=Math.floor(new Date(l).getTime()/1e3),o=parseUnits(d,18),a=await t.createRound(r.target,n,i,o);zt.loading("Creating round...",{id:"create"});await a.wait();zt.success("Round created successfully!",{id:"create"}),c(""),u(""),p("")}catch(t){zt.error((null==t?void 0:t.reason)||(null==t?void 0:t.message)||"Failed to create round")}finally{i(!1)}}else zt.error("All fields are required")},disabled:n,className:"btn btn-primary btn-lg w-full mt-6",children:n?"ðŸŒ¿ Creating...":"ðŸš€ Create Round"})]}),jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsxs("div",{className:"card-header",children:[jsxRuntimeExports.jsx("h3",{className:"card-title",children:"Round Management"}),jsxRuntimeExports.jsx("p",{className:"card-description",children:"Activate or deactivate funding rounds"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsx("button",{onClick:async()=>{if(h){i(!0);try{const{matchingPoolWithSigner:t}=await getContracts(e,!0);if(!t)return void zt.error("MatchingPool contract not configured");const r=await t.activateRound(h);zt.loading("Activating round...",{id:"activate"}),await r.wait(),zt.success("Round activated!",{id:"activate"}),await O()}catch(t){zt.error((null==t?void 0:t.reason)||(null==t?void 0:t.message)||"Failed to activate round")}finally{i(!1)}}else zt.error("Round ID is required")},disabled:n,className:"btn btn-success flex-1",children:n?"Processing...":"â–¶ï¸ Activate Round"}),jsxRuntimeExports.jsx("button",{onClick:async()=>{if(h){i(!0);try{const{matchingPoolWithSigner:t}=await getContracts(e,!0);if(!t)return void zt.error("MatchingPool contract not configured");const r=await t.deactivateRound(h);zt.loading("Deactivating round...",{id:"deactivate"}),await r.wait(),zt.success("Round deactivated!",{id:"deactivate"}),await O()}catch(t){zt.error((null==t?void 0:t.reason)||(null==t?void 0:t.message)||"Failed to deactivate round")}finally{i(!1)}}else zt.error("Round ID is required")},disabled:n,className:"btn btn-secondary flex-1",children:n?"Processing...":"â¸ï¸ Deactivate Round"})]})]}),jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsxs("div",{className:"card-header",children:[jsxRuntimeExports.jsx("h3",{className:"card-title",children:"Add Project to Round"}),jsxRuntimeExports.jsx("p",{className:"card-description",children:"Register environmental projects for funding"})]}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Project ID"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g., reforestation_2024",value:g,onChange:e=>y(e.target.value),className:"input"})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Project Address"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"0x...",value:b,onChange:e=>v(e.target.value),className:"input"})]})]}),jsxRuntimeExports.jsx("button",{onClick:async()=>{if(h&&g&&b){i(!0);try{const{matchingPoolWithSigner:t}=await getContracts(e,!0);if(!t)return void zt.error("MatchingPool contract not configured");const r=encodeBytes32String(g),n=await t.addProject(h,r,b);zt.loading("Adding project...",{id:"addProject"}),await n.wait(),zt.success("Project added to round!",{id:"addProject"}),y(""),v("")}catch(t){zt.error((null==t?void 0:t.reason)||(null==t?void 0:t.message)||"Failed to add project")}finally{i(!1)}}else zt.error("All fields are required")},disabled:n,className:"btn btn-primary w-full mt-6",children:n?"ðŸŒ¿ Adding...":"âž• Add Project"})]}),jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsxs("div",{className:"card-header",children:[jsxRuntimeExports.jsx("h3",{className:"card-title",children:"Finalize Round & Disburse Matches"}),jsxRuntimeExports.jsx("p",{className:"card-description",children:"Calculate quadratic matches and distribute funds"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Round ID to Finalize"}),jsxRuntimeExports.jsx("input",{type:"number",placeholder:"1",value:P,onChange:e=>$(e.target.value),className:"input"})]}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Project IDs (comma-separated)"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"project1,project2,project3",value:R,onChange:e=>k(e.target.value),className:"input"})]}),jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:"Match Amounts in GCT (comma-separated)"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"300,400,300",value:C,onChange:e=>N(e.target.value),className:"input"})]})]}),jsxRuntimeExports.jsx("button",{onClick:async()=>{if(P&&R&&C){i(!0);try{const{matchingPoolWithSigner:t}=await getContracts(e,!0);if(!t)return void zt.error("MatchingPool contract not configured");const r=R.split(",").map(e=>encodeBytes32String(e.trim())),n=C.split(",").map(e=>parseUnits(e.trim(),18));if(r.length!==n.length)return void zt.error("Project IDs and amounts must have the same length");const i=await t.setMatchAllocations(P,r,n);zt.loading("Finalizing round and disbursing matches...",{id:"finalize"}),await i.wait(),zt.success("Round finalized and matches disbursed!",{id:"finalize"}),k(""),N("")}catch(t){zt.error((null==t?void 0:t.reason)||(null==t?void 0:t.message)||"Failed to finalize round")}finally{i(!1)}}else zt.error("All fields are required")},disabled:n,className:"btn btn-primary btn-lg w-full",children:n?"ðŸŒ¿ Finalizing...":"ðŸ Finalize & Disburse"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"card bg-gradient-to-r from-primary-bg to-info-bg border-primary",children:[jsxRuntimeExports.jsxs("div",{className:"card-header",children:[jsxRuntimeExports.jsx("h3",{className:"card-title",children:"ðŸ’¡ How Quadratic Funding Works"}),jsxRuntimeExports.jsx("p",{className:"card-description",children:"Understanding the power of collective funding"})]}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl",children:"ðŸŽ¯"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Quadratic Matching"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"More small donations = larger matching allocation"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl",children:"âš–ï¸"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Fair Distribution"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Admin calculates quadratic formula off-chain and submits allocations"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl",children:"â°"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Round Lifecycle"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Rounds must be ended before finalization"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl",children:"ðŸ’°"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Full Distribution"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Both direct donations and matches are distributed to projects upon finalization"})]})]})]})]})]})]})})},GovernanceNew=({provider:e})=>{const[t,r]=reactExports.useState([]),[n,i]=reactExports.useState(!0),[o,a]=reactExports.useState(""),[s,c]=reactExports.useState({title:"",description:"",type:"",parameters:{}});reactExports.useEffect(()=>{l()},[]);const l=async()=>{try{i(!0),r([])}catch(e){}finally{i(!1)}},u={parameterChange:{title:"Parameter Change Proposal",description:"Propose changes to system parameters like stake requirements, challenge windows, or reward multipliers.",fields:[{name:"challengeWindow",label:"Challenge Window (seconds)",type:"number",default:86400},{name:"submitStake",label:"Submit Stake (DEV)",type:"number",default:.01},{name:"verifyStake",label:"Verify Stake (DEV)",type:"number",default:.05},{name:"bufferBps",label:"Buffer Percentage (basis points)",type:"number",default:1e3}]},verifierManagement:{title:"Verifier Management Proposal",description:"Add or remove verifiers from the system.",fields:[{name:"action",label:"Action",type:"select",options:["add","remove"],default:"add"},{name:"verifierAddress",label:"Verifier Address",type:"text",default:""}]},ngoApproval:{title:"NGO Approval Proposal",description:"Approve or reject NGOs for receiving donations.",fields:[{name:"action",label:"Action",type:"select",options:["approve","reject"],default:"approve"},{name:"ngoAddress",label:"NGO Address",type:"text",default:""},{name:"ngoName",label:"NGO Name",type:"text",default:""},{name:"justification",label:"Justification",type:"textarea",default:""}]}},d=(e,t)=>{c(r=>({...r,parameters:{...r.parameters,[e]:t}}))},p=e=>new Date(1e3*e).toLocaleDateString(),h=e=>{const t=Date.now()/1e3;return t<e.start?"Pending":t<e.end?"Active":"Closed"};return jsxRuntimeExports.jsx("div",{className:"container-responsive",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"ðŸŒ± Green Credits DAO"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-lg",children:"Community governance for the Green Credits platform"})]}),jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsxs("div",{className:"card-header",children:[jsxRuntimeExports.jsx("h2",{className:"card-title",children:"ðŸ“ Create Proposal"}),jsxRuntimeExports.jsx("p",{className:"card-description",children:"Submit proposals to improve the Green Credits ecosystem"})]}),o?jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex-between",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:u[o].title}),jsxRuntimeExports.jsx("button",{onClick:()=>a(""),className:"btn btn-secondary",children:"â† Back to templates"})]}),jsxRuntimeExports.jsx("div",{className:"bg-info-bg border border-info rounded-lg p-4",children:jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-700",children:u[o].description})}),jsxRuntimeExports.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:u[o].fields.map(e=>jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx("label",{className:"label",children:e.label}),"select"===e.type&&"options"in e?jsxRuntimeExports.jsx("select",{className:"input",value:s.parameters[e.name]||e.default,onChange:t=>d(e.name,t.target.value),children:e.options.map(e=>jsxRuntimeExports.jsx("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))}):"textarea"===e.type?jsxRuntimeExports.jsx("textarea",{className:"input resize-none",rows:4,value:s.parameters[e.name]||e.default,onChange:t=>d(e.name,t.target.value),placeholder:e.label}):jsxRuntimeExports.jsx("input",{className:"input",type:e.type,value:s.parameters[e.name]||e.default,onChange:t=>d(e.name,t.target.value),placeholder:e.label})]},e.name))}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsx("button",{onClick:async()=>{var t,r,n,i;try{if(!e)return void zt.error("Wallet not connected");zt("Proposal creation requires Snapshot space setup. This is a demo of the UI flow.",{icon:"â„¹ï¸"});Date.now(),s.title,s.description,JSON.stringify(s.parameters,null,2),"parameterChange"===o||("verifierManagement"===o?(null==(t=s.parameters.action)||t.charAt(0).toUpperCase(),null==(r=s.parameters.action)||r.slice(1)):(null==(n=s.parameters.action)||n.charAt(0).toUpperCase(),null==(i=s.parameters.action)||i.slice(1))),Math.floor(Date.now()/1e3),Math.floor(Date.now()/1e3),await(await e.getSigner()).getAddress();zt.success("Demo: Proposal would be created with these details (check console)"),a(""),c({title:"",description:"",type:"",parameters:{}})}catch(l){zt.error(l.message||"Failed to create proposal")}},className:"btn btn-primary btn-lg",children:"ðŸš€ Create Proposal"}),jsxRuntimeExports.jsx("button",{onClick:()=>a(""),className:"btn btn-secondary",children:"Cancel"})]})]}):jsxRuntimeExports.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:Object.entries(u).map(([e,t])=>jsxRuntimeExports.jsxs("button",{onClick:()=>(e=>{a(e);const t=u[e];c({title:t.title,description:t.description,type:e,parameters:{}})})(e),className:"group p-6 border border-gray-200 rounded-xl hover:border-primary hover:bg-primary-bg transition-all duration-200 text-left",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl mb-3 group-hover:scale-110 transition-transform",children:"parameterChange"===e?"âš™ï¸":"verifierManagement"===e?"ðŸ‘¥":"ðŸ¢"}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:t.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:t.description})]},e))})]}),jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsxs("div",{className:"card-header",children:[jsxRuntimeExports.jsx("h2",{className:"card-title",children:"ðŸ“‹ Active Proposals"}),jsxRuntimeExports.jsx("p",{className:"card-description",children:"Vote on proposals to shape the future of Green Credits"})]}),n?jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx("div",{className:"loading-skeleton h-8 w-64 mx-auto mb-4"}),jsxRuntimeExports.jsx("div",{className:"loading-skeleton h-4 w-96 mx-auto"})]}):0===t.length?jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No active proposals"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6",children:"Be the first to create a proposal and help shape the ecosystem!"}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary btn-lg",children:"Create First Proposal"})]}):jsxRuntimeExports.jsx("div",{className:"space-y-6",children:t.map(t=>jsxRuntimeExports.jsxs("div",{className:"border border-gray-200 rounded-xl p-6 hover:shadow-md transition-shadow",children:[jsxRuntimeExports.jsxs("div",{className:"flex-between mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:t.title}),jsxRuntimeExports.jsx("span",{className:"status-chip "+("Active"===h(t)?"status-verified":"Pending"===h(t)?"status-pending":"status-rejected"),children:h(t)})]}),jsxRuntimeExports.jsxs("p",{className:"text-gray-700 mb-4 leading-relaxed line-clamp-3",children:[t.body.substring(0,300),"..."]}),jsxRuntimeExports.jsxs("div",{className:"flex-between text-sm text-gray-500 mb-6",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{children:"By:"}),jsxRuntimeExports.jsxs("span",{className:"font-mono",children:[t.author.substring(0,8),"...",t.author.substring(-6)]})]}),jsxRuntimeExports.jsxs("span",{children:[p(t.start)," - ",p(t.end)]})]}),t.choices.length>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-4 mb-6",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-900",children:"Voting Results"}),t.choices.map((e,r)=>{var n;return jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-700",children:e}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600",children:[(null==(n=t.scores[r])?void 0:n.toFixed(0))||0," votes"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:jsxRuntimeExports.jsx("div",{className:"bg-primary h-3 rounded-full transition-all duration-500",style:{width:t.scores_total>0?t.scores[r]/t.scores_total*100+"%":"0%"}})})]},r)}),jsxRuntimeExports.jsxs("div",{className:"text-center text-sm text-gray-500",children:["Total votes: ",t.scores_total.toFixed(0)]})]}),"Active"===h(t)&&jsxRuntimeExports.jsx("div",{className:"flex gap-3",children:t.choices.map((r,n)=>jsxRuntimeExports.jsxs("button",{onClick:()=>(async()=>{try{if(!e)return void zt.error("Wallet not connected");zt("Voting requires Snapshot space setup. This is a demo of the UI flow.",{icon:"â„¹ï¸"}),zt.success("Demo: Vote would be cast (check console for details)")}catch(t){zt.error(t.message||"Failed to vote")}})(t.id),className:"btn btn-secondary flex-1",children:["Vote ",r]},n))})]},t.id))})]}),jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsxs("div",{className:"card-header",children:[jsxRuntimeExports.jsx("h2",{className:"card-title",children:"â„¹ï¸ How Governance Works"}),jsxRuntimeExports.jsx("p",{className:"card-description",children:"Learn about the Green Credits governance process"})]}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl",children:"ðŸ“Š"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Voting Power"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Voting power is determined by your GCT token balance. 1 GCT = 1 vote."})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl",children:"â°"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Proposal Timeline"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Proposals run for 7 days. A 10% quorum is required for approval."})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl",children:"ðŸ”"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Execution"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Approved proposals are executed via Gnosis Safe multisig wallet."})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl",children:"ðŸ“‹"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Proposal Types"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Parameter changes, verifier management, and NGO approvals."})]})]})]})]})]})]})})};function Hero({onGetStarted:e,showWalkthrough:t,setShowWalkthrough:r}){return jsxRuntimeExports.jsx("section",{className:"relative w-full py-8 md:py-16",children:jsxRuntimeExports.jsxs("div",{className:"space-y-8 text-center",children:[jsxRuntimeExports.jsxs("h1",{className:"text-4xl font-extrabold leading-tight tracking-tight md:text-6xl lg:text-7xl",children:[jsxRuntimeExports.jsx("span",{className:"mr-2",children:"ðŸŒ"}),jsxRuntimeExports.jsx("span",{className:"text-green-400",children:"Green Credits"})," â€” Rewarding",jsxRuntimeExports.jsx("br",{className:"hidden md:block"})," Every Action That Heals the Planet"]}),jsxRuntimeExports.jsx("p",{className:"mx-auto max-w-4xl text-base leading-relaxed text-[color:var(--text-secondary)] md:text-lg lg:text-xl px-4",children:"Earn Green Credit Tokens (GCT) for real-world eco-actions verified on the Moonbeam blockchain. Join a transparent, community-driven platform that rewards environmental stewardship."}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center px-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{var t;r&&r(!0),e?e():(window.dispatchEvent(new Event("open-wallet-connect")),null==(t=document.getElementById("wallet-connect"))||t.scrollIntoView({behavior:"smooth",block:"center"}))},className:"w-full sm:w-auto rounded-lg bg-[color:var(--cta)] px-8 py-4 text-lg font-semibold text-white transition-all duration-200 hover:bg-[color:var(--cta-hover)] hover:scale-105 hover:shadow-lg shadow-green-soft",children:"Get Started"}),jsxRuntimeExports.jsx("button",{onClick:()=>{var e;null==(e=document.getElementById("features"))||e.scrollIntoView({behavior:"smooth"})},className:"w-full sm:w-auto rounded-lg border border-white/20 bg-white/5 px-8 py-4 text-lg font-semibold text-white transition-all duration-200 hover:bg-white/10 hover:border-white/30",children:"Learn More"})]})]})})}const items=[{icon:"ðŸª™",title:"Earn Tokens",desc:"Get rewarded for your positive environmental impact with Moonbeamâ€‘Verified GCT tokens.",link:"/submit",buttonText:"Submit Action"},{icon:"ðŸŒ¿",title:"Build Trust",desc:"Transparent onâ€‘chain verification ensures every action is authentic and traceable.",link:"/actions",buttonText:"View Actions"},{icon:"ðŸ¤",title:"Join the Community",desc:"Connect with likeâ€‘minded individuals making a difference for our planet.",link:"/leaderboard",buttonText:"View Leaderboard"}];function FeatureCards(){return jsxRuntimeExports.jsxs("section",{id:"features",className:"w-full py-8 md:py-16",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-12",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"How It Works"}),jsxRuntimeExports.jsx("p",{className:"text-lg text-[color:var(--text-secondary)] max-w-2xl mx-auto px-4",children:"Three simple steps to start making a difference and earning rewards"})]}),jsxRuntimeExports.jsx("div",{className:"grid gap-8 md:grid-cols-3 px-4",children:items.map((e,t)=>jsxRuntimeExports.jsxs("div",{className:"glass hover-scale rounded-xl p-8 text-center text-slate-300 shadow-green-soft transition-all duration-300 hover:shadow-2xl",children:[jsxRuntimeExports.jsxs("div",{className:"relative mb-6",children:[jsxRuntimeExports.jsx("div",{className:"text-6xl mb-4",children:e.icon}),jsxRuntimeExports.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white font-bold text-sm",children:t+1})]}),jsxRuntimeExports.jsx("div",{className:"mb-3 text-xl font-semibold text-white",children:e.title}),jsxRuntimeExports.jsx("p",{className:"text-base leading-relaxed text-slate-400 mb-6",children:e.desc}),jsxRuntimeExports.jsx(Link$1,{to:e.link,className:"inline-block w-full btn btn-primary text-base py-3 px-6 rounded-lg transition-all duration-200 hover:scale-105",children:e.buttonText})]},e.title))}),jsxRuntimeExports.jsx("div",{className:"text-center mt-16 px-4",children:jsxRuntimeExports.jsxs("div",{className:"glass rounded-xl p-8 max-w-4xl mx-auto",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Ready to Make a Difference?"}),jsxRuntimeExports.jsx("p",{className:"text-lg text-[color:var(--text-secondary)] mb-6",children:"Join thousands of environmental stewards already earning rewards for their positive impact."}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[jsxRuntimeExports.jsx(Link$1,{to:"/submit",className:"btn btn-primary text-lg py-4 px-8 rounded-lg transition-all duration-200 hover:scale-105",children:"Start Earning Today"}),jsxRuntimeExports.jsx(Link$1,{to:"/leaderboard",className:"border border-white/20 bg-white/5 text-white text-lg py-4 px-8 rounded-lg transition-all duration-200 hover:bg-white/10 hover:border-white/30",children:"View Leaderboard"})]})]})})]})}function SiteFooter(){return jsxRuntimeExports.jsx("footer",{className:"border-t border-white/10 bg-[#0D1117]/60",children:jsxRuntimeExports.jsx("div",{className:"mx-auto max-w-7xl px-4",children:jsxRuntimeExports.jsxs("div",{className:"py-8 text-center text-sm text-slate-400",children:[jsxRuntimeExports.jsxs("div",{className:"mb-3",children:["Â© ",(new Date).getFullYear()," ",jsxRuntimeExports.jsx("span",{className:"text-green-400",children:"Green Credits"})," â€” Building a sustainable, transparent future on Moonbeam."]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-5 text-slate-300",children:[jsxRuntimeExports.jsx("a",{className:"hover:text-white",href:"https://moonbeam.network/",target:"_blank",rel:"noreferrer",children:"ðŸŒ™ Moonbeam"}),jsxRuntimeExports.jsx("a",{className:"hover:text-white",href:"https://github.com/Liwei254/green-credits",target:"_blank",rel:"noreferrer",children:"ðŸ“¦ Github"}),jsxRuntimeExports.jsx("a",{className:"hover:text-white",href:"https://github.com/Liwei254/green-credits#readme",target:"_blank",rel:"noreferrer",children:"ðŸ“˜ Docs"})]})]})})})}function Home({provider:e,address:t,setAddress:r,theme:n,toggleTheme:i,connectWallet:o}){const[a,s]=reactExports.useState(!1);return reactExports.useEffect(()=>{localStorage.getItem("onboardingCompleted")||s(!0)},[]),jsxRuntimeExports.jsxs("div",{className:"min-h-screen flex flex-col",children:[jsxRuntimeExports.jsxs("main",{className:"flex-1 flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 flex items-center justify-center px-4",children:jsxRuntimeExports.jsx("div",{className:"w-full max-w-6xl mx-auto",children:jsxRuntimeExports.jsx(Hero,{onGetStarted:o,showWalkthrough:a,setShowWalkthrough:s})})}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center px-4 pb-16",children:jsxRuntimeExports.jsx("div",{className:"w-full max-w-6xl mx-auto",children:jsxRuntimeExports.jsx(FeatureCards,{})})})]}),jsxRuntimeExports.jsx(SiteFooter,{})]})}const Retirement=({provider:e,address:t})=>{const[r,n]=reactExports.useState(!1),[i,o]=reactExports.useState([]),[a,s]=reactExports.useState(""),[c,l]=reactExports.useState(""),[u,d]=reactExports.useState(""),[p,h]=reactExports.useState([]);reactExports.useEffect(()=>{m(),f()},[e,t]);const m=async()=>{try{const{verifier:r}=await getContracts(e,!1),n=await r.getActionCount(),i=[];for(let e=0;e<Number(n);e++){const n=await r.actions(e);USE_V2&&n.user.toLowerCase()===t.toLowerCase()&&2===n.status&&i.push({id:e,user:n.user,description:n.description,quantity:n.quantity.toString(),status:n.status,selected:!1,gramsToRetire:n.quantity.toString()})}o(i)}catch(r){}},f=async()=>{try{const{retirementRegistry:r}=await getContracts(e,!1);if(!r)return;const n=await r.getRetirementsByAccount(t),i=[];for(const e of n){const t=await r.getRetirement(e);i.push({serial:t.serial.toString(),actionIds:t.actionIds.map(e=>e.toString()),grams:t.grams.map(e=>e.toString()),reason:t.reason,beneficiary:t.beneficiary,timestamp:new Date(1e3*Number(t.timestamp)).toLocaleString()})}h(i)}catch(r){}},x=e=>{o(i.map(t=>t.id===e?{...t,selected:!t.selected}:t))},g=()=>i.filter(e=>e.selected).reduce((e,t)=>e+BigInt(t.gramsToRetire||"0"),0n);return jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold mb-6 text-[var(--primary-green)]",children:"ðŸ† Retire Credits"}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-2 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Select Actions to Retire"}),0===i.length?jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No finalized actions available to retire."}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:i.map(e=>jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg border-2 cursor-pointer transition-all "+(e.selected?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 hover:border-green-300"),onClick:()=>x(e.id),children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-start",children:jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:e.selected,onChange:()=>x(e.id),className:"h-5 w-5",onClick:e=>e.stopPropagation()}),jsxRuntimeExports.jsxs("h3",{className:"font-semibold",children:["Action #",e.id]})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.description}),"0"!==e.quantity&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Total quantity: ",(Number(e.quantity)/1e3).toFixed(2)," kg CO2e"]})]})}),e.selected&&jsxRuntimeExports.jsxs("div",{className:"mt-3",onClick:e=>e.stopPropagation(),children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-1",children:"Grams CO2e to Retire"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",value:e.gramsToRetire,onChange:t=>{return r=e.id,n=t.target.value,void o(i.map(e=>e.id===r?{...e,gramsToRetire:n}:e));var r,n},className:"w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800",placeholder:"Enter grams"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["= ",(Number(e.gramsToRetire||0)/1e3).toFixed(2)," kg"]})]})]},e.id))})]}),i.some(e=>e.selected)&&jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Retirement Details"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2",children:"Reason for Retirement"}),jsxRuntimeExports.jsx("textarea",{rows:3,placeholder:"e.g., Carbon offset for company operations 2024",value:a,onChange:e=>s(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2",children:"Beneficiary"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g., Acme Corp",value:c,onChange:e=>l(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"font-semibold mb-1",children:"Total to Retire:"}),jsxRuntimeExports.jsxs("p",{className:"text-2xl text-[var(--primary-green)]",children:[(Number(g())/1e3).toFixed(2)," kg CO2e"]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["(",g().toString()," grams)"]})]}),jsxRuntimeExports.jsx("button",{onClick:async()=>{var t,r;const o=i.filter(e=>e.selected);if(0!==o.length)if(a&&c){n(!0);try{const{retirementRegistryWithSigner:n}=await getContracts(e,!0);if(!n)return void zt.error("RetirementRegistry contract not configured");const i=o.map(e=>e.id),u=o.map(e=>BigInt(e.gramsToRetire||"0"));for(let e=0;e<u.length;e++)if(u[e]<=0n)return void zt.error(`Invalid grams for action ${i[e]}`);zt.loading("Retiring credits...",{id:"retire"});const p=await n.retire(i,u,a,c),h=(await p.wait()).logs.find(e=>{try{const t=n.interface.parseLog(e);return t&&"Retired"===t.name}catch{return!1}});if(h){const e=n.interface.parseLog(h),i=(null==(r=null==(t=null==e?void 0:e.args)?void 0:t.serial)?void 0:r.toString())||"Unknown";d(i),zt.success(`Credits retired! Serial: ${i}`,{id:"retire"})}else zt.success("Credits retired successfully!",{id:"retire"});s(""),l(""),await m(),await f()}catch(u){zt.error((null==u?void 0:u.reason)||(null==u?void 0:u.message)||"Failed to retire credits")}finally{n(!1)}}else zt.error("Please provide reason and beneficiary");else zt.error("Please select at least one action to retire")},disabled:r,className:"btn-primary w-full",children:r?"Processing...":"ðŸ† Retire Credits"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[u&&jsxRuntimeExports.jsxs("div",{className:"card bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold mb-2",children:"âœ… Last Retirement"}),jsxRuntimeExports.jsxs("p",{className:"text-sm",children:["Serial: ",jsxRuntimeExports.jsx("span",{className:"font-mono text-green-600 dark:text-green-400",children:u})]})]}),jsxRuntimeExports.jsxs("div",{className:"card",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ðŸ“œ My Retirements"}),0===p.length?jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"No retirements yet."}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:p.map(e=>jsxRuntimeExports.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[jsxRuntimeExports.jsxs("p",{className:"font-semibold text-sm",children:["Serial: ",e.serial]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Actions: ",e.actionIds.join(", ")]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Total: ",e.grams.reduce((e,t)=>e+Number(t),0)/1e3," kg"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:e.timestamp})]},e.serial))})]}),jsxRuntimeExports.jsxs("div",{className:"card bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold mb-2",children:"ðŸ’¡ About Retirement"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs text-gray-700 dark:text-gray-300",children:[jsxRuntimeExports.jsx("li",{children:"Retirement permanently removes credits from circulation"}),jsxRuntimeExports.jsx("li",{children:"Each retirement receives a unique serial number"}),jsxRuntimeExports.jsx("li",{children:"Specify beneficiary for proper attribution"}),jsxRuntimeExports.jsx("li",{children:"Retirements are recorded immutably on-chain"})]})]})]})]})]})},MOONBASE_PARAMS={chainId:"0x507",chainName:"Moonbase Alpha",nativeCurrency:{name:"Dev",symbol:"DEV",decimals:18},rpcUrls:["https://rpc.api.moonbase.moonbeam.network"],blockExplorerUrls:["https://moonbase.moonscan.io"]};function getInjectedProvider(){const e=window.ethereum;if(!e)return null;if(Array.isArray(e.providers)){return e.providers.find(e=>e&&e.isMetaMask)??e.providers[0]}return e}const App=()=>{const[e,t]=reactExports.useState(null),[r,n]=reactExports.useState(""),[i,o]=reactExports.useState("dark"),[a,s]=reactExports.useState(!1),[c,l]=reactExports.useState(!1),u=reactExports.useRef(null);reactExports.useEffect(()=>{document.documentElement.setAttribute("data-theme",i)},[i]),reactExports.useEffect(()=>{const e=window.ethereum;if(e)try{t(new BrowserProvider(e))}catch(e3){t(null)}else t(null)},[]),reactExports.useEffect(()=>{localStorage.getItem("onboardingCompleted")||l(!0)},[]);const d=!!r&&!!e;return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-[var(--background)] text-[var(--text-primary)]",children:[jsxRuntimeExports.jsxs("header",{className:"sticky top-0 z-50 bg-[var(--card-bg)]/90 backdrop-blur-sm border-b border-[rgba(0,0,0,0.1)] shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto px-2 sm:px-4 md:px-6 lg:px-12 py-4 flex items-center justify-between",children:[jsxRuntimeExports.jsx(Link$1,{to:"/",className:"flex items-center gap-3",children:jsxRuntimeExports.jsx("span",{className:"text-xl font-bold text-emerald-600",children:"ðŸŒ± Green Credits"})}),jsxRuntimeExports.jsx(WalletConnect,{ref:u,provider:e,address:r,setAddress:n,setProvider:t,isDemoMode:a,setIsDemoMode:s})]}),jsxRuntimeExports.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 md:px-12 pb-4",children:jsxRuntimeExports.jsx(Navbar,{provider:e,address:r,setAddress:n,connected:d})})]}),jsxRuntimeExports.jsx("main",{children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Home,{provider:e,address:r,setAddress:n,theme:i,toggleTheme:()=>{o("light"===i?"dark":"light")},connectWallet:async()=>{const e=getInjectedProvider();if(e)try{if(await e.request({method:"eth_chainId"})!==MOONBASE_PARAMS.chainId)try{await e.request({method:"wallet_switchEthereumChain",params:[{chainId:MOONBASE_PARAMS.chainId}]})}catch(e3){if(4902!==(null==e3?void 0:e3.code))throw e3;await e.request({method:"wallet_addEthereumChain",params:[MOONBASE_PARAMS]})}await e.request({method:"eth_requestAccounts"});const t=new BrowserProvider(e),r=await t.getSigner(),i=await r.getAddress();n(i)}catch(t){alert((null==t?void 0:t.message)??"Failed to connect wallet")}else alert("No injected wallet found. Please install MetaMask.")}})}),jsxRuntimeExports.jsx(Route,{path:"/dashboard",element:d?jsxRuntimeExports.jsx(DashboardNew,{provider:e,address:r}):jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"/submit",element:d?jsxRuntimeExports.jsx(ActionFormNew,{provider:e}):jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"/actions",element:d?jsxRuntimeExports.jsx(ActionsListNew,{provider:e}):jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"/leaderboard",element:d?jsxRuntimeExports.jsx(LeaderboardNew,{provider:e}):jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"/donate",element:d?jsxRuntimeExports.jsx(DonateNew,{provider:e}):jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"/admin",element:d?jsxRuntimeExports.jsx(AdminVerify,{provider:e}):jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"/admin/registry",element:d?jsxRuntimeExports.jsx(AdminRegistry,{provider:e}):jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"/admin/reputation",element:d?jsxRuntimeExports.jsx(AdminReputation,{provider:e}):jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"/matching",element:d?jsxRuntimeExports.jsx(MatchingPoolNew,{provider:e}):jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"/retirement",element:d?jsxRuntimeExports.jsx(Retirement,{provider:e,address:r}):jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"/governance",element:d?jsxRuntimeExports.jsx(GovernanceNew,{provider:e}):jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0})})]})}),jsxRuntimeExports.jsxs("footer",{className:"footer text-center py-8",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-4",children:"Â© 2024 Green Credits. Building a sustainable future on Moonbeam."}),jsxRuntimeExports.jsxs("div",{className:"footer-links flex justify-center gap-6",children:[jsxRuntimeExports.jsx("a",{href:"https://moonbeam.network",target:"_blank",rel:"noopener noreferrer",children:"ðŸŒ™ Moonbeam"}),jsxRuntimeExports.jsx("a",{href:"https://polkadot.network",target:"_blank",rel:"noopener noreferrer",children:"ðŸ”— Polkadot"}),jsxRuntimeExports.jsx("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",children:"ðŸ’» GitHub"}),jsxRuntimeExports.jsx("a",{href:"https://docs.moonbeam.network",target:"_blank",rel:"noopener noreferrer",children:"ðŸ“š Docs"})]})]}),c&&jsxRuntimeExports.jsx(Walkthrough,{onClose:()=>l(!1),onConnect:()=>{var e;l(!1),null==(e=u.current)||e.connect()},onDemo:()=>{var e;l(!1),null==(e=u.current)||e.enableDemoMode()}})]})};createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React$4.StrictMode,{children:jsxRuntimeExports.jsxs(BrowserRouter,{children:[jsxRuntimeExports.jsx(Fe,{position:"top-right"}),jsxRuntimeExports.jsx(App,{})]})}));
